<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrcaSlicer: Slic3r::PrintObjectSupportMaterial Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../OrcaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">OrcaSlicer<span id="projectnumber">&#160;1.6.3</span>
   </div>
   <div id="projectbrief">OrcaSlicer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d2/d8a/class_slic3r_1_1_print_object_support_material.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-types">Public Types</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d0/d1c/class_slic3r_1_1_print_object_support_material-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::PrintObjectSupportMaterial Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../">src/libslic3r/SupportMaterial.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::PrintObjectSupportMaterial:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../dc/d26/class_slic3r_1_1_print_object_support_material__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html">MyLayer</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params">SupportParams</a></td></tr>
<tr class="separator:d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-types" name="pub-types"></a>
Public Types</h2></td></tr>
<tr class="memitem:a2daf585d84c3d4ca23335f604b08d6d8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8">SupporLayerType</a> { <br />
&#160;&#160;<a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192">sltUnknown</a> = 0
, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88">sltRaftBase</a>
, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed">sltRaftInterface</a>
, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">sltBottomContact</a>
, <br />
&#160;&#160;<a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a5322bebc03828f50a4df2f806e2c04b2">sltBottomInterface</a>
, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a748dc40e21323a8e38c5bcab4e2c7966">sltBase</a>
, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a79ffc4934e32044cf56f3ce12a1cb905">sltTopInterface</a>
, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>
, <br />
&#160;&#160;<a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>
<br />
 }</td></tr>
<tr class="separator:a2daf585d84c3d4ca23335f604b08d6d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8838ab6cb7f099a9c5dd78692b949bcf"><td class="memItemLeft" align="right" valign="top">typedef std::deque&lt; <a class="el" href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html">MyLayer</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a></td></tr>
<tr class="separator:a8838ab6cb7f099a9c5dd78692b949bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dda6b564a324db929e50807ca95f3d5"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html">MyLayer</a> * &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a></td></tr>
<tr class="separator:a3dda6b564a324db929e50807ca95f3d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aad85786ced3b000a83b39d91ddb8218e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aad85786ced3b000a83b39d91ddb8218e">PrintObjectSupportMaterial</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *object, const <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;slicing_params)</td></tr>
<tr class="separator:aad85786ced3b000a83b39d91ddb8218e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c0106d9d58b8f72d32794b42cc76b0f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3c0106d9d58b8f72d32794b42cc76b0f">has_raft</a> () const</td></tr>
<tr class="separator:a3c0106d9d58b8f72d32794b42cc76b0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a63c1f7fa0e8ffece7c916dcb3716a4ef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a63c1f7fa0e8ffece7c916dcb3716a4ef">has_support</a> () const</td></tr>
<tr class="separator:a63c1f7fa0e8ffece7c916dcb3716a4ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d22ac405c9441718736cfca8f799484"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1d22ac405c9441718736cfca8f799484">build_plate_only</a> () const</td></tr>
<tr class="separator:a1d22ac405c9441718736cfca8f799484"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad404e6eecb194f163f453cbc583f81eb"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad404e6eecb194f163f453cbc583f81eb">synchronize_layers</a> () const</td></tr>
<tr class="separator:ad404e6eecb194f163f453cbc583f81eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03e1f5dc3048c374c660c48629bcdb57"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a03e1f5dc3048c374c660c48629bcdb57">has_contact_loops</a> () const</td></tr>
<tr class="separator:a03e1f5dc3048c374c660c48629bcdb57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa91db86d2d6af50dc0cb0c8b3b5ffda3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa91db86d2d6af50dc0cb0c8b3b5ffda3">generate</a> (<a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object)</td></tr>
<tr class="separator:aa91db86d2d6af50dc0cb0c8b3b5ffda3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a3abfb433ae14805f6bcb7d41b5cc1840"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object) const</td></tr>
<tr class="separator:a3abfb433ae14805f6bcb7d41b5cc1840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e498c176aa13f8c7bcf10044d1304fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2e498c176aa13f8c7bcf10044d1304fa">top_contact_layers</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, const std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;<a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;layer_storage) const</td></tr>
<tr class="separator:a2e498c176aa13f8c7bcf10044d1304fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa65df1d83138e4b78ca85ec30f619e6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aaa65df1d83138e4b78ca85ec30f619e6">bottom_contact_layers_and_layer_support_areas</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts, std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;<a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;layer_storage, std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;layer_support_areas) const</td></tr>
<tr class="separator:aaa65df1d83138e4b78ca85ec30f619e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf631a8aa30155225b24ac24b09df885"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aaf631a8aa30155225b24ac24b09df885">trim_top_contacts_by_bottom_contacts</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;bottom_contacts, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts) const</td></tr>
<tr class="separator:aaf631a8aa30155225b24ac24b09df885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac12b23804745399e2f6c5ffc0d49eeb3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac12b23804745399e2f6c5ffc0d49eeb3">raft_and_intermediate_support_layers</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;bottom_contacts, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;layer_storage) const</td></tr>
<tr class="separator:ac12b23804745399e2f6c5ffc0d49eeb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84b13a000b19fb37af00912cb894deff"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a84b13a000b19fb37af00912cb894deff">generate_base_layers</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;bottom_contacts, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;intermediate_layers, const std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;layer_support_areas) const</td></tr>
<tr class="separator:a84b13a000b19fb37af00912cb894deff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9eec033f0dc8429eb500bfc015fbba2c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a9eec033f0dc8429eb500bfc015fbba2c">generate_raft_base</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;interface_layers, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;base_interface_layers, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;base_layers, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;layer_storage) const</td></tr>
<tr class="separator:a9eec033f0dc8429eb500bfc015fbba2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84ef3171e46d333d581e2af74a88b0bc"><td class="memItemLeft" align="right" valign="top">std::pair&lt; <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a84ef3171e46d333d581e2af74a88b0bc">generate_interface_layers</a> (const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;bottom_contacts, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;intermediate_layers, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;layer_storage) const</td></tr>
<tr class="separator:a84ef3171e46d333d581e2af74a88b0bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4c2a04b87513b31fd000ebb6d005a1c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad4c2a04b87513b31fd000ebb6d005a1c">trim_support_layers_by_object</a> (const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;object, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;support_layers, const <a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a> gap_extra_above, const <a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a> gap_extra_below, const <a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a> gap_xy) const</td></tr>
<tr class="separator:ad4c2a04b87513b31fd000ebb6d005a1c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1f16d63ec06800caba4cec368ab1637"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#af1f16d63ec06800caba4cec368ab1637">generate_toolpaths</a> (<a class="el" href="../../de/db8/namespace_slic3r.html#a8136847c9a01e9549ec65c3e4334da96">SupportLayerPtrs</a> &amp;support_layers, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;raft_layers, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;bottom_contacts, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;top_contacts, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;intermediate_layers, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;interface_layers, const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;base_interface_layers) const</td></tr>
<tr class="separator:af1f16d63ec06800caba4cec368ab1637"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a7cd3acbc1d9ab9522230a80f97349800"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">m_object</a></td></tr>
<tr class="separator:a7cd3acbc1d9ab9522230a80f97349800"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b59238962f758fd90553b0fca5ca1a7"><td class="memItemLeft" align="right" valign="top">const PrintConfig *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a></td></tr>
<tr class="separator:a0b59238962f758fd90553b0fca5ca1a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66f5a649e3f3bfc65624d776dd55fb1e"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../de/db8/namespace_slic3r.html#ad48b86fa8e529e56c6bd00ff2f9839ab">PrintObjectConfig</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a></td></tr>
<tr class="separator:a66f5a649e3f3bfc65624d776dd55fb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cf6e843045184c2a71e988868e29952"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a></td></tr>
<tr class="separator:a1cf6e843045184c2a71e988868e29952"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55763a1077b1ed1353d31a2fd7b6fb8d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params">SupportParams</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a></td></tr>
<tr class="separator:a55763a1077b1ed1353d31a2fd7b6fb8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params" id="d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params">&#9670;&#160;</a></span>Slic3r::PrintObjectSupportMaterial::SupportParams</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::PrintObjectSupportMaterial::SupportParams</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::PrintObjectSupportMaterial::SupportParams:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/d49/struct_slic3r_1_1_print_object_support_material_1_1_support_params__coll__graph.svg" width="282" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="abbdd5b720ac9e0f5d57172ac1f1cf37d" name="abbdd5b720ac9e0f5d57172ac1f1cf37d"></a>float</td>
<td class="fieldname">
base_angle</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7cebafc2201a25b9b476a1d8d1c12367" name="a7cebafc2201a25b9b476a1d8d1c12367"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391f">InfillPattern</a></td>
<td class="fieldname">
base_fill_pattern</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a82043736a8d779152fe8463141b71a32" name="a82043736a8d779152fe8463141b71a32"></a>bool</td>
<td class="fieldname">
can_merge_support_regions</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae9927416821680eb3be4d69f6f6030e0" name="ae9927416821680eb3be4d69f6f6030e0"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391f">InfillPattern</a></td>
<td class="fieldname">
contact_fill_pattern</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7bd6ca033aef8fd24f8f2622b96bf8a0" name="a7bd6ca033aef8fd24f8f2622b96bf8a0"></a><a class="el" href="../../d6/d0f/class_slic3r_1_1_flow.html">Flow</a></td>
<td class="fieldname">
first_layer_flow</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a97a975e3e3e5a3aa6fb9f62fa2f2d2fe" name="a97a975e3e3e5a3aa6fb9f62fa2f2d2fe"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
gap_xy</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a7e3d132f7295d882fd2d716868c121a6" name="a7e3d132f7295d882fd2d716868c121a6"></a>float</td>
<td class="fieldname">
interface_angle</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5bbedcc1acfb29c78650befdf49f01b5" name="a5bbedcc1acfb29c78650befdf49f01b5"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
interface_density</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a07a1c8294d21764fcfa17c875b1c712a" name="a07a1c8294d21764fcfa17c875b1c712a"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391f">InfillPattern</a></td>
<td class="fieldname">
interface_fill_pattern</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a25179a9df4d184735b18755e9f36eef3" name="a25179a9df4d184735b18755e9f36eef3"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
interface_spacing</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a5bb4f0b8d9e940b719abd261ca3754d7" name="a5bb4f0b8d9e940b719abd261ca3754d7"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
support_density</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a1c6e292593c77014c09e820c2ae7329b" name="a1c6e292593c77014c09e820c2ae7329b"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
support_expansion</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="aa44e9de566e9b74b48183126984438b7" name="aa44e9de566e9b74b48183126984438b7"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
support_layer_height_min</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a223998b52f75fa25874d2967126c7a77" name="a223998b52f75fa25874d2967126c7a77"></a><a class="el" href="../../d6/d0f/class_slic3r_1_1_flow.html">Flow</a></td>
<td class="fieldname">
support_material_bottom_interface_flow</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ac4dde773191da1c029deb4b955dff00e" name="ac4dde773191da1c029deb4b955dff00e"></a><a class="el" href="../../d6/d0f/class_slic3r_1_1_flow.html">Flow</a></td>
<td class="fieldname">
support_material_flow</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a1ed00250bf8f1279f93e1f9d9c60d509" name="a1ed00250bf8f1279f93e1f9d9c60d509"></a><a class="el" href="../../d6/d0f/class_slic3r_1_1_flow.html">Flow</a></td>
<td class="fieldname">
support_material_interface_flow</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae9893844ad8de45877ce68662f6c62be" name="ae9893844ad8de45877ce68662f6c62be"></a><a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a></td>
<td class="fieldname">
support_spacing</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a0bfb8c62499630c07f8ef5674a744006" name="a0bfb8c62499630c07f8ef5674a744006"></a>bool</td>
<td class="fieldname">
with_sheath</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a3dda6b564a324db929e50807ca95f3d5" name="a3dda6b564a324db929e50807ca95f3d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dda6b564a324db929e50807ca95f3d5">&#9670;&#160;</a></span>MyLayersPtr</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html">MyLayer</a>*&gt; <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">Slic3r::PrintObjectSupportMaterial::MyLayersPtr</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8838ab6cb7f099a9c5dd78692b949bcf" name="a8838ab6cb7f099a9c5dd78692b949bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8838ab6cb7f099a9c5dd78692b949bcf">&#9670;&#160;</a></span>MyLayerStorage</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::deque&lt;<a class="el" href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html">MyLayer</a>&gt; <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">Slic3r::PrintObjectSupportMaterial::MyLayerStorage</a></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Enumeration Documentation</h2>
<a id="a2daf585d84c3d4ca23335f604b08d6d8" name="a2daf585d84c3d4ca23335f604b08d6d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2daf585d84c3d4ca23335f604b08d6d8">&#9670;&#160;</a></span>SupporLayerType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8">Slic3r::PrintObjectSupportMaterial::SupporLayerType</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192" name="a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192"></a>sltUnknown&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88" name="a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88"></a>sltRaftBase&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed" name="a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed"></a>sltRaftInterface&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701" name="a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701"></a>sltBottomContact&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8a5322bebc03828f50a4df2f806e2c04b2" name="a2daf585d84c3d4ca23335f604b08d6d8a5322bebc03828f50a4df2f806e2c04b2"></a>sltBottomInterface&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8a748dc40e21323a8e38c5bcab4e2c7966" name="a2daf585d84c3d4ca23335f604b08d6d8a748dc40e21323a8e38c5bcab4e2c7966"></a>sltBase&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8a79ffc4934e32044cf56f3ce12a1cb905" name="a2daf585d84c3d4ca23335f604b08d6d8a79ffc4934e32044cf56f3ce12a1cb905"></a>sltTopInterface&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130" name="a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130"></a>sltTopContact&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae" name="a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae"></a>sltIntermediate&#160;</td><td class="fielddoc"></td></tr>
</table>
<div class="fragment"><div class="line"><span class="lineno">   23</span>                       {</div>
<div class="line"><span class="lineno">   24</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192">sltUnknown</a> = 0,</div>
<div class="line"><span class="lineno">   25</span>    <span class="comment">// Ratft base layer, to be printed with the support material.</span></div>
<div class="line"><span class="lineno">   26</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88">sltRaftBase</a>,</div>
<div class="line"><span class="lineno">   27</span>    <span class="comment">// Raft interface layer, to be printed with the support interface material. </span></div>
<div class="line"><span class="lineno">   28</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed">sltRaftInterface</a>,</div>
<div class="line"><span class="lineno">   29</span>    <span class="comment">// Bottom contact layer placed over a top surface of an object. To be printed with a support interface material.</span></div>
<div class="line"><span class="lineno">   30</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">sltBottomContact</a>,</div>
<div class="line"><span class="lineno">   31</span>    <span class="comment">// Dense interface layer, to be printed with the support interface material.</span></div>
<div class="line"><span class="lineno">   32</span>    <span class="comment">// This layer is separated from an object by an sltBottomContact layer.</span></div>
<div class="line"><span class="lineno">   33</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a5322bebc03828f50a4df2f806e2c04b2">sltBottomInterface</a>,</div>
<div class="line"><span class="lineno">   34</span>    <span class="comment">// Sparse base support layer, to be printed with a support material.</span></div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a748dc40e21323a8e38c5bcab4e2c7966">sltBase</a>,</div>
<div class="line"><span class="lineno">   36</span>    <span class="comment">// Dense interface layer, to be printed with the support interface material.</span></div>
<div class="line"><span class="lineno">   37</span>    <span class="comment">// This layer is separated from an object with sltTopContact layer.</span></div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a79ffc4934e32044cf56f3ce12a1cb905">sltTopInterface</a>,</div>
<div class="line"><span class="lineno">   39</span>    <span class="comment">// Top contact layer directly supporting an overhang. To be printed with a support interface material.</span></div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>,</div>
<div class="line"><span class="lineno">   41</span>    <span class="comment">// Some undecided type yet. It will turn into sltBase first, then it may turn into sltBottomInterface or sltTopInterface.</span></div>
<div class="line"><span class="lineno">   42</span>    <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>,</div>
<div class="line"><span class="lineno">   43</span>  };</div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88">Slic3r::PrintObjectSupportMaterial::sltRaftBase</a></div><div class="ttdeci">@ sltRaftBase</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:26</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192">Slic3r::PrintObjectSupportMaterial::sltUnknown</a></div><div class="ttdeci">@ sltUnknown</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:24</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8a5322bebc03828f50a4df2f806e2c04b2"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a5322bebc03828f50a4df2f806e2c04b2">Slic3r::PrintObjectSupportMaterial::sltBottomInterface</a></div><div class="ttdeci">@ sltBottomInterface</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:33</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">Slic3r::PrintObjectSupportMaterial::sltTopContact</a></div><div class="ttdeci">@ sltTopContact</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:40</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8a748dc40e21323a8e38c5bcab4e2c7966"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a748dc40e21323a8e38c5bcab4e2c7966">Slic3r::PrintObjectSupportMaterial::sltBase</a></div><div class="ttdeci">@ sltBase</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:35</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8a79ffc4934e32044cf56f3ce12a1cb905"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a79ffc4934e32044cf56f3ce12a1cb905">Slic3r::PrintObjectSupportMaterial::sltTopInterface</a></div><div class="ttdeci">@ sltTopInterface</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:38</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">Slic3r::PrintObjectSupportMaterial::sltBottomContact</a></div><div class="ttdeci">@ sltBottomContact</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:30</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed">Slic3r::PrintObjectSupportMaterial::sltRaftInterface</a></div><div class="ttdeci">@ sltRaftInterface</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:28</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">Slic3r::PrintObjectSupportMaterial::sltIntermediate</a></div><div class="ttdeci">@ sltIntermediate</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:42</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aad85786ced3b000a83b39d91ddb8218e" name="aad85786ced3b000a83b39d91ddb8218e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad85786ced3b000a83b39d91ddb8218e">&#9670;&#160;</a></span>PrintObjectSupportMaterial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::PrintObjectSupportMaterial::PrintObjectSupportMaterial </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> *&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> &amp;&#160;</td>
          <td class="paramname"><em>slicing_params</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  348</span>                                                                                                                         :</div>
<div class="line"><span class="lineno">  349</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">m_object</a>                (<span class="keywordtype">object</span>),</div>
<div class="line"><span class="lineno">  350</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>          (&amp;<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;print()-&gt;config()),</div>
<div class="line"><span class="lineno">  351</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>         (&amp;<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;config()),</div>
<div class="line"><span class="lineno">  352</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>        (slicing_params)</div>
<div class="line"><span class="lineno">  353</span>{</div>
<div class="line"><span class="lineno">  354</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7bd6ca033aef8fd24f8f2622b96bf8a0">first_layer_flow</a>                   = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#acbe607472f0878047e9973fcd69f006a">support_material_1st_layer_flow</a>(<span class="keywordtype">object</span>, <span class="keywordtype">float</span>(slicing_params.first_print_layer_height));</div>
<div class="line"><span class="lineno">  355</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>              = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7a84976eeb16c9a039b46f731199bd58">support_material_flow</a>(<span class="keywordtype">object</span>, <span class="keywordtype">float</span>(slicing_params.layer_height));</div>
<div class="line"><span class="lineno">  356</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>    = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aa1f36f6004a4359d15dec3d8bbcf3e3e">support_material_interface_flow</a>(<span class="keywordtype">object</span>, <span class="keywordtype">float</span>(slicing_params.layer_height));</div>
<div class="line"><span class="lineno">  357</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a>           = 0.01;</div>
<div class="line"><span class="lineno">  358</span> </div>
<div class="line"><span class="lineno">  359</span>    <span class="comment">// Calculate a minimum support layer height as a minimum over all extruders, but not smaller than 10um.</span></div>
<div class="line"><span class="lineno">  360</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> = 1000000.;</div>
<div class="line"><span class="lineno">  361</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> lh : <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>-&gt;<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab83ff941c3f1de56ffbaea2d77cf8380">min_layer_height</a>.values)</div>
<div class="line"><span class="lineno">  362</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.support_layer_height_min = <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../df/db1/math_8h.html#a04a32cd137f4e2dc222aca71df9edb1b">min</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.support_layer_height_min, <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../df/db1/math_8h.html#a5083c48fbfb60dd70808789479f4db53">max</a>(0.01, lh));</div>
<div class="line"><span class="lineno">  363</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> layer : <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">m_object</a>-&gt;layers())</div>
<div class="line"><span class="lineno">  364</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.support_layer_height_min = <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../df/db1/math_8h.html#a04a32cd137f4e2dc222aca71df9edb1b">min</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.support_layer_height_min, <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../df/db1/math_8h.html#a5083c48fbfb60dd70808789479f4db53">max</a>(0.01, layer-&gt;<a class="code hl_function" href="../../d0/d25/namespace_slic3r_1_1arrangement.html#a5b816dd05a95b740ac2194b643ceaacc">height</a>));</div>
<div class="line"><span class="lineno">  365</span> </div>
<div class="line"><span class="lineno">  366</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_top_layers.value == 0) {</div>
<div class="line"><span class="lineno">  367</span>        <span class="comment">// No interface layers allowed, print everything with the base support pattern.</span></div>
<div class="line"><span class="lineno">  368</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>;</div>
<div class="line"><span class="lineno">  369</span>    }</div>
<div class="line"><span class="lineno">  370</span> </div>
<div class="line"><span class="lineno">  371</span>    <span class="comment">// Evaluate the XY gap between the object outer perimeters and the support structures.</span></div>
<div class="line"><span class="lineno">  372</span>    <span class="comment">// Evaluate the XY gap between the object outer perimeters and the support structures.</span></div>
<div class="line"><span class="lineno">  373</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> external_perimeter_width = 0.;</div>
<div class="line"><span class="lineno">  374</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> bridge_flow = 0;</div>
<div class="line"><span class="lineno">  375</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> region_id = 0; region_id &lt; <span class="keywordtype">object</span>-&gt;num_printing_regions(); ++ region_id) {</div>
<div class="line"><span class="lineno">  376</span>        <span class="keyword">const</span> PrintRegion &amp;region = <span class="keywordtype">object</span>-&gt;printing_region(region_id);</div>
<div class="line"><span class="lineno">  377</span>        external_perimeter_width = std::max(external_perimeter_width, <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a>(region.flow(*<span class="keywordtype">object</span>, <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f">frExternalPerimeter</a>, slicing_params.layer_height).width()));</div>
<div class="line"><span class="lineno">  378</span>        bridge_flow += region.config().bridge_flow;</div>
<div class="line"><span class="lineno">  379</span>    }</div>
<div class="line"><span class="lineno">  380</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_object_xy_distance.value;</div>
<div class="line"><span class="lineno">  381</span>    bridge_flow /= <span class="keywordtype">object</span>-&gt;num_printing_regions();</div>
<div class="line"><span class="lineno">  382</span> </div>
<div class="line"><span class="lineno">  383</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a223998b52f75fa25874d2967126c7a77">support_material_bottom_interface_flow</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ac8f1765efb10ac97c597982a0b4847f5">soluble_interface</a> || ! <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;thick_bridges ?</div>
<div class="line"><span class="lineno">  384</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#abc36bf873d07a474bd5453d029d66dc2">with_flow_ratio</a>(bridge_flow) :</div>
<div class="line"><span class="lineno">  385</span>        <a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#aebf95935b2c61b256b7d954a7928638f">Flow::bridging_flow</a>(bridge_flow * <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#af2b19c33242782f736ca2b1ec7155572">nozzle_diameter</a>(), <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#af2b19c33242782f736ca2b1ec7155572">nozzle_diameter</a>());</div>
<div class="line"><span class="lineno">  386</span> </div>
<div class="line"><span class="lineno">  387</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a82043736a8d779152fe8463141b71a32">can_merge_support_regions</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_filament.value == <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_filament.value;</div>
<div class="line"><span class="lineno">  388</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a82043736a8d779152fe8463141b71a32">can_merge_support_regions</a> &amp;&amp; (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_filament.value == 0 || <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_filament.value == 0)) {</div>
<div class="line"><span class="lineno">  389</span>        <span class="comment">// One of the support extruders is of &quot;don&#39;t care&quot; type.</span></div>
<div class="line"><span class="lineno">  390</span>        <span class="keyword">auto</span> object_extruders = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">m_object</a>-&gt;<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a70c86ae5ce74d300b6e38ac810e4c8e2">object_extruders</a>();</div>
<div class="line"><span class="lineno">  391</span>        <span class="keywordflow">if</span> (object_extruders.size() == 1 &amp;&amp;</div>
<div class="line"><span class="lineno">  392</span>            *object_extruders.begin() == std::max&lt;unsigned int&gt;(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_filament.value, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_filament.value))</div>
<div class="line"><span class="lineno">  393</span>            <span class="comment">// Object is printed with the same extruder as the support.</span></div>
<div class="line"><span class="lineno">  394</span>            <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a82043736a8d779152fe8463141b71a32">can_merge_support_regions</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  395</span>    }</div>
<div class="line"><span class="lineno">  396</span> </div>
<div class="line"><span class="lineno">  397</span> </div>
<div class="line"><span class="lineno">  398</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#abbdd5b720ac9e0f5d57172ac1f1cf37d">base_angle</a>         = <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a345f6f1e6238a364b20bdabac88a8314">Geometry::deg2rad</a>(<span class="keywordtype">float</span>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_angle.value));</div>
<div class="line"><span class="lineno">  399</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7e3d132f7295d882fd2d716868c121a6">interface_angle</a>    = <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a345f6f1e6238a364b20bdabac88a8314">Geometry::deg2rad</a>(<span class="keywordtype">float</span>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_angle.value + 90.));</div>
<div class="line"><span class="lineno">  400</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a25179a9df4d184735b18755e9f36eef3">interface_spacing</a>  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_spacing.value + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>();</div>
<div class="line"><span class="lineno">  401</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bbedcc1acfb29c78650befdf49f01b5">interface_density</a>  = std::min(1., <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>() / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a25179a9df4d184735b18755e9f36eef3">interface_spacing</a>);</div>
<div class="line"><span class="lineno">  402</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9893844ad8de45877ce68662f6c62be">support_spacing</a>    = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_base_pattern_spacing.value + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>();</div>
<div class="line"><span class="lineno">  403</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bb4f0b8d9e940b719abd261ca3754d7">support_density</a>    = std::min(1., <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>() / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9893844ad8de45877ce68662f6c62be">support_spacing</a>);</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_top_layers.value == 0) {</div>
<div class="line"><span class="lineno">  405</span>        <span class="comment">// No interface layers allowed, print everything with the base support pattern.</span></div>
<div class="line"><span class="lineno">  406</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a25179a9df4d184735b18755e9f36eef3">interface_spacing</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9893844ad8de45877ce68662f6c62be">support_spacing</a>;</div>
<div class="line"><span class="lineno">  407</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bbedcc1acfb29c78650befdf49f01b5">interface_density</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bb4f0b8d9e940b719abd261ca3754d7">support_density</a>;</div>
<div class="line"><span class="lineno">  408</span>    }</div>
<div class="line"><span class="lineno">  409</span> </div>
<div class="line"><span class="lineno">  410</span>    <a class="code hl_enumeration" href="../../de/db8/namespace_slic3r.html#a83b9b01271dda8378c1cc57f30699d18">SupportMaterialPattern</a>  support_pattern = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_base_pattern;</div>
<div class="line"><span class="lineno">  411</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0bfb8c62499630c07f8ef5674a744006">with_sheath</a> = <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#ac6849a594bd58af6872051b2465781df">support_with_sheath</a>;</div>
<div class="line"><span class="lineno">  412</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cebafc2201a25b9b476a1d8d1c12367">base_fill_pattern</a>      = </div>
<div class="line"><span class="lineno">  413</span>        support_pattern == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a83b9b01271dda8378c1cc57f30699d18a415cb3ea09fd044aba43e28dbff0fbae">smpHoneycomb</a> ? <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fa9ab65fe60393bf811c7d2b2ceb490914">ipHoneycomb</a> :</div>
<div class="line"><span class="lineno">  414</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bb4f0b8d9e940b719abd261ca3754d7">support_density</a> &gt; 0.95 || <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0bfb8c62499630c07f8ef5674a744006">with_sheath</a> ? <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fac9e881fccb86a6b1c7cf776b66c6e0db">ipRectilinear</a> : <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fad27422de5599a8df0e5390e941f026d8">ipSupportBase</a>;</div>
<div class="line"><span class="lineno">  415</span>    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a07a1c8294d21764fcfa17c875b1c712a">interface_fill_pattern</a> = (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bbedcc1acfb29c78650befdf49f01b5">interface_density</a> &gt; 0.95 ? <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fac9e881fccb86a6b1c7cf776b66c6e0db">ipRectilinear</a> : <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fad27422de5599a8df0e5390e941f026d8">ipSupportBase</a>);</div>
<div class="line"><span class="lineno">  416</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_pattern == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fa7fcfb7d754ada354877eef825b10826b">smipGrid</a>)</div>
<div class="line"><span class="lineno">  417</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9927416821680eb3be4d69f6f6030e0">contact_fill_pattern</a> = <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fa1af242c1f2f088f5cb8606d65b6d6882">ipGrid</a>;</div>
<div class="line"><span class="lineno">  418</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_pattern == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fa8bff5091a211100369778c1d8503f609">smipRectilinearInterlaced</a>)</div>
<div class="line"><span class="lineno">  419</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9927416821680eb3be4d69f6f6030e0">contact_fill_pattern</a> = <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fac9e881fccb86a6b1c7cf776b66c6e0db">ipRectilinear</a>;</div>
<div class="line"><span class="lineno">  420</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  421</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9927416821680eb3be4d69f6f6030e0">contact_fill_pattern</a> =</div>
<div class="line"><span class="lineno">  422</span>        (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_pattern == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fad8fb0b118d6ba40b9266865105b007ae">smipAuto</a> &amp;&amp; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ac8f1765efb10ac97c597982a0b4847f5">soluble_interface</a>) ||</div>
<div class="line"><span class="lineno">  423</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_pattern == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fa47d89130617fd8ce6ffb4c5c1ea765e5">smipConcentric</a> ?</div>
<div class="line"><span class="lineno">  424</span>        <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fa34c84fa363677f6c3465fdf3ad296c2f">ipConcentric</a> :</div>
<div class="line"><span class="lineno">  425</span>        (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.interface_density &gt; 0.95 ? <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fac9e881fccb86a6b1c7cf776b66c6e0db">ipRectilinear</a> : <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fad27422de5599a8df0e5390e941f026d8">ipSupportBase</a>);</div>
<div class="line"><span class="lineno">  426</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_a42ec487a6853ed58d3deff0ce060abd9"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">Slic3r::Flow::spacing</a></div><div class="ttdeci">float spacing() const</div><div class="ttdef"><b>Definition</b> Flow.hpp:67</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_abc36bf873d07a474bd5453d029d66dc2"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#abc36bf873d07a474bd5453d029d66dc2">Slic3r::Flow::with_flow_ratio</a></div><div class="ttdeci">Flow with_flow_ratio(double ratio) const</div><div class="ttdef"><b>Definition</b> Flow.hpp:97</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_aebf95935b2c61b256b7d954a7928638f"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#aebf95935b2c61b256b7d954a7928638f">Slic3r::Flow::bridging_flow</a></div><div class="ttdeci">static Flow bridging_flow(float dmr, float nozzle_diameter)</div><div class="ttdef"><b>Definition</b> Flow.hpp:99</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_af2b19c33242782f736ca2b1ec7155572"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#af2b19c33242782f736ca2b1ec7155572">Slic3r::Flow::nozzle_diameter</a></div><div class="ttdeci">float nozzle_diameter() const</div><div class="ttdef"><b>Definition</b> Flow.hpp:71</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_a70c86ae5ce74d300b6e38ac810e4c8e2"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#a70c86ae5ce74d300b6e38ac810e4c8e2">Slic3r::PrintObject::object_extruders</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; object_extruders() const</div><div class="ttdef"><b>Definition</b> PrintObject.cpp:2012</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a07a1c8294d21764fcfa17c875b1c712a"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a07a1c8294d21764fcfa17c875b1c712a">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_fill_pattern</a></div><div class="ttdeci">InfillPattern interface_fill_pattern</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:145</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a0b59238962f758fd90553b0fca5ca1a7"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">Slic3r::PrintObjectSupportMaterial::m_print_config</a></div><div class="ttdeci">const PrintConfig * m_print_config</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:252</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a0bfb8c62499630c07f8ef5674a744006"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0bfb8c62499630c07f8ef5674a744006">Slic3r::PrintObjectSupportMaterial::SupportParams::with_sheath</a></div><div class="ttdeci">bool with_sheath</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:147</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a1cf6e843045184c2a71e988868e29952"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">Slic3r::PrintObjectSupportMaterial::m_slicing_params</a></div><div class="ttdeci">SlicingParameters m_slicing_params</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:256</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a1ed00250bf8f1279f93e1f9d9c60d509"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">Slic3r::PrintObjectSupportMaterial::SupportParams::support_material_interface_flow</a></div><div class="ttdeci">Flow support_material_interface_flow</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:126</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a223998b52f75fa25874d2967126c7a77"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a223998b52f75fa25874d2967126c7a77">Slic3r::PrintObjectSupportMaterial::SupportParams::support_material_bottom_interface_flow</a></div><div class="ttdeci">Flow support_material_bottom_interface_flow</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:127</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a25179a9df4d184735b18755e9f36eef3"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a25179a9df4d184735b18755e9f36eef3">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_spacing</a></div><div class="ttdeci">coordf_t interface_spacing</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:138</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a55763a1077b1ed1353d31a2fd7b6fb8d"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">Slic3r::PrintObjectSupportMaterial::m_support_params</a></div><div class="ttdeci">SupportParams m_support_params</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:258</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a5bb4f0b8d9e940b719abd261ca3754d7"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bb4f0b8d9e940b719abd261ca3754d7">Slic3r::PrintObjectSupportMaterial::SupportParams::support_density</a></div><div class="ttdeci">coordf_t support_density</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:142</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a5bbedcc1acfb29c78650befdf49f01b5"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bbedcc1acfb29c78650befdf49f01b5">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_density</a></div><div class="ttdeci">coordf_t interface_density</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:140</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a66f5a649e3f3bfc65624d776dd55fb1e"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">Slic3r::PrintObjectSupportMaterial::m_object_config</a></div><div class="ttdeci">const PrintObjectConfig * m_object_config</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:253</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a7bd6ca033aef8fd24f8f2622b96bf8a0"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7bd6ca033aef8fd24f8f2622b96bf8a0">Slic3r::PrintObjectSupportMaterial::SupportParams::first_layer_flow</a></div><div class="ttdeci">Flow first_layer_flow</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:124</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a7cd3acbc1d9ab9522230a80f97349800"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">Slic3r::PrintObjectSupportMaterial::m_object</a></div><div class="ttdeci">const PrintObject * m_object</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:251</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a7cebafc2201a25b9b476a1d8d1c12367"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cebafc2201a25b9b476a1d8d1c12367">Slic3r::PrintObjectSupportMaterial::SupportParams::base_fill_pattern</a></div><div class="ttdeci">InfillPattern base_fill_pattern</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:144</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a7e3d132f7295d882fd2d716868c121a6"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7e3d132f7295d882fd2d716868c121a6">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_angle</a></div><div class="ttdeci">float interface_angle</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:137</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a82043736a8d779152fe8463141b71a32"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a82043736a8d779152fe8463141b71a32">Slic3r::PrintObjectSupportMaterial::SupportParams::can_merge_support_regions</a></div><div class="ttdeci">bool can_merge_support_regions</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:129</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a97a975e3e3e5a3aa6fb9f62fa2f2d2fe"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">Slic3r::PrintObjectSupportMaterial::SupportParams::gap_xy</a></div><div class="ttdeci">coordf_t gap_xy</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:134</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_aa44e9de566e9b74b48183126984438b7"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">Slic3r::PrintObjectSupportMaterial::SupportParams::support_layer_height_min</a></div><div class="ttdeci">coordf_t support_layer_height_min</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:131</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_abbdd5b720ac9e0f5d57172ac1f1cf37d"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#abbdd5b720ac9e0f5d57172ac1f1cf37d">Slic3r::PrintObjectSupportMaterial::SupportParams::base_angle</a></div><div class="ttdeci">float base_angle</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:136</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_ac4dde773191da1c029deb4b955dff00e"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">Slic3r::PrintObjectSupportMaterial::SupportParams::support_material_flow</a></div><div class="ttdeci">Flow support_material_flow</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:125</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_ae9893844ad8de45877ce68662f6c62be"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9893844ad8de45877ce68662f6c62be">Slic3r::PrintObjectSupportMaterial::SupportParams::support_spacing</a></div><div class="ttdeci">coordf_t support_spacing</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:141</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_ae9927416821680eb3be4d69f6f6030e0"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ae9927416821680eb3be4d69f6f6030e0">Slic3r::PrintObjectSupportMaterial::SupportParams::contact_fill_pattern</a></div><div class="ttdeci">InfillPattern contact_fill_pattern</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:146</div></div>
<div class="ttc" id="alibslic3r_8h_html_a95c875c81df33d788132374e2b57c6c1"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a></div><div class="ttdeci">double coordf_t</div><div class="ttdef"><b>Definition</b> libslic3r.h:46</div></div>
<div class="ttc" id="amath_8h_html_a04a32cd137f4e2dc222aca71df9edb1b"><div class="ttname"><a href="../../df/db1/math_8h.html#a04a32cd137f4e2dc222aca71df9edb1b">min</a></div><div class="ttdeci">const T &amp; min(const T &amp;a, const T &amp;b)</div><div class="ttdef"><b>Definition</b> math.h:386</div></div>
<div class="ttc" id="amath_8h_html_a5083c48fbfb60dd70808789479f4db53"><div class="ttname"><a href="../../df/db1/math_8h.html#a5083c48fbfb60dd70808789479f4db53">max</a></div><div class="ttdeci">const T &amp; max(const T &amp;a, const T &amp;b)</div><div class="ttdef"><b>Definition</b> math.h:391</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_geometry_html_a345f6f1e6238a364b20bdabac88a8314"><div class="ttname"><a href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a345f6f1e6238a364b20bdabac88a8314">Slic3r::Geometry::deg2rad</a></div><div class="ttdeci">constexpr T deg2rad(const T angle)</div><div class="ttdef"><b>Definition</b> Geometry.hpp:295</div></div>
<div class="ttc" id="anamespace_slic3r_1_1arrangement_html_a5b816dd05a95b740ac2194b643ceaacc"><div class="ttname"><a href="../../d0/d25/namespace_slic3r_1_1arrangement.html#a5b816dd05a95b740ac2194b643ceaacc">Slic3r::arrangement::height</a></div><div class="ttdeci">coord_t height(const BoundingBox &amp;box)</div><div class="ttdef"><b>Definition</b> Arrange.cpp:794</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0799da4d5630e9003a6732d1b159391fa1af242c1f2f088f5cb8606d65b6d6882"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fa1af242c1f2f088f5cb8606d65b6d6882">Slic3r::ipGrid</a></div><div class="ttdeci">@ ipGrid</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:55</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0799da4d5630e9003a6732d1b159391fa34c84fa363677f6c3465fdf3ad296c2f"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fa34c84fa363677f6c3465fdf3ad296c2f">Slic3r::ipConcentric</a></div><div class="ttdeci">@ ipConcentric</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:55</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0799da4d5630e9003a6732d1b159391fa9ab65fe60393bf811c7d2b2ceb490914"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fa9ab65fe60393bf811c7d2b2ceb490914">Slic3r::ipHoneycomb</a></div><div class="ttdeci">@ ipHoneycomb</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:55</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0799da4d5630e9003a6732d1b159391fac9e881fccb86a6b1c7cf776b66c6e0db"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fac9e881fccb86a6b1c7cf776b66c6e0db">Slic3r::ipRectilinear</a></div><div class="ttdeci">@ ipRectilinear</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:55</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0799da4d5630e9003a6732d1b159391fad27422de5599a8df0e5390e941f026d8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0799da4d5630e9003a6732d1b159391fad27422de5599a8df0e5390e941f026d8">Slic3r::ipSupportBase</a></div><div class="ttdeci">@ ipSupportBase</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:56</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2425d8c19b9e870d7cf339a4d20b359fa47d89130617fd8ce6ffb4c5c1ea765e5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fa47d89130617fd8ce6ffb4c5c1ea765e5">Slic3r::smipConcentric</a></div><div class="ttdeci">@ smipConcentric</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:108</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2425d8c19b9e870d7cf339a4d20b359fa7fcfb7d754ada354877eef825b10826b"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fa7fcfb7d754ada354877eef825b10826b">Slic3r::smipGrid</a></div><div class="ttdeci">@ smipGrid</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:108</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2425d8c19b9e870d7cf339a4d20b359fa8bff5091a211100369778c1d8503f609"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fa8bff5091a211100369778c1d8503f609">Slic3r::smipRectilinearInterlaced</a></div><div class="ttdeci">@ smipRectilinearInterlaced</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:108</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2425d8c19b9e870d7cf339a4d20b359fad8fb0b118d6ba40b9266865105b007ae"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2425d8c19b9e870d7cf339a4d20b359fad8fb0b118d6ba40b9266865105b007ae">Slic3r::smipAuto</a></div><div class="ttdeci">@ smipAuto</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:108</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2ac5c755948c74f5f5f975acd5057fe9"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">Slic3r::coordf_t</a></div><div class="ttdeci">double coordf_t</div><div class="ttdef"><b>Definition</b> GUI_ObjectList.hpp:36</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4bcb312043a874462f942e362c16567aa73b23230c5b13dd721893c50d09a9d5f">Slic3r::frExternalPerimeter</a></div><div class="ttdeci">@ frExternalPerimeter</div><div class="ttdef"><b>Definition</b> Flow.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7a84976eeb16c9a039b46f731199bd58"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7a84976eeb16c9a039b46f731199bd58">Slic3r::support_material_flow</a></div><div class="ttdeci">Flow support_material_flow(const PrintObject *object, float layer_height)</div><div class="ttdef"><b>Definition</b> Flow.cpp:214</div></div>
<div class="ttc" id="anamespace_slic3r_html_a83b9b01271dda8378c1cc57f30699d18"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a83b9b01271dda8378c1cc57f30699d18">Slic3r::SupportMaterialPattern</a></div><div class="ttdeci">SupportMaterialPattern</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:96</div></div>
<div class="ttc" id="anamespace_slic3r_html_a83b9b01271dda8378c1cc57f30699d18a415cb3ea09fd044aba43e28dbff0fbae"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a83b9b01271dda8378c1cc57f30699d18a415cb3ea09fd044aba43e28dbff0fbae">Slic3r::smpHoneycomb</a></div><div class="ttdeci">@ smpHoneycomb</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:98</div></div>
<div class="ttc" id="anamespace_slic3r_html_aa1f36f6004a4359d15dec3d8bbcf3e3e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aa1f36f6004a4359d15dec3d8bbcf3e3e">Slic3r::support_material_interface_flow</a></div><div class="ttdeci">Flow support_material_interface_flow(const PrintObject *object, float layer_height)</div><div class="ttdef"><b>Definition</b> Flow.cpp:244</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab83ff941c3f1de56ffbaea2d77cf8380"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab83ff941c3f1de56ffbaea2d77cf8380">Slic3r::min_layer_height</a></div><div class="ttdeci">machine_min_extruding_rate min_layer_height((ConfigOptionFloat, printable_height))((ConfigOptionFloats</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac6849a594bd58af6872051b2465781df"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac6849a594bd58af6872051b2465781df">Slic3r::support_with_sheath</a></div><div class="ttdeci">static constexpr bool support_with_sheath</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:70</div></div>
<div class="ttc" id="anamespace_slic3r_html_acbe607472f0878047e9973fcd69f006a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#acbe607472f0878047e9973fcd69f006a">Slic3r::support_material_1st_layer_flow</a></div><div class="ttdeci">Flow support_material_1st_layer_flow(const PrintObject *object, float layer_height)</div><div class="ttdef"><b>Definition</b> Flow.cpp:232</div></div>
<div class="ttc" id="anamespacenlohmann_1_1detail_html_a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666"><div class="ttname"><a href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">nlohmann::detail::value_t::object</a></div><div class="ttdeci">@ object</div><div class="ttdoc">object (unordered set of name/value pairs)</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_ac8f1765efb10ac97c597982a0b4847f5"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ac8f1765efb10ac97c597982a0b4847f5">Slic3r::SlicingParameters::soluble_interface</a></div><div class="ttdeci">bool soluble_interface</div><div class="ttdef"><b>Definition</b> Slicing.hpp:82</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00136">Slic3r::PrintObjectSupportMaterial::SupportParams::base_angle</a>, <a class="el" href="../../#l00144">Slic3r::PrintObjectSupportMaterial::SupportParams::base_fill_pattern</a>, <a class="el" href="../../#l00099">Slic3r::Flow::bridging_flow()</a>, <a class="el" href="../../#l00129">Slic3r::PrintObjectSupportMaterial::SupportParams::can_merge_support_regions</a>, <a class="el" href="../../#l00111">Slic3r::PrintRegion::config()</a>, <a class="el" href="../../#l00146">Slic3r::PrintObjectSupportMaterial::SupportParams::contact_fill_pattern</a>, <a class="el" href="../../#l00295">Slic3r::Geometry::deg2rad()</a>, <a class="el" href="../../#l00124">Slic3r::PrintObjectSupportMaterial::SupportParams::first_layer_flow</a>, <a class="el" href="../../#l00070">Slic3r::SlicingParameters::first_print_layer_height</a>, <a class="el" href="../../#l00021">Slic3r::PrintRegion::flow()</a>, <a class="el" href="../../#l00017">Slic3r::frExternalPerimeter</a>, <a class="el" href="../../#l00134">Slic3r::PrintObjectSupportMaterial::SupportParams::gap_xy</a>, <a class="el" href="../../#l00137">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_angle</a>, <a class="el" href="../../#l00140">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_density</a>, <a class="el" href="../../#l00145">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_fill_pattern</a>, <a class="el" href="../../#l00138">Slic3r::PrintObjectSupportMaterial::SupportParams::interface_spacing</a>, <a class="el" href="../../#l00055">Slic3r::ipConcentric</a>, <a class="el" href="../../#l00055">Slic3r::ipGrid</a>, <a class="el" href="../../#l00055">Slic3r::ipHoneycomb</a>, <a class="el" href="../../#l00055">Slic3r::ipRectilinear</a>, <a class="el" href="../../#l00056">Slic3r::ipSupportBase</a>, <a class="el" href="../../#l00061">Slic3r::SlicingParameters::layer_height</a>, <a class="el" href="../../#l00301">Slic3r::PrintObject::layers()</a>, <a class="el" href="../../#l00251">m_object</a>, <a class="el" href="../../#l00253">m_object_config</a>, <a class="el" href="../../#l00252">m_print_config</a>, <a class="el" href="../../#l00256">m_slicing_params</a>, <a class="el" href="../../#l00258">m_support_params</a>, <a class="el" href="../../#l00071">Slic3r::Flow::nozzle_diameter()</a>, <a class="el" href="../../#l02012">Slic3r::PrintObject::object_extruders()</a>, <a class="el" href="../../#l00108">Slic3r::smipAuto</a>, <a class="el" href="../../#l00108">Slic3r::smipConcentric</a>, <a class="el" href="../../#l00108">Slic3r::smipGrid</a>, <a class="el" href="../../#l00108">Slic3r::smipRectilinearInterlaced</a>, <a class="el" href="../../#l00098">Slic3r::smpHoneycomb</a>, <a class="el" href="../../#l00082">Slic3r::SlicingParameters::soluble_interface</a>, <a class="el" href="../../#l00067">Slic3r::Flow::spacing()</a>, <a class="el" href="../../#l00142">Slic3r::PrintObjectSupportMaterial::SupportParams::support_density</a>, <a class="el" href="../../#l00131">Slic3r::PrintObjectSupportMaterial::SupportParams::support_layer_height_min</a>, <a class="el" href="../../#l00232">Slic3r::support_material_1st_layer_flow()</a>, <a class="el" href="../../#l00127">Slic3r::PrintObjectSupportMaterial::SupportParams::support_material_bottom_interface_flow</a>, <a class="el" href="../../#l00214">Slic3r::support_material_flow()</a>, <a class="el" href="../../#l00125">Slic3r::PrintObjectSupportMaterial::SupportParams::support_material_flow</a>, <a class="el" href="../../#l00244">Slic3r::support_material_interface_flow()</a>, <a class="el" href="../../#l00126">Slic3r::PrintObjectSupportMaterial::SupportParams::support_material_interface_flow</a>, <a class="el" href="../../#l00141">Slic3r::PrintObjectSupportMaterial::SupportParams::support_spacing</a>, <a class="el" href="../../#l00070">Slic3r::support_with_sheath</a>, <a class="el" href="../../#l00061">Slic3r::Flow::width()</a>, <a class="el" href="../../#l00097">Slic3r::Flow::with_flow_ratio()</a>, and <a class="el" href="../../#l00147">Slic3r::PrintObjectSupportMaterial::SupportParams::with_sheath</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_aad85786ced3b000a83b39d91ddb8218e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aaa65df1d83138e4b78ca85ec30f619e6" name="aaa65df1d83138e4b78ca85ec30f619e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa65df1d83138e4b78ca85ec30f619e6">&#9670;&#160;</a></span>bottom_contact_layers_and_layer_support_areas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">PrintObjectSupportMaterial::MyLayersPtr</a> Slic3r::PrintObjectSupportMaterial::bottom_contact_layers_and_layer_support_areas </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>buildplate_covered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>layer_support_areas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2699</span>{</div>
<div class="line"><span class="lineno"> 2700</span>    <span class="keywordflow">if</span> (top_contacts.empty())</div>
<div class="line"><span class="lineno"> 2701</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>();</div>
<div class="line"><span class="lineno"> 2702</span> </div>
<div class="line"><span class="lineno"> 2703</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2704</span>    <span class="keyword">static</span> <span class="keywordtype">size_t</span> s_iRun = 0;</div>
<div class="line"><span class="lineno"> 2705</span>    <span class="keywordtype">size_t</span> iRun = s_iRun ++;</div>
<div class="line"><span class="lineno"> 2706</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2707</span> </div>
<div class="line"><span class="lineno"> 2708</span>    <span class="comment">//FIXME higher expansion_to_slice here? why?</span></div>
<div class="line"><span class="lineno"> 2709</span>    <span class="comment">//const auto   expansion_to_slice = m_support_material_flow.scaled_spacing() / 2 + 25;</span></div>
<div class="line"><span class="lineno"> 2710</span>    <span class="keyword">const</span> SupportGridParams grid_params(*<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>);</div>
<div class="line"><span class="lineno"> 2711</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> buildplate_only = ! <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>.empty();</div>
<div class="line"><span class="lineno"> 2712</span> </div>
<div class="line"><span class="lineno"> 2713</span>    <span class="comment">// Allocate empty surface areas, one per object layer.</span></div>
<div class="line"><span class="lineno"> 2714</span>    layer_support_areas.assign(<span class="keywordtype">object</span>.total_layer_count(), <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>());</div>
<div class="line"><span class="lineno"> 2715</span> </div>
<div class="line"><span class="lineno"> 2716</span>    <span class="comment">// find object top surfaces</span></div>
<div class="line"><span class="lineno"> 2717</span>    <span class="comment">// we&#39;ll use them to clip our support and detect where does it stick</span></div>
<div class="line"><span class="lineno"> 2718</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> bottom_contacts;</div>
<div class="line"><span class="lineno"> 2719</span> </div>
<div class="line"><span class="lineno"> 2720</span>    <span class="comment">// There is some support to be built, if there are non-empty top surfaces detected.</span></div>
<div class="line"><span class="lineno"> 2721</span>    <span class="comment">// Sum of unsupported contact areas above the current layer.print_z.</span></div>
<div class="line"><span class="lineno"> 2722</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>  overhangs_projection;</div>
<div class="line"><span class="lineno"> 2723</span>    <span class="comment">// Sum of unsupported enforcer contact areas above the current layer.print_z.</span></div>
<div class="line"><span class="lineno"> 2724</span>    <span class="comment">// Only used if &quot;supports on build plate only&quot; is enabled and both automatic and support enforcers are enabled.</span></div>
<div class="line"><span class="lineno"> 2725</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>  enforcers_projection;</div>
<div class="line"><span class="lineno"> 2726</span>    <span class="comment">// Last top contact layer visited when collecting the projection of contact areas.</span></div>
<div class="line"><span class="lineno"> 2727</span>    <span class="keywordtype">int</span>       contact_idx = <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(top_contacts.size()) - 1;</div>
<div class="line"><span class="lineno"> 2728</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> layer_id = <span class="keywordtype">int</span>(<span class="keywordtype">object</span>.total_layer_count()) - 2; layer_id &gt;= 0; -- layer_id) {</div>
<div class="line"><span class="lineno"> 2729</span>        BOOST_LOG_TRIVIAL(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a06b86e5331aac1c640f8f7f40d798175">trace</a>) &lt;&lt; <span class="stringliteral">&quot;Support generator - bottom_contact_layers - layer &quot;</span> &lt;&lt; layer_id;</div>
<div class="line"><span class="lineno"> 2730</span>        <span class="keyword">const</span> Layer &amp;layer = *<span class="keywordtype">object</span>.get_layer(layer_id);</div>
<div class="line"><span class="lineno"> 2731</span>        <span class="comment">// Collect projections of all contact areas above or at the same level as this top surface.</span></div>
<div class="line"><span class="lineno"> 2732</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2733</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> polygons_new;</div>
<div class="line"><span class="lineno"> 2734</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> enforcers_new;</div>
<div class="line"><span class="lineno"> 2735</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2736</span>        <span class="keywordflow">for</span> (; contact_idx &gt;= 0 &amp;&amp; top_contacts[contact_idx]-&gt;print_z &gt; layer.print_z - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>; -- contact_idx) {</div>
<div class="line"><span class="lineno"> 2737</span>            MyLayer &amp;top_contact = *top_contacts[contact_idx];</div>
<div class="line"><span class="lineno"> 2738</span><span class="preprocessor">#ifndef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2739</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> polygons_new;</div>
<div class="line"><span class="lineno"> 2740</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> enforcers_new;</div>
<div class="line"><span class="lineno"> 2741</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2742</span>            <span class="comment">// Contact surfaces are expanded away from the object, trimmed by the object.</span></div>
<div class="line"><span class="lineno"> 2743</span>            <span class="comment">// Use a slight positive offset to overlap the touching regions.</span></div>
<div class="line"><span class="lineno"> 2744</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 2745</span>            <span class="comment">// Merge and collect the contact polygons. The contact polygons are inflated, but not extended into a grid form.</span></div>
<div class="line"><span class="lineno"> 2746</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(polygons_new,  <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(*top_contact.contact_polygons,  <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>));</div>
<div class="line"><span class="lineno"> 2747</span>            <span class="keywordflow">if</span> (top_contact.enforcer_polygons)</div>
<div class="line"><span class="lineno"> 2748</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(enforcers_new, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(*top_contact.enforcer_polygons, <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>));</div>
<div class="line"><span class="lineno"> 2749</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 2750</span>            <span class="comment">// Consume the contact_polygons. The contact polygons are already expanded into a grid form, and they are a tiny bit smaller</span></div>
<div class="line"><span class="lineno"> 2751</span>            <span class="comment">// than the grid cells.</span></div>
<div class="line"><span class="lineno"> 2752</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(polygons_new,  std::move(*top_contact.contact_polygons));</div>
<div class="line"><span class="lineno"> 2753</span>            <span class="keywordflow">if</span> (top_contact.enforcer_polygons)</div>
<div class="line"><span class="lineno"> 2754</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(enforcers_new, std::move(*top_contact.enforcer_polygons));</div>
<div class="line"><span class="lineno"> 2755</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2756</span>            <span class="comment">// These are the overhang surfaces. They are touching the object and they are not expanded away from the object.</span></div>
<div class="line"><span class="lineno"> 2757</span>            <span class="comment">// Use a slight positive offset to overlap the touching regions.</span></div>
<div class="line"><span class="lineno"> 2758</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(polygons_new, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(*top_contact.overhang_polygons, <span class="keywordtype">float</span>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>)));</div>
<div class="line"><span class="lineno"> 2759</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(overhangs_projection, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(polygons_new));</div>
<div class="line"><span class="lineno"> 2760</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(enforcers_projection, enforcers_new);</div>
<div class="line"><span class="lineno"> 2761</span>        }</div>
<div class="line"><span class="lineno"> 2762</span>        <span class="keywordflow">if</span> (overhangs_projection.empty() &amp;&amp; enforcers_projection.empty())</div>
<div class="line"><span class="lineno"> 2763</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2764</span> </div>
<div class="line"><span class="lineno"> 2765</span>        <span class="comment">// Overhangs_projection will be filled in asynchronously, move it away.</span></div>
<div class="line"><span class="lineno"> 2766</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> overhangs_projection_raw = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(std::move(overhangs_projection));</div>
<div class="line"><span class="lineno"> 2767</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> enforcers_projection_raw = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(std::move(enforcers_projection));</div>
<div class="line"><span class="lineno"> 2768</span> </div>
<div class="line"><span class="lineno"> 2769</span>        tbb::task_group task_group;</div>
<div class="line"><span class="lineno"> 2770</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;overhangs_for_bottom_contacts = buildplate_only ? enforcers_projection_raw : overhangs_projection_raw;</div>
<div class="line"><span class="lineno"> 2771</span>        <span class="keywordflow">if</span> (! overhangs_for_bottom_contacts.empty())</div>
<div class="line"><span class="lineno"> 2772</span>            <span class="comment">// Find the bottom contact layers above the top surfaces of this layer.</span></div>
<div class="line"><span class="lineno"> 2773</span>            task_group.run([<span class="keyword">this</span>, &amp;<span class="keywordtype">object</span>, &amp;layer, &amp;top_contacts, contact_idx, &amp;layer_storage, &amp;layer_support_areas, &amp;bottom_contacts, &amp;overhangs_for_bottom_contacts</div>
<div class="line"><span class="lineno"> 2774</span>    #ifdef SLIC3R_DEBUG</div>
<div class="line"><span class="lineno"> 2775</span>                , iRun, &amp;polygons_new</div>
<div class="line"><span class="lineno"> 2776</span>    #endif <span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2777</span>                ] {</div>
<div class="line"><span class="lineno"> 2778</span>                    <span class="comment">// Find the bottom contact layers above the top surfaces of this layer.</span></div>
<div class="line"><span class="lineno"> 2779</span>                    MyLayer *layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a911aa2374e25ece2aefc6c30e0e34524">detect_bottom_contacts</a>(</div>
<div class="line"><span class="lineno"> 2780</span>                        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>, <span class="keywordtype">object</span>, layer, top_contacts, contact_idx, layer_storage, layer_support_areas, overhangs_for_bottom_contacts</div>
<div class="line"><span class="lineno"> 2781</span>#ifdef SLIC3R_DEBUG</div>
<div class="line"><span class="lineno"> 2782</span>                        , iRun, polygons_new</div>
<div class="line"><span class="lineno"> 2783</span>#endif <span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2784</span>                    );</div>
<div class="line"><span class="lineno"> 2785</span>                    <span class="keywordflow">if</span> (layer_new)</div>
<div class="line"><span class="lineno"> 2786</span>                        bottom_contacts.push_back(layer_new);</div>
<div class="line"><span class="lineno"> 2787</span>                });</div>
<div class="line"><span class="lineno"> 2788</span> </div>
<div class="line"><span class="lineno"> 2789</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;layer_support_area = layer_support_areas[layer_id];</div>
<div class="line"><span class="lineno"> 2790</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> *layer_buildplate_covered = <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>.empty() ? nullptr : &amp;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>[layer_id];</div>
<div class="line"><span class="lineno"> 2791</span>        <span class="comment">// Filtering the propagated support columns to two extrusions, overlapping by maximum 20%.</span></div>
<div class="line"><span class="lineno"> 2792</span><span class="comment">//        float column_propagation_filtering_radius = scaled&lt;float&gt;(0.8 * 0.5 * (m_support_params.support_material_flow.spacing() + m_support_params.support_material_flow.width()));</span></div>
<div class="line"><span class="lineno"> 2793</span>        task_group.run([&amp;grid_params, &amp;overhangs_projection, &amp;overhangs_projection_raw, &amp;layer, &amp;layer_support_area, layer_buildplate_covered <span class="comment">/* , column_propagation_filtering_radius */</span></div>
<div class="line"><span class="lineno"> 2794</span>#ifdef SLIC3R_DEBUG </div>
<div class="line"><span class="lineno"> 2795</span>            , iRun, layer_id</div>
<div class="line"><span class="lineno"> 2796</span>#endif <span class="comment">/* SLIC3R_DEBUG */</span></div>
<div class="line"><span class="lineno"> 2797</span>            ] {</div>
<div class="line"><span class="lineno"> 2798</span>                <span class="comment">// buildplate_covered[layer_id] will be consumed here.</span></div>
<div class="line"><span class="lineno"> 2799</span>                std::tie(layer_support_area, overhangs_projection) = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1ba473d17b1ff2f352228b1053c52eba">project_support_to_grid</a>(layer, grid_params, overhangs_projection_raw, layer_buildplate_covered</div>
<div class="line"><span class="lineno"> 2800</span>#ifdef SLIC3R_DEBUG </div>
<div class="line"><span class="lineno"> 2801</span>                    , iRun, layer_id, <span class="stringliteral">&quot;general&quot;</span></div>
<div class="line"><span class="lineno"> 2802</span>#endif <span class="comment">/* SLIC3R_DEBUG */</span></div>
<div class="line"><span class="lineno"> 2803</span>                );</div>
<div class="line"><span class="lineno"> 2804</span>                <span class="comment">// When propagating support areas downwards, stop propagating the support column if it becomes too thin to be printable.</span></div>
<div class="line"><span class="lineno"> 2805</span>                <span class="comment">//overhangs_projection = opening(overhangs_projection, column_propagation_filtering_radius);</span></div>
<div class="line"><span class="lineno"> 2806</span>            });</div>
<div class="line"><span class="lineno"> 2807</span> </div>
<div class="line"><span class="lineno"> 2808</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> layer_support_area_enforcers;</div>
<div class="line"><span class="lineno"> 2809</span>        <span class="keywordflow">if</span> (! enforcers_projection.empty())</div>
<div class="line"><span class="lineno"> 2810</span>            <span class="comment">// Project the enforcers polygons downwards, don&#39;t trim them with the &quot;buildplate only&quot; polygons.</span></div>
<div class="line"><span class="lineno"> 2811</span>            task_group.run([&amp;grid_params, &amp;enforcers_projection, &amp;enforcers_projection_raw, &amp;layer, &amp;layer_support_area_enforcers</div>
<div class="line"><span class="lineno"> 2812</span>#ifdef SLIC3R_DEBUG </div>
<div class="line"><span class="lineno"> 2813</span>                , iRun, layer_id</div>
<div class="line"><span class="lineno"> 2814</span>#endif <span class="comment">/* SLIC3R_DEBUG */</span></div>
<div class="line"><span class="lineno"> 2815</span>            ]{</div>
<div class="line"><span class="lineno"> 2816</span>                std::tie(layer_support_area_enforcers, enforcers_projection) = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1ba473d17b1ff2f352228b1053c52eba">project_support_to_grid</a>(layer, grid_params, enforcers_projection_raw, <span class="keyword">nullptr</span></div>
<div class="line"><span class="lineno"> 2817</span>#ifdef SLIC3R_DEBUG </div>
<div class="line"><span class="lineno"> 2818</span>                    , iRun, layer_id, <span class="stringliteral">&quot;enforcers&quot;</span></div>
<div class="line"><span class="lineno"> 2819</span>#endif <span class="comment">/* SLIC3R_DEBUG */</span></div>
<div class="line"><span class="lineno"> 2820</span>                );</div>
<div class="line"><span class="lineno"> 2821</span>            });</div>
<div class="line"><span class="lineno"> 2822</span> </div>
<div class="line"><span class="lineno"> 2823</span>        task_group.wait();</div>
<div class="line"><span class="lineno"> 2824</span> </div>
<div class="line"><span class="lineno"> 2825</span>        <span class="keywordflow">if</span> (! layer_support_area_enforcers.empty()) {</div>
<div class="line"><span class="lineno"> 2826</span>            <span class="keywordflow">if</span> (layer_support_area.empty())</div>
<div class="line"><span class="lineno"> 2827</span>                layer_support_area = std::move(layer_support_area_enforcers);</div>
<div class="line"><span class="lineno"> 2828</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 2829</span>                layer_support_area = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(layer_support_area, layer_support_area_enforcers);</div>
<div class="line"><span class="lineno"> 2830</span>        }</div>
<div class="line"><span class="lineno"> 2831</span>    } <span class="comment">// over all layers downwards</span></div>
<div class="line"><span class="lineno"> 2832</span> </div>
<div class="line"><span class="lineno"> 2833</span>    std::reverse(bottom_contacts.begin(), bottom_contacts.end());</div>
<div class="line"><span class="lineno"> 2834</span>    <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad4c2a04b87513b31fd000ebb6d005a1c">trim_support_layers_by_object</a>(<span class="keywordtype">object</span>, bottom_contacts, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae75919394f64528204ca434684c06d1b">gap_support_object</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6127b2a51f4a1e1a7aefc70d6677f7e7">gap_object_support</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a>);</div>
<div class="line"><span class="lineno"> 2835</span>    <span class="keywordflow">return</span> bottom_contacts;</div>
<div class="line"><span class="lineno"> 2836</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a3abfb433ae14805f6bcb7d41b5cc1840"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">Slic3r::PrintObjectSupportMaterial::buildplate_covered</a></div><div class="ttdeci">std::vector&lt; Polygons &gt; buildplate_covered(const PrintObject &amp;object) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1470</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a3dda6b564a324db929e50807ca95f3d5"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">Slic3r::PrintObjectSupportMaterial::MyLayersPtr</a></div><div class="ttdeci">std::vector&lt; MyLayer * &gt; MyLayersPtr</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:154</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_ad4c2a04b87513b31fd000ebb6d005a1c"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad4c2a04b87513b31fd000ebb6d005a1c">Slic3r::PrintObjectSupportMaterial::trim_support_layers_by_object</a></div><div class="ttdeci">void trim_support_layers_by_object(const PrintObject &amp;object, MyLayersPtr &amp;support_layers, const coordf_t gap_extra_above, const coordf_t gap_extra_below, const coordf_t gap_xy) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:3280</div></div>
<div class="ttc" id="alibslic3r_8h_html_a57f3510310e75de35abd65c9650b49f7"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a></div><div class="ttdeci">#define SCALED_EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:84</div></div>
<div class="ttc" id="alibslic3r_8h_html_a75f355966e0a97665eaf5a4c79baa7af"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a></div><div class="ttdeci">static constexpr double EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:52</div></div>
<div class="ttc" id="alzoconf_8h_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition</b> lzoconf.h:340</div></div>
<div class="ttc" id="anamespace_slic3r_html_a015388ff0752a25649a975078f7a5431"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">Slic3r::union_</a></div><div class="ttdeci">Slic3r::Polygons union_(const Slic3r::Polygons &amp;subject)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:690</div></div>
<div class="ttc" id="anamespace_slic3r_html_a06b86e5331aac1c640f8f7f40d798175"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a06b86e5331aac1c640f8f7f40d798175">Slic3r::trace</a></div><div class="ttdeci">void trace(unsigned int level, const char *message)</div><div class="ttdef"><b>Definition</b> utils.cpp:172</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1ba473d17b1ff2f352228b1053c52eba"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1ba473d17b1ff2f352228b1053c52eba">Slic3r::project_support_to_grid</a></div><div class="ttdeci">static std::pair&lt; Polygons, Polygons &gt; project_support_to_grid(const Layer &amp;layer, const SupportGridParams &amp;grid_params, const Polygons &amp;overhangs, Polygons *layer_buildplate_covered)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2615</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3139b5c30f46b41a991edc50308554f6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">Slic3r::expand</a></div><div class="ttdeci">Slic3r::Polygons expand(const Slic3r::Polygon &amp;polygon, const float delta, ClipperLib::JoinType joinType=DefaultJoinType, double miterLimit=DefaultMiterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.hpp:361</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5ec552d076296fd705739c608edc1580"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">Slic3r::offset</a></div><div class="ttdeci">Slic3r::Polygons offset(const Slic3r::Polygon &amp;polygon, const float delta, ClipperLib::JoinType joinType, double miterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:404</div></div>
<div class="ttc" id="anamespace_slic3r_html_a911aa2374e25ece2aefc6c30e0e34524"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a911aa2374e25ece2aefc6c30e0e34524">Slic3r::detect_bottom_contacts</a></div><div class="ttdeci">static PrintObjectSupportMaterial::MyLayer * detect_bottom_contacts(const SlicingParameters &amp;slicing_params, const PrintObjectSupportMaterial::SupportParams &amp;support_params, const PrintObject &amp;object, const Layer &amp;layer, const PrintObjectSupportMaterial::MyLayersPtr &amp;top_contacts, size_t contact_idx, std::deque&lt; PrintObjectSupportMaterial::MyLayer &gt; &amp;layer_storage, std::vector&lt; Polygons &gt; &amp;layer_support_areas, const Polygons &amp;supports_projected)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2483</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab4a593838c4a67f7ca75a318a9f707b2"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">Slic3r::polygons_append</a></div><div class="ttdeci">void polygons_append(Polygons &amp;dst, const ExPolygon &amp;src)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:374</div></div>
<div class="ttc" id="anamespace_slic3r_html_ae39547681b4c9f15f0d44712cdb01d6a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Slic3r::Polygons</a></div><div class="ttdeci">std::vector&lt; Polygon &gt; Polygons</div><div class="ttdef"><b>Definition</b> Polygon.hpp:14</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a6127b2a51f4a1e1a7aefc70d6677f7e7"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6127b2a51f4a1e1a7aefc70d6677f7e7">Slic3r::SlicingParameters::gap_object_support</a></div><div class="ttdeci">coordf_t gap_object_support</div><div class="ttdef"><b>Definition</b> Slicing.hpp:86</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_ae75919394f64528204ca434684c06d1b"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae75919394f64528204ca434684c06d1b">Slic3r::SlicingParameters::gap_support_object</a></div><div class="ttdeci">coordf_t gap_support_object</div><div class="ttdef"><b>Definition</b> Slicing.hpp:88</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00117">Slic3r::PrintObjectSupportMaterial::MyLayer::contact_polygons</a>, <a class="el" href="../../#l02483">Slic3r::detect_bottom_contacts()</a>, <a class="el" href="../../#l00120">Slic3r::PrintObjectSupportMaterial::MyLayer::enforcer_polygons</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00361">Slic3r::expand()</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00118">Slic3r::PrintObjectSupportMaterial::MyLayer::overhang_polygons</a>, <a class="el" href="../../#l00374">Slic3r::polygons_append()</a>, <a class="el" href="../../#l00131">Slic3r::Layer::print_z</a>, <a class="el" href="../../#l02615">Slic3r::project_support_to_grid()</a>, <a class="el" href="../../#l00084">SCALED_EPSILON</a>, <a class="el" href="../../#l00172">Slic3r::trace()</a>, and <a class="el" href="../../#l00690">Slic3r::union_()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_aaa65df1d83138e4b78ca85ec30f619e6_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_aaa65df1d83138e4b78ca85ec30f619e6_icgraph.svg" width="447" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1d22ac405c9441718736cfca8f799484" name="a1d22ac405c9441718736cfca8f799484"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d22ac405c9441718736cfca8f799484">&#9670;&#160;</a></span>build_plate_only()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PrintObjectSupportMaterial::build_plate_only </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  163</span>{ <span class="keywordflow">return</span> this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a63c1f7fa0e8ffece7c916dcb3716a4ef">has_support</a>() &amp;&amp; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_on_build_plate_only.value; }</div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a63c1f7fa0e8ffece7c916dcb3716a4ef"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a63c1f7fa0e8ffece7c916dcb3716a4ef">Slic3r::PrintObjectSupportMaterial::has_support</a></div><div class="ttdeci">bool has_support() const</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:162</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00162">has_support()</a>, and <a class="el" href="../../#l00253">m_object_config</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01470">buildplate_covered()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a1d22ac405c9441718736cfca8f799484_cgraph.svg" width="404" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a1d22ac405c9441718736cfca8f799484_icgraph.svg" width="635" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3abfb433ae14805f6bcb7d41b5cc1840" name="a3abfb433ae14805f6bcb7d41b5cc1840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3abfb433ae14805f6bcb7d41b5cc1840">&#9670;&#160;</a></span>buildplate_covered()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; Slic3r::PrintObjectSupportMaterial::buildplate_covered </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1471</span>{</div>
<div class="line"><span class="lineno"> 1472</span>    <span class="comment">// Build support on a build plate only? If so, then collect and union all the surfaces below the current layer.</span></div>
<div class="line"><span class="lineno"> 1473</span>    <span class="comment">// Unfortunately this is an inherently serial process.</span></div>
<div class="line"><span class="lineno"> 1474</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span>            buildplate_only = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1d22ac405c9441718736cfca8f799484">build_plate_only</a>();</div>
<div class="line"><span class="lineno"> 1475</span>    std::vector&lt;Polygons&gt; <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>;</div>
<div class="line"><span class="lineno"> 1476</span>    <span class="keywordflow">if</span> (buildplate_only) {</div>
<div class="line"><span class="lineno"> 1477</span>        BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::buildplate_covered() - start&quot;</span>;</div>
<div class="line"><span class="lineno"> 1478</span>        <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>.assign(<span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>(), <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>());</div>
<div class="line"><span class="lineno"> 1479</span>        <span class="comment">//FIXME prefix sum algorithm, parallelize it! Parallelization will also likely be more numerically stable.</span></div>
<div class="line"><span class="lineno"> 1480</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = 1; layer_id &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>(); ++ layer_id) {</div>
<div class="line"><span class="lineno"> 1481</span>            <span class="keyword">const</span> Layer &amp;lower_layer = *<span class="keywordtype">object</span>.layers()[layer_id-1];</div>
<div class="line"><span class="lineno"> 1482</span>            <span class="comment">// Merge the new slices with the preceding slices.</span></div>
<div class="line"><span class="lineno"> 1483</span>            <span class="comment">// Apply the safety offset to the newly added polygons, so they will connect</span></div>
<div class="line"><span class="lineno"> 1484</span>            <span class="comment">// with the polygons collected before,</span></div>
<div class="line"><span class="lineno"> 1485</span>            <span class="comment">// but don&#39;t apply the safety offset during the union operation as it would</span></div>
<div class="line"><span class="lineno"> 1486</span>            <span class="comment">// inflate the polygons over and over.</span></div>
<div class="line"><span class="lineno"> 1487</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;covered = <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>[layer_id];</div>
<div class="line"><span class="lineno"> 1488</span>            covered = <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>[layer_id - 1];</div>
<div class="line"><span class="lineno"> 1489</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(covered, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(lower_layer.lslices, <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(0.01)));</div>
<div class="line"><span class="lineno"> 1490</span>            covered = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(covered);</div>
<div class="line"><span class="lineno"> 1491</span>        }</div>
<div class="line"><span class="lineno"> 1492</span>        BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::buildplate_covered() - end&quot;</span>;</div>
<div class="line"><span class="lineno"> 1493</span>    }</div>
<div class="line"><span class="lineno"> 1494</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>;</div>
<div class="line"><span class="lineno"> 1495</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a1d22ac405c9441718736cfca8f799484"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1d22ac405c9441718736cfca8f799484">Slic3r::PrintObjectSupportMaterial::build_plate_only</a></div><div class="ttdeci">bool build_plate_only() const</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:163</div></div>
<div class="ttc" id="alibslic3r_8h_html_a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a></div><div class="ttdeci">#define scale_(val)</div><div class="ttdef"><b>Definition</b> libslic3r.h:81</div></div>
<div class="ttc" id="alzoconf_8h_html_a809275ccd755fb7b88661d952134b14d"><div class="ttname"><a href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a></div><div class="ttdeci">lzo_uint size</div><div class="ttdef"><b>Definition</b> lzoconf.h:378</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00163">build_plate_only()</a>, <a class="el" href="../../#l01470">buildplate_covered()</a>, <a class="el" href="../../#l00148">Slic3r::Layer::lslices</a>, <a class="el" href="../../#l00404">Slic3r::offset()</a>, <a class="el" href="../../#l00374">Slic3r::polygons_append()</a>, <a class="el" href="../../#l00081">scale_</a>, <a class="el" href="../../#l00378">size</a>, and <a class="el" href="../../#l00690">Slic3r::union_()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01470">buildplate_covered()</a>, and <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a3abfb433ae14805f6bcb7d41b5cc1840_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a3abfb433ae14805f6bcb7d41b5cc1840_icgraph.svg" width="415" height="76"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa91db86d2d6af50dc0cb0c8b3b5ffda3" name="aa91db86d2d6af50dc0cb0c8b3b5ffda3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa91db86d2d6af50dc0cb0c8b3b5ffda3">&#9670;&#160;</a></span>generate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PrintObjectSupportMaterial::generate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  462</span>{</div>
<div class="line"><span class="lineno">  463</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Start&quot;</span>;</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>    <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> max_object_layer_height = 0.;</div>
<div class="line"><span class="lineno">  466</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <span class="keywordtype">object</span>.layer_count(); ++ i)</div>
<div class="line"><span class="lineno">  467</span>        max_object_layer_height = std::max(max_object_layer_height, <span class="keywordtype">object</span>.layers()[i]-&gt;height);</div>
<div class="line"><span class="lineno">  468</span> </div>
<div class="line"><span class="lineno">  469</span>    <span class="comment">// Layer instances will be allocated by std::deque and they will be kept until the end of this function call.</span></div>
<div class="line"><span class="lineno">  470</span>    <span class="comment">// The layers will be referenced by various LayersPtr (of type std::vector&lt;Layer*&gt;)</span></div>
<div class="line"><span class="lineno">  471</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> layer_storage;</div>
<div class="line"><span class="lineno">  472</span> </div>
<div class="line"><span class="lineno">  473</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating top contacts&quot;</span>;</div>
<div class="line"><span class="lineno">  474</span> </div>
<div class="line"><span class="lineno">  475</span>    <span class="comment">// Per object layer projection of the object below the layer into print bed.</span></div>
<div class="line"><span class="lineno">  476</span>    std::vector&lt;Polygons&gt; <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a> = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>(<span class="keywordtype">object</span>);</div>
<div class="line"><span class="lineno">  477</span> </div>
<div class="line"><span class="lineno">  478</span>    <span class="comment">// Determine the top contact surfaces of the support, defined as:</span></div>
<div class="line"><span class="lineno">  479</span>    <span class="comment">// contact = overhangs - clearance + margin</span></div>
<div class="line"><span class="lineno">  480</span>    <span class="comment">// This method is responsible for identifying what contact surfaces</span></div>
<div class="line"><span class="lineno">  481</span>    <span class="comment">// should the support material expose to the object in order to guarantee</span></div>
<div class="line"><span class="lineno">  482</span>    <span class="comment">// that it will be effective, regardless of how it&#39;s built below.</span></div>
<div class="line"><span class="lineno">  483</span>    <span class="comment">// If raft is to be generated, the 1st top_contact layer will contain the 1st object layer silhouette without holes.</span></div>
<div class="line"><span class="lineno">  484</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> top_contacts = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2e498c176aa13f8c7bcf10044d1304fa">top_contact_layers</a>(<span class="keywordtype">object</span>, buildplate_covered, layer_storage);</div>
<div class="line"><span class="lineno">  485</span>    <span class="keywordflow">if</span> (top_contacts.empty())</div>
<div class="line"><span class="lineno">  486</span>        <span class="comment">// Nothing is supported, no supports are generated.</span></div>
<div class="line"><span class="lineno">  487</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  488</span> </div>
<div class="line"><span class="lineno">  489</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno">  490</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  491</span> </div>
<div class="line"><span class="lineno">  492</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  493</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> iRun = 0;</div>
<div class="line"><span class="lineno">  494</span>    iRun ++;</div>
<div class="line"><span class="lineno">  495</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> MyLayer *layer : top_contacts)</div>
<div class="line"><span class="lineno">  496</span>        <a class="code hl_namespace" href="../../de/db8/namespace_slic3r.html">Slic3r</a>::<a class="code hl_enumvalue" href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">SVG</a>::export_expolygons(</div>
<div class="line"><span class="lineno">  497</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-top-contacts-%d-%lf.svg&quot;</span>, iRun, layer-&gt;print_z), </div>
<div class="line"><span class="lineno">  498</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(layer-&gt;polygons));</div>
<div class="line"><span class="lineno">  499</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  500</span> </div>
<div class="line"><span class="lineno">  501</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating bottom contacts&quot;</span>;</div>
<div class="line"><span class="lineno">  502</span> </div>
<div class="line"><span class="lineno">  503</span>    <span class="comment">// Determine the bottom contact surfaces of the supports over the top surfaces of the object.</span></div>
<div class="line"><span class="lineno">  504</span>    <span class="comment">// Depending on whether the support is soluble or not, the contact layer thickness is decided.</span></div>
<div class="line"><span class="lineno">  505</span>    <span class="comment">// layer_support_areas contains the per object layer support areas. These per object layer support areas</span></div>
<div class="line"><span class="lineno">  506</span>    <span class="comment">// may get merged and trimmed by this-&gt;generate_base_layers() if the support layers are not synchronized with object layers.</span></div>
<div class="line"><span class="lineno">  507</span>    std::vector&lt;Polygons&gt; layer_support_areas;</div>
<div class="line"><span class="lineno">  508</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> bottom_contacts = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aaa65df1d83138e4b78ca85ec30f619e6">bottom_contact_layers_and_layer_support_areas</a>(</div>
<div class="line"><span class="lineno">  509</span>        <span class="keywordtype">object</span>, top_contacts, <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>,</div>
<div class="line"><span class="lineno">  510</span>        layer_storage, layer_support_areas);</div>
<div class="line"><span class="lineno">  511</span> </div>
<div class="line"><span class="lineno">  512</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno">  513</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  514</span> </div>
<div class="line"><span class="lineno">  515</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  516</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = 0; layer_id &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>(); ++ layer_id)</div>
<div class="line"><span class="lineno">  517</span>        <a class="code hl_function" href="../../db/dcf/class_slic3r_1_1_s_v_g.html#a2fbe0063ae23696aefaf04bda21dd044">Slic3r::SVG::export_expolygons</a>(</div>
<div class="line"><span class="lineno">  518</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-areas-%d-%lf.svg&quot;</span>, iRun, <span class="keywordtype">object</span>.layers()[layer_id]-&gt;print_z), </div>
<div class="line"><span class="lineno">  519</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(layer_support_areas[layer_id]));</div>
<div class="line"><span class="lineno">  520</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  521</span> </div>
<div class="line"><span class="lineno">  522</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating intermediate layers - indices&quot;</span>;</div>
<div class="line"><span class="lineno">  523</span> </div>
<div class="line"><span class="lineno">  524</span>    <span class="comment">// Allocate empty layers between the top / bottom support contact layers</span></div>
<div class="line"><span class="lineno">  525</span>    <span class="comment">// as placeholders for the base and intermediate support layers.</span></div>
<div class="line"><span class="lineno">  526</span>    <span class="comment">// The layers may or may not be synchronized with the object layers, depending on the configuration.</span></div>
<div class="line"><span class="lineno">  527</span>    <span class="comment">// For example, a single nozzle multi material printing will need to generate a waste tower, which in turn</span></div>
<div class="line"><span class="lineno">  528</span>    <span class="comment">// wastes less material, if there are as little tool changes as possible.</span></div>
<div class="line"><span class="lineno">  529</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> intermediate_layers = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac12b23804745399e2f6c5ffc0d49eeb3">raft_and_intermediate_support_layers</a>(</div>
<div class="line"><span class="lineno">  530</span>        <span class="keywordtype">object</span>, bottom_contacts, top_contacts, layer_storage);</div>
<div class="line"><span class="lineno">  531</span> </div>
<div class="line"><span class="lineno">  532</span>    this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad4c2a04b87513b31fd000ebb6d005a1c">trim_support_layers_by_object</a>(<span class="keywordtype">object</span>, top_contacts, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae75919394f64528204ca434684c06d1b">gap_support_object</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6127b2a51f4a1e1a7aefc70d6677f7e7">gap_object_support</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a>);</div>
<div class="line"><span class="lineno">  533</span> </div>
<div class="line"><span class="lineno">  534</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  535</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> MyLayer *layer : top_contacts)</div>
<div class="line"><span class="lineno">  536</span>        <a class="code hl_namespace" href="../../de/db8/namespace_slic3r.html">Slic3r</a>::<a class="code hl_enumvalue" href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">SVG</a>::export_expolygons(</div>
<div class="line"><span class="lineno">  537</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-top-contacts-trimmed-by-object-%d-%lf.svg&quot;</span>, iRun, layer-&gt;print_z), </div>
<div class="line"><span class="lineno">  538</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(layer-&gt;polygons));</div>
<div class="line"><span class="lineno">  539</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  540</span> </div>
<div class="line"><span class="lineno">  541</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating base layers&quot;</span>;</div>
<div class="line"><span class="lineno">  542</span> </div>
<div class="line"><span class="lineno">  543</span>    <span class="comment">// Fill in intermediate layers between the top / bottom support contact layers, trim them by the object.</span></div>
<div class="line"><span class="lineno">  544</span>    this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a84b13a000b19fb37af00912cb894deff">generate_base_layers</a>(<span class="keywordtype">object</span>, bottom_contacts, top_contacts, intermediate_layers, layer_support_areas);</div>
<div class="line"><span class="lineno">  545</span> </div>
<div class="line"><span class="lineno">  546</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  547</span>    <span class="keywordflow">for</span> (MyLayersPtr::const_iterator it = intermediate_layers.begin(); it != intermediate_layers.end(); ++ it)</div>
<div class="line"><span class="lineno">  548</span>        <a class="code hl_function" href="../../db/dcf/class_slic3r_1_1_s_v_g.html#a2fbe0063ae23696aefaf04bda21dd044">Slic3r::SVG::export_expolygons</a>(</div>
<div class="line"><span class="lineno">  549</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-base-layers-%d-%lf.svg&quot;</span>, iRun, (*it)-&gt;print_z), </div>
<div class="line"><span class="lineno">  550</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>((*it)-&gt;polygons));</div>
<div class="line"><span class="lineno">  551</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  552</span> </div>
<div class="line"><span class="lineno">  553</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Trimming top contacts by bottom contacts&quot;</span>;</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>    <span class="comment">// Because the top and bottom contacts are thick slabs, they may overlap causing over extrusion </span></div>
<div class="line"><span class="lineno">  556</span>    <span class="comment">// and unwanted strong bonds to the object.</span></div>
<div class="line"><span class="lineno">  557</span>    <span class="comment">// Rather trim the top contacts by their overlapping bottom contacts to leave a gap instead of over extruding</span></div>
<div class="line"><span class="lineno">  558</span>    <span class="comment">// top contacts over the bottom contacts.</span></div>
<div class="line"><span class="lineno">  559</span>    this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aaf631a8aa30155225b24ac24b09df885">trim_top_contacts_by_bottom_contacts</a>(<span class="keywordtype">object</span>, bottom_contacts, top_contacts);</div>
<div class="line"><span class="lineno">  560</span> </div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating interfaces&quot;</span>;</div>
<div class="line"><span class="lineno">  563</span> </div>
<div class="line"><span class="lineno">  564</span>    <span class="comment">// Propagate top / bottom contact layers to generate interface layers </span></div>
<div class="line"><span class="lineno">  565</span>    <span class="comment">// and base interface layers (for soluble interface / non souble base only)</span></div>
<div class="line"><span class="lineno">  566</span>    <span class="keyword">auto</span> [interface_layers, base_interface_layers] = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a84ef3171e46d333d581e2af74a88b0bc">generate_interface_layers</a>(bottom_contacts, top_contacts, intermediate_layers, layer_storage);</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating raft&quot;</span>;</div>
<div class="line"><span class="lineno">  569</span> </div>
<div class="line"><span class="lineno">  570</span>    <span class="comment">// If raft is to be generated, the 1st top_contact layer will contain the 1st object layer silhouette with holes filled.</span></div>
<div class="line"><span class="lineno">  571</span>    <span class="comment">// There is also a 1st intermediate layer containing bases of support columns.</span></div>
<div class="line"><span class="lineno">  572</span>    <span class="comment">// Inflate the bases of the support columns and create the raft base under the object.</span></div>
<div class="line"><span class="lineno">  573</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> raft_layers = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a9eec033f0dc8429eb500bfc015fbba2c">generate_raft_base</a>(<span class="keywordtype">object</span>, top_contacts, interface_layers, base_interface_layers, intermediate_layers, layer_storage);</div>
<div class="line"><span class="lineno">  574</span> </div>
<div class="line"><span class="lineno">  575</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno">  576</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  577</span> </div>
<div class="line"><span class="lineno">  578</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  579</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> MyLayer *l : interface_layers)</div>
<div class="line"><span class="lineno">  580</span>        <a class="code hl_namespace" href="../../de/db8/namespace_slic3r.html">Slic3r</a>::<a class="code hl_enumvalue" href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">SVG</a>::export_expolygons(</div>
<div class="line"><span class="lineno">  581</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-interface-layers-%d-%lf.svg&quot;</span>, iRun, l-&gt;print_z), </div>
<div class="line"><span class="lineno">  582</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(l-&gt;polygons));</div>
<div class="line"><span class="lineno">  583</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> MyLayer *l : base_interface_layers)</div>
<div class="line"><span class="lineno">  584</span>        <a class="code hl_namespace" href="../../de/db8/namespace_slic3r.html">Slic3r</a>::<a class="code hl_enumvalue" href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">SVG</a>::export_expolygons(</div>
<div class="line"><span class="lineno">  585</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-base-interface-layers-%d-%lf.svg&quot;</span>, iRun, l-&gt;print_z), </div>
<div class="line"><span class="lineno">  586</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>(l-&gt;polygons));</div>
<div class="line"><span class="lineno">  587</span><span class="preprocessor">#endif </span><span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  588</span> </div>
<div class="line"><span class="lineno">  589</span><span class="comment">/*</span></div>
<div class="line"><span class="lineno">  590</span><span class="comment">    // Clip with the pillars.</span></div>
<div class="line"><span class="lineno">  591</span><span class="comment">    if (! shape.empty()) {</span></div>
<div class="line"><span class="lineno">  592</span><span class="comment">        this-&gt;clip_with_shape(interface, shape);</span></div>
<div class="line"><span class="lineno">  593</span><span class="comment">        this-&gt;clip_with_shape(base, shape);</span></div>
<div class="line"><span class="lineno">  594</span><span class="comment">    }</span></div>
<div class="line"><span class="lineno">  595</span><span class="comment">*/</span></div>
<div class="line"><span class="lineno">  596</span> </div>
<div class="line"><span class="lineno">  597</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Creating layers&quot;</span>;</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span><span class="comment">// For debugging purposes, one may want to show only some of the support extrusions.</span></div>
<div class="line"><span class="lineno">  600</span><span class="comment">//    raft_layers.clear();</span></div>
<div class="line"><span class="lineno">  601</span><span class="comment">//    bottom_contacts.clear();</span></div>
<div class="line"><span class="lineno">  602</span><span class="comment">//    top_contacts.clear();</span></div>
<div class="line"><span class="lineno">  603</span><span class="comment">//    intermediate_layers.clear();</span></div>
<div class="line"><span class="lineno">  604</span><span class="comment">//    interface_layers.clear();</span></div>
<div class="line"><span class="lineno">  605</span> </div>
<div class="line"><span class="lineno">  606</span>    <span class="comment">// Install support layers into the object.</span></div>
<div class="line"><span class="lineno">  607</span>    <span class="comment">// A support layer installed on a PrintObject has a unique print_z.</span></div>
<div class="line"><span class="lineno">  608</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> layers_sorted;</div>
<div class="line"><span class="lineno">  609</span>    layers_sorted.reserve(raft_layers.size() + bottom_contacts.size() + top_contacts.size() + intermediate_layers.size() + interface_layers.size() + base_interface_layers.size());</div>
<div class="line"><span class="lineno">  610</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">layers_append</a>(layers_sorted, raft_layers);</div>
<div class="line"><span class="lineno">  611</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">layers_append</a>(layers_sorted, bottom_contacts);</div>
<div class="line"><span class="lineno">  612</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">layers_append</a>(layers_sorted, top_contacts);</div>
<div class="line"><span class="lineno">  613</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">layers_append</a>(layers_sorted, intermediate_layers);</div>
<div class="line"><span class="lineno">  614</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">layers_append</a>(layers_sorted, interface_layers);</div>
<div class="line"><span class="lineno">  615</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">layers_append</a>(layers_sorted, base_interface_layers);</div>
<div class="line"><span class="lineno">  616</span>    <span class="comment">// Sort the layers lexicographically by a raising print_z and a decreasing height.</span></div>
<div class="line"><span class="lineno">  617</span>    std::sort(layers_sorted.begin(), layers_sorted.end(), [](<span class="keyword">auto</span> *l1, <span class="keyword">auto</span> *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">l2</a>) { return *l1 &lt; *l2; });</div>
<div class="line"><span class="lineno">  618</span> </div>
<div class="line"><span class="lineno">  619</span>    <span class="comment">// BBS: MusangKing - erase mini layer heights (&lt; 0.08mm) arised by top/bottom_z_distance &amp; top_contacts under variable layer height</span></div>
<div class="line"><span class="lineno">  620</span>    <span class="keywordflow">if</span> (this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad404e6eecb194f163f453cbc583f81eb">synchronize_layers</a>() &amp;&amp; !<span class="keywordtype">object</span>.slicing_parameters().soluble_interface) {</div>
<div class="line"><span class="lineno">  621</span>        <span class="keyword">auto</span> thres = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno">  622</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; layers_sorted.size() - 1; ++i) {</div>
<div class="line"><span class="lineno">  623</span>            <span class="keyword">auto</span>&amp; lowr = layers_sorted[i - 1];</div>
<div class="line"><span class="lineno">  624</span>            <span class="keyword">auto</span>&amp; curr = layers_sorted[i];</div>
<div class="line"><span class="lineno">  625</span>            <span class="keyword">auto</span>&amp; higr = layers_sorted[i + 1];</div>
<div class="line"><span class="lineno">  626</span>            <span class="comment">// &quot;Rounding&quot; suspicious top/bottom contacts</span></div>
<div class="line"><span class="lineno">  627</span>            <span class="keywordflow">if</span> (curr-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a> || curr-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">sltBottomContact</a>) {</div>
<div class="line"><span class="lineno">  628</span>                <span class="comment">// Check adjacent-layer print_z diffs</span></div>
<div class="line"><span class="lineno">  629</span>                <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> height_low = curr-&gt;print_z - lowr-&gt;print_z;</div>
<div class="line"><span class="lineno">  630</span>                <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> height_high = higr-&gt;print_z - curr-&gt;print_z;</div>
<div class="line"><span class="lineno">  631</span>                <span class="keywordflow">if</span> (height_low &lt; thres || height_high &lt; thres) {</div>
<div class="line"><span class="lineno">  632</span>                    <span class="comment">// Mark to-be-deleted layer as Unknown type</span></div>
<div class="line"><span class="lineno">  633</span>                    curr-&gt;layer_type = <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a1379809e0eb19458a4cbf4c2c2efe192">sltUnknown</a>;</div>
<div class="line"><span class="lineno">  634</span>                }</div>
<div class="line"><span class="lineno">  635</span>            }</div>
<div class="line"><span class="lineno">  636</span>        }</div>
<div class="line"><span class="lineno">  637</span>        <span class="comment">// Retains the order</span></div>
<div class="line"><span class="lineno">  638</span>        layers_sorted.erase(std::remove_if(layers_sorted.begin(), layers_sorted.end(), [](MyLayer* l) {return l-&gt;layer_type == sltUnknown; }), layers_sorted.end());</div>
<div class="line"><span class="lineno">  639</span>    }</div>
<div class="line"><span class="lineno">  640</span> </div>
<div class="line"><span class="lineno">  641</span>    <span class="keywordtype">int</span> layer_id = 0;</div>
<div class="line"><span class="lineno">  642</span>    <span class="keywordtype">int</span> layer_id_interface = 0;</div>
<div class="line"><span class="lineno">  643</span>    assert(<span class="keywordtype">object</span>.support_layers().<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>());</div>
<div class="line"><span class="lineno">  644</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; layers_sorted.size();) {</div>
<div class="line"><span class="lineno">  645</span>        <span class="comment">// Find the last layer with roughly the same print_z, find the minimum layer height of all.</span></div>
<div class="line"><span class="lineno">  646</span>        <span class="comment">// Due to the floating point inaccuracies, the print_z may not be the same even if in theory they should.</span></div>
<div class="line"><span class="lineno">  647</span>        <span class="keywordtype">size_t</span> j = i + 1;</div>
<div class="line"><span class="lineno">  648</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a> = layers_sorted[i]-&gt;print_z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno">  649</span>        <span class="keywordflow">for</span> (; j &lt; layers_sorted.size() &amp;&amp; layers_sorted[j]-&gt;print_z &lt;= <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a>; ++j) ;</div>
<div class="line"><span class="lineno">  650</span>        <span class="comment">// Assign an average print_z to the set of layers with nearly equal print_z.</span></div>
<div class="line"><span class="lineno">  651</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> zavg = 0.5 * (layers_sorted[i]-&gt;print_z + layers_sorted[j - 1]-&gt;print_z);</div>
<div class="line"><span class="lineno">  652</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> height_min = layers_sorted[i]-&gt;height;</div>
<div class="line"><span class="lineno">  653</span>        <span class="keywordtype">bool</span>     <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  654</span>        <span class="comment">// For snug supports, layers where the direction of the support interface shall change are accounted for.</span></div>
<div class="line"><span class="lineno">  655</span>        <span class="keywordtype">size_t</span>   num_interfaces = 0;</div>
<div class="line"><span class="lineno">  656</span>        <span class="keywordtype">size_t</span>   num_top_contacts = 0;</div>
<div class="line"><span class="lineno">  657</span>        <span class="keywordtype">double</span>   top_contact_bottom_z = 0;</div>
<div class="line"><span class="lineno">  658</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> u = i; u &lt; j; ++u) {</div>
<div class="line"><span class="lineno">  659</span>            MyLayer &amp;layer = *layers_sorted[u];</div>
<div class="line"><span class="lineno">  660</span>            <span class="keywordflow">if</span> (! layer.polygons.empty()) {</div>
<div class="line"><span class="lineno">  661</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>             = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  662</span>                num_interfaces   += <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ac29a0976cd6f5ed3ee83af70c7930ae0">one_of</a>(layer.layer_type, <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#ac3ba5210a9b2818784aa83019db66410">support_types_interface</a>);</div>
<div class="line"><span class="lineno">  663</span>                <span class="keywordflow">if</span> (layer.layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>) {</div>
<div class="line"><span class="lineno">  664</span>                    ++ num_top_contacts;</div>
<div class="line"><span class="lineno">  665</span>                    assert(num_top_contacts &lt;= 1);</div>
<div class="line"><span class="lineno">  666</span>                    <span class="comment">// All top contact layers sharing this print_z shall also share bottom_z.</span></div>
<div class="line"><span class="lineno">  667</span>                    <span class="comment">//assert(num_top_contacts == 1 || (top_contact_bottom_z - layer.bottom_z) &lt; EPSILON);</span></div>
<div class="line"><span class="lineno">  668</span>                    top_contact_bottom_z = layer.bottom_z;</div>
<div class="line"><span class="lineno">  669</span>                }</div>
<div class="line"><span class="lineno">  670</span>            }</div>
<div class="line"><span class="lineno">  671</span>            layer.print_z = zavg;</div>
<div class="line"><span class="lineno">  672</span>            height_min = std::min(height_min, layer.height);</div>
<div class="line"><span class="lineno">  673</span>        }</div>
<div class="line"><span class="lineno">  674</span>        <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>) {</div>
<div class="line"><span class="lineno">  675</span>            <span class="comment">// Here the upper_layer and lower_layer pointers are left to null at the support layers, </span></div>
<div class="line"><span class="lineno">  676</span>            <span class="comment">// as they are never used. These pointers are candidates for removal.</span></div>
<div class="line"><span class="lineno">  677</span>            <span class="keywordtype">bool</span>   this_layer_contacts_only = num_top_contacts &gt; 0 &amp;&amp; num_top_contacts == num_interfaces;</div>
<div class="line"><span class="lineno">  678</span>            <span class="keywordtype">size_t</span> this_layer_id_interface  = layer_id_interface;</div>
<div class="line"><span class="lineno">  679</span>            <span class="keywordflow">if</span> (this_layer_contacts_only) {</div>
<div class="line"><span class="lineno">  680</span>                <span class="comment">// Find a supporting layer for its interface ID.</span></div>
<div class="line"><span class="lineno">  681</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = <span class="keywordtype">object</span>.support_layers().<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a292bde1fa6cfb35387c703311926a153">rbegin</a>(); it != <span class="keywordtype">object</span>.support_layers().<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a88704abbde60f05972db69c7a816177d">rend</a>(); ++ it)</div>
<div class="line"><span class="lineno">  682</span>                    <span class="keywordflow">if</span> (<span class="keyword">const</span> SupportLayer &amp;other_layer = **it; std::abs(other_layer.print_z - top_contact_bottom_z) &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) {</div>
<div class="line"><span class="lineno">  683</span>                        <span class="comment">// other_layer supports this top contact layer. Assign a different support interface direction to this layer</span></div>
<div class="line"><span class="lineno">  684</span>                        <span class="comment">// from the layer that supports it.</span></div>
<div class="line"><span class="lineno">  685</span>                        this_layer_id_interface = other_layer.interface_id() + 1;</div>
<div class="line"><span class="lineno">  686</span>                    }</div>
<div class="line"><span class="lineno">  687</span>            }</div>
<div class="line"><span class="lineno">  688</span>            <span class="keywordtype">object</span>.add_support_layer(layer_id ++, this_layer_id_interface, height_min, zavg);</div>
<div class="line"><span class="lineno">  689</span>            <span class="keywordflow">if</span> (num_interfaces &amp;&amp; ! this_layer_contacts_only)</div>
<div class="line"><span class="lineno">  690</span>                ++ layer_id_interface;</div>
<div class="line"><span class="lineno">  691</span>        }</div>
<div class="line"><span class="lineno">  692</span>        i = j;</div>
<div class="line"><span class="lineno">  693</span>    }</div>
<div class="line"><span class="lineno">  694</span> </div>
<div class="line"><span class="lineno">  695</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - Generating tool paths&quot;</span>;</div>
<div class="line"><span class="lineno">  696</span> </div>
<div class="line"><span class="lineno">  697</span><span class="preprocessor">#if 0 </span><span class="comment">// #ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  698</span>    {</div>
<div class="line"><span class="lineno">  699</span>        <span class="keywordtype">size_t</span> layer_id = 0;</div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(layers_sorted.size());) {</div>
<div class="line"><span class="lineno">  701</span>            <span class="comment">// Find the last layer with roughly the same print_z, find the minimum layer height of all.</span></div>
<div class="line"><span class="lineno">  702</span>            <span class="comment">// Due to the floating point inaccuracies, the print_z may not be the same even if in theory they should.</span></div>
<div class="line"><span class="lineno">  703</span>            <span class="keywordtype">int</span> j = i + 1;</div>
<div class="line"><span class="lineno">  704</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a> = layers_sorted[i]-&gt;print_z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno">  705</span>            <span class="keywordtype">bool</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  706</span>            <span class="keywordflow">for</span> (; j &lt; layers_sorted.size() &amp;&amp; layers_sorted[j]-&gt;print_z &lt;= <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a>; ++j)</div>
<div class="line"><span class="lineno">  707</span>                <span class="keywordflow">if</span> (!layers_sorted[j]-&gt;polygons.empty())</div>
<div class="line"><span class="lineno">  708</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  709</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>) {</div>
<div class="line"><span class="lineno">  710</span>                export_print_z_polygons_to_svg(</div>
<div class="line"><span class="lineno">  711</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-%d-%lf-before.svg&quot;</span>, iRun, layers_sorted[i]-&gt;print_z).c_str(),</div>
<div class="line"><span class="lineno">  712</span>                    layers_sorted.data() + i, j - i);</div>
<div class="line"><span class="lineno">  713</span>                export_print_z_polygons_and_extrusions_to_svg(</div>
<div class="line"><span class="lineno">  714</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-w-fills-%d-%lf-before.svg&quot;</span>, iRun, layers_sorted[i]-&gt;print_z).c_str(),</div>
<div class="line"><span class="lineno">  715</span>                    layers_sorted.data() + i, j - i,</div>
<div class="line"><span class="lineno">  716</span>                    *<span class="keywordtype">object</span>.support_layers()[layer_id]);</div>
<div class="line"><span class="lineno">  717</span>                ++layer_id;</div>
<div class="line"><span class="lineno">  718</span>            }</div>
<div class="line"><span class="lineno">  719</span>            i = j;</div>
<div class="line"><span class="lineno">  720</span>        }</div>
<div class="line"><span class="lineno">  721</span>    }</div>
<div class="line"><span class="lineno">  722</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span><span class="preprocessor">#if 0 </span><span class="comment">// #ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  725</span>    <span class="comment">// check bounds</span></div>
<div class="line"><span class="lineno">  726</span>    std::ofstream <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>;</div>
<div class="line"><span class="lineno">  727</span>    <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.open(<span class="stringliteral">&quot;./SVG/ns_support_layers.txt&quot;</span>);</div>
<div class="line"><span class="lineno">  728</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.is_open()) {</div>
<div class="line"><span class="lineno">  729</span>        <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <span class="stringliteral">&quot;### Support Layers ###&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  730</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; i : <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>.support_layers()) {</div>
<div class="line"><span class="lineno">  731</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; i-&gt;print_z &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno">  732</span>        }</div>
<div class="line"><span class="lineno">  733</span>    }</div>
<div class="line"><span class="lineno">  734</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  735</span> </div>
<div class="line"><span class="lineno">  736</span>    <span class="comment">// Generate the actual toolpaths and save them into each layer.</span></div>
<div class="line"><span class="lineno">  737</span>    this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#af1f16d63ec06800caba4cec368ab1637">generate_toolpaths</a>(<span class="keywordtype">object</span>.support_layers(), raft_layers, bottom_contacts, top_contacts, intermediate_layers, interface_layers, base_interface_layers);</div>
<div class="line"><span class="lineno">  738</span> </div>
<div class="line"><span class="lineno">  739</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno">  740</span>    {</div>
<div class="line"><span class="lineno">  741</span>        <span class="keywordtype">size_t</span> layer_id = 0;</div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(layers_sorted.size());) {</div>
<div class="line"><span class="lineno">  743</span>            <span class="comment">// Find the last layer with roughly the same print_z, find the minimum layer height of all.</span></div>
<div class="line"><span class="lineno">  744</span>            <span class="comment">// Due to the floating point inaccuracies, the print_z may not be the same even if in theory they should.</span></div>
<div class="line"><span class="lineno">  745</span>            <span class="keywordtype">int</span> j = i + 1;</div>
<div class="line"><span class="lineno">  746</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a> = layers_sorted[i]-&gt;print_z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno">  747</span>            <span class="keywordtype">bool</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  748</span>            <span class="keywordflow">for</span> (; j &lt; layers_sorted.size() &amp;&amp; layers_sorted[j]-&gt;print_z &lt;= <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a>; ++j)</div>
<div class="line"><span class="lineno">  749</span>                <span class="keywordflow">if</span> (! layers_sorted[j]-&gt;polygons.empty())</div>
<div class="line"><span class="lineno">  750</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a> = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  751</span>            <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>) {</div>
<div class="line"><span class="lineno">  752</span>                export_print_z_polygons_to_svg(</div>
<div class="line"><span class="lineno">  753</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-%d-%lf.svg&quot;</span>, iRun, layers_sorted[i]-&gt;print_z).c_str(),</div>
<div class="line"><span class="lineno">  754</span>                    layers_sorted.data() + i, j - i);</div>
<div class="line"><span class="lineno">  755</span>                export_print_z_polygons_and_extrusions_to_svg(</div>
<div class="line"><span class="lineno">  756</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-w-fills-%d-%lf.svg&quot;</span>, iRun, layers_sorted[i]-&gt;print_z).c_str(),</div>
<div class="line"><span class="lineno">  757</span>                    layers_sorted.data() + i, j - i,</div>
<div class="line"><span class="lineno">  758</span>                    *<span class="keywordtype">object</span>.support_layers()[layer_id]);</div>
<div class="line"><span class="lineno">  759</span>                ++layer_id;</div>
<div class="line"><span class="lineno">  760</span>            }</div>
<div class="line"><span class="lineno">  761</span>            i = j;</div>
<div class="line"><span class="lineno">  762</span>        }</div>
<div class="line"><span class="lineno">  763</span>    }</div>
<div class="line"><span class="lineno">  764</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno">  765</span> </div>
<div class="line"><span class="lineno">  766</span>    BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;Support generator - End&quot;</span>;</div>
<div class="line"><span class="lineno">  767</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2e498c176aa13f8c7bcf10044d1304fa"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2e498c176aa13f8c7bcf10044d1304fa">Slic3r::PrintObjectSupportMaterial::top_contact_layers</a></div><div class="ttdeci">MyLayersPtr top_contact_layers(const PrintObject &amp;object, const std::vector&lt; Polygons &gt; &amp;buildplate_covered, MyLayerStorage &amp;layer_storage) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2208</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a84b13a000b19fb37af00912cb894deff"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a84b13a000b19fb37af00912cb894deff">Slic3r::PrintObjectSupportMaterial::generate_base_layers</a></div><div class="ttdeci">void generate_base_layers(const PrintObject &amp;object, const MyLayersPtr &amp;bottom_contacts, const MyLayersPtr &amp;top_contacts, MyLayersPtr &amp;intermediate_layers, const std::vector&lt; Polygons &gt; &amp;layer_support_areas) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:3127</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a84ef3171e46d333d581e2af74a88b0bc"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a84ef3171e46d333d581e2af74a88b0bc">Slic3r::PrintObjectSupportMaterial::generate_interface_layers</a></div><div class="ttdeci">std::pair&lt; MyLayersPtr, MyLayersPtr &gt; generate_interface_layers(const MyLayersPtr &amp;bottom_contacts, const MyLayersPtr &amp;top_contacts, MyLayersPtr &amp;intermediate_layers, MyLayerStorage &amp;layer_storage) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:3534</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a8838ab6cb7f099a9c5dd78692b949bcf"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">Slic3r::PrintObjectSupportMaterial::MyLayerStorage</a></div><div class="ttdeci">std::deque&lt; MyLayer &gt; MyLayerStorage</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:153</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a9eec033f0dc8429eb500bfc015fbba2c"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a9eec033f0dc8429eb500bfc015fbba2c">Slic3r::PrintObjectSupportMaterial::generate_raft_base</a></div><div class="ttdeci">MyLayersPtr generate_raft_base(const PrintObject &amp;object, const MyLayersPtr &amp;top_contacts, const MyLayersPtr &amp;interface_layers, const MyLayersPtr &amp;base_interface_layers, const MyLayersPtr &amp;base_layers, MyLayerStorage &amp;layer_storage) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:3381</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_aaa65df1d83138e4b78ca85ec30f619e6"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aaa65df1d83138e4b78ca85ec30f619e6">Slic3r::PrintObjectSupportMaterial::bottom_contact_layers_and_layer_support_areas</a></div><div class="ttdeci">MyLayersPtr bottom_contact_layers_and_layer_support_areas(const PrintObject &amp;object, const MyLayersPtr &amp;top_contacts, std::vector&lt; Polygons &gt; &amp;buildplate_covered, MyLayerStorage &amp;layer_storage, std::vector&lt; Polygons &gt; &amp;layer_support_areas) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2696</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_aaf631a8aa30155225b24ac24b09df885"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aaf631a8aa30155225b24ac24b09df885">Slic3r::PrintObjectSupportMaterial::trim_top_contacts_by_bottom_contacts</a></div><div class="ttdeci">void trim_top_contacts_by_bottom_contacts(const PrintObject &amp;object, const MyLayersPtr &amp;bottom_contacts, MyLayersPtr &amp;top_contacts) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2882</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_ac12b23804745399e2f6c5ffc0d49eeb3"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac12b23804745399e2f6c5ffc0d49eeb3">Slic3r::PrintObjectSupportMaterial::raft_and_intermediate_support_layers</a></div><div class="ttdeci">MyLayersPtr raft_and_intermediate_support_layers(const PrintObject &amp;object, const MyLayersPtr &amp;bottom_contacts, const MyLayersPtr &amp;top_contacts, MyLayerStorage &amp;layer_storage) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2907</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_ad404e6eecb194f163f453cbc583f81eb"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad404e6eecb194f163f453cbc583f81eb">Slic3r::PrintObjectSupportMaterial::synchronize_layers</a></div><div class="ttdeci">bool synchronize_layers() const</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:165</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_af1f16d63ec06800caba4cec368ab1637"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#af1f16d63ec06800caba4cec368ab1637">Slic3r::PrintObjectSupportMaterial::generate_toolpaths</a></div><div class="ttdeci">void generate_toolpaths(SupportLayerPtrs &amp;support_layers, const MyLayersPtr &amp;raft_layers, const MyLayersPtr &amp;bottom_contacts, const MyLayersPtr &amp;top_contacts, const MyLayersPtr &amp;intermediate_layers, const MyLayersPtr &amp;interface_layers, const MyLayersPtr &amp;base_interface_layers) const</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:4367</div></div>
<div class="ttc" id="aclass_slic3r_1_1_s_v_g_html_a2fbe0063ae23696aefaf04bda21dd044"><div class="ttname"><a href="../../db/dcf/class_slic3r_1_1_s_v_g.html#a2fbe0063ae23696aefaf04bda21dd044">Slic3r::SVG::export_expolygons</a></div><div class="ttdeci">static void export_expolygons(const char *path, const BoundingBox &amp;bbox, const Slic3r::ExPolygons &amp;expolygons, std::string stroke_outer=&quot;black&quot;, std::string stroke_holes=&quot;blue&quot;, coordf_t stroke_width=0)</div><div class="ttdef"><b>Definition</b> SVG.cpp:342</div></div>
<div class="ttc" id="anamespace_slic3r_html"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html">Slic3r</a></div><div class="ttdef"><b>Definition</b> geometries.hpp:16</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1d1423286c406123371c37ceada9ebae"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">Slic3r::debug_out_path</a></div><div class="ttdeci">std::string debug_out_path(const char *name,...)</div><div class="ttdef"><b>Definition</b> utils.cpp:278</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1e045f56a994b8cd4a5b203626cd8272"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">Slic3r::l2</a></div><div class="ttdeci">T l2(const boost::geometry::model::d2::point_xy&lt; T &gt; &amp;v)</div><div class="ttdef"><b>Definition</b> ExtrusionSimulator.cpp:166</div></div>
<div class="ttc" id="anamespace_slic3r_html_a37166e144522fceee41e6d8ed8245315"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">Slic3r::union_ex</a></div><div class="ttdeci">Slic3r::ExPolygons union_ex(const Slic3r::Polygons &amp;subject, ClipperLib::PolyFillType fill_type)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:777</div></div>
<div class="ttc" id="anamespace_slic3r_html_a83fc268888773d5c0f886fc2e54b8c64"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">Slic3r::empty</a></div><div class="ttdeci">bool empty(const BoundingBoxBase&lt; VT &gt; &amp;bb)</div><div class="ttdef"><b>Definition</b> BoundingBox.hpp:241</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac29a0976cd6f5ed3ee83af70c7930ae0"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac29a0976cd6f5ed3ee83af70c7930ae0">Slic3r::one_of</a></div><div class="ttdeci">bool one_of(const ValueType &amp;v, const ContainerType &amp;c)</div><div class="ttdef"><b>Definition</b> libslic3r.h:270</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac3ba5210a9b2818784aa83019db66410"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac3ba5210a9b2818784aa83019db66410">Slic3r::support_types_interface</a></div><div class="ttdeci">static constexpr const std::initializer_list&lt; PrintObjectSupportMaterial::SupporLayerType &gt; support_types_interface</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:457</div></div>
<div class="ttc" id="anamespace_slic3r_html_af9cd3b3310b3ff6744f12aa50b384bee"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#af9cd3b3310b3ff6744f12aa50b384bee">Slic3r::layers_append</a></div><div class="ttdeci">void layers_append(PrintObjectSupportMaterial::MyLayersPtr &amp;dst, const PrintObjectSupportMaterial::MyLayersPtr &amp;src)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:451</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a292bde1fa6cfb35387c703311926a153"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a292bde1fa6cfb35387c703311926a153">libnest2d::shapelike::rbegin</a></div><div class="ttdeci">auto rbegin(P &amp;p) -&gt; decltype(_backward(end(p)))</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:865</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a88704abbde60f05972db69c7a816177d"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a88704abbde60f05972db69c7a816177d">libnest2d::shapelike::rend</a></div><div class="ttdeci">auto rend(P &amp;p) -&gt; decltype(_backward(begin(p)))</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:875</div></div>
<div class="ttc" id="anamespacelibnest2d_html_af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3"><div class="ttname"><a href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">libnest2d::Formats::SVG</a></div><div class="ttdeci">@ SVG</div></div>
<div class="ttc" id="astat_8h_html_a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7acd20ac2e1b2e25e33293516660048674">zmax</a></div><div class="ttdeci">@ zmax</div><div class="ttdef"><b>Definition</b> stat.h:347</div></div>
<div class="ttc" id="atestmini_8c_html_ad9e5eed42092079dea4d90550ff5fcf0"><div class="ttname"><a href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a></div><div class="ttdeci">static unsigned char __LZO_MMODEL out[OUT_LEN]</div><div class="ttdef"><b>Definition</b> testmini.c:58</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02696">bottom_contact_layers_and_layer_support_areas()</a>, <a class="el" href="../../#l00102">Slic3r::PrintObjectSupportMaterial::MyLayer::bottom_z</a>, <a class="el" href="../../#l01470">buildplate_covered()</a>, <a class="el" href="../../#l00278">Slic3r::debug_out_path()</a>, <a class="el" href="../../#l00241">Slic3r::empty()</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00342">Slic3r::SVG::export_expolygons()</a>, <a class="el" href="../../#l00086">Slic3r::SlicingParameters::gap_object_support</a>, <a class="el" href="../../#l00088">Slic3r::SlicingParameters::gap_support_object</a>, <a class="el" href="../../#l00134">Slic3r::PrintObjectSupportMaterial::SupportParams::gap_xy</a>, <a class="el" href="../../#l03127">generate_base_layers()</a>, <a class="el" href="../../#l03534">generate_interface_layers()</a>, <a class="el" href="../../#l03381">generate_raft_base()</a>, <a class="el" href="../../#l04367">generate_toolpaths()</a>, <a class="el" href="../../#l00104">Slic3r::PrintObjectSupportMaterial::MyLayer::height</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00166">Slic3r::l2()</a>, <a class="el" href="../../#l00097">Slic3r::PrintObjectSupportMaterial::MyLayer::layer_type</a>, <a class="el" href="../../#l00451">Slic3r::layers_append()</a>, <a class="el" href="../../#l00256">m_slicing_params</a>, <a class="el" href="../../#l00258">m_support_params</a>, <a class="el" href="../../#l00270">Slic3r::one_of()</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l00115">Slic3r::PrintObjectSupportMaterial::MyLayer::polygons</a>, <a class="el" href="../../#l00099">Slic3r::PrintObjectSupportMaterial::MyLayer::print_z</a>, <a class="el" href="../../#l02907">raft_and_intermediate_support_layers()</a>, <a class="el" href="../../#l00378">size</a>, <a class="el" href="../../#l00030">sltBottomContact</a>, <a class="el" href="../../#l00040">sltTopContact</a>, <a class="el" href="../../#l00024">sltUnknown</a>, <a class="el" href="../../#l00131">Slic3r::PrintObjectSupportMaterial::SupportParams::support_layer_height_min</a>, <a class="el" href="../../#l00457">Slic3r::support_types_interface</a>, <a class="el" href="../../#l00165">synchronize_layers()</a>, <a class="el" href="../../#l02208">top_contact_layers()</a>, <a class="el" href="../../#l03280">trim_support_layers_by_object()</a>, <a class="el" href="../../#l02882">trim_top_contacts_by_bottom_contacts()</a>, <a class="el" href="../../#l00777">Slic3r::union_ex()</a>, and <a class="el" href="../../#l00347">zmax</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_aa91db86d2d6af50dc0cb0c8b3b5ffda3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a84b13a000b19fb37af00912cb894deff" name="a84b13a000b19fb37af00912cb894deff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84b13a000b19fb37af00912cb894deff">&#9670;&#160;</a></span>generate_base_layers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PrintObjectSupportMaterial::generate_base_layers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>intermediate_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>layer_support_areas</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3133</span>{</div>
<div class="line"><span class="lineno"> 3134</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 3135</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> iRun = 0;</div>
<div class="line"><span class="lineno"> 3136</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3137</span> </div>
<div class="line"><span class="lineno"> 3138</span>    <span class="keywordflow">if</span> (top_contacts.empty())</div>
<div class="line"><span class="lineno"> 3139</span>        <span class="comment">// No top contacts -&gt; no intermediate layers will be produced.</span></div>
<div class="line"><span class="lineno"> 3140</span>        <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 3141</span> </div>
<div class="line"><span class="lineno"> 3142</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::generate_base_layers() in parallel - start&quot;</span>;</div>
<div class="line"><span class="lineno"> 3143</span>    tbb::parallel_for(</div>
<div class="line"><span class="lineno"> 3144</span>        tbb::blocked_range&lt;size_t&gt;(0, intermediate_layers.size()),</div>
<div class="line"><span class="lineno"> 3145</span>        [&amp;<span class="keywordtype">object</span>, &amp;bottom_contacts, &amp;top_contacts, &amp;intermediate_layers, &amp;layer_support_areas](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 3146</span>            <span class="comment">// index -2 means not initialized yet, -1 means intialized and decremented to 0 and then -1.</span></div>
<div class="line"><span class="lineno"> 3147</span>            int idx_top_contact_above           = -2;</div>
<div class="line"><span class="lineno"> 3148</span>            int idx_bottom_contact_overlapping  = -2;</div>
<div class="line"><span class="lineno"> 3149</span>            int idx_object_layer_above          = -2;</div>
<div class="line"><span class="lineno"> 3150</span>            <span class="comment">// Counting down due to the way idx_lower_or_equal caches indices to avoid repeated binary search over the complete sequence.</span></div>
<div class="line"><span class="lineno"> 3151</span>            for (int idx_intermediate = int(range.end()) - 1; idx_intermediate &gt;= int(range.begin()); -- idx_intermediate)</div>
<div class="line"><span class="lineno"> 3152</span>            {</div>
<div class="line"><span class="lineno"> 3153</span>                BOOST_LOG_TRIVIAL(trace) &lt;&lt; <span class="stringliteral">&quot;Support generator - generate_base_layers - creating layer &quot;</span> &lt;&lt; </div>
<div class="line"><span class="lineno"> 3154</span>                    idx_intermediate &lt;&lt; <span class="stringliteral">&quot; of &quot;</span> &lt;&lt; intermediate_layers.size();</div>
<div class="line"><span class="lineno"> 3155</span>                MyLayer &amp;layer_intermediate = *intermediate_layers[idx_intermediate];</div>
<div class="line"><span class="lineno"> 3156</span>                <span class="comment">// Layers must be sorted by print_z. </span></div>
<div class="line"><span class="lineno"> 3157</span>                assert(idx_intermediate == 0 || layer_intermediate.print_z &gt;= intermediate_layers[idx_intermediate - 1]-&gt;print_z);</div>
<div class="line"><span class="lineno"> 3158</span> </div>
<div class="line"><span class="lineno"> 3159</span>                <span class="comment">// Find a top_contact layer touching the layer_intermediate from above, if any, and collect its polygons into polygons_new.</span></div>
<div class="line"><span class="lineno"> 3160</span>                <span class="comment">// New polygons for layer_intermediate.</span></div>
<div class="line"><span class="lineno"> 3161</span>                Polygons polygons_new;</div>
<div class="line"><span class="lineno"> 3162</span> </div>
<div class="line"><span class="lineno"> 3163</span>                <span class="comment">// Use the precomputed layer_support_areas. &quot;idx_object_layer_above&quot;: above means above since the last iteration, not above after this call.</span></div>
<div class="line"><span class="lineno"> 3164</span>                idx_object_layer_above = idx_lower_or_equal(object.layers().begin(), object.layers().end(), idx_object_layer_above,</div>
<div class="line"><span class="lineno"> 3165</span>                    [&amp;layer_intermediate](const Layer* layer) { return layer-&gt;print_z &lt;= layer_intermediate.print_z + EPSILON; });</div>
<div class="line"><span class="lineno"> 3166</span> </div>
<div class="line"><span class="lineno"> 3167</span>                <span class="comment">// Polygons to trim polygons_new.</span></div>
<div class="line"><span class="lineno"> 3168</span>                Polygons polygons_trimming; </div>
<div class="line"><span class="lineno"> 3169</span> </div>
<div class="line"><span class="lineno"> 3170</span>                <span class="comment">// Trimming the base layer with any overlapping top layer.</span></div>
<div class="line"><span class="lineno"> 3171</span>                <span class="comment">// Following cases are recognized:</span></div>
<div class="line"><span class="lineno"> 3172</span>                <span class="comment">// 1) top.bottom_z &gt;= base.top_z -&gt; No overlap, no trimming needed.</span></div>
<div class="line"><span class="lineno"> 3173</span>                <span class="comment">// 2) base.bottom_z &gt;= top.print_z -&gt; No overlap, no trimming needed.</span></div>
<div class="line"><span class="lineno"> 3174</span>                <span class="comment">// 3) base.print_z &gt; top.print_z  &amp;&amp; base.bottom_z &gt;= top.bottom_z -&gt; Overlap, which will be solved inside generate_toolpaths() by reducing the base layer height where it overlaps the top layer. No trimming needed here.</span></div>
<div class="line"><span class="lineno"> 3175</span>                <span class="comment">// 4) base.print_z &gt; top.bottom_z &amp;&amp; base.bottom_z &lt; top.bottom_z -&gt; Base overlaps with top.bottom_z. This must not happen.</span></div>
<div class="line"><span class="lineno"> 3176</span>                <span class="comment">// 5) base.print_z &lt;= top.print_z  &amp;&amp; base.bottom_z &gt;= top.bottom_z -&gt; Base is fully inside top. Trim base by top.</span></div>
<div class="line"><span class="lineno"> 3177</span>                idx_top_contact_above = idx_lower_or_equal(top_contacts, idx_top_contact_above, </div>
<div class="line"><span class="lineno"> 3178</span>                    [&amp;layer_intermediate](const MyLayer *layer){ return layer-&gt;bottom_z &lt;= layer_intermediate.print_z - EPSILON; });</div>
<div class="line"><span class="lineno"> 3179</span>                <span class="comment">// Collect all the top_contact layer intersecting with this layer.</span></div>
<div class="line"><span class="lineno"> 3180</span>                for (int idx_top_contact_overlapping = idx_top_contact_above; idx_top_contact_overlapping &gt;= 0; -- idx_top_contact_overlapping) {</div>
<div class="line"><span class="lineno"> 3181</span>                    MyLayer &amp;layer_top_overlapping = *top_contacts[idx_top_contact_overlapping];</div>
<div class="line"><span class="lineno"> 3182</span>                    if (layer_top_overlapping.print_z &lt; layer_intermediate.bottom_z + EPSILON)</div>
<div class="line"><span class="lineno"> 3183</span>                        break;</div>
<div class="line"><span class="lineno"> 3184</span>                    <span class="comment">// Base must not overlap with top.bottom_z.</span></div>
<div class="line"><span class="lineno"> 3185</span>                    assert(! (layer_intermediate.print_z &gt; layer_top_overlapping.bottom_z + EPSILON &amp;&amp; layer_intermediate.bottom_z &lt; layer_top_overlapping.bottom_z - EPSILON));</div>
<div class="line"><span class="lineno"> 3186</span>                    if (layer_intermediate.print_z &lt;= layer_top_overlapping.print_z + EPSILON &amp;&amp; layer_intermediate.bottom_z &gt;= layer_top_overlapping.bottom_z - EPSILON)</div>
<div class="line"><span class="lineno"> 3187</span>                        <span class="comment">// Base is fully inside top. Trim base by top.</span></div>
<div class="line"><span class="lineno"> 3188</span>                        polygons_append(polygons_trimming, layer_top_overlapping.polygons);</div>
<div class="line"><span class="lineno"> 3189</span>                }</div>
<div class="line"><span class="lineno"> 3190</span> </div>
<div class="line"><span class="lineno"> 3191</span>                if (idx_object_layer_above &lt; 0) {</div>
<div class="line"><span class="lineno"> 3192</span>                    <span class="comment">// layer_support_areas are synchronized with object layers and they contain projections of the contact layers above them.</span></div>
<div class="line"><span class="lineno"> 3193</span>                    <span class="comment">// This intermediate layer is not above any object layer, thus there is no information in layer_support_areas about</span></div>
<div class="line"><span class="lineno"> 3194</span>                    <span class="comment">// towers supporting contact layers intersecting the first object layer. Project these contact layers now.</span></div>
<div class="line"><span class="lineno"> 3195</span>                    polygons_new = layer_support_areas.front();</div>
<div class="line"><span class="lineno"> 3196</span>                    double first_layer_z = object.layers().front()-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3197</span>                    for (int i = idx_top_contact_above + 1; i &lt; int(top_contacts.size()); ++ i) {</div>
<div class="line"><span class="lineno"> 3198</span>                        MyLayer &amp;contacts = *top_contacts[i];</div>
<div class="line"><span class="lineno"> 3199</span>                        if (contacts.print_z &gt; first_layer_z + EPSILON)</div>
<div class="line"><span class="lineno"> 3200</span>                            break;</div>
<div class="line"><span class="lineno"> 3201</span>                        assert(contacts.bottom_z &gt; layer_intermediate.print_z - EPSILON);</div>
<div class="line"><span class="lineno"> 3202</span>                        polygons_append(polygons_new, contacts.polygons);</div>
<div class="line"><span class="lineno"> 3203</span>                    }</div>
<div class="line"><span class="lineno"> 3204</span>                } else</div>
<div class="line"><span class="lineno"> 3205</span>                    polygons_new = layer_support_areas[idx_object_layer_above];</div>
<div class="line"><span class="lineno"> 3206</span> </div>
<div class="line"><span class="lineno"> 3207</span>                <span class="comment">// Trimming the base layer with any overlapping bottom layer.</span></div>
<div class="line"><span class="lineno"> 3208</span>                <span class="comment">// Following cases are recognized:</span></div>
<div class="line"><span class="lineno"> 3209</span>                <span class="comment">// 1) bottom.bottom_z &gt;= base.top_z -&gt; No overlap, no trimming needed.</span></div>
<div class="line"><span class="lineno"> 3210</span>                <span class="comment">// 2) base.bottom_z &gt;= bottom.print_z -&gt; No overlap, no trimming needed.</span></div>
<div class="line"><span class="lineno"> 3211</span>                <span class="comment">// 3) base.print_z &gt; bottom.bottom_z &amp;&amp; base.bottom_z &lt; bottom.bottom_z -&gt; Overlap, which will be solved inside generate_toolpaths() by reducing the bottom layer height where it overlaps the base layer. No trimming needed here.</span></div>
<div class="line"><span class="lineno"> 3212</span>                <span class="comment">// 4) base.print_z &gt; bottom.print_z  &amp;&amp; base.bottom_z &gt;= bottom.print_z -&gt; Base overlaps with bottom.print_z. This must not happen.</span></div>
<div class="line"><span class="lineno"> 3213</span>                <span class="comment">// 5) base.print_z &lt;= bottom.print_z &amp;&amp; base.bottom_z &gt;= bottom.bottom_z -&gt; Base is fully inside top. Trim base by top.</span></div>
<div class="line"><span class="lineno"> 3214</span>                idx_bottom_contact_overlapping = idx_lower_or_equal(bottom_contacts, idx_bottom_contact_overlapping, </div>
<div class="line"><span class="lineno"> 3215</span>                    [&amp;layer_intermediate](const MyLayer *layer){ return layer-&gt;bottom_print_z() &lt;= layer_intermediate.print_z - EPSILON; });</div>
<div class="line"><span class="lineno"> 3216</span>                <span class="comment">// Collect all the bottom_contacts layer intersecting with this layer.</span></div>
<div class="line"><span class="lineno"> 3217</span>                for (int i = idx_bottom_contact_overlapping; i &gt;= 0; -- i) {</div>
<div class="line"><span class="lineno"> 3218</span>                    MyLayer &amp;layer_bottom_overlapping = *bottom_contacts[i];</div>
<div class="line"><span class="lineno"> 3219</span>                    if (layer_bottom_overlapping.print_z &lt; layer_intermediate.bottom_print_z() + EPSILON)</div>
<div class="line"><span class="lineno"> 3220</span>                        break; </div>
<div class="line"><span class="lineno"> 3221</span>                    <span class="comment">// Base must not overlap with bottom.top_z.</span></div>
<div class="line"><span class="lineno"> 3222</span>                    assert(! (layer_intermediate.print_z &gt; layer_bottom_overlapping.print_z + EPSILON &amp;&amp; layer_intermediate.bottom_z &lt; layer_bottom_overlapping.print_z - EPSILON));</div>
<div class="line"><span class="lineno"> 3223</span>                    if (layer_intermediate.print_z &lt;= layer_bottom_overlapping.print_z + EPSILON &amp;&amp; layer_intermediate.bottom_z &gt;= layer_bottom_overlapping.bottom_print_z() - EPSILON)</div>
<div class="line"><span class="lineno"> 3224</span>                        <span class="comment">// Base is fully inside bottom. Trim base by bottom.</span></div>
<div class="line"><span class="lineno"> 3225</span>                        polygons_append(polygons_trimming, layer_bottom_overlapping.polygons);</div>
<div class="line"><span class="lineno"> 3226</span>                }</div>
<div class="line"><span class="lineno"> 3227</span> </div>
<div class="line"><span class="lineno"> 3228</span>        #ifdef SLIC3R_DEBUG</div>
<div class="line"><span class="lineno"> 3229</span>                {</div>
<div class="line"><span class="lineno"> 3230</span>                    BoundingBox bbox = get_extents(polygons_new);</div>
<div class="line"><span class="lineno"> 3231</span>                    bbox.merge(get_extents(polygons_trimming));</div>
<div class="line"><span class="lineno"> 3232</span>                    ::Slic3r::SVG svg(debug_out_path(<span class="stringliteral">&quot;support-intermediate-layers-raw-%d-%lf.svg&quot;</span>, iRun, layer_intermediate.print_z), bbox);</div>
<div class="line"><span class="lineno"> 3233</span>                    svg.draw(union_ex(polygons_new),                    <span class="stringliteral">&quot;blue&quot;</span>, 0.5f);</div>
<div class="line"><span class="lineno"> 3234</span>                    svg.draw(to_polylines(polygons_new),                <span class="stringliteral">&quot;blue&quot;</span>);</div>
<div class="line"><span class="lineno"> 3235</span>                    svg.draw(union_safety_offset_ex(polygons_trimming), <span class="stringliteral">&quot;red&quot;</span>, 0.5f);</div>
<div class="line"><span class="lineno"> 3236</span>                    svg.draw(to_polylines(polygons_trimming),           <span class="stringliteral">&quot;red&quot;</span>);</div>
<div class="line"><span class="lineno"> 3237</span>                }</div>
<div class="line"><span class="lineno"> 3238</span>        #endif <span class="comment">/* SLIC3R_DEBUG */</span></div>
<div class="line"><span class="lineno"> 3239</span> </div>
<div class="line"><span class="lineno"> 3240</span>                <span class="comment">// Trim the polygons, store them.</span></div>
<div class="line"><span class="lineno"> 3241</span>                if (polygons_trimming.empty())</div>
<div class="line"><span class="lineno"> 3242</span>                    layer_intermediate.polygons = std::move(polygons_new);</div>
<div class="line"><span class="lineno"> 3243</span>                else</div>
<div class="line"><span class="lineno"> 3244</span>                    layer_intermediate.polygons = diff(</div>
<div class="line"><span class="lineno"> 3245</span>                        polygons_new,</div>
<div class="line"><span class="lineno"> 3246</span>                        polygons_trimming,</div>
<div class="line"><span class="lineno"> 3247</span>                        ApplySafetyOffset::Yes); <span class="comment">// safety offset to merge the touching source polygons</span></div>
<div class="line"><span class="lineno"> 3248</span>                layer_intermediate.layer_type = sltBase;</div>
<div class="line"><span class="lineno"> 3249</span> </div>
<div class="line"><span class="lineno"> 3250</span>        #if 0</div>
<div class="line"><span class="lineno"> 3251</span>                    <span class="comment">// coordf_t fillet_radius_scaled = scale_(m_object_config-&gt;support_base_pattern_spacing);</span></div>
<div class="line"><span class="lineno"> 3252</span>                    <span class="comment">// Fillet the base polygons and trim them again with the top, interface and contact layers.</span></div>
<div class="line"><span class="lineno"> 3253</span>                    $base-&gt;{$i} = diff(</div>
<div class="line"><span class="lineno"> 3254</span>                        offset2(</div>
<div class="line"><span class="lineno"> 3255</span>                            $base-&gt;{$i}, </div>
<div class="line"><span class="lineno"> 3256</span>                            $fillet_radius_scaled, </div>
<div class="line"><span class="lineno"> 3257</span>                            -$fillet_radius_scaled,</div>
<div class="line"><span class="lineno"> 3258</span>                            # Use a geometric offsetting for filleting.</div>
<div class="line"><span class="lineno"> 3259</span>                            JT_ROUND,</div>
<div class="line"><span class="lineno"> 3260</span>                            0.2*$fillet_radius_scaled),</div>
<div class="line"><span class="lineno"> 3261</span>                        $trim_polygons,</div>
<div class="line"><span class="lineno"> 3262</span>                        false); <span class="comment">// don&#39;t apply the safety offset.</span></div>
<div class="line"><span class="lineno"> 3263</span>                }</div>
<div class="line"><span class="lineno"> 3264</span>        #endif</div>
<div class="line"><span class="lineno"> 3265</span>            }</div>
<div class="line"><span class="lineno"> 3266</span>        });</div>
<div class="line"><span class="lineno"> 3267</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::generate_base_layers() in parallel - end&quot;</span>;</div>
<div class="line"><span class="lineno"> 3268</span> </div>
<div class="line"><span class="lineno"> 3269</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 3270</span>    <span class="keywordflow">for</span> (MyLayersPtr::const_iterator it = intermediate_layers.begin(); it != intermediate_layers.end(); ++it)</div>
<div class="line"><span class="lineno"> 3271</span>        <a class="code hl_function" href="../../db/dcf/class_slic3r_1_1_s_v_g.html#a2fbe0063ae23696aefaf04bda21dd044">::Slic3r::SVG::export_expolygons</a>(</div>
<div class="line"><span class="lineno"> 3272</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1d1423286c406123371c37ceada9ebae">debug_out_path</a>(<span class="stringliteral">&quot;support-intermediate-layers-untrimmed-%d-%lf.svg&quot;</span>, iRun, (*it)-&gt;print_z),</div>
<div class="line"><span class="lineno"> 3273</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a37166e144522fceee41e6d8ed8245315">union_ex</a>((*it)-&gt;polygons));</div>
<div class="line"><span class="lineno"> 3274</span>    ++ iRun;</div>
<div class="line"><span class="lineno"> 3275</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3276</span> </div>
<div class="line"><span class="lineno"> 3277</span>    this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad4c2a04b87513b31fd000ebb6d005a1c">trim_support_layers_by_object</a>(<span class="keywordtype">object</span>, intermediate_layers, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae75919394f64528204ca434684c06d1b">gap_support_object</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6127b2a51f4a1e1a7aefc70d6677f7e7">gap_object_support</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a>);</div>
<div class="line"><span class="lineno"> 3278</span>}</div>
<div class="ttc" id="anamespace_slic3r_html_a51e1ea9708d6434aae1e8394bef8acdc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">Slic3r::range</a></div><div class="ttdeci">auto range(Cont &amp;&amp;cont)</div><div class="ttdef"><b>Definition</b> libslic3r.h:374</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00374">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a84b13a000b19fb37af00912cb894deff_cgraph.svg" width="356" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a84b13a000b19fb37af00912cb894deff_icgraph.svg" width="434" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a84ef3171e46d333d581e2af74a88b0bc" name="a84ef3171e46d333d581e2af74a88b0bc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84ef3171e46d333d581e2af74a88b0bc">&#9670;&#160;</a></span>generate_interface_layers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::pair&lt; <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">PrintObjectSupportMaterial::MyLayersPtr</a>, <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">PrintObjectSupportMaterial::MyLayersPtr</a> &gt; Slic3r::PrintObjectSupportMaterial::generate_interface_layers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>intermediate_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3539</span>{</div>
<div class="line"><span class="lineno"> 3540</span><span class="comment">//    my $area_threshold = $self-&gt;interface_flow-&gt;scaled_spacing ** 2;</span></div>
<div class="line"><span class="lineno"> 3541</span> </div>
<div class="line"><span class="lineno"> 3542</span>    std::pair&lt;MyLayersPtr, MyLayersPtr&gt; base_and_interface_layers;</div>
<div class="line"><span class="lineno"> 3543</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;interface_layers       = base_and_interface_layers.first;</div>
<div class="line"><span class="lineno"> 3544</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;base_interface_layers  = base_and_interface_layers.second;</div>
<div class="line"><span class="lineno"> 3545</span> </div>
<div class="line"><span class="lineno"> 3546</span>    <span class="comment">// distinguish between interface and base interface layers</span></div>
<div class="line"><span class="lineno"> 3547</span>    <span class="comment">// Contact layer is considered an interface layer, therefore run the following block only if support_interface_top_layers &gt; 1.</span></div>
<div class="line"><span class="lineno"> 3548</span>    <span class="comment">// Contact layer needs a base_interface layer, therefore run the following block if support_interface_top_layers &gt; 0, has soluble support and extruders are different.</span></div>
<div class="line"><span class="lineno"> 3549</span>    <span class="keywordtype">bool</span>   soluble_interface_non_soluble_base =</div>
<div class="line"><span class="lineno"> 3550</span>        <span class="comment">// Zero z-gap between the overhangs and the support interface.</span></div>
<div class="line"><span class="lineno"> 3551</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ac8f1765efb10ac97c597982a0b4847f5">soluble_interface</a> &amp;&amp; </div>
<div class="line"><span class="lineno"> 3552</span>        <span class="comment">// Interface extruder soluble.</span></div>
<div class="line"><span class="lineno"> 3553</span>        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_filament.value &gt; 0 &amp;&amp; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>-&gt;filament_soluble.get_at(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_filament.value - 1) &amp;&amp; </div>
<div class="line"><span class="lineno"> 3554</span>        <span class="comment">// Base extruder: Either &quot;print with active extruder&quot; not soluble.</span></div>
<div class="line"><span class="lineno"> 3555</span>        (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_filament.value == 0 || ! <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>-&gt;filament_soluble.get_at(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_filament.value - 1));</div>
<div class="line"><span class="lineno"> 3556</span>    <span class="keywordtype">bool</span>   snug_supports                 = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_style.value == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#ac4444e117129d57974e96c39d6976a3ba5ce02a204f1aadd9c7772eee93a312fb">smsSnug</a>;</div>
<div class="line"><span class="lineno"> 3557</span>    <span class="comment">// BBS: if support interface and support base do not use the same filament, add a base layer to improve their adhesion</span></div>
<div class="line"><span class="lineno"> 3558</span>    <span class="keywordtype">bool</span> differnt_support_interface_filament = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_filament.value != <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_filament.value;</div>
<div class="line"><span class="lineno"> 3559</span>    <span class="keywordtype">int</span> num_base_interface_layers_top = differnt_support_interface_filament ? 1 : 0;</div>
<div class="line"><span class="lineno"> 3560</span>    <span class="keywordtype">int</span> num_base_interface_layers_bottom = differnt_support_interface_filament ? 1 : 0;</div>
<div class="line"><span class="lineno"> 3561</span>    <span class="keywordtype">int</span> num_interface_layers_top = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_top_layers + num_base_interface_layers_top;</div>
<div class="line"><span class="lineno"> 3562</span>    <span class="keywordtype">int</span> num_interface_layers_bottom = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_bottom_layers + num_base_interface_layers_bottom;</div>
<div class="line"><span class="lineno"> 3563</span>    <span class="keywordflow">if</span> (num_interface_layers_bottom &lt; 0)</div>
<div class="line"><span class="lineno"> 3564</span>        num_interface_layers_bottom = num_interface_layers_top;</div>
<div class="line"><span class="lineno"> 3565</span> </div>
<div class="line"><span class="lineno"> 3566</span>    <span class="keywordflow">if</span> (! intermediate_layers.empty() &amp;&amp; (num_interface_layers_top &gt; 1 || num_interface_layers_bottom &gt; 1)) {</div>
<div class="line"><span class="lineno"> 3567</span>        <span class="comment">// For all intermediate layers, collect top contact surfaces, which are not further than support_interface_top_layers.</span></div>
<div class="line"><span class="lineno"> 3568</span>        BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::generate_interface_layers() in parallel - start&quot;</span>;</div>
<div class="line"><span class="lineno"> 3569</span>        <span class="comment">// Since the intermediate layer index starts at zero the number of interface layer needs to be reduced by 1.</span></div>
<div class="line"><span class="lineno"> 3570</span>        -- num_interface_layers_top;</div>
<div class="line"><span class="lineno"> 3571</span>        -- num_interface_layers_bottom;</div>
<div class="line"><span class="lineno"> 3572</span>        <span class="keywordtype">int</span> num_interface_layers_only_top    = num_interface_layers_top    - num_base_interface_layers_top;</div>
<div class="line"><span class="lineno"> 3573</span>        <span class="keywordtype">int</span> num_interface_layers_only_bottom = num_interface_layers_bottom - num_base_interface_layers_bottom;</div>
<div class="line"><span class="lineno"> 3574</span>        interface_layers.assign(intermediate_layers.size(), <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3575</span>        <span class="keywordflow">if</span> (num_base_interface_layers_top || num_base_interface_layers_bottom)</div>
<div class="line"><span class="lineno"> 3576</span>            base_interface_layers.assign(intermediate_layers.size(), <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 3577</span>        <span class="keyword">auto</span> smoothing_distance              = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a8d56d1ac599f0ae41d95794c8ed66b98">scaled_spacing</a>() * 1.5;</div>
<div class="line"><span class="lineno"> 3578</span>        <span class="keyword">auto</span> minimum_island_radius           = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a8d56d1ac599f0ae41d95794c8ed66b98">scaled_spacing</a>() / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bbedcc1acfb29c78650befdf49f01b5">interface_density</a>;</div>
<div class="line"><span class="lineno"> 3579</span>        <span class="keyword">auto</span> closing_distance                = smoothing_distance; <span class="comment">// scaled&lt;float&gt;(m_object_config-&gt;support_closing_radius.value);</span></div>
<div class="line"><span class="lineno"> 3580</span>        tbb::spin_mutex layer_storage_mutex;</div>
<div class="line"><span class="lineno"> 3581</span>        <span class="comment">// Insert a new layer into base_interface_layers, if intersection with base exists.</span></div>
<div class="line"><span class="lineno"> 3582</span>        <span class="keyword">auto</span> insert_layer = [&amp;layer_storage, &amp;layer_storage_mutex, snug_supports, closing_distance, smoothing_distance, minimum_island_radius](</div>
<div class="line"><span class="lineno"> 3583</span>                MyLayer &amp;intermediate_layer, <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;bottom, <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;&amp;top, <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> *<a class="code hl_function" href="../../d0/d53/namespacelibnest2d_1_1nfp.html#a1c066fc9d917be164185b8f1e86a36b6">subtract</a>, <a class="code hl_enumeration" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8">SupporLayerType</a> type) -&gt; MyLayer* {</div>
<div class="line"><span class="lineno"> 3584</span>            assert(! bottom.empty() || ! top.empty());</div>
<div class="line"><span class="lineno"> 3585</span>            <span class="comment">// Merge top into bottom, unite them with a safety offset.</span></div>
<div class="line"><span class="lineno"> 3586</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5f240a84e573ed2d7785a439f4239e1a">append</a>(bottom, std::move(top));</div>
<div class="line"><span class="lineno"> 3587</span>            <span class="comment">// Merge top / bottom interfaces. For snug supports, merge using closing distance and regularize (close concave corners).</span></div>
<div class="line"><span class="lineno"> 3588</span>            bottom = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">intersection</a>(</div>
<div class="line"><span class="lineno"> 3589</span>                snug_supports ?</div>
<div class="line"><span class="lineno"> 3590</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1a34c8f50b5fa362f63402116dcf6ccd">smooth_outward</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fbd55ea6df523713e252f0539cc53f7">closing</a>(std::move(bottom), closing_distance + minimum_island_radius, closing_distance, <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>), smoothing_distance) :</div>
<div class="line"><span class="lineno"> 3591</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab2a6b8e21dde15af9913133399a852fd">union_safety_offset</a>(<a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::move(bottom)),</div>
<div class="line"><span class="lineno"> 3592</span>                intermediate_layer.polygons);</div>
<div class="line"><span class="lineno"> 3593</span>            <span class="keywordflow">if</span> (! bottom.empty()) {</div>
<div class="line"><span class="lineno"> 3594</span>                <span class="comment">//FIXME Remove non-printable tiny islands, let them be printed using the base support.</span></div>
<div class="line"><span class="lineno"> 3595</span>                <span class="comment">//bottom = opening(std::move(bottom), minimum_island_radius);</span></div>
<div class="line"><span class="lineno"> 3596</span>                <span class="keywordflow">if</span> (! bottom.empty()) {</div>
<div class="line"><span class="lineno"> 3597</span>                    MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, layer_storage_mutex, type);</div>
<div class="line"><span class="lineno"> 3598</span>                    layer_new.polygons   = std::move(bottom);</div>
<div class="line"><span class="lineno"> 3599</span>                    layer_new.print_z    = intermediate_layer.print_z;</div>
<div class="line"><span class="lineno"> 3600</span>                    layer_new.bottom_z   = intermediate_layer.bottom_z;</div>
<div class="line"><span class="lineno"> 3601</span>                    layer_new.height     = intermediate_layer.height;</div>
<div class="line"><span class="lineno"> 3602</span>                    layer_new.bridging   = intermediate_layer.bridging;</div>
<div class="line"><span class="lineno"> 3603</span>                    <span class="comment">// Subtract the interface from the base regions.</span></div>
<div class="line"><span class="lineno"> 3604</span>                    intermediate_layer.polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(intermediate_layer.polygons, layer_new.polygons);</div>
<div class="line"><span class="lineno"> 3605</span>                    <span class="keywordflow">if</span> (subtract)</div>
<div class="line"><span class="lineno"> 3606</span>                        <span class="comment">// Trim the base interface layer with the interface layer.</span></div>
<div class="line"><span class="lineno"> 3607</span>                        layer_new.polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(std::move(layer_new.polygons), *subtract);</div>
<div class="line"><span class="lineno"> 3608</span>                    <span class="comment">//FIXME filter layer_new.polygons islands by a minimum area?</span></div>
<div class="line"><span class="lineno"> 3609</span>        <span class="comment">//                  $interface_area = [ grep abs($_-&gt;area) &gt;= $area_threshold, @$interface_area ];</span></div>
<div class="line"><span class="lineno"> 3610</span>                    <span class="keywordflow">return</span> &amp;layer_new;</div>
<div class="line"><span class="lineno"> 3611</span>                }</div>
<div class="line"><span class="lineno"> 3612</span>            }</div>
<div class="line"><span class="lineno"> 3613</span>            <span class="keywordflow">return</span> <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3614</span>        };</div>
<div class="line"><span class="lineno"> 3615</span>        tbb::parallel_for(tbb::blocked_range&lt;int&gt;(0, <span class="keywordtype">int</span>(intermediate_layers.size())),</div>
<div class="line"><span class="lineno"> 3616</span>            [&amp;bottom_contacts, &amp;top_contacts, &amp;intermediate_layers, &amp;insert_layer, </div>
<div class="line"><span class="lineno"> 3617</span>             num_interface_layers_top, num_interface_layers_bottom, num_base_interface_layers_top, num_base_interface_layers_bottom, num_interface_layers_only_top, num_interface_layers_only_bottom,</div>
<div class="line"><span class="lineno"> 3618</span>             snug_supports, &amp;interface_layers, &amp;base_interface_layers](<span class="keyword">const</span> tbb::blocked_range&lt;int&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {                </div>
<div class="line"><span class="lineno"> 3619</span>                <span class="comment">// Gather the top / bottom contact layers intersecting with num_interface_layers resp. num_interface_layers_only intermediate layers above / below</span></div>
<div class="line"><span class="lineno"> 3620</span>                <span class="comment">// this intermediate layer.</span></div>
<div class="line"><span class="lineno"> 3621</span>                <span class="comment">// Index of the first top contact layer intersecting the current intermediate layer.</span></div>
<div class="line"><span class="lineno"> 3622</span>                auto idx_top_contact_first      = -1;</div>
<div class="line"><span class="lineno"> 3623</span>                <span class="comment">// Index of the first bottom contact layer intersecting the current intermediate layer.</span></div>
<div class="line"><span class="lineno"> 3624</span>                auto idx_bottom_contact_first   = -1;</div>
<div class="line"><span class="lineno"> 3625</span>                auto num_intermediate = int(intermediate_layers.size());</div>
<div class="line"><span class="lineno"> 3626</span>                for (int idx_intermediate_layer = range.begin(); idx_intermediate_layer &lt; range.end(); ++ idx_intermediate_layer) {</div>
<div class="line"><span class="lineno"> 3627</span>                    MyLayer &amp;intermediate_layer = *intermediate_layers[idx_intermediate_layer];</div>
<div class="line"><span class="lineno"> 3628</span>                    Polygons polygons_top_contact_projected_interface;</div>
<div class="line"><span class="lineno"> 3629</span>                    Polygons polygons_top_contact_projected_base;</div>
<div class="line"><span class="lineno"> 3630</span>                    Polygons polygons_bottom_contact_projected_interface;</div>
<div class="line"><span class="lineno"> 3631</span>                    Polygons polygons_bottom_contact_projected_base;</div>
<div class="line"><span class="lineno"> 3632</span>                    if (num_interface_layers_top &gt; 0) {</div>
<div class="line"><span class="lineno"> 3633</span>                        <span class="comment">// Top Z coordinate of a slab, over which we are collecting the top / bottom contact surfaces</span></div>
<div class="line"><span class="lineno"> 3634</span>                        coordf_t top_z              = intermediate_layers[std::min(num_intermediate - 1, idx_intermediate_layer + num_interface_layers_top - 1)]-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3635</span>                        coordf_t top_inteface_z     = std::numeric_limits&lt;coordf_t&gt;::max();</div>
<div class="line"><span class="lineno"> 3636</span>                        if (num_base_interface_layers_top &gt; 0)</div>
<div class="line"><span class="lineno"> 3637</span>                            <span class="comment">// Some top base interface layers will be generated.</span></div>
<div class="line"><span class="lineno"> 3638</span>                            top_inteface_z = num_interface_layers_only_top == 0 ?</div>
<div class="line"><span class="lineno"> 3639</span>                                <span class="comment">// Only base interface layers to generate.</span></div>
<div class="line"><span class="lineno"> 3640</span>                                - std::numeric_limits&lt;coordf_t&gt;::max() :</div>
<div class="line"><span class="lineno"> 3641</span>                                intermediate_layers[std::min(num_intermediate - 1, idx_intermediate_layer + num_interface_layers_only_top - 1)]-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3642</span>                        <span class="comment">// Move idx_top_contact_first up until above the current print_z.</span></div>
<div class="line"><span class="lineno"> 3643</span>                        idx_top_contact_first = idx_higher_or_equal(top_contacts, idx_top_contact_first, [&amp;intermediate_layer](const MyLayer *layer){ return layer-&gt;print_z &gt;= intermediate_layer.print_z; }); <span class="comment">//  - EPSILON</span></div>
<div class="line"><span class="lineno"> 3644</span>                        <span class="comment">// Collect the top contact areas above this intermediate layer, below top_z.</span></div>
<div class="line"><span class="lineno"> 3645</span>                        for (int idx_top_contact = idx_top_contact_first; idx_top_contact &lt; int(top_contacts.size()); ++ idx_top_contact) {</div>
<div class="line"><span class="lineno"> 3646</span>                            const MyLayer &amp;top_contact_layer = *top_contacts[idx_top_contact];</div>
<div class="line"><span class="lineno"> 3647</span>                            <span class="comment">//FIXME maybe this adds one interface layer in excess?</span></div>
<div class="line"><span class="lineno"> 3648</span>                            if (top_contact_layer.bottom_z - EPSILON &gt; top_z)</div>
<div class="line"><span class="lineno"> 3649</span>                                break;</div>
<div class="line"><span class="lineno"> 3650</span>                            polygons_append(top_contact_layer.bottom_z - EPSILON &gt; top_inteface_z ? polygons_top_contact_projected_base : polygons_top_contact_projected_interface, </div>
<div class="line"><span class="lineno"> 3651</span>                                <span class="comment">// For snug supports, project the overhang polygons covering the whole overhang, so that they will merge without a gap with support polygons of the other layers.</span></div>
<div class="line"><span class="lineno"> 3652</span>                                <span class="comment">// For grid supports, merging of support regions will be performed by the projection into grid.</span></div>
<div class="line"><span class="lineno"> 3653</span>                                snug_supports ? *top_contact_layer.overhang_polygons : top_contact_layer.polygons);</div>
<div class="line"><span class="lineno"> 3654</span>                        }</div>
<div class="line"><span class="lineno"> 3655</span>                    }</div>
<div class="line"><span class="lineno"> 3656</span>                    if (num_interface_layers_bottom &gt; 0) {</div>
<div class="line"><span class="lineno"> 3657</span>                        <span class="comment">// Bottom Z coordinate of a slab, over which we are collecting the top / bottom contact surfaces</span></div>
<div class="line"><span class="lineno"> 3658</span>                        coordf_t bottom_z           = intermediate_layers[std::max(0, idx_intermediate_layer - num_interface_layers_bottom + 1)]-&gt;bottom_z;</div>
<div class="line"><span class="lineno"> 3659</span>                        coordf_t bottom_interface_z = - std::numeric_limits&lt;coordf_t&gt;::max();</div>
<div class="line"><span class="lineno"> 3660</span>                        if (num_base_interface_layers_bottom &gt; 0)</div>
<div class="line"><span class="lineno"> 3661</span>                            <span class="comment">// Some bottom base interface layers will be generated.</span></div>
<div class="line"><span class="lineno"> 3662</span>                            bottom_interface_z = num_interface_layers_only_bottom == 0 ? </div>
<div class="line"><span class="lineno"> 3663</span>                                <span class="comment">// Only base interface layers to generate.</span></div>
<div class="line"><span class="lineno"> 3664</span>                                std::numeric_limits&lt;coordf_t&gt;::max() :</div>
<div class="line"><span class="lineno"> 3665</span>                                intermediate_layers[std::max(0, idx_intermediate_layer - num_interface_layers_only_bottom)]-&gt;bottom_z;</div>
<div class="line"><span class="lineno"> 3666</span>                        <span class="comment">// Move idx_bottom_contact_first up until touching bottom_z.</span></div>
<div class="line"><span class="lineno"> 3667</span>                        idx_bottom_contact_first = idx_higher_or_equal(bottom_contacts, idx_bottom_contact_first, [bottom_z](const MyLayer *layer){ return layer-&gt;print_z &gt;= bottom_z - EPSILON; });</div>
<div class="line"><span class="lineno"> 3668</span>                        <span class="comment">// Collect the top contact areas above this intermediate layer, below top_z.</span></div>
<div class="line"><span class="lineno"> 3669</span>                        for (int idx_bottom_contact = idx_bottom_contact_first; idx_bottom_contact &lt; int(bottom_contacts.size()); ++ idx_bottom_contact) {</div>
<div class="line"><span class="lineno"> 3670</span>                            const MyLayer &amp;bottom_contact_layer = *bottom_contacts[idx_bottom_contact];</div>
<div class="line"><span class="lineno"> 3671</span>                            if (bottom_contact_layer.print_z - EPSILON &gt; intermediate_layer.bottom_z)</div>
<div class="line"><span class="lineno"> 3672</span>                                break;</div>
<div class="line"><span class="lineno"> 3673</span>                            polygons_append(bottom_contact_layer.print_z - EPSILON &gt; bottom_interface_z ? polygons_bottom_contact_projected_interface : polygons_bottom_contact_projected_base, bottom_contact_layer.polygons);</div>
<div class="line"><span class="lineno"> 3674</span>                        }</div>
<div class="line"><span class="lineno"> 3675</span>                    }</div>
<div class="line"><span class="lineno"> 3676</span>                    MyLayer *interface_layer = nullptr;</div>
<div class="line"><span class="lineno"> 3677</span>                    if (! polygons_bottom_contact_projected_interface.empty() || ! polygons_top_contact_projected_interface.empty()) {</div>
<div class="line"><span class="lineno"> 3678</span>                        interface_layer = insert_layer(</div>
<div class="line"><span class="lineno"> 3679</span>                            intermediate_layer, polygons_bottom_contact_projected_interface, std::move(polygons_top_contact_projected_interface), nullptr,</div>
<div class="line"><span class="lineno"> 3680</span>                            polygons_top_contact_projected_interface.empty() ? sltBottomInterface : sltTopInterface);</div>
<div class="line"><span class="lineno"> 3681</span>                        interface_layers[idx_intermediate_layer] = interface_layer;</div>
<div class="line"><span class="lineno"> 3682</span>                    }</div>
<div class="line"><span class="lineno"> 3683</span>                    if (! polygons_bottom_contact_projected_base.empty() || ! polygons_top_contact_projected_base.empty())</div>
<div class="line"><span class="lineno"> 3684</span>                        base_interface_layers[idx_intermediate_layer] = insert_layer(</div>
<div class="line"><span class="lineno"> 3685</span>                            intermediate_layer, polygons_bottom_contact_projected_base, std::move(polygons_top_contact_projected_base), </div>
<div class="line"><span class="lineno"> 3686</span>                            interface_layer ? &amp;interface_layer-&gt;polygons : nullptr, sltBase);</div>
<div class="line"><span class="lineno"> 3687</span>                }</div>
<div class="line"><span class="lineno"> 3688</span>            });</div>
<div class="line"><span class="lineno"> 3689</span> </div>
<div class="line"><span class="lineno"> 3690</span>        <span class="comment">// Compress contact_out, remove the nullptr items.</span></div>
<div class="line"><span class="lineno"> 3691</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aaea096e5f48dc58b390aa7b72f2a02bc">remove_nulls</a>(interface_layers);</div>
<div class="line"><span class="lineno"> 3692</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aaea096e5f48dc58b390aa7b72f2a02bc">remove_nulls</a>(base_interface_layers);</div>
<div class="line"><span class="lineno"> 3693</span>        BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::generate_interface_layers() in parallel - end&quot;</span>;</div>
<div class="line"><span class="lineno"> 3694</span>    }</div>
<div class="line"><span class="lineno"> 3695</span> </div>
<div class="line"><span class="lineno"> 3696</span>    <span class="keywordflow">return</span> base_and_interface_layers;</div>
<div class="line"><span class="lineno"> 3697</span>}</div>
<div class="ttc" id="a_print_object_8cpp_html_a952c572f92c0eee8cc1866011a230243"><div class="ttname"><a href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a></div><div class="ttdeci">#define SUPPORT_SURFACES_OFFSET_PARAMETERS</div><div class="ttdef"><b>Definition</b> PrintObject.cpp:2498</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_a8d56d1ac599f0ae41d95794c8ed66b98"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#a8d56d1ac599f0ae41d95794c8ed66b98">Slic3r::Flow::scaled_spacing</a></div><div class="ttdeci">coord_t scaled_spacing() const</div><div class="ttdef"><b>Definition</b> Flow.hpp:69</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a2daf585d84c3d4ca23335f604b08d6d8"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8">Slic3r::PrintObjectSupportMaterial::SupporLayerType</a></div><div class="ttdeci">SupporLayerType</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:23</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1a34c8f50b5fa362f63402116dcf6ccd"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1a34c8f50b5fa362f63402116dcf6ccd">Slic3r::smooth_outward</a></div><div class="ttdeci">void smooth_outward(MutablePolygon &amp;polygon, coord_t clip_dist_scaled)</div><div class="ttdef"><b>Definition</b> MutablePolygon.cpp:258</div></div>
<div class="ttc" id="anamespace_slic3r_html_a57c612ab2aa7dd29f1e7ece220e3af82"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a57c612ab2aa7dd29f1e7ece220e3af82">Slic3r::intersection</a></div><div class="ttdeci">Slic3r::Polygons intersection(const Slic3r::Polygon &amp;subject, const Slic3r::Polygon &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:666</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5f240a84e573ed2d7785a439f4239e1a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5f240a84e573ed2d7785a439f4239e1a">Slic3r::append</a></div><div class="ttdeci">void append(std::vector&lt; T &gt; &amp;dest, const std::vector&lt; T &gt; &amp;src)</div><div class="ttdef"><b>Definition</b> libslic3r.h:132</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7bfdff734ed5d9f415d7eb00ca540be6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">Slic3r::layer_allocate</a></div><div class="ttdeci">PrintObjectSupportMaterial::MyLayer &amp; layer_allocate(std::deque&lt; PrintObjectSupportMaterial::MyLayer &gt; &amp;layer_storage, PrintObjectSupportMaterial::SupporLayerType layer_type)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:429</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7fbd55ea6df523713e252f0539cc53f7"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7fbd55ea6df523713e252f0539cc53f7">Slic3r::closing</a></div><div class="ttdeci">Slic3r::Polygons closing(const Slic3r::Polygons &amp;polygons, const float delta1, const float delta2, ClipperLib::JoinType joinType, double miterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:571</div></div>
<div class="ttc" id="anamespace_slic3r_html_aaea096e5f48dc58b390aa7b72f2a02bc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aaea096e5f48dc58b390aa7b72f2a02bc">Slic3r::remove_nulls</a></div><div class="ttdeci">void remove_nulls(std::vector&lt; T * &gt; &amp;vec)</div><div class="ttdef"><b>Definition</b> libslic3r.h:198</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab2a6b8e21dde15af9913133399a852fd"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab2a6b8e21dde15af9913133399a852fd">Slic3r::union_safety_offset</a></div><div class="ttdeci">Slic3r::Polygons union_safety_offset(const Slic3r::Polygons &amp;polygons)</div><div class="ttdef"><b>Definition</b> ClipperUtils.hpp:350</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac4444e117129d57974e96c39d6976a3ba5ce02a204f1aadd9c7772eee93a312fb"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac4444e117129d57974e96c39d6976a3ba5ce02a204f1aadd9c7772eee93a312fb">Slic3r::smsSnug</a></div><div class="ttdeci">@ smsSnug</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:104</div></div>
<div class="ttc" id="anamespace_slic3r_html_aed0434d42d75979bb4d469ff41de7158"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">Slic3r::diff</a></div><div class="ttdeci">Slic3r::Polygons diff(const Slic3r::Polygon &amp;subject, const Slic3r::Polygon &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:654</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1nfp_html_a1c066fc9d917be164185b8f1e86a36b6"><div class="ttname"><a href="../../d0/d53/namespacelibnest2d_1_1nfp.html#a1c066fc9d917be164185b8f1e86a36b6">libnest2d::nfp::subtract</a></div><div class="ttdeci">TMultiShape&lt; PolygonImpl &gt; subtract(const TMultiShape&lt; PolygonImpl &gt; &amp;outerBinNfp, const TMultiShape&lt; PolygonImpl &gt; &amp;shapes)</div><div class="ttdef"><b>Definition</b> geometries.hpp:264</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00132">Slic3r::append()</a>, <a class="el" href="../../#l00102">Slic3r::PrintObjectSupportMaterial::MyLayer::bottom_z</a>, <a class="el" href="../../#l00112">Slic3r::PrintObjectSupportMaterial::MyLayer::bridging</a>, <a class="el" href="../../#l00571">Slic3r::closing()</a>, <a class="el" href="../../#l00654">Slic3r::diff()</a>, <a class="el" href="../../#l00104">Slic3r::PrintObjectSupportMaterial::MyLayer::height</a>, <a class="el" href="../../#l00666">Slic3r::intersection()</a>, <a class="el" href="../../#l00429">Slic3r::layer_allocate()</a>, <a class="el" href="../../#l00115">Slic3r::PrintObjectSupportMaterial::MyLayer::polygons</a>, <a class="el" href="../../#l00099">Slic3r::PrintObjectSupportMaterial::MyLayer::print_z</a>, <a class="el" href="../../#l00374">Slic3r::range()</a>, <a class="el" href="../../#l00198">Slic3r::remove_nulls()</a>, <a class="el" href="../../#l00258">Slic3r::smooth_outward()</a>, <a class="el" href="../../#l00104">Slic3r::smsSnug</a>, <a class="el" href="../../#l00068">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>, and <a class="el" href="../../#l00350">Slic3r::union_safety_offset()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a84ef3171e46d333d581e2af74a88b0bc_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a84ef3171e46d333d581e2af74a88b0bc_icgraph.svg" width="456" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a9eec033f0dc8429eb500bfc015fbba2c" name="a9eec033f0dc8429eb500bfc015fbba2c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9eec033f0dc8429eb500bfc015fbba2c">&#9670;&#160;</a></span>generate_raft_base()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">PrintObjectSupportMaterial::MyLayersPtr</a> Slic3r::PrintObjectSupportMaterial::generate_raft_base </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>interface_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>base_interface_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>base_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3388</span>{</div>
<div class="line"><span class="lineno"> 3389</span>    <span class="comment">// If there is brim to be generated, calculate the trimming regions.</span></div>
<div class="line"><span class="lineno"> 3390</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> brim;</div>
<div class="line"><span class="lineno"> 3391</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.has_brim()) {</div>
<div class="line"><span class="lineno"> 3392</span>        <span class="comment">// Calculate the area covered by the brim.</span></div>
<div class="line"><span class="lineno"> 3393</span>        <span class="keyword">const</span> <a class="code hl_enumeration" href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55">BrimType</a> brim_type       = <span class="keywordtype">object</span>.config().brim_type;</div>
<div class="line"><span class="lineno"> 3394</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span>     brim_outer      = brim_type == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55ac974286e0c4e1d12230afefec91d3855">btOuterOnly</a> || brim_type == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55a1308e1e57691466ab1090eb78aa074df">btOuterAndInner</a>;</div>
<div class="line"><span class="lineno"> 3395</span>        <span class="keyword">const</span> <span class="keywordtype">bool</span>     brim_inner      = brim_type == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55a427588349323a7b0593fd0c19a39d56e">btInnerOnly</a> || brim_type == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55a1308e1e57691466ab1090eb78aa074df">btOuterAndInner</a>;</div>
<div class="line"><span class="lineno"> 3396</span>        <span class="comment">// BBS: the pattern of raft and brim are the same, thus the brim can be serpated by support raft.</span></div>
<div class="line"><span class="lineno"> 3397</span>        <span class="keyword">const</span> <span class="keyword">auto</span>     brim_object_gap = scaled&lt;float&gt;(<span class="keywordtype">object</span>.config().brim_object_gap.value);</div>
<div class="line"><span class="lineno"> 3398</span>        <span class="comment">//const auto     brim_object_gap = scaled&lt;float&gt;(object.config().brim_object_gap.value + object.config().brim_width.value);</span></div>
<div class="line"><span class="lineno"> 3399</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ExPolygon &amp;ex : <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>.layers().<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a9bbafef5b59a31bd6049a3aee20d760b">front</a>()-&gt;lslices) {</div>
<div class="line"><span class="lineno"> 3400</span>            <span class="keywordflow">if</span> (brim_outer &amp;&amp; brim_inner)</div>
<div class="line"><span class="lineno"> 3401</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(brim, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(ex, brim_object_gap));</div>
<div class="line"><span class="lineno"> 3402</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3403</span>                <span class="keywordflow">if</span> (brim_outer)</div>
<div class="line"><span class="lineno"> 3404</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(brim, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(ex.contour, brim_object_gap, <a class="code hl_enumvalue" href="../../de/d37/namespace_clipper_lib.html#ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388">ClipperLib::jtRound</a>, <span class="keywordtype">float</span>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(0.1))));</div>
<div class="line"><span class="lineno"> 3405</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3406</span>                    brim.emplace_back(ex.contour);</div>
<div class="line"><span class="lineno"> 3407</span>                <span class="keywordflow">if</span> (brim_inner) {</div>
<div class="line"><span class="lineno"> 3408</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">holes</a> = ex.holes;</div>
<div class="line"><span class="lineno"> 3409</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a41c1e9180aa068c805189d12c0c37f65">polygons_reverse</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">holes</a>);</div>
<div class="line"><span class="lineno"> 3410</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">holes</a> = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a52e534c040f90def3ba966219488ca87">shrink</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">holes</a>, brim_object_gap, <a class="code hl_enumvalue" href="../../de/d37/namespace_clipper_lib.html#ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388">ClipperLib::jtRound</a>, <span class="keywordtype">float</span>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(0.1)));</div>
<div class="line"><span class="lineno"> 3411</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a41c1e9180aa068c805189d12c0c37f65">polygons_reverse</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">holes</a>);</div>
<div class="line"><span class="lineno"> 3412</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(brim, std::move(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">holes</a>));</div>
<div class="line"><span class="lineno"> 3413</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3414</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(brim, ex.holes);</div>
<div class="line"><span class="lineno"> 3415</span>            }</div>
<div class="line"><span class="lineno"> 3416</span>        }</div>
<div class="line"><span class="lineno"> 3417</span>        brim = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(brim);</div>
<div class="line"><span class="lineno"> 3418</span>    }</div>
<div class="line"><span class="lineno"> 3419</span> </div>
<div class="line"><span class="lineno"> 3420</span>    <span class="comment">// How much to inflate the support columns to be stable. This also applies to the 1st layer, if no raft layers are to be printed.</span></div>
<div class="line"><span class="lineno"> 3421</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> inflate_factor_fine      = float(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>((<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>() &gt; 1) ? 0.5 : <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>));</div>
<div class="line"><span class="lineno"> 3422</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> inflate_factor_1st_layer = std::max(0.f, <span class="keywordtype">float</span>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<span class="keywordtype">object</span>.config().raft_first_layer_expansion)) - inflate_factor_fine);</div>
<div class="line"><span class="lineno"> 3423</span>    MyLayer       *contacts         = top_contacts         .empty() ? nullptr : top_contacts         .front();</div>
<div class="line"><span class="lineno"> 3424</span>    MyLayer       *interfaces       = interface_layers     .empty() ? nullptr : interface_layers     .front();</div>
<div class="line"><span class="lineno"> 3425</span>    MyLayer       *base_interfaces  = base_interface_layers.empty() ? nullptr : base_interface_layers.front();</div>
<div class="line"><span class="lineno"> 3426</span>    MyLayer       *columns_base     = base_layers          .empty() ? nullptr : base_layers          .front();</div>
<div class="line"><span class="lineno"> 3427</span>    <span class="keywordflow">if</span> (contacts != <span class="keyword">nullptr</span> &amp;&amp; contacts-&gt;print_z &gt; std::max(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae716f6f022aa86c9be6a7f05717c5287">raft_contact_top_z</a>) + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3428</span>        <span class="comment">// This is not the raft contact layer.</span></div>
<div class="line"><span class="lineno"> 3429</span>        contacts = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3430</span>    <span class="keywordflow">if</span> (interfaces != <span class="keyword">nullptr</span> &amp;&amp; interfaces-&gt;bottom_print_z() &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3431</span>        <span class="comment">// This is not the raft column base layer.</span></div>
<div class="line"><span class="lineno"> 3432</span>        interfaces = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3433</span>    <span class="keywordflow">if</span> (base_interfaces != <span class="keyword">nullptr</span> &amp;&amp; base_interfaces-&gt;bottom_print_z() &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3434</span>        <span class="comment">// This is not the raft column base layer.</span></div>
<div class="line"><span class="lineno"> 3435</span>        base_interfaces = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3436</span>    <span class="keywordflow">if</span> (columns_base != <span class="keyword">nullptr</span> &amp;&amp; columns_base-&gt;bottom_print_z() &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3437</span>        <span class="comment">// This is not the raft interface layer.</span></div>
<div class="line"><span class="lineno"> 3438</span>        columns_base = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 3439</span> </div>
<div class="line"><span class="lineno"> 3440</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> interface_polygons;</div>
<div class="line"><span class="lineno"> 3441</span>    <span class="keywordflow">if</span> (contacts != <span class="keyword">nullptr</span> &amp;&amp; ! contacts-&gt;polygons.empty())</div>
<div class="line"><span class="lineno"> 3442</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(interface_polygons, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(contacts-&gt;polygons, inflate_factor_fine, <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>));</div>
<div class="line"><span class="lineno"> 3443</span>    <span class="keywordflow">if</span> (interfaces != <span class="keyword">nullptr</span> &amp;&amp; ! interfaces-&gt;polygons.empty())</div>
<div class="line"><span class="lineno"> 3444</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(interface_polygons, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(interfaces-&gt;polygons, inflate_factor_fine, <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>));</div>
<div class="line"><span class="lineno"> 3445</span>    <span class="keywordflow">if</span> (base_interfaces != <span class="keyword">nullptr</span> &amp;&amp; ! base_interfaces-&gt;polygons.empty())</div>
<div class="line"><span class="lineno"> 3446</span>        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(interface_polygons, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(base_interfaces-&gt;polygons, inflate_factor_fine, <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>));</div>
<div class="line"><span class="lineno"> 3447</span> </div>
<div class="line"><span class="lineno"> 3448</span>    <span class="comment">// Output vector.</span></div>
<div class="line"><span class="lineno"> 3449</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> raft_layers;</div>
<div class="line"><span class="lineno"> 3450</span> </div>
<div class="line"><span class="lineno"> 3451</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>() &gt; 1) {</div>
<div class="line"><span class="lineno"> 3452</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> base;</div>
<div class="line"><span class="lineno"> 3453</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> columns;</div>
<div class="line"><span class="lineno"> 3454</span>        <span class="keywordflow">if</span> (columns_base != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 3455</span>            base = columns_base-&gt;polygons;</div>
<div class="line"><span class="lineno"> 3456</span>            columns = base;</div>
<div class="line"><span class="lineno"> 3457</span>            <span class="keywordflow">if</span> (! interface_polygons.empty())</div>
<div class="line"><span class="lineno"> 3458</span>                <span class="comment">// Trim the 1st layer columns with the inflated interface polygons.</span></div>
<div class="line"><span class="lineno"> 3459</span>                columns = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(columns, interface_polygons);</div>
<div class="line"><span class="lineno"> 3460</span>        }</div>
<div class="line"><span class="lineno"> 3461</span>        <span class="keywordflow">if</span> (! interface_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 3462</span>            <span class="comment">// Merge the untrimmed columns base with the expanded raft interface, to be used for the support base and interface.</span></div>
<div class="line"><span class="lineno"> 3463</span>            base = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a015388ff0752a25649a975078f7a5431">union_</a>(base, interface_polygons); </div>
<div class="line"><span class="lineno"> 3464</span>        }</div>
<div class="line"><span class="lineno"> 3465</span>        <span class="comment">// Do not add the raft contact layer, only add the raft layers below the contact layer.</span></div>
<div class="line"><span class="lineno"> 3466</span>        <span class="comment">// Insert the 1st layer.</span></div>
<div class="line"><span class="lineno"> 3467</span>        {</div>
<div class="line"><span class="lineno"> 3468</span>            MyLayer &amp;new_layer = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a> &gt; 0) ? <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88">sltRaftBase</a> : <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed">sltRaftInterface</a>);</div>
<div class="line"><span class="lineno"> 3469</span>            raft_layers.push_back(&amp;new_layer);</div>
<div class="line"><span class="lineno"> 3470</span>            new_layer.<a class="code hl_variable" href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html#a5805011f8c3f92fac251b7bd90156cbe">print_z</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3471</span>            new_layer.height  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3472</span>            new_layer.bottom_z = 0.;</div>
<div class="line"><span class="lineno"> 3473</span>            new_layer.polygons = inflate_factor_1st_layer &gt; 0 ? <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(base, inflate_factor_1st_layer) : base;</div>
<div class="line"><span class="lineno"> 3474</span>        }</div>
<div class="line"><span class="lineno"> 3475</span>        <span class="comment">// Insert the base layers.</span></div>
<div class="line"><span class="lineno"> 3476</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a>; ++ i) {</div>
<div class="line"><span class="lineno"> 3477</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> print_z = raft_layers.back()-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3478</span>            MyLayer &amp;new_layer  = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a0c0a42f2259fccb4a8ee3afc1bcb4f88">sltRaftBase</a>);</div>
<div class="line"><span class="lineno"> 3479</span>            raft_layers.push_back(&amp;new_layer);</div>
<div class="line"><span class="lineno"> 3480</span>            new_layer.print_z  = print_z + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a3b602295c5e23f6193a9769b41e193ca">base_raft_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3481</span>            new_layer.height   = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a3b602295c5e23f6193a9769b41e193ca">base_raft_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3482</span>            new_layer.bottom_z = print_z;</div>
<div class="line"><span class="lineno"> 3483</span>            new_layer.polygons = base;</div>
<div class="line"><span class="lineno"> 3484</span>        }</div>
<div class="line"><span class="lineno"> 3485</span>        <span class="comment">// Insert the interface layers.</span></div>
<div class="line"><span class="lineno"> 3486</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae6cca9e93ef7f659e4e8be919ff1342f">interface_raft_layers</a>; ++ i) {</div>
<div class="line"><span class="lineno"> 3487</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> print_z = raft_layers.back()-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3488</span>            MyLayer &amp;new_layer = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ae73a82ebd642b88abfe069e5a0a4c9ed">sltRaftInterface</a>);</div>
<div class="line"><span class="lineno"> 3489</span>            raft_layers.push_back(&amp;new_layer);</div>
<div class="line"><span class="lineno"> 3490</span>            new_layer.print_z = print_z + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a32988256e6f98aeb1672e3739003d24c">interface_raft_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3491</span>            new_layer.height  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a32988256e6f98aeb1672e3739003d24c">interface_raft_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3492</span>            new_layer.bottom_z = print_z;</div>
<div class="line"><span class="lineno"> 3493</span>            new_layer.polygons = interface_polygons;</div>
<div class="line"><span class="lineno"> 3494</span>            <span class="comment">//FIXME misusing contact_polygons for support columns.</span></div>
<div class="line"><span class="lineno"> 3495</span>            new_layer.contact_polygons = std::make_unique&lt;Polygons&gt;(columns);</div>
<div class="line"><span class="lineno"> 3496</span>        }</div>
<div class="line"><span class="lineno"> 3497</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3498</span>        <span class="keywordflow">if</span> (columns_base != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 3499</span>        <span class="comment">// Expand the bases of the support columns in the 1st layer.</span></div>
<div class="line"><span class="lineno"> 3500</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;raft     = columns_base-&gt;polygons;</div>
<div class="line"><span class="lineno"> 3501</span>            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>  trimming;</div>
<div class="line"><span class="lineno"> 3502</span>            <span class="comment">// BBS: if first layer of support is intersected with object island, it must have the same function as brim unless in nobrim mode.</span></div>
<div class="line"><span class="lineno"> 3503</span>            <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.has_brim())</div>
<div class="line"><span class="lineno"> 3504</span>                trimming = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">m_object</a>-&gt;<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a4d0b4aca78fffa73137e8791e6b9065b">layers</a>().<a class="code hl_function" href="../../d4/dab/class_slic3r_1_1_const_vector_of_ptrs_adaptor.html#ad4bc30ba8bb4ce2d4e8e8c6c85ffcd04">front</a>()-&gt;<a class="code hl_variable" href="../../d1/d68/class_slic3r_1_1_layer.html#a3052da5e28b9b358d43ad43d7e9173ed">lslices</a>, (<span class="keywordtype">float</span>)<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<span class="keywordtype">object</span>.config().brim_object_gap.value), <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>);</div>
<div class="line"><span class="lineno"> 3505</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3506</span>                trimming = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cd3acbc1d9ab9522230a80f97349800">m_object</a>-&gt;<a class="code hl_function" href="../../de/d87/class_slic3r_1_1_print_object.html#a4d0b4aca78fffa73137e8791e6b9065b">layers</a>().<a class="code hl_function" href="../../d4/dab/class_slic3r_1_1_const_vector_of_ptrs_adaptor.html#ad4bc30ba8bb4ce2d4e8e8c6c85ffcd04">front</a>()-&gt;<a class="code hl_variable" href="../../d1/d68/class_slic3r_1_1_layer.html#a3052da5e28b9b358d43ad43d7e9173ed">lslices</a>, (<span class="keywordtype">float</span>)<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a>), <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>);</div>
<div class="line"><span class="lineno"> 3507</span>            <span class="keywordflow">if</span> (inflate_factor_1st_layer &gt; <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a57f3510310e75de35abd65c9650b49f7">SCALED_EPSILON</a>) {</div>
<div class="line"><span class="lineno"> 3508</span>                <span class="comment">// Inflate in multiple steps to avoid leaking of the support 1st layer through object walls.</span></div>
<div class="line"><span class="lineno"> 3509</span>                <span class="keyword">auto</span>  nsteps = std::max(5, <span class="keywordtype">int</span>(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>(inflate_factor_1st_layer / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7bd6ca033aef8fd24f8f2622b96bf8a0">first_layer_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a1766d8ec9f82c0810cf3acf9d2a6d0d1">scaled_width</a>())));</div>
<div class="line"><span class="lineno"> 3510</span>                <span class="keywordtype">float</span> <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>   = inflate_factor_1st_layer / nsteps;</div>
<div class="line"><span class="lineno"> 3511</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; nsteps; ++ i)</div>
<div class="line"><span class="lineno"> 3512</span>                    raft = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3139b5c30f46b41a991edc50308554f6">expand</a>(raft, step), trimming);</div>
<div class="line"><span class="lineno"> 3513</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 3514</span>                raft = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(raft, trimming);</div>
<div class="line"><span class="lineno"> 3515</span>            <span class="keywordflow">if</span> (! interface_polygons.empty())</div>
<div class="line"><span class="lineno"> 3516</span>                columns_base-&gt;polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(columns_base-&gt;polygons, interface_polygons);</div>
<div class="line"><span class="lineno"> 3517</span>        }</div>
<div class="line"><span class="lineno"> 3518</span>        <span class="keywordflow">if</span> (! brim.empty()) {</div>
<div class="line"><span class="lineno"> 3519</span>            <span class="keywordflow">if</span> (columns_base)</div>
<div class="line"><span class="lineno"> 3520</span>                columns_base-&gt;polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(columns_base-&gt;polygons, brim);</div>
<div class="line"><span class="lineno"> 3521</span>            <span class="keywordflow">if</span> (contacts)</div>
<div class="line"><span class="lineno"> 3522</span>                contacts-&gt;polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(contacts-&gt;polygons, brim);</div>
<div class="line"><span class="lineno"> 3523</span>            <span class="keywordflow">if</span> (interfaces)</div>
<div class="line"><span class="lineno"> 3524</span>                interfaces-&gt;polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(interfaces-&gt;polygons, brim);</div>
<div class="line"><span class="lineno"> 3525</span>            <span class="keywordflow">if</span> (base_interfaces)</div>
<div class="line"><span class="lineno"> 3526</span>                base_interfaces-&gt;polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(base_interfaces-&gt;polygons, brim);</div>
<div class="line"><span class="lineno"> 3527</span>        }</div>
<div class="line"><span class="lineno"> 3528</span>    }</div>
<div class="line"><span class="lineno"> 3529</span> </div>
<div class="line"><span class="lineno"> 3530</span>    <span class="keywordflow">return</span> raft_layers;</div>
<div class="line"><span class="lineno"> 3531</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a63043b6807e8e10fb1adf4667e3664d2"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const CeilReturnType ceil() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:402</div></div>
<div class="ttc" id="aclass_slic3r_1_1_const_vector_of_ptrs_adaptor_html_ad4bc30ba8bb4ce2d4e8e8c6c85ffcd04"><div class="ttname"><a href="../../d4/dab/class_slic3r_1_1_const_vector_of_ptrs_adaptor.html#ad4bc30ba8bb4ce2d4e8e8c6c85ffcd04">Slic3r::ConstVectorOfPtrsAdaptor::front</a></div><div class="ttdeci">const T * front() const</div><div class="ttdef"><b>Definition</b> Print.hpp:156</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_a1766d8ec9f82c0810cf3acf9d2a6d0d1"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#a1766d8ec9f82c0810cf3acf9d2a6d0d1">Slic3r::Flow::scaled_width</a></div><div class="ttdeci">coord_t scaled_width() const</div><div class="ttdef"><b>Definition</b> Flow.hpp:62</div></div>
<div class="ttc" id="aclass_slic3r_1_1_layer_html_a3052da5e28b9b358d43ad43d7e9173ed"><div class="ttname"><a href="../../d1/d68/class_slic3r_1_1_layer.html#a3052da5e28b9b358d43ad43d7e9173ed">Slic3r::Layer::lslices</a></div><div class="ttdeci">ExPolygons lslices</div><div class="ttdef"><b>Definition</b> Layer.hpp:148</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_html_a4d0b4aca78fffa73137e8791e6b9065b"><div class="ttname"><a href="../../de/d87/class_slic3r_1_1_print_object.html#a4d0b4aca78fffa73137e8791e6b9065b">Slic3r::PrintObject::layers</a></div><div class="ttdeci">ConstLayerPtrsAdaptor layers() const</div><div class="ttdef"><b>Definition</b> Print.hpp:301</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_1_1_my_layer_html_a5805011f8c3f92fac251b7bd90156cbe"><div class="ttname"><a href="../../d9/d1a/class_slic3r_1_1_print_object_support_material_1_1_my_layer.html#a5805011f8c3f92fac251b7bd90156cbe">Slic3r::PrintObjectSupportMaterial::MyLayer::print_z</a></div><div class="ttdeci">coordf_t print_z</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:99</div></div>
<div class="ttc" id="anamespace_clipper_lib_html_ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388"><div class="ttname"><a href="../../de/d37/namespace_clipper_lib.html#ab3880a3ca1b45df3ce93ac315a74c06ea7833a32073dc3f251ff8de93aa7b6388">ClipperLib::jtRound</a></div><div class="ttdeci">@ jtRound</div><div class="ttdef"><b>Definition</b> clipper.hpp:130</div></div>
<div class="ttc" id="anamespace_slic3r_html_a07227551f118c71dd43fb6f123d38b55"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55">Slic3r::BrimType</a></div><div class="ttdeci">BrimType</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:157</div></div>
<div class="ttc" id="anamespace_slic3r_html_a07227551f118c71dd43fb6f123d38b55a1308e1e57691466ab1090eb78aa074df"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55a1308e1e57691466ab1090eb78aa074df">Slic3r::btOuterAndInner</a></div><div class="ttdeci">@ btOuterAndInner</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:162</div></div>
<div class="ttc" id="anamespace_slic3r_html_a07227551f118c71dd43fb6f123d38b55a427588349323a7b0593fd0c19a39d56e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55a427588349323a7b0593fd0c19a39d56e">Slic3r::btInnerOnly</a></div><div class="ttdeci">@ btInnerOnly</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:161</div></div>
<div class="ttc" id="anamespace_slic3r_html_a07227551f118c71dd43fb6f123d38b55ac974286e0c4e1d12230afefec91d3855"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a07227551f118c71dd43fb6f123d38b55ac974286e0c4e1d12230afefec91d3855">Slic3r::btOuterOnly</a></div><div class="ttdeci">@ btOuterOnly</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:160</div></div>
<div class="ttc" id="anamespace_slic3r_html_a41c1e9180aa068c805189d12c0c37f65"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a41c1e9180aa068c805189d12c0c37f65">Slic3r::polygons_reverse</a></div><div class="ttdeci">void polygons_reverse(Polygons &amp;polys)</div><div class="ttdef"><b>Definition</b> Polygon.hpp:165</div></div>
<div class="ttc" id="anamespace_slic3r_html_a52e534c040f90def3ba966219488ca87"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a52e534c040f90def3ba966219488ca87">Slic3r::shrink</a></div><div class="ttdeci">Slic3r::Polygons shrink(const Slic3r::Polygons &amp;polygons, const float delta, ClipperLib::JoinType joinType=DefaultJoinType, double miterLimit=DefaultMiterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.hpp:368</div></div>
<div class="ttc" id="anamespace_slic3r_html_afb8c6d188cef5e372d935568fd9bc1ca"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#afb8c6d188cef5e372d935568fd9bc1ca">Slic3r::holes</a></div><div class="ttdeci">const Polygons &amp; holes(const ExPolygon &amp;p)</div><div class="ttdef"><b>Definition</b> AGGRaster.hpp:23</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a9bbafef5b59a31bd6049a3aee20d760b"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a9bbafef5b59a31bd6049a3aee20d760b">libnest2d::shapelike::front</a></div><div class="ttdeci">TPoint&lt; P &gt; front(const P &amp;p)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:885</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a6ceea497872e0323516dbb68ef605a21"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">marchsq::__impl::step</a></div><div class="ttdeci">Coord step(const Coord &amp;crd, Dir d)</div><div class="ttdef"><b>Definition</b> MarchingSquares.hpp:137</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a2aa68d58cabcb7cea93686d1cd08c022"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">Slic3r::SlicingParameters::base_raft_layers</a></div><div class="ttdeci">size_t base_raft_layers</div><div class="ttdef"><b>Definition</b> Slicing.hpp:50</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a32988256e6f98aeb1672e3739003d24c"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a32988256e6f98aeb1672e3739003d24c">Slic3r::SlicingParameters::interface_raft_layer_height</a></div><div class="ttdeci">coordf_t interface_raft_layer_height</div><div class="ttdef"><b>Definition</b> Slicing.hpp:56</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a3b602295c5e23f6193a9769b41e193ca"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a3b602295c5e23f6193a9769b41e193ca">Slic3r::SlicingParameters::base_raft_layer_height</a></div><div class="ttdeci">coordf_t base_raft_layer_height</div><div class="ttdef"><b>Definition</b> Slicing.hpp:55</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a97b70b5bd60c1d5a90b636aacd447e4e"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">Slic3r::SlicingParameters::first_print_layer_height</a></div><div class="ttdeci">coordf_t first_print_layer_height</div><div class="ttdef"><b>Definition</b> Slicing.hpp:70</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_aba85290292e48feb130b844963f96d62"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">Slic3r::SlicingParameters::raft_interface_top_z</a></div><div class="ttdeci">coordf_t raft_interface_top_z</div><div class="ttdef"><b>Definition</b> Slicing.hpp:94</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_acea524a90dabe50ccbd21e34e9547928"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">Slic3r::SlicingParameters::raft_layers</a></div><div class="ttdeci">size_t raft_layers() const</div><div class="ttdef"><b>Definition</b> Slicing.hpp:39</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_ae6cca9e93ef7f659e4e8be919ff1342f"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae6cca9e93ef7f659e4e8be919ff1342f">Slic3r::SlicingParameters::interface_raft_layers</a></div><div class="ttdeci">size_t interface_raft_layers</div><div class="ttdef"><b>Definition</b> Slicing.hpp:52</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_ae716f6f022aa86c9be6a7f05717c5287"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae716f6f022aa86c9be6a7f05717c5287">Slic3r::SlicingParameters::raft_contact_top_z</a></div><div class="ttdeci">coordf_t raft_contact_top_z</div><div class="ttdef"><b>Definition</b> Slicing.hpp:95</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00092">Slic3r::PrintObjectSupportMaterial::MyLayer::bottom_print_z()</a>, <a class="el" href="../../#l00102">Slic3r::PrintObjectSupportMaterial::MyLayer::bottom_z</a>, <a class="el" href="../../#l00161">Slic3r::btInnerOnly</a>, <a class="el" href="../../#l00162">Slic3r::btOuterAndInner</a>, <a class="el" href="../../#l00160">Slic3r::btOuterOnly</a>, <a class="el" href="../../#l00402">ceil()</a>, <a class="el" href="../../#l00117">Slic3r::PrintObjectSupportMaterial::MyLayer::contact_polygons</a>, <a class="el" href="../../#l00654">Slic3r::diff()</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00361">Slic3r::expand()</a>, <a class="el" href="../../#l00104">Slic3r::PrintObjectSupportMaterial::MyLayer::height</a>, <a class="el" href="../../#l00130">ClipperLib::jtRound</a>, <a class="el" href="../../#l00429">Slic3r::layer_allocate()</a>, <a class="el" href="../../#l00115">Slic3r::PrintObjectSupportMaterial::MyLayer::polygons</a>, <a class="el" href="../../#l00374">Slic3r::polygons_append()</a>, <a class="el" href="../../#l00165">Slic3r::polygons_reverse()</a>, <a class="el" href="../../#l00099">Slic3r::PrintObjectSupportMaterial::MyLayer::print_z</a>, <a class="el" href="../../#l00081">scale_</a>, <a class="el" href="../../#l00084">SCALED_EPSILON</a>, <a class="el" href="../../#l00368">Slic3r::shrink()</a>, <a class="el" href="../../#l00068">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>, and <a class="el" href="../../#l00690">Slic3r::union_()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a9eec033f0dc8429eb500bfc015fbba2c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a9eec033f0dc8429eb500bfc015fbba2c_icgraph.svg" width="418" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af1f16d63ec06800caba4cec368ab1637" name="af1f16d63ec06800caba4cec368ab1637"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1f16d63ec06800caba4cec368ab1637">&#9670;&#160;</a></span>generate_toolpaths()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PrintObjectSupportMaterial::generate_toolpaths </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a8136847c9a01e9549ec65c3e4334da96">SupportLayerPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>support_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>raft_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>intermediate_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>interface_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>base_interface_layers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 4375</span>{</div>
<div class="line"><span class="lineno"> 4376</span>    <span class="comment">// loop_interface_processor with a given circle radius.</span></div>
<div class="line"><span class="lineno"> 4377</span>    LoopInterfaceProcessor loop_interface_processor(1.5 * <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a1766d8ec9f82c0810cf3acf9d2a6d0d1">scaled_width</a>());</div>
<div class="line"><span class="lineno"> 4378</span>    loop_interface_processor.n_contact_loops = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a03e1f5dc3048c374c660c48629bcdb57">has_contact_loops</a>() ? 1 : 0;</div>
<div class="line"><span class="lineno"> 4379</span> </div>
<div class="line"><span class="lineno"> 4380</span>    std::vector&lt;float&gt;      angles { <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#abbdd5b720ac9e0f5d57172ac1f1cf37d">base_angle</a> };</div>
<div class="line"><span class="lineno"> 4381</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_base_pattern == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a83b9b01271dda8378c1cc57f30699d18a536cff34f56e3dde41024fdf19e3331d">smpRectilinearGrid</a>)</div>
<div class="line"><span class="lineno"> 4382</span>        angles.push_back(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7e3d132f7295d882fd2d716868c121a6">interface_angle</a>);</div>
<div class="line"><span class="lineno"> 4383</span> </div>
<div class="line"><span class="lineno"> 4384</span>    BoundingBox bbox_object(<a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a>(-<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(1.), -<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(1.0)), <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(1.), <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(1.)));</div>
<div class="line"><span class="lineno"> 4385</span> </div>
<div class="line"><span class="lineno"> 4386</span><span class="comment">//    const coordf_t link_max_length_factor = 3.;</span></div>
<div class="line"><span class="lineno"> 4387</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> link_max_length_factor = 0.;</div>
<div class="line"><span class="lineno"> 4388</span> </div>
<div class="line"><span class="lineno"> 4389</span>    <span class="keywordtype">float</span> raft_angle_1st_layer  = 0.f;</div>
<div class="line"><span class="lineno"> 4390</span>    <span class="keywordtype">float</span> raft_angle_base       = 0.f;</div>
<div class="line"><span class="lineno"> 4391</span>    <span class="keywordtype">float</span> raft_angle_interface  = 0.f;</div>
<div class="line"><span class="lineno"> 4392</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a> &gt; 1) {</div>
<div class="line"><span class="lineno"> 4393</span>        <span class="comment">// There are all raft layer types (1st layer, base, interface &amp; contact layers) available.</span></div>
<div class="line"><span class="lineno"> 4394</span>        raft_angle_1st_layer  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7e3d132f7295d882fd2d716868c121a6">interface_angle</a>;</div>
<div class="line"><span class="lineno"> 4395</span>        raft_angle_base       = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#abbdd5b720ac9e0f5d57172ac1f1cf37d">base_angle</a>;</div>
<div class="line"><span class="lineno"> 4396</span>        raft_angle_interface  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7e3d132f7295d882fd2d716868c121a6">interface_angle</a>;</div>
<div class="line"><span class="lineno"> 4397</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a> == 1 || <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae6cca9e93ef7f659e4e8be919ff1342f">interface_raft_layers</a> &gt; 1) {</div>
<div class="line"><span class="lineno"> 4398</span>        <span class="comment">// 1st layer, interface &amp; contact layers available.</span></div>
<div class="line"><span class="lineno"> 4399</span>        raft_angle_1st_layer  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#abbdd5b720ac9e0f5d57172ac1f1cf37d">base_angle</a>;</div>
<div class="line"><span class="lineno"> 4400</span>        <span class="keywordflow">if</span> (this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a63c1f7fa0e8ffece7c916dcb3716a4ef">has_support</a>())</div>
<div class="line"><span class="lineno"> 4401</span>            <span class="comment">// Print 1st layer at 45 degrees from both the interface and base angles as both can land on the 1st layer.</span></div>
<div class="line"><span class="lineno"> 4402</span>            raft_angle_1st_layer += 0.7854f;</div>
<div class="line"><span class="lineno"> 4403</span>        raft_angle_interface  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7e3d132f7295d882fd2d716868c121a6">interface_angle</a>;</div>
<div class="line"><span class="lineno"> 4404</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae6cca9e93ef7f659e4e8be919ff1342f">interface_raft_layers</a> == 1) {</div>
<div class="line"><span class="lineno"> 4405</span>        <span class="comment">// Only the contact raft layer is non-empty, which will be printed as the 1st layer.</span></div>
<div class="line"><span class="lineno"> 4406</span>        assert(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a> == 0);</div>
<div class="line"><span class="lineno"> 4407</span>        assert(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae6cca9e93ef7f659e4e8be919ff1342f">interface_raft_layers</a> == 1);</div>
<div class="line"><span class="lineno"> 4408</span>        assert(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>() == 1 &amp;&amp; raft_layers.size() == 0);</div>
<div class="line"><span class="lineno"> 4409</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 4410</span>        <span class="comment">// No raft.</span></div>
<div class="line"><span class="lineno"> 4411</span>        assert(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a> == 0);</div>
<div class="line"><span class="lineno"> 4412</span>        assert(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae6cca9e93ef7f659e4e8be919ff1342f">interface_raft_layers</a> == 0);</div>
<div class="line"><span class="lineno"> 4413</span>        assert(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>() == 0 &amp;&amp; raft_layers.size() == 0);</div>
<div class="line"><span class="lineno"> 4414</span>    }</div>
<div class="line"><span class="lineno"> 4415</span> </div>
<div class="line"><span class="lineno"> 4416</span>    <span class="comment">// Insert the raft base layers.</span></div>
<div class="line"><span class="lineno"> 4417</span>    <span class="keywordtype">size_t</span> n_raft_layers = size_t(std::max(0, <span class="keywordtype">int</span>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>()) - 1));</div>
<div class="line"><span class="lineno"> 4418</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, n_raft_layers),</div>
<div class="line"><span class="lineno"> 4419</span>        [<span class="keyword">this</span>, &amp;support_layers, &amp;raft_layers, </div>
<div class="line"><span class="lineno"> 4420</span>            &amp;bbox_object, raft_angle_1st_layer, raft_angle_base, raft_angle_interface, link_max_length_factor]</div>
<div class="line"><span class="lineno"> 4421</span>            (<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 4422</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> support_layer_id = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); support_layer_id &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ support_layer_id)</div>
<div class="line"><span class="lineno"> 4423</span>        {</div>
<div class="line"><span class="lineno"> 4424</span>            assert(support_layer_id &lt; raft_layers.size());</div>
<div class="line"><span class="lineno"> 4425</span>            SupportLayer &amp;support_layer = *support_layers[support_layer_id];</div>
<div class="line"><span class="lineno"> 4426</span>            assert(support_layer.support_fills.entities.empty());</div>
<div class="line"><span class="lineno"> 4427</span>            MyLayer      &amp;raft_layer    = *raft_layers[support_layer_id];</div>
<div class="line"><span class="lineno"> 4428</span> </div>
<div class="line"><span class="lineno"> 4429</span>            std::unique_ptr&lt;Fill&gt; filler_interface = std::unique_ptr&lt;Fill&gt;(<a class="code hl_function" href="../../d7/dcc/class_slic3r_1_1_fill.html#ae4f0ccb5cf9427ade958c67faa188c64">Fill::new_from_type</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a07a1c8294d21764fcfa17c875b1c712a">interface_fill_pattern</a>));</div>
<div class="line"><span class="lineno"> 4430</span>            std::unique_ptr&lt;Fill&gt; filler_support   = std::unique_ptr&lt;Fill&gt;(<a class="code hl_function" href="../../d7/dcc/class_slic3r_1_1_fill.html#ae4f0ccb5cf9427ade958c67faa188c64">Fill::new_from_type</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7cebafc2201a25b9b476a1d8d1c12367">base_fill_pattern</a>));</div>
<div class="line"><span class="lineno"> 4431</span>            filler_interface-&gt;set_bounding_box(bbox_object);</div>
<div class="line"><span class="lineno"> 4432</span>            filler_support-&gt;set_bounding_box(bbox_object);</div>
<div class="line"><span class="lineno"> 4433</span> </div>
<div class="line"><span class="lineno"> 4434</span>            <span class="comment">// Print the support base below the support columns, or the support base for the support columns plus the contacts.</span></div>
<div class="line"><span class="lineno"> 4435</span>            <span class="keywordflow">if</span> (support_layer_id &gt; 0) {</div>
<div class="line"><span class="lineno"> 4436</span>                <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &amp;to_infill_polygons = (support_layer_id &lt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a>) ? </div>
<div class="line"><span class="lineno"> 4437</span>                    raft_layer.polygons :</div>
<div class="line"><span class="lineno"> 4438</span>                    <span class="comment">//FIXME misusing contact_polygons for support columns.</span></div>
<div class="line"><span class="lineno"> 4439</span>                    ((raft_layer.contact_polygons == nullptr) ? <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>() : *raft_layer.contact_polygons);</div>
<div class="line"><span class="lineno"> 4440</span>                <span class="keywordflow">if</span> (! to_infill_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 4441</span>                    assert(! raft_layer.bridging);</div>
<div class="line"><span class="lineno"> 4442</span>                    Flow flow(<span class="keywordtype">float</span>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a7f464e1bb800ac2903081f6aeba37f6e">width</a>()), <span class="keywordtype">float</span>(raft_layer.height), <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#af2b19c33242782f736ca2b1ec7155572">nozzle_diameter</a>());</div>
<div class="line"><span class="lineno"> 4443</span>                    Fill * filler = filler_support.get();</div>
<div class="line"><span class="lineno"> 4444</span>                    filler-&gt;angle = raft_angle_base;</div>
<div class="line"><span class="lineno"> 4445</span>                    filler-&gt;spacing = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>();</div>
<div class="line"><span class="lineno"> 4446</span>                    filler-&gt;link_max_length = <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(filler-&gt;spacing * link_max_length_factor / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bb4f0b8d9e940b719abd261ca3754d7">support_density</a>));</div>
<div class="line"><span class="lineno"> 4447</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3b9502497e4950d103bb52b0fb516d3a">fill_expolygons_with_sheath_generate_paths</a>(</div>
<div class="line"><span class="lineno"> 4448</span>                        <span class="comment">// Destination</span></div>
<div class="line"><span class="lineno"> 4449</span>                        support_layer.support_fills.entities,</div>
<div class="line"><span class="lineno"> 4450</span>                        <span class="comment">// Regions to fill</span></div>
<div class="line"><span class="lineno"> 4451</span>                        to_infill_polygons,</div>
<div class="line"><span class="lineno"> 4452</span>                        <span class="comment">// Filler and its parameters</span></div>
<div class="line"><span class="lineno"> 4453</span>                        filler, <span class="keywordtype">float</span>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bb4f0b8d9e940b719abd261ca3754d7">support_density</a>),</div>
<div class="line"><span class="lineno"> 4454</span>                        <span class="comment">// Extrusion parameters</span></div>
<div class="line"><span class="lineno"> 4455</span>                        <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a6fa3193f46e8c4fc55359a5c124f46e6a667e5eb77b54b3867d5ddd7474bd2f1a">erSupportMaterial</a>, flow,</div>
<div class="line"><span class="lineno"> 4456</span>                        <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0bfb8c62499630c07f8ef5674a744006">with_sheath</a>, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 4457</span>                }</div>
<div class="line"><span class="lineno"> 4458</span>            }</div>
<div class="line"><span class="lineno"> 4459</span> </div>
<div class="line"><span class="lineno"> 4460</span>            Fill *filler = filler_interface.get();</div>
<div class="line"><span class="lineno"> 4461</span>            Flow  flow = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7bd6ca033aef8fd24f8f2622b96bf8a0">first_layer_flow</a>;</div>
<div class="line"><span class="lineno"> 4462</span>            <span class="keywordtype">float</span> density = 0.f;</div>
<div class="line"><span class="lineno"> 4463</span>            <span class="keywordflow">if</span> (support_layer_id == 0) {</div>
<div class="line"><span class="lineno"> 4464</span>                <span class="comment">// Base flange.</span></div>
<div class="line"><span class="lineno"> 4465</span>                filler-&gt;angle = raft_angle_1st_layer;</div>
<div class="line"><span class="lineno"> 4466</span>                filler-&gt;<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a> = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a7bd6ca033aef8fd24f8f2622b96bf8a0">first_layer_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>();</div>
<div class="line"><span class="lineno"> 4467</span>                density       = float(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;raft_first_layer_density.value * 0.01);</div>
<div class="line"><span class="lineno"> 4468</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (support_layer_id &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a>) {</div>
<div class="line"><span class="lineno"> 4469</span>                filler-&gt;angle = raft_angle_interface;</div>
<div class="line"><span class="lineno"> 4470</span>                <span class="comment">// We don&#39;t use $base_flow-&gt;spacing because we need a constant spacing</span></div>
<div class="line"><span class="lineno"> 4471</span>                <span class="comment">// value that guarantees that all layers are correctly aligned.</span></div>
<div class="line"><span class="lineno"> 4472</span>                filler-&gt;spacing = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a42ec487a6853ed58d3deff0ce060abd9">spacing</a>();</div>
<div class="line"><span class="lineno"> 4473</span>                assert(! raft_layer.bridging);</div>
<div class="line"><span class="lineno"> 4474</span>                flow          = Flow(<span class="keywordtype">float</span>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1ed00250bf8f1279f93e1f9d9c60d509">support_material_interface_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#a7f464e1bb800ac2903081f6aeba37f6e">width</a>()), <span class="keywordtype">float</span>(raft_layer.height), <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>.<a class="code hl_function" href="../../d6/d0f/class_slic3r_1_1_flow.html#af2b19c33242782f736ca2b1ec7155572">nozzle_diameter</a>());</div>
<div class="line"><span class="lineno"> 4475</span>                density       = float(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a5bbedcc1acfb29c78650befdf49f01b5">interface_density</a>);</div>
<div class="line"><span class="lineno"> 4476</span>            } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4477</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 4478</span>            filler-&gt;link_max_length = <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(filler-&gt;spacing * link_max_length_factor / density));</div>
<div class="line"><span class="lineno"> 4479</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a3b9502497e4950d103bb52b0fb516d3a">fill_expolygons_with_sheath_generate_paths</a>(</div>
<div class="line"><span class="lineno"> 4480</span>                <span class="comment">// Destination</span></div>
<div class="line"><span class="lineno"> 4481</span>                support_layer.support_fills.entities, </div>
<div class="line"><span class="lineno"> 4482</span>                <span class="comment">// Regions to fill</span></div>
<div class="line"><span class="lineno"> 4483</span>                raft_layer.polygons,</div>
<div class="line"><span class="lineno"> 4484</span>                <span class="comment">// Filler and its parameters</span></div>
<div class="line"><span class="lineno"> 4485</span>                filler, density,</div>
<div class="line"><span class="lineno"> 4486</span>                <span class="comment">// Extrusion parameters</span></div>
<div class="line"><span class="lineno"> 4487</span>                (support_layer_id &lt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a2aa68d58cabcb7cea93686d1cd08c022">base_raft_layers</a>) ? <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a6fa3193f46e8c4fc55359a5c124f46e6a667e5eb77b54b3867d5ddd7474bd2f1a">erSupportMaterial</a> : <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a6fa3193f46e8c4fc55359a5c124f46e6a54a07a476d1b976ab5ee4f95e80df634">erSupportMaterialInterface</a>, flow, </div>
<div class="line"><span class="lineno"> 4488</span>                <span class="comment">// sheath at first layer</span></div>
<div class="line"><span class="lineno"> 4489</span>                support_layer_id == 0, support_layer_id == 0);</div>
<div class="line"><span class="lineno"> 4490</span>        }</div>
<div class="line"><span class="lineno"> 4491</span>    });</div>
<div class="line"><span class="lineno"> 4492</span> </div>
<div class="line"><span class="lineno"> 4493</span>    <span class="keyword">struct </span>LayerCacheItem {</div>
<div class="line"><span class="lineno"> 4494</span>        LayerCacheItem(MyLayerExtruded *layer_extruded = <span class="keyword">nullptr</span>) : layer_extruded(layer_extruded) {}</div>
<div class="line"><span class="lineno"> 4495</span>        MyLayerExtruded         *layer_extruded;</div>
<div class="line"><span class="lineno"> 4496</span>        std::vector&lt;MyLayer*&gt;    overlapping;</div>
<div class="line"><span class="lineno"> 4497</span>    };</div>
<div class="line"><span class="lineno"> 4498</span>    <span class="keyword">struct </span>LayerCache {</div>
<div class="line"><span class="lineno"> 4499</span>        MyLayerExtruded                                     bottom_contact_layer;</div>
<div class="line"><span class="lineno"> 4500</span>        MyLayerExtruded                                     top_contact_layer;</div>
<div class="line"><span class="lineno"> 4501</span>        MyLayerExtruded                                     base_layer;</div>
<div class="line"><span class="lineno"> 4502</span>        MyLayerExtruded                                     interface_layer;</div>
<div class="line"><span class="lineno"> 4503</span>        MyLayerExtruded                                     base_interface_layer;</div>
<div class="line"><span class="lineno"> 4504</span>        boost::container::static_vector&lt;LayerCacheItem, 5&gt;  nonempty;</div>
<div class="line"><span class="lineno"> 4505</span> </div>
<div class="line"><span class="lineno"> 4506</span>        <span class="keywordtype">void</span> add_nonempty_and_sort() {</div>
<div class="line"><span class="lineno"> 4507</span>            <span class="keywordflow">for</span> (MyLayerExtruded *item : { &amp;bottom_contact_layer, &amp;top_contact_layer, &amp;interface_layer, &amp;base_interface_layer, &amp;base_layer })</div>
<div class="line"><span class="lineno"> 4508</span>                <span class="keywordflow">if</span> (! item-&gt;empty())</div>
<div class="line"><span class="lineno"> 4509</span>                    this-&gt;nonempty.emplace_back(item);</div>
<div class="line"><span class="lineno"> 4510</span>            <span class="comment">// Sort the layers with the same print_z coordinate by their heights, thickest first.</span></div>
<div class="line"><span class="lineno"> 4511</span>            std::stable_sort(this-&gt;nonempty.begin(), this-&gt;nonempty.end(), [](<span class="keyword">const</span> LayerCacheItem &amp;lc1, <span class="keyword">const</span> LayerCacheItem &amp;lc2) { return lc1.layer_extruded-&gt;layer-&gt;height &gt; lc2.layer_extruded-&gt;layer-&gt;height; });</div>
<div class="line"><span class="lineno"> 4512</span>        }</div>
<div class="line"><span class="lineno"> 4513</span>    };</div>
<div class="line"><span class="lineno"> 4514</span>    std::vector&lt;LayerCache&gt;             layer_caches(support_layers.size());</div>
<div class="line"><span class="lineno"> 4515</span> </div>
<div class="line"><span class="lineno"> 4516</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(n_raft_layers, support_layers.size()),</div>
<div class="line"><span class="lineno"> 4517</span>        [<span class="keyword">this</span>, &amp;support_layers, &amp;bottom_contacts, &amp;top_contacts, &amp;intermediate_layers, &amp;interface_layers, &amp;base_interface_layers, &amp;layer_caches, &amp;loop_interface_processor, </div>
<div class="line"><span class="lineno"> 4518</span>            &amp;bbox_object, &amp;angles, link_max_length_factor]</div>
<div class="line"><span class="lineno"> 4519</span>            (<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 4520</span>        <span class="comment">// Indices of the 1st layer in their respective container at the support layer height.</span></div>
<div class="line"><span class="lineno"> 4521</span>        size_t idx_layer_bottom_contact   = size_t(-1);</div>
<div class="line"><span class="lineno"> 4522</span>        size_t idx_layer_top_contact      = size_t(-1);</div>
<div class="line"><span class="lineno"> 4523</span>        size_t idx_layer_intermediate     = size_t(-1);</div>
<div class="line"><span class="lineno"> 4524</span>        size_t idx_layer_interface        = size_t(-1);</div>
<div class="line"><span class="lineno"> 4525</span>        size_t idx_layer_base_interface   = size_t(-1);</div>
<div class="line"><span class="lineno"> 4526</span>        <span class="comment">// BBS</span></div>
<div class="line"><span class="lineno"> 4527</span>        const auto fill_type_first_layer  = ipConcentric;</div>
<div class="line"><span class="lineno"> 4528</span>        auto filler_interface       = std::unique_ptr&lt;Fill&gt;(Fill::new_from_type(m_support_params.contact_fill_pattern));</div>
<div class="line"><span class="lineno"> 4529</span>        <span class="comment">// Filler for the 1st layer interface, if different from filler_interface.</span></div>
<div class="line"><span class="lineno"> 4530</span>        auto filler_first_layer_ptr = std::unique_ptr&lt;Fill&gt;(range.begin() == 0 &amp;&amp; m_support_params.contact_fill_pattern != fill_type_first_layer ? Fill::new_from_type(fill_type_first_layer) : nullptr);</div>
<div class="line"><span class="lineno"> 4531</span>        <span class="comment">// Pointer to the 1st layer interface filler.</span></div>
<div class="line"><span class="lineno"> 4532</span>        auto filler_first_layer     = filler_first_layer_ptr ? filler_first_layer_ptr.get() : filler_interface.get();</div>
<div class="line"><span class="lineno"> 4533</span>        <span class="comment">// Filler for the base interface (to be used for soluble interface / non soluble base, to produce non soluble interface layer below soluble interface layer).</span></div>
<div class="line"><span class="lineno"> 4534</span>        auto filler_base_interface  = std::unique_ptr&lt;Fill&gt;(base_interface_layers.empty() ? nullptr : </div>
<div class="line"><span class="lineno"> 4535</span>            Fill::new_from_type(m_support_params.interface_density &gt; 0.95 || m_support_params.with_sheath ? ipRectilinear : ipSupportBase));</div>
<div class="line"><span class="lineno"> 4536</span>        auto filler_support         = std::unique_ptr&lt;Fill&gt;(Fill::new_from_type(m_support_params.base_fill_pattern));</div>
<div class="line"><span class="lineno"> 4537</span>        filler_interface-&gt;set_bounding_box(bbox_object);</div>
<div class="line"><span class="lineno"> 4538</span>        if (filler_first_layer_ptr)</div>
<div class="line"><span class="lineno"> 4539</span>            filler_first_layer_ptr-&gt;set_bounding_box(bbox_object);</div>
<div class="line"><span class="lineno"> 4540</span>        if (filler_base_interface)</div>
<div class="line"><span class="lineno"> 4541</span>            filler_base_interface-&gt;set_bounding_box(bbox_object);</div>
<div class="line"><span class="lineno"> 4542</span>        filler_support-&gt;set_bounding_box(bbox_object);</div>
<div class="line"><span class="lineno"> 4543</span>        for (size_t support_layer_id = range.begin(); support_layer_id &lt; range.end(); ++ support_layer_id)</div>
<div class="line"><span class="lineno"> 4544</span>        {</div>
<div class="line"><span class="lineno"> 4545</span>            SupportLayer &amp;support_layer = *support_layers[support_layer_id];</div>
<div class="line"><span class="lineno"> 4546</span>            LayerCache   &amp;layer_cache   = layer_caches[support_layer_id];</div>
<div class="line"><span class="lineno"> 4547</span>            float         interface_angle_delta = m_object_config-&gt;support_style.value == smsSnug ? </div>
<div class="line"><span class="lineno"> 4548</span>                (support_layer.interface_id() &amp; 1) ? float(- M_PI / 4.) : float(+ M_PI / 4.) :</div>
<div class="line"><span class="lineno"> 4549</span>                0;</div>
<div class="line"><span class="lineno"> 4550</span> </div>
<div class="line"><span class="lineno"> 4551</span>            <span class="comment">// Find polygons with the same print_z.</span></div>
<div class="line"><span class="lineno"> 4552</span>            MyLayerExtruded &amp;bottom_contact_layer = layer_cache.bottom_contact_layer;</div>
<div class="line"><span class="lineno"> 4553</span>            MyLayerExtruded &amp;top_contact_layer    = layer_cache.top_contact_layer;</div>
<div class="line"><span class="lineno"> 4554</span>            MyLayerExtruded &amp;base_layer           = layer_cache.base_layer;</div>
<div class="line"><span class="lineno"> 4555</span>            MyLayerExtruded &amp;interface_layer      = layer_cache.interface_layer;</div>
<div class="line"><span class="lineno"> 4556</span>            MyLayerExtruded &amp;base_interface_layer = layer_cache.base_interface_layer;</div>
<div class="line"><span class="lineno"> 4557</span>            <span class="comment">// Increment the layer indices to find a layer at support_layer.print_z.</span></div>
<div class="line"><span class="lineno"> 4558</span>            {</div>
<div class="line"><span class="lineno"> 4559</span>                auto fun = [&amp;support_layer](const MyLayer *l){ return l-&gt;print_z &gt;= support_layer.print_z - EPSILON; };</div>
<div class="line"><span class="lineno"> 4560</span>                idx_layer_bottom_contact  = idx_higher_or_equal(bottom_contacts,     idx_layer_bottom_contact,  fun);</div>
<div class="line"><span class="lineno"> 4561</span>                idx_layer_top_contact     = idx_higher_or_equal(top_contacts,        idx_layer_top_contact,     fun);</div>
<div class="line"><span class="lineno"> 4562</span>                idx_layer_intermediate    = idx_higher_or_equal(intermediate_layers, idx_layer_intermediate,    fun);</div>
<div class="line"><span class="lineno"> 4563</span>                idx_layer_interface       = idx_higher_or_equal(interface_layers,    idx_layer_interface,       fun);</div>
<div class="line"><span class="lineno"> 4564</span>                idx_layer_base_interface  = idx_higher_or_equal(base_interface_layers, idx_layer_base_interface,fun);</div>
<div class="line"><span class="lineno"> 4565</span>            }</div>
<div class="line"><span class="lineno"> 4566</span>            <span class="comment">// Copy polygons from the layers.</span></div>
<div class="line"><span class="lineno"> 4567</span>            if (idx_layer_bottom_contact &lt; bottom_contacts.size() &amp;&amp; bottom_contacts[idx_layer_bottom_contact]-&gt;print_z &lt; support_layer.print_z + EPSILON)</div>
<div class="line"><span class="lineno"> 4568</span>                bottom_contact_layer.layer = bottom_contacts[idx_layer_bottom_contact];</div>
<div class="line"><span class="lineno"> 4569</span>            if (idx_layer_top_contact &lt; top_contacts.size() &amp;&amp; top_contacts[idx_layer_top_contact]-&gt;print_z &lt; support_layer.print_z + EPSILON)</div>
<div class="line"><span class="lineno"> 4570</span>                top_contact_layer.layer = top_contacts[idx_layer_top_contact];</div>
<div class="line"><span class="lineno"> 4571</span>            if (idx_layer_interface &lt; interface_layers.size() &amp;&amp; interface_layers[idx_layer_interface]-&gt;print_z &lt; support_layer.print_z + EPSILON)</div>
<div class="line"><span class="lineno"> 4572</span>                interface_layer.layer = interface_layers[idx_layer_interface];</div>
<div class="line"><span class="lineno"> 4573</span>            if (idx_layer_base_interface &lt; base_interface_layers.size() &amp;&amp; base_interface_layers[idx_layer_base_interface]-&gt;print_z &lt; support_layer.print_z + EPSILON)</div>
<div class="line"><span class="lineno"> 4574</span>                base_interface_layer.layer = base_interface_layers[idx_layer_base_interface];</div>
<div class="line"><span class="lineno"> 4575</span>            if (idx_layer_intermediate &lt; intermediate_layers.size() &amp;&amp; intermediate_layers[idx_layer_intermediate]-&gt;print_z &lt; support_layer.print_z + EPSILON)</div>
<div class="line"><span class="lineno"> 4576</span>                base_layer.layer = intermediate_layers[idx_layer_intermediate];</div>
<div class="line"><span class="lineno"> 4577</span> </div>
<div class="line"><span class="lineno"> 4578</span>            if (m_object_config-&gt;support_interface_top_layers == 0) {</div>
<div class="line"><span class="lineno"> 4579</span>                <span class="comment">// If no top interface layers were requested, we treat the contact layer exactly as a generic base layer.</span></div>
<div class="line"><span class="lineno"> 4580</span>                if (m_support_params.can_merge_support_regions) {</div>
<div class="line"><span class="lineno"> 4581</span>                    if (base_layer.could_merge(top_contact_layer)) </div>
<div class="line"><span class="lineno"> 4582</span>                        base_layer.merge(std::move(top_contact_layer));</div>
<div class="line"><span class="lineno"> 4583</span>                    else if (base_layer.empty())</div>
<div class="line"><span class="lineno"> 4584</span>                        base_layer = std::move(top_contact_layer);</div>
<div class="line"><span class="lineno"> 4585</span>                }</div>
<div class="line"><span class="lineno"> 4586</span>            } else {</div>
<div class="line"><span class="lineno"> 4587</span>                loop_interface_processor.generate(top_contact_layer, m_support_params.support_material_interface_flow);</div>
<div class="line"><span class="lineno"> 4588</span>                <span class="comment">// If no loops are allowed, we treat the contact layer exactly as a generic interface layer.</span></div>
<div class="line"><span class="lineno"> 4589</span>                <span class="comment">// Merge interface_layer into top_contact_layer, as the top_contact_layer is not synchronized and therefore it will be used</span></div>
<div class="line"><span class="lineno"> 4590</span>                <span class="comment">// to trim other layers.</span></div>
<div class="line"><span class="lineno"> 4591</span>                if (top_contact_layer.could_merge(interface_layer))</div>
<div class="line"><span class="lineno"> 4592</span>                    top_contact_layer.merge(std::move(interface_layer));</div>
<div class="line"><span class="lineno"> 4593</span>            } </div>
<div class="line"><span class="lineno"> 4594</span>            if ((m_object_config-&gt;support_interface_top_layers == 0 || m_object_config-&gt;support_interface_bottom_layers == 0) &amp;&amp; m_support_params.can_merge_support_regions) {</div>
<div class="line"><span class="lineno"> 4595</span>                if (base_layer.could_merge(bottom_contact_layer))</div>
<div class="line"><span class="lineno"> 4596</span>                    base_layer.merge(std::move(bottom_contact_layer));</div>
<div class="line"><span class="lineno"> 4597</span>                else if (base_layer.empty() &amp;&amp; ! bottom_contact_layer.empty() &amp;&amp; ! bottom_contact_layer.layer-&gt;bridging)</div>
<div class="line"><span class="lineno"> 4598</span>                    base_layer = std::move(bottom_contact_layer);</div>
<div class="line"><span class="lineno"> 4599</span>            } else if (bottom_contact_layer.could_merge(top_contact_layer))</div>
<div class="line"><span class="lineno"> 4600</span>                top_contact_layer.merge(std::move(bottom_contact_layer));</div>
<div class="line"><span class="lineno"> 4601</span>            else if (bottom_contact_layer.could_merge(interface_layer))</div>
<div class="line"><span class="lineno"> 4602</span>                bottom_contact_layer.merge(std::move(interface_layer));</div>
<div class="line"><span class="lineno"> 4603</span> </div>
<div class="line"><span class="lineno"> 4604</span>#if 0</div>
<div class="line"><span class="lineno"> 4605</span>            if ( ! interface_layer.empty() &amp;&amp; ! base_layer.empty()) {</div>
<div class="line"><span class="lineno"> 4606</span>                <span class="comment">// turn base support into interface when it&#39;s contained in our holes</span></div>
<div class="line"><span class="lineno"> 4607</span>                <span class="comment">// (this way we get wider interface anchoring)</span></div>
<div class="line"><span class="lineno"> 4608</span>                <span class="comment">//FIXME The intention of the code below is unclear. One likely wanted to just merge small islands of base layers filling in the holes</span></div>
<div class="line"><span class="lineno"> 4609</span>                <span class="comment">// inside interface layers, but the code below fills just too much, see GH #4570</span></div>
<div class="line"><span class="lineno"> 4610</span>                Polygons islands = top_level_islands(interface_layer.layer-&gt;polygons);</div>
<div class="line"><span class="lineno"> 4611</span>                polygons_append(interface_layer.layer-&gt;polygons, intersection(base_layer.layer-&gt;polygons, islands));</div>
<div class="line"><span class="lineno"> 4612</span>                base_layer.layer-&gt;polygons = diff(base_layer.layer-&gt;polygons, islands);</div>
<div class="line"><span class="lineno"> 4613</span>            }</div>
<div class="line"><span class="lineno"> 4614</span>#endif</div>
<div class="line"><span class="lineno"> 4615</span> </div>
<div class="line"><span class="lineno"> 4616</span>            <span class="comment">// Calculate top interface angle</span></div>
<div class="line"><span class="lineno"> 4617</span>            float angle_of_biggest_bridge = -1.f;</div>
<div class="line"><span class="lineno"> 4618</span>            do</div>
<div class="line"><span class="lineno"> 4619</span>            {</div>
<div class="line"><span class="lineno"> 4620</span>                <span class="comment">// Currently only works when thick_bridges is off</span></div>
<div class="line"><span class="lineno"> 4621</span>                if (m_object-&gt;config().thick_bridges)</div>
<div class="line"><span class="lineno"> 4622</span>                    break;</div>
<div class="line"><span class="lineno"> 4623</span> </div>
<div class="line"><span class="lineno"> 4624</span>                coordf_t object_layer_bottom_z = support_layer.print_z + m_slicing_params.gap_support_object;</div>
<div class="line"><span class="lineno"> 4625</span>                const Layer* object_layer = m_object-&gt;get_layer_at_bottomz(object_layer_bottom_z, 10.0 * EPSILON);</div>
<div class="line"><span class="lineno"> 4626</span>                if (object_layer == nullptr)</div>
<div class="line"><span class="lineno"> 4627</span>                    break;</div>
<div class="line"><span class="lineno"> 4628</span> </div>
<div class="line"><span class="lineno"> 4629</span>                if (object_layer != nullptr) {</div>
<div class="line"><span class="lineno"> 4630</span>                    float biggest_bridge_area = 0.f;</div>
<div class="line"><span class="lineno"> 4631</span>                    const Polygons&amp; top_contact_polys = top_contact_layer.polygons_to_extrude();</div>
<div class="line"><span class="lineno"> 4632</span>                    for (auto layerm : object_layer-&gt;regions()) {</div>
<div class="line"><span class="lineno"> 4633</span>                        for (auto bridge_surface : layerm-&gt;fill_surfaces.filter_by_type(stBottomBridge)) {</div>
<div class="line"><span class="lineno"> 4634</span>                            float bs_area = bridge_surface-&gt;area();</div>
<div class="line"><span class="lineno"> 4635</span>                            if (bs_area &lt;= biggest_bridge_area || bridge_surface-&gt;bridge_angle &lt; 0.f)</div>
<div class="line"><span class="lineno"> 4636</span>                                continue;</div>
<div class="line"><span class="lineno"> 4637</span> </div>
<div class="line"><span class="lineno"> 4638</span>                            angle_of_biggest_bridge = bridge_surface-&gt;bridge_angle;</div>
<div class="line"><span class="lineno"> 4639</span>                            biggest_bridge_area = bs_area;</div>
<div class="line"><span class="lineno"> 4640</span>                        }</div>
<div class="line"><span class="lineno"> 4641</span>                    }</div>
<div class="line"><span class="lineno"> 4642</span>                }</div>
<div class="line"><span class="lineno"> 4643</span>            } while (0);</div>
<div class="line"><span class="lineno"> 4644</span> </div>
<div class="line"><span class="lineno"> 4645</span>            auto calc_included_angle_degree = [](int degree_a, int degree_b) {</div>
<div class="line"><span class="lineno"> 4646</span>                int iad = std::abs(degree_b - degree_a);</div>
<div class="line"><span class="lineno"> 4647</span>                return std::min(iad, 180 - iad);</div>
<div class="line"><span class="lineno"> 4648</span>            };</div>
<div class="line"><span class="lineno"> 4649</span> </div>
<div class="line"><span class="lineno"> 4650</span>            <span class="comment">// Top and bottom contacts, interface layers.</span></div>
<div class="line"><span class="lineno"> 4651</span>            for (size_t i = 0; i &lt; 3; ++ i) {</div>
<div class="line"><span class="lineno"> 4652</span>                MyLayerExtruded &amp;layer_ex = (i == 0) ? top_contact_layer : (i == 1 ? bottom_contact_layer : interface_layer);</div>
<div class="line"><span class="lineno"> 4653</span>                if (layer_ex.empty() || layer_ex.polygons_to_extrude().empty())</div>
<div class="line"><span class="lineno"> 4654</span>                    continue;</div>
<div class="line"><span class="lineno"> 4655</span>                bool interface_as_base = m_object_config-&gt;support_interface_top_layers.value == 0 || </div>
<div class="line"><span class="lineno"> 4656</span>                    (m_object_config-&gt;support_interface_bottom_layers == 0 &amp;&amp; &amp;layer_ex == &amp;bottom_contact_layer);</div>
<div class="line"><span class="lineno"> 4657</span>                <span class="comment">//FIXME Bottom interfaces are extruded with the briding flow. Some bridging layers have its height slightly reduced, therefore</span></div>
<div class="line"><span class="lineno"> 4658</span>                <span class="comment">// the bridging flow does not quite apply. Reduce the flow to area of an ellipse? (A = pi * a * b)</span></div>
<div class="line"><span class="lineno"> 4659</span>                Flow interface_flow;</div>
<div class="line"><span class="lineno"> 4660</span>                if (layer_ex.layer-&gt;bridging)</div>
<div class="line"><span class="lineno"> 4661</span>                    interface_flow = Flow::bridging_flow(layer_ex.layer-&gt;height, m_support_params.support_material_bottom_interface_flow.nozzle_diameter());</div>
<div class="line"><span class="lineno"> 4662</span>                else if (layer_ex.layer-&gt;bottom_z &lt; EPSILON) {</div>
<div class="line"><span class="lineno"> 4663</span>                    interface_flow = m_support_params.first_layer_flow;</div>
<div class="line"><span class="lineno"> 4664</span>                }else</div>
<div class="line"><span class="lineno"> 4665</span>                    interface_flow = (interface_as_base ? &amp;m_support_params.support_material_flow : &amp;m_support_params.support_material_interface_flow)-&gt;with_height(float(layer_ex.layer-&gt;height));</div>
<div class="line"><span class="lineno"> 4666</span>                filler_interface-&gt;angle = interface_as_base ?</div>
<div class="line"><span class="lineno"> 4667</span>                        <span class="comment">// If zero interface layers are configured, use the same angle as for the base layers.</span></div>
<div class="line"><span class="lineno"> 4668</span>                        angles[support_layer_id % angles.size()] :</div>
<div class="line"><span class="lineno"> 4669</span>                        <span class="comment">// Use interface angle for the interface layers.</span></div>
<div class="line"><span class="lineno"> 4670</span>                        m_support_params.interface_angle + interface_angle_delta;</div>
<div class="line"><span class="lineno"> 4671</span> </div>
<div class="line"><span class="lineno"> 4672</span>                <span class="comment">// BBS</span></div>
<div class="line"><span class="lineno"> 4673</span>                bool can_adjust_top_interface_angle = (m_object_config-&gt;support_interface_top_layers.value &gt; 1 &amp;&amp; &amp;layer_ex == &amp;top_contact_layer);</div>
<div class="line"><span class="lineno"> 4674</span>                if (can_adjust_top_interface_angle &amp;&amp; angle_of_biggest_bridge &gt;= 0.f) {</div>
<div class="line"><span class="lineno"> 4675</span>                    int bridge_degree = (int)Geometry::rad2deg(angle_of_biggest_bridge);</div>
<div class="line"><span class="lineno"> 4676</span>                    int support_intf_degree = (int)Geometry::rad2deg(filler_interface-&gt;angle);</div>
<div class="line"><span class="lineno"> 4677</span>                    int max_included_degree = 0;</div>
<div class="line"><span class="lineno"> 4678</span>                    int step = 90;</div>
<div class="line"><span class="lineno"> 4679</span>                    for (int add_on_degree = 0; add_on_degree &lt; 180; add_on_degree += step) {</div>
<div class="line"><span class="lineno"> 4680</span>                        int degree_to_try = support_intf_degree + add_on_degree;</div>
<div class="line"><span class="lineno"> 4681</span>                        int included_degree = calc_included_angle_degree(bridge_degree, degree_to_try);</div>
<div class="line"><span class="lineno"> 4682</span>                        if (included_degree &gt; max_included_degree) {</div>
<div class="line"><span class="lineno"> 4683</span>                            max_included_degree = included_degree;</div>
<div class="line"><span class="lineno"> 4684</span>                            filler_interface-&gt;angle = Geometry::deg2rad((float)degree_to_try);</div>
<div class="line"><span class="lineno"> 4685</span>                        }</div>
<div class="line"><span class="lineno"> 4686</span>                    }</div>
<div class="line"><span class="lineno"> 4687</span>                }</div>
<div class="line"><span class="lineno"> 4688</span>                double density = interface_as_base ? m_support_params.support_density : m_support_params.interface_density;</div>
<div class="line"><span class="lineno"> 4689</span>                filler_interface-&gt;spacing = interface_as_base ? m_support_params.support_material_flow.spacing() : m_support_params.support_material_interface_flow.spacing();</div>
<div class="line"><span class="lineno"> 4690</span>                filler_interface-&gt;link_max_length = coord_t(scale_(filler_interface-&gt;spacing * link_max_length_factor / density));</div>
<div class="line"><span class="lineno"> 4691</span>                <span class="comment">// BBS support more interface patterns</span></div>
<div class="line"><span class="lineno"> 4692</span>                FillParams fill_params;</div>
<div class="line"><span class="lineno"> 4693</span>                fill_params.density = density;</div>
<div class="line"><span class="lineno"> 4694</span>                fill_params.dont_adjust = true;</div>
<div class="line"><span class="lineno"> 4695</span>                if (m_object_config-&gt;support_interface_pattern == smipGrid) {</div>
<div class="line"><span class="lineno"> 4696</span>                    filler_interface-&gt;angle = Geometry::deg2rad(m_support_params.base_angle);</div>
<div class="line"><span class="lineno"> 4697</span>                    fill_params.dont_sort = true;</div>
<div class="line"><span class="lineno"> 4698</span>                }</div>
<div class="line"><span class="lineno"> 4699</span>                if (m_object_config-&gt;support_interface_pattern == smipRectilinearInterlaced)</div>
<div class="line"><span class="lineno"> 4700</span>                    filler_interface-&gt;layer_id = support_layer.interface_id();</div>
<div class="line"><span class="lineno"> 4701</span>                fill_expolygons_generate_paths(</div>
<div class="line"><span class="lineno"> 4702</span>                    <span class="comment">// Destination</span></div>
<div class="line"><span class="lineno"> 4703</span>                    layer_ex.extrusions, </div>
<div class="line"><span class="lineno"> 4704</span>                    <span class="comment">// Regions to fill</span></div>
<div class="line"><span class="lineno"> 4705</span>                    union_safety_offset_ex(layer_ex.polygons_to_extrude()),</div>
<div class="line"><span class="lineno"> 4706</span>                    <span class="comment">// Filler and its parameters</span></div>
<div class="line"><span class="lineno"> 4707</span>                    filler_interface.get(), fill_params,</div>
<div class="line"><span class="lineno"> 4708</span>                    <span class="comment">// Extrusion parameters</span></div>
<div class="line"><span class="lineno"> 4709</span>                    erSupportMaterialInterface, interface_flow);</div>
<div class="line"><span class="lineno"> 4710</span>            }</div>
<div class="line"><span class="lineno"> 4711</span> </div>
<div class="line"><span class="lineno"> 4712</span>            <span class="comment">// Base interface layers under soluble interfaces</span></div>
<div class="line"><span class="lineno"> 4713</span>            if ( ! base_interface_layer.empty() &amp;&amp; ! base_interface_layer.polygons_to_extrude().empty()) {</div>
<div class="line"><span class="lineno"> 4714</span>                Fill *filler = filler_base_interface.get();</div>
<div class="line"><span class="lineno"> 4715</span>                <span class="comment">//FIXME Bottom interfaces are extruded with the briding flow. Some bridging layers have its height slightly reduced, therefore</span></div>
<div class="line"><span class="lineno"> 4716</span>                <span class="comment">// the bridging flow does not quite apply. Reduce the flow to area of an ellipse? (A = pi * a * b)</span></div>
<div class="line"><span class="lineno"> 4717</span>                assert(! base_interface_layer.layer-&gt;bridging);</div>
<div class="line"><span class="lineno"> 4718</span>                Flow interface_flow = m_support_params.support_material_flow.with_height(float(base_interface_layer.layer-&gt;height));</div>
<div class="line"><span class="lineno"> 4719</span>                filler-&gt;angle   = m_support_params.interface_angle + interface_angle_delta;</div>
<div class="line"><span class="lineno"> 4720</span>                filler-&gt;spacing = m_support_params.support_material_interface_flow.spacing();</div>
<div class="line"><span class="lineno"> 4721</span>                filler-&gt;link_max_length = coord_t(scale_(filler-&gt;spacing * link_max_length_factor / m_support_params.interface_density));</div>
<div class="line"><span class="lineno"> 4722</span>                fill_expolygons_generate_paths(</div>
<div class="line"><span class="lineno"> 4723</span>                    <span class="comment">// Destination</span></div>
<div class="line"><span class="lineno"> 4724</span>                    base_interface_layer.extrusions, </div>
<div class="line"><span class="lineno"> 4725</span>                    <span class="comment">//base_layer_interface.extrusions,</span></div>
<div class="line"><span class="lineno"> 4726</span>                    <span class="comment">// Regions to fill</span></div>
<div class="line"><span class="lineno"> 4727</span>                    union_safety_offset_ex(base_interface_layer.polygons_to_extrude()),</div>
<div class="line"><span class="lineno"> 4728</span>                    <span class="comment">// Filler and its parameters</span></div>
<div class="line"><span class="lineno"> 4729</span>                    filler, float(m_support_params.interface_density),</div>
<div class="line"><span class="lineno"> 4730</span>                    <span class="comment">// Extrusion parameters</span></div>
<div class="line"><span class="lineno"> 4731</span>                    erSupportMaterial, interface_flow);</div>
<div class="line"><span class="lineno"> 4732</span>            }</div>
<div class="line"><span class="lineno"> 4733</span> </div>
<div class="line"><span class="lineno"> 4734</span>            <span class="comment">// Base support or flange.</span></div>
<div class="line"><span class="lineno"> 4735</span>            if (! base_layer.empty() &amp;&amp; ! base_layer.polygons_to_extrude().empty()) {</div>
<div class="line"><span class="lineno"> 4736</span>                Fill *filler = filler_support.get();</div>
<div class="line"><span class="lineno"> 4737</span>                filler-&gt;angle = angles[support_layer_id % angles.size()];</div>
<div class="line"><span class="lineno"> 4738</span>                <span class="comment">// We don&#39;t use $base_flow-&gt;spacing because we need a constant spacing</span></div>
<div class="line"><span class="lineno"> 4739</span>                <span class="comment">// value that guarantees that all layers are correctly aligned.</span></div>
<div class="line"><span class="lineno"> 4740</span>                assert(! base_layer.layer-&gt;bridging);</div>
<div class="line"><span class="lineno"> 4741</span>                auto flow = m_support_params.support_material_flow.with_height(float(base_layer.layer-&gt;height));</div>
<div class="line"><span class="lineno"> 4742</span>                filler-&gt;spacing = m_support_params.support_material_flow.spacing();</div>
<div class="line"><span class="lineno"> 4743</span>                filler-&gt;link_max_length = coord_t(scale_(filler-&gt;spacing * link_max_length_factor / m_support_params.support_density));</div>
<div class="line"><span class="lineno"> 4744</span>                float density = float(m_support_params.support_density);</div>
<div class="line"><span class="lineno"> 4745</span>                bool  sheath  = m_support_params.with_sheath;</div>
<div class="line"><span class="lineno"> 4746</span>                bool  no_sort = false;</div>
<div class="line"><span class="lineno"> 4747</span>                if (base_layer.layer-&gt;bottom_z &lt; EPSILON) {</div>
<div class="line"><span class="lineno"> 4748</span>                    <span class="comment">// Base flange (the 1st layer).</span></div>
<div class="line"><span class="lineno"> 4749</span>                    filler = filler_first_layer;</div>
<div class="line"><span class="lineno"> 4750</span>                    <span class="comment">// BBS: the 1st layer use the same fill direction as other layers(in rectilinear) to avoid</span></div>
<div class="line"><span class="lineno"> 4751</span>                    <span class="comment">// that 2nd layer detaches from the 1st layer.</span></div>
<div class="line"><span class="lineno"> 4752</span>                    <span class="comment">//filler-&gt;angle = Geometry::deg2rad(float(m_object_config-&gt;support_angle.value + 90.));</span></div>
<div class="line"><span class="lineno"> 4753</span>                    density = float(m_object_config-&gt;raft_first_layer_density.value * 0.01);</div>
<div class="line"><span class="lineno"> 4754</span>                    flow = m_support_params.first_layer_flow;</div>
<div class="line"><span class="lineno"> 4755</span>                    <span class="comment">// use the proper spacing for first layer as we don&#39;t need to align</span></div>
<div class="line"><span class="lineno"> 4756</span>                    <span class="comment">// its pattern to the other layers</span></div>
<div class="line"><span class="lineno"> 4757</span>                    <span class="comment">//FIXME When paralellizing, each thread shall have its own copy of the fillers.</span></div>
<div class="line"><span class="lineno"> 4758</span>                    filler-&gt;spacing = flow.spacing();</div>
<div class="line"><span class="lineno"> 4759</span>                    filler-&gt;link_max_length = coord_t(scale_(filler-&gt;spacing * link_max_length_factor / density));</div>
<div class="line"><span class="lineno"> 4760</span>                    sheath  = true;</div>
<div class="line"><span class="lineno"> 4761</span>                    no_sort = true;</div>
<div class="line"><span class="lineno"> 4762</span>                }</div>
<div class="line"><span class="lineno"> 4763</span>                fill_expolygons_with_sheath_generate_paths(</div>
<div class="line"><span class="lineno"> 4764</span>                    <span class="comment">// Destination</span></div>
<div class="line"><span class="lineno"> 4765</span>                    base_layer.extrusions,</div>
<div class="line"><span class="lineno"> 4766</span>                    <span class="comment">// Regions to fill</span></div>
<div class="line"><span class="lineno"> 4767</span>                    base_layer.polygons_to_extrude(),</div>
<div class="line"><span class="lineno"> 4768</span>                    <span class="comment">// Filler and its parameters</span></div>
<div class="line"><span class="lineno"> 4769</span>                    filler, density,</div>
<div class="line"><span class="lineno"> 4770</span>                    <span class="comment">// Extrusion parameters</span></div>
<div class="line"><span class="lineno"> 4771</span>                    erSupportMaterial, flow,</div>
<div class="line"><span class="lineno"> 4772</span>                    sheath, no_sort);</div>
<div class="line"><span class="lineno"> 4773</span> </div>
<div class="line"><span class="lineno"> 4774</span>            }</div>
<div class="line"><span class="lineno"> 4775</span> </div>
<div class="line"><span class="lineno"> 4776</span>            <span class="comment">// Merge base_interface_layers to base_layers to avoid unneccessary retractions</span></div>
<div class="line"><span class="lineno"> 4777</span>            if (! base_layer.empty() &amp;&amp; ! base_interface_layer.empty() &amp;&amp; ! base_layer.polygons_to_extrude().empty() &amp;&amp; ! base_interface_layer.polygons_to_extrude().empty() &amp;&amp;</div>
<div class="line"><span class="lineno"> 4778</span>                base_layer.could_merge(base_interface_layer))</div>
<div class="line"><span class="lineno"> 4779</span>                base_layer.merge(std::move(base_interface_layer));</div>
<div class="line"><span class="lineno"> 4780</span> </div>
<div class="line"><span class="lineno"> 4781</span>            layer_cache.add_nonempty_and_sort();</div>
<div class="line"><span class="lineno"> 4782</span> </div>
<div class="line"><span class="lineno"> 4783</span>            <span class="comment">// Collect the support areas with this print_z into islands, as there is no need</span></div>
<div class="line"><span class="lineno"> 4784</span>            <span class="comment">// for retraction over these islands.</span></div>
<div class="line"><span class="lineno"> 4785</span>            Polygons polys;</div>
<div class="line"><span class="lineno"> 4786</span>            <span class="comment">// Collect the extrusions, sorted by the bottom extrusion height.</span></div>
<div class="line"><span class="lineno"> 4787</span>            for (LayerCacheItem &amp;layer_cache_item : layer_cache.nonempty) {</div>
<div class="line"><span class="lineno"> 4788</span>                <span class="comment">// Collect islands to polys.</span></div>
<div class="line"><span class="lineno"> 4789</span>                layer_cache_item.layer_extruded-&gt;polygons_append(polys);</div>
<div class="line"><span class="lineno"> 4790</span>                <span class="comment">// The print_z of the top contact surfaces and bottom_z of the bottom contact surfaces are &quot;free&quot;</span></div>
<div class="line"><span class="lineno"> 4791</span>                <span class="comment">// in a sense that they are not synchronized with other support layers. As the top and bottom contact surfaces</span></div>
<div class="line"><span class="lineno"> 4792</span>                <span class="comment">// are inflated to achieve a better anchoring, it may happen, that these surfaces will at least partially</span></div>
<div class="line"><span class="lineno"> 4793</span>                <span class="comment">// overlap in Z with another support layers, leading to over-extrusion.</span></div>
<div class="line"><span class="lineno"> 4794</span>                <span class="comment">// Mitigate the over-extrusion by modulating the extrusion rate over these regions.</span></div>
<div class="line"><span class="lineno"> 4795</span>                <span class="comment">// The print head will follow the same print_z, but the layer thickness will be reduced</span></div>
<div class="line"><span class="lineno"> 4796</span>                <span class="comment">// where it overlaps with another support layer.</span></div>
<div class="line"><span class="lineno"> 4797</span>                <span class="comment">//FIXME When printing a briging path, what is an equivalent height of the squished extrudate of the same width?</span></div>
<div class="line"><span class="lineno"> 4798</span>                <span class="comment">// Collect overlapping top/bottom surfaces.</span></div>
<div class="line"><span class="lineno"> 4799</span>                layer_cache_item.overlapping.reserve(20);</div>
<div class="line"><span class="lineno"> 4800</span>                coordf_t bottom_z = layer_cache_item.layer_extruded-&gt;layer-&gt;bottom_print_z() + EPSILON;</div>
<div class="line"><span class="lineno"> 4801</span>                auto add_overlapping = [&amp;layer_cache_item, bottom_z](const MyLayersPtr &amp;layers, size_t idx_top) {</div>
<div class="line"><span class="lineno"> 4802</span>                    for (int i = int(idx_top) - 1; i &gt;= 0 &amp;&amp; layers[i]-&gt;print_z &gt; bottom_z; -- i)</div>
<div class="line"><span class="lineno"> 4803</span>                        layer_cache_item.overlapping.push_back(layers[i]);</div>
<div class="line"><span class="lineno"> 4804</span>                };</div>
<div class="line"><span class="lineno"> 4805</span>                add_overlapping(top_contacts, idx_layer_top_contact);</div>
<div class="line"><span class="lineno"> 4806</span>                if (layer_cache_item.layer_extruded-&gt;layer-&gt;layer_type == sltBottomContact) {</div>
<div class="line"><span class="lineno"> 4807</span>                    <span class="comment">// Bottom contact layer may overlap with a base layer, which may be changed to interface layer.</span></div>
<div class="line"><span class="lineno"> 4808</span>                    add_overlapping(intermediate_layers,   idx_layer_intermediate);</div>
<div class="line"><span class="lineno"> 4809</span>                    add_overlapping(interface_layers,      idx_layer_interface);</div>
<div class="line"><span class="lineno"> 4810</span>                    add_overlapping(base_interface_layers, idx_layer_base_interface);</div>
<div class="line"><span class="lineno"> 4811</span>                }</div>
<div class="line"><span class="lineno"> 4812</span>                <span class="comment">// Order the layers by lexicographically by an increasing print_z and a decreasing layer height.</span></div>
<div class="line"><span class="lineno"> 4813</span>                std::stable_sort(layer_cache_item.overlapping.begin(), layer_cache_item.overlapping.end(), [](auto *l1, auto *l2) { return *l1 &lt; *l2; });</div>
<div class="line"><span class="lineno"> 4814</span>            }</div>
<div class="line"><span class="lineno"> 4815</span>            if (! polys.empty())</div>
<div class="line"><span class="lineno"> 4816</span>                expolygons_append(support_layer.support_islands, union_ex(polys));</div>
<div class="line"><span class="lineno"> 4817</span>        } <span class="comment">// for each support_layer_id</span></div>
<div class="line"><span class="lineno"> 4818</span>    });</div>
<div class="line"><span class="lineno"> 4819</span> </div>
<div class="line"><span class="lineno"> 4820</span>    <span class="comment">// Now modulate the support layer height in parallel.</span></div>
<div class="line"><span class="lineno"> 4821</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(n_raft_layers, support_layers.size()),</div>
<div class="line"><span class="lineno"> 4822</span>        [&amp;support_layers, &amp;layer_caches]</div>
<div class="line"><span class="lineno"> 4823</span>            (<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 4824</span>        for (size_t support_layer_id = range.begin(); support_layer_id &lt; range.end(); ++ support_layer_id) {</div>
<div class="line"><span class="lineno"> 4825</span>            SupportLayer &amp;support_layer = *support_layers[support_layer_id];</div>
<div class="line"><span class="lineno"> 4826</span>            LayerCache   &amp;layer_cache   = layer_caches[support_layer_id];</div>
<div class="line"><span class="lineno"> 4827</span>            <span class="comment">// For all extrusion types at this print_z, ordered by decreasing layer height:</span></div>
<div class="line"><span class="lineno"> 4828</span>            for (LayerCacheItem &amp;layer_cache_item : layer_cache.nonempty) {</div>
<div class="line"><span class="lineno"> 4829</span>                <span class="comment">// Trim the extrusion height from the bottom by the overlapping layers.</span></div>
<div class="line"><span class="lineno"> 4830</span>                modulate_extrusion_by_overlapping_layers(layer_cache_item.layer_extruded-&gt;extrusions, *layer_cache_item.layer_extruded-&gt;layer, layer_cache_item.overlapping);</div>
<div class="line"><span class="lineno"> 4831</span>                support_layer.support_fills.append(std::move(layer_cache_item.layer_extruded-&gt;extrusions));</div>
<div class="line"><span class="lineno"> 4832</span>            }</div>
<div class="line"><span class="lineno"> 4833</span>        }</div>
<div class="line"><span class="lineno"> 4834</span>    });</div>
<div class="line"><span class="lineno"> 4835</span> </div>
<div class="line"><span class="lineno"> 4836</span><span class="preprocessor">#ifndef NDEBUG</span></div>
<div class="line"><span class="lineno"> 4837</span>    <span class="keyword">struct </span>Test {</div>
<div class="line"><span class="lineno"> 4838</span>        <span class="keyword">static</span> <span class="keywordtype">bool</span> verify_nonempty(<span class="keyword">const</span> ExtrusionEntityCollection *collection) {</div>
<div class="line"><span class="lineno"> 4839</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> ExtrusionEntity *ee : collection-&gt;entities) {</div>
<div class="line"><span class="lineno"> 4840</span>                <span class="keywordflow">if</span> (<span class="keyword">const</span> ExtrusionPath *path = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>ExtrusionPath*<span class="keyword">&gt;</span>(ee))</div>
<div class="line"><span class="lineno"> 4841</span>                    assert(! path-&gt;empty());</div>
<div class="line"><span class="lineno"> 4842</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> ExtrusionMultiPath *multipath = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>ExtrusionMultiPath*<span class="keyword">&gt;</span>(ee))</div>
<div class="line"><span class="lineno"> 4843</span>                    assert(! multipath-&gt;empty());</div>
<div class="line"><span class="lineno"> 4844</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">const</span> ExtrusionEntityCollection *eecol = <span class="keyword">dynamic_cast&lt;</span><span class="keyword">const </span>ExtrusionEntityCollection*<span class="keyword">&gt;</span>(ee)) {</div>
<div class="line"><span class="lineno"> 4845</span>                    assert(! eecol-&gt;empty());</div>
<div class="line"><span class="lineno"> 4846</span>                    <span class="keywordflow">return</span> verify_nonempty(eecol);</div>
<div class="line"><span class="lineno"> 4847</span>                } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 4848</span>                    assert(<span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 4849</span>            }</div>
<div class="line"><span class="lineno"> 4850</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 4851</span>        }</div>
<div class="line"><span class="lineno"> 4852</span>    };</div>
<div class="line"><span class="lineno"> 4853</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> SupportLayer *support_layer : support_layers)</div>
<div class="line"><span class="lineno"> 4854</span>    assert(Test::verify_nonempty(&amp;support_layer-&gt;support_fills));</div>
<div class="line"><span class="lineno"> 4855</span><span class="preprocessor">#endif </span><span class="comment">// NDEBUG</span></div>
<div class="line"><span class="lineno"> 4856</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_fill_html_ae4f0ccb5cf9427ade958c67faa188c64"><div class="ttname"><a href="../../d7/dcc/class_slic3r_1_1_fill.html#ae4f0ccb5cf9427ade958c67faa188c64">Slic3r::Fill::new_from_type</a></div><div class="ttdeci">static Fill * new_from_type(const InfillPattern type)</div><div class="ttdef"><b>Definition</b> FillBase.cpp:36</div></div>
<div class="ttc" id="aclass_slic3r_1_1_flow_html_a7f464e1bb800ac2903081f6aeba37f6e"><div class="ttname"><a href="../../d6/d0f/class_slic3r_1_1_flow.html#a7f464e1bb800ac2903081f6aeba37f6e">Slic3r::Flow::width</a></div><div class="ttdeci">float width() const</div><div class="ttdef"><b>Definition</b> Flow.hpp:61</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a03e1f5dc3048c374c660c48629bcdb57"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a03e1f5dc3048c374c660c48629bcdb57">Slic3r::PrintObjectSupportMaterial::has_contact_loops</a></div><div class="ttdeci">bool has_contact_loops() const</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:166</div></div>
<div class="ttc" id="alibslic3r_8h_html_a8a7f69c27280e7542b2d1fd979af4545"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a8a7f69c27280e7542b2d1fd979af4545">coord_t</a></div><div class="ttdeci">int32_t coord_t</div><div class="ttdef"><b>Definition</b> libslic3r.h:40</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3b9502497e4950d103bb52b0fb516d3a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3b9502497e4950d103bb52b0fb516d3a">Slic3r::fill_expolygons_with_sheath_generate_paths</a></div><div class="ttdeci">static void fill_expolygons_with_sheath_generate_paths(ExtrusionEntitiesPtr &amp;dst, const Polygons &amp;polygons, Fill *filler, float density, ExtrusionRole role, const Flow &amp;flow, bool with_sheath, bool no_sort)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:3746</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6fa3193f46e8c4fc55359a5c124f46e6a54a07a476d1b976ab5ee4f95e80df634"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6fa3193f46e8c4fc55359a5c124f46e6a54a07a476d1b976ab5ee4f95e80df634">Slic3r::erSupportMaterialInterface</a></div><div class="ttdeci">@ erSupportMaterialInterface</div><div class="ttdef"><b>Definition</b> ExtrusionEntity.hpp:36</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6fa3193f46e8c4fc55359a5c124f46e6a667e5eb77b54b3867d5ddd7474bd2f1a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6fa3193f46e8c4fc55359a5c124f46e6a667e5eb77b54b3867d5ddd7474bd2f1a">Slic3r::erSupportMaterial</a></div><div class="ttdeci">@ erSupportMaterial</div><div class="ttdef"><b>Definition</b> ExtrusionEntity.hpp:35</div></div>
<div class="ttc" id="anamespace_slic3r_html_a83b9b01271dda8378c1cc57f30699d18a536cff34f56e3dde41024fdf19e3331d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a83b9b01271dda8378c1cc57f30699d18a536cff34f56e3dde41024fdf19e3331d">Slic3r::smpRectilinearGrid</a></div><div class="ttdeci">@ smpRectilinearGrid</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:98</div></div>
<div class="ttc" id="apoint__areas_8cpp_html_a6a2f109ab3e0aba2f61e7d28188c3660"><div class="ttname"><a href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a></div><div class="ttdeci">Kernel::Point_2 Point</div><div class="ttdef"><b>Definition</b> point_areas.cpp:20</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00097">Slic3r::Fill::angle</a>, <a class="el" href="../../#l00112">Slic3r::PrintObjectSupportMaterial::MyLayer::bridging</a>, <a class="el" href="../../#l00117">Slic3r::PrintObjectSupportMaterial::MyLayer::contact_polygons</a>, <a class="el" href="../../#l00032">Slic3r::ExtrusionEntityCollection::entities</a>, <a class="el" href="../../#l00035">Slic3r::erSupportMaterial</a>, <a class="el" href="../../#l00036">Slic3r::erSupportMaterialInterface</a>, <a class="el" href="../../#l03746">Slic3r::fill_expolygons_with_sheath_generate_paths()</a>, <a class="el" href="../../#l00104">Slic3r::PrintObjectSupportMaterial::MyLayer::height</a>, <a class="el" href="../../#l00101">Slic3r::Fill::link_max_length</a>, <a class="el" href="../../#l03893">Slic3r::LoopInterfaceProcessor::n_contact_loops</a>, <a class="el" href="../../#l00115">Slic3r::PrintObjectSupportMaterial::MyLayer::polygons</a>, <a class="el" href="../../#l00374">Slic3r::range()</a>, <a class="el" href="../../#l00081">scale_</a>, <a class="el" href="../../#l00098">Slic3r::smpRectilinearGrid</a>, <a class="el" href="../../#l00093">Slic3r::Fill::spacing</a>, and <a class="el" href="../../#l00269">Slic3r::SupportLayer::support_fills</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_af1f16d63ec06800caba4cec368ab1637_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_af1f16d63ec06800caba4cec368ab1637_icgraph.svg" width="416" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a03e1f5dc3048c374c660c48629bcdb57" name="a03e1f5dc3048c374c660c48629bcdb57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03e1f5dc3048c374c660c48629bcdb57">&#9670;&#160;</a></span>has_contact_loops()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PrintObjectSupportMaterial::has_contact_loops </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  166</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_interface_loop_pattern.value; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00253">m_object_config</a>.</p>

</div>
</div>
<a id="a3c0106d9d58b8f72d32794b42cc76b0f" name="a3c0106d9d58b8f72d32794b42cc76b0f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c0106d9d58b8f72d32794b42cc76b0f">&#9670;&#160;</a></span>has_raft()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PrintObjectSupportMaterial::has_raft </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  160</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ab139624a0f2e0d89e3d200c372154c4c">has_raft</a>(); }</div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_ab139624a0f2e0d89e3d200c372154c4c"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ab139624a0f2e0d89e3d200c372154c4c">Slic3r::SlicingParameters::has_raft</a></div><div class="ttdeci">bool has_raft() const</div><div class="ttdef"><b>Definition</b> Slicing.hpp:38</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00038">Slic3r::SlicingParameters::has_raft()</a>, and <a class="el" href="../../#l00256">m_slicing_params</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a3c0106d9d58b8f72d32794b42cc76b0f_cgraph.svg" width="616" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a63c1f7fa0e8ffece7c916dcb3716a4ef" name="a63c1f7fa0e8ffece7c916dcb3716a4ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63c1f7fa0e8ffece7c916dcb3716a4ef">&#9670;&#160;</a></span>has_support()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PrintObjectSupportMaterial::has_support </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  162</span>{ <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;enable_support.value || <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;enforce_support_layers; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00253">m_object_config</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00163">build_plate_only()</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a63c1f7fa0e8ffece7c916dcb3716a4ef_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ac12b23804745399e2f6c5ffc0d49eeb3" name="ac12b23804745399e2f6c5ffc0d49eeb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac12b23804745399e2f6c5ffc0d49eeb3">&#9670;&#160;</a></span>raft_and_intermediate_support_layers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">PrintObjectSupportMaterial::MyLayersPtr</a> Slic3r::PrintObjectSupportMaterial::raft_and_intermediate_support_layers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2912</span>{</div>
<div class="line"><span class="lineno"> 2913</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> intermediate_layers;</div>
<div class="line"><span class="lineno"> 2914</span> </div>
<div class="line"><span class="lineno"> 2915</span>    <span class="comment">// Collect and sort the extremes (bottoms of the top contacts and tops of the bottom contacts).</span></div>
<div class="line"><span class="lineno"> 2916</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> extremes;</div>
<div class="line"><span class="lineno"> 2917</span>    extremes.reserve(top_contacts.size() + bottom_contacts.size());</div>
<div class="line"><span class="lineno"> 2918</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; top_contacts.size(); ++ i)</div>
<div class="line"><span class="lineno"> 2919</span>        <span class="comment">// Bottoms of the top contact layers. In case of non-soluble supports,</span></div>
<div class="line"><span class="lineno"> 2920</span>        <span class="comment">// the top contact layer thickness is not known yet.</span></div>
<div class="line"><span class="lineno"> 2921</span>        extremes.push_back(top_contacts[i]);</div>
<div class="line"><span class="lineno"> 2922</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; bottom_contacts.size(); ++ i)</div>
<div class="line"><span class="lineno"> 2923</span>        <span class="comment">// Tops of the bottom contact layers.</span></div>
<div class="line"><span class="lineno"> 2924</span>        extremes.push_back(bottom_contacts[i]);</div>
<div class="line"><span class="lineno"> 2925</span>    <span class="keywordflow">if</span> (extremes.empty())</div>
<div class="line"><span class="lineno"> 2926</span>        <span class="keywordflow">return</span> intermediate_layers;</div>
<div class="line"><span class="lineno"> 2927</span> </div>
<div class="line"><span class="lineno"> 2928</span>    <span class="keyword">auto</span> layer_extreme_lower = [](<span class="keyword">const</span> MyLayer *l1, <span class="keyword">const</span> MyLayer *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">l2</a>) {</div>
<div class="line"><span class="lineno"> 2929</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> z1 = l1-&gt;extreme_z();</div>
<div class="line"><span class="lineno"> 2930</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> z2 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">l2</a>-&gt;extreme_z();</div>
<div class="line"><span class="lineno"> 2931</span>        <span class="comment">// If the layers are aligned, return the top contact surface first.</span></div>
<div class="line"><span class="lineno"> 2932</span>        <span class="keywordflow">return</span> z1 &lt; z2 || (z1 == z2 &amp;&amp; l1-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">PrintObjectSupportMaterial::sltTopContact</a> &amp;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1e045f56a994b8cd4a5b203626cd8272">l2</a>-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">PrintObjectSupportMaterial::sltBottomContact</a>);</div>
<div class="line"><span class="lineno"> 2933</span>    };</div>
<div class="line"><span class="lineno"> 2934</span>    std::sort(extremes.begin(), extremes.end(), layer_extreme_lower);</div>
<div class="line"><span class="lineno"> 2935</span> </div>
<div class="line"><span class="lineno"> 2936</span>    assert(extremes.empty() || </div>
<div class="line"><span class="lineno"> 2937</span>        (extremes.front()-&gt;extreme_z() &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a> &amp;&amp; </div>
<div class="line"><span class="lineno"> 2938</span>          (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_function" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#acea524a90dabe50ccbd21e34e9547928">raft_layers</a>() == 1 || <span class="comment">// only raft contact layer</span></div>
<div class="line"><span class="lineno"> 2939</span>           extremes.front()-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a> || <span class="comment">// first extreme is a top contact layer</span></div>
<div class="line"><span class="lineno"> 2940</span>           extremes.front()-&gt;extreme_z() &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)));</div>
<div class="line"><span class="lineno"> 2941</span> </div>
<div class="line"><span class="lineno"> 2942</span>    <span class="keywordtype">bool</span> synchronize = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ad404e6eecb194f163f453cbc583f81eb">synchronize_layers</a>();</div>
<div class="line"><span class="lineno"> 2943</span> </div>
<div class="line"><span class="lineno"> 2944</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno"> 2945</span>    <span class="comment">// Verify that the extremes are separated by m_support_layer_height_min.</span></div>
<div class="line"><span class="lineno"> 2946</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; extremes.size(); ++ i) {</div>
<div class="line"><span class="lineno"> 2947</span>        assert(extremes[i]-&gt;extreme_z() - extremes[i-1]-&gt;extreme_z() == 0. ||</div>
<div class="line"><span class="lineno"> 2948</span>               extremes[i]-&gt;extreme_z() - extremes[i-1]-&gt;extreme_z() &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 2949</span>        assert(extremes[i]-&gt;extreme_z() - extremes[i-1]-&gt;extreme_z() &gt; 0. ||</div>
<div class="line"><span class="lineno"> 2950</span>               extremes[i]-&gt;layer_type == extremes[i-1]-&gt;layer_type ||</div>
<div class="line"><span class="lineno"> 2951</span>               (extremes[i]-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">sltBottomContact</a> &amp;&amp; extremes[i - 1]-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>));</div>
<div class="line"><span class="lineno"> 2952</span>    }</div>
<div class="line"><span class="lineno"> 2953</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2954</span> </div>
<div class="line"><span class="lineno"> 2955</span>    <span class="comment">// Generate intermediate layers.</span></div>
<div class="line"><span class="lineno"> 2956</span>    <span class="comment">// The first intermediate layer is the same as the 1st layer if there is no raft,</span></div>
<div class="line"><span class="lineno"> 2957</span>    <span class="comment">// or the bottom of the first intermediate layer is aligned with the bottom of the raft contact layer.</span></div>
<div class="line"><span class="lineno"> 2958</span>    <span class="comment">// Intermediate layers are always printed with a normal extrusion flow (non-bridging).</span></div>
<div class="line"><span class="lineno"> 2959</span>    <span class="keywordtype">size_t</span> idx_layer_object = 0;</div>
<div class="line"><span class="lineno"> 2960</span>    <span class="keywordtype">size_t</span> idx_extreme_first = 0;</div>
<div class="line"><span class="lineno"> 2961</span>    <span class="keywordflow">if</span> (! extremes.empty() &amp;&amp; std::abs(extremes.front()-&gt;extreme_z() - <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a>) &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) {</div>
<div class="line"><span class="lineno"> 2962</span>        <span class="comment">// This is a raft contact layer, its height has been decided in this-&gt;top_contact_layers().</span></div>
<div class="line"><span class="lineno"> 2963</span>        <span class="comment">// Ignore this layer when calculating the intermediate support layers.</span></div>
<div class="line"><span class="lineno"> 2964</span>        assert(extremes.front()-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>);</div>
<div class="line"><span class="lineno"> 2965</span>        ++ idx_extreme_first;</div>
<div class="line"><span class="lineno"> 2966</span>    }</div>
<div class="line"><span class="lineno"> 2967</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx_extreme = idx_extreme_first; idx_extreme &lt; extremes.size(); ++ idx_extreme) {</div>
<div class="line"><span class="lineno"> 2968</span>        MyLayer      *extr2  = extremes[idx_extreme];</div>
<div class="line"><span class="lineno"> 2969</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a>      extr2z = extr2-&gt;extreme_z();</div>
<div class="line"><span class="lineno"> 2970</span>        <span class="keywordflow">if</span> (std::abs(extr2z - <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>) &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) {</div>
<div class="line"><span class="lineno"> 2971</span>            <span class="comment">// This is a bottom of a synchronized (or soluble) top contact layer, its height has been decided in this-&gt;top_contact_layers().</span></div>
<div class="line"><span class="lineno"> 2972</span>            assert(extr2-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>);</div>
<div class="line"><span class="lineno"> 2973</span>            assert(std::abs(extr2-&gt;bottom_z - <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>) &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 2974</span>            assert(extr2-&gt;print_z &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a> + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 2975</span>            <span class="keywordflow">if</span> (intermediate_layers.empty() || intermediate_layers.back()-&gt;print_z &lt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>) {</div>
<div class="line"><span class="lineno"> 2976</span>                MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>);</div>
<div class="line"><span class="lineno"> 2977</span>                layer_new.bottom_z = 0.;</div>
<div class="line"><span class="lineno"> 2978</span>                layer_new.print_z  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>;</div>
<div class="line"><span class="lineno"> 2979</span>                layer_new.height   = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>;</div>
<div class="line"><span class="lineno"> 2980</span>                intermediate_layers.push_back(&amp;layer_new);</div>
<div class="line"><span class="lineno"> 2981</span>            }</div>
<div class="line"><span class="lineno"> 2982</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2983</span>        }</div>
<div class="line"><span class="lineno"> 2984</span>        assert(extr2z &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 2985</span>        assert(extr2z &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 2986</span>        MyLayer      *extr1  = (idx_extreme == idx_extreme_first) ? <span class="keyword">nullptr</span> : extremes[idx_extreme - 1];</div>
<div class="line"><span class="lineno"> 2987</span>        <span class="comment">// Fuse a support layer firmly to the raft top interface (not to the raft contacts).</span></div>
<div class="line"><span class="lineno"> 2988</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a>      extr1z = (extr1 == <span class="keyword">nullptr</span>) ? <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a> : extr1-&gt;extreme_z();</div>
<div class="line"><span class="lineno"> 2989</span>        assert(extr2z &gt;= extr1z);</div>
<div class="line"><span class="lineno"> 2990</span>        assert(extr2z &gt; extr1z || (extr1 != <span class="keyword">nullptr</span> &amp;&amp; extr2-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8ab7a7feac0ca4e669482ed959e6bee701">sltBottomContact</a>));</div>
<div class="line"><span class="lineno"> 2991</span>        <span class="keywordflow">if</span> (std::abs(extr1z) &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>) {</div>
<div class="line"><span class="lineno"> 2992</span>            <span class="comment">// This layer interval starts with the 1st layer. Print the 1st layer using the prescribed 1st layer thickness.</span></div>
<div class="line"><span class="lineno"> 2993</span>            <span class="comment">// assert(! m_slicing_params.has_raft()); RaftingEdition: unclear where the issue is: assert fails with 1-layer raft &amp; base supports</span></div>
<div class="line"><span class="lineno"> 2994</span>            assert(intermediate_layers.empty() || intermediate_layers.back()-&gt;print_z &lt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>);</div>
<div class="line"><span class="lineno"> 2995</span>            <span class="comment">// At this point only layers above first_print_layer_heigth + EPSILON are expected as the other cases were captured earlier.</span></div>
<div class="line"><span class="lineno"> 2996</span>            assert(extr2z &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 2997</span>            <span class="comment">// Generate a new intermediate layer.</span></div>
<div class="line"><span class="lineno"> 2998</span>            MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>);</div>
<div class="line"><span class="lineno"> 2999</span>            layer_new.bottom_z = 0.;</div>
<div class="line"><span class="lineno"> 3000</span>            layer_new.print_z  = extr1z = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a>;</div>
<div class="line"><span class="lineno"> 3001</span>            layer_new.height   = extr1z;</div>
<div class="line"><span class="lineno"> 3002</span>            intermediate_layers.push_back(&amp;layer_new);</div>
<div class="line"><span class="lineno"> 3003</span>            <span class="comment">// Continue printing the other layers up to extr2z.</span></div>
<div class="line"><span class="lineno"> 3004</span>        }</div>
<div class="line"><span class="lineno"> 3005</span>        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a>      <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a>   = extr2z - extr1z;</div>
<div class="line"><span class="lineno"> 3006</span>        assert(dist &gt;= 0.);</div>
<div class="line"><span class="lineno"> 3007</span>        <span class="keywordflow">if</span> (dist == 0.)</div>
<div class="line"><span class="lineno"> 3008</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3009</span>        <span class="comment">// The new layers shall be at least m_support_layer_height_min thick.</span></div>
<div class="line"><span class="lineno"> 3010</span>        assert(dist &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 3011</span>        <span class="keywordflow">if</span> (synchronize) {</div>
<div class="line"><span class="lineno"> 3012</span>            <span class="comment">// Emit support layers synchronized with the object layers.</span></div>
<div class="line"><span class="lineno"> 3013</span>            <span class="comment">// Find the first object layer, which has its print_z in this support Z range.</span></div>
<div class="line"><span class="lineno"> 3014</span>            <span class="keywordflow">while</span> (idx_layer_object &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>() &amp;&amp; <span class="keywordtype">object</span>.layers()[idx_layer_object]-&gt;print_z &lt; extr1z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3015</span>                ++ idx_layer_object;</div>
<div class="line"><span class="lineno"> 3016</span>            <span class="keywordflow">if</span> (idx_layer_object == 0 &amp;&amp; extr1z == <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a>) {</div>
<div class="line"><span class="lineno"> 3017</span>                <span class="comment">// Insert one base support layer below the object.</span></div>
<div class="line"><span class="lineno"> 3018</span>                MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>);</div>
<div class="line"><span class="lineno"> 3019</span>                layer_new.print_z  = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6339c74eff90432e3b7ea380898a6c75">object_print_z_min</a>;</div>
<div class="line"><span class="lineno"> 3020</span>                layer_new.bottom_z = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#aba85290292e48feb130b844963f96d62">raft_interface_top_z</a>;</div>
<div class="line"><span class="lineno"> 3021</span>                layer_new.height   = layer_new.print_z - layer_new.bottom_z;</div>
<div class="line"><span class="lineno"> 3022</span>                intermediate_layers.push_back(&amp;layer_new);</div>
<div class="line"><span class="lineno"> 3023</span>            }</div>
<div class="line"><span class="lineno"> 3024</span>            <span class="comment">// Emit all intermediate support layers synchronized with object layers up to extr2z.</span></div>
<div class="line"><span class="lineno"> 3025</span>            <span class="keywordflow">for</span> (; idx_layer_object &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>() &amp;&amp; <span class="keywordtype">object</span>.layers()[idx_layer_object]-&gt;print_z &lt; extr2z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>; ++ idx_layer_object) {</div>
<div class="line"><span class="lineno"> 3026</span>                MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>);</div>
<div class="line"><span class="lineno"> 3027</span>                layer_new.print_z  = <span class="keywordtype">object</span>.layers()[idx_layer_object]-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3028</span>                layer_new.height   = <span class="keywordtype">object</span>.layers()[idx_layer_object]-&gt;height;</div>
<div class="line"><span class="lineno"> 3029</span>                layer_new.bottom_z = (idx_layer_object &gt; 0) ? <span class="keywordtype">object</span>.layers()[idx_layer_object - 1]-&gt;print_z : (layer_new.print_z - layer_new.height);</div>
<div class="line"><span class="lineno"> 3030</span>                assert(intermediate_layers.empty() || intermediate_layers.back()-&gt;print_z &lt; layer_new.print_z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 3031</span>                intermediate_layers.push_back(&amp;layer_new);</div>
<div class="line"><span class="lineno"> 3032</span>            }</div>
<div class="line"><span class="lineno"> 3033</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3034</span>            <span class="comment">// Insert intermediate layers.</span></div>
<div class="line"><span class="lineno"> 3035</span>            <span class="keywordtype">size_t</span>        n_layers_extra = size_t(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>(dist / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#adcacd33d748550926fbff35daa13d8eb">max_suport_layer_height</a>)); </div>
<div class="line"><span class="lineno"> 3036</span>            assert(n_layers_extra &gt; 0);</div>
<div class="line"><span class="lineno"> 3037</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a>      <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>   = <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a> / <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a>(n_layers_extra);</div>
<div class="line"><span class="lineno"> 3038</span>            <span class="keywordflow">if</span> (extr1 != <span class="keyword">nullptr</span> &amp;&amp; extr1-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a> &amp;&amp;</div>
<div class="line"><span class="lineno"> 3039</span>                extr1-&gt;print_z + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> &gt; extr1-&gt;bottom_z + step) {</div>
<div class="line"><span class="lineno"> 3040</span>                <span class="comment">// The bottom extreme is a bottom of a top surface. Ensure that the gap </span></div>
<div class="line"><span class="lineno"> 3041</span>                <span class="comment">// between the 1st intermediate layer print_z and extr1-&gt;print_z is not too small.</span></div>
<div class="line"><span class="lineno"> 3042</span>                assert(extr1-&gt;bottom_z + <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a> &lt; extr1-&gt;print_z + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 3043</span>                <span class="comment">// Generate the first intermediate layer.</span></div>
<div class="line"><span class="lineno"> 3044</span>                MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>);</div>
<div class="line"><span class="lineno"> 3045</span>                layer_new.bottom_z = extr1-&gt;bottom_z;</div>
<div class="line"><span class="lineno"> 3046</span>                layer_new.print_z  = extr1z = extr1-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3047</span>                layer_new.height   = extr1-&gt;height;</div>
<div class="line"><span class="lineno"> 3048</span>                intermediate_layers.push_back(&amp;layer_new);</div>
<div class="line"><span class="lineno"> 3049</span>                <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a> = extr2z - extr1z;</div>
<div class="line"><span class="lineno"> 3050</span>                n_layers_extra = size_t(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a63043b6807e8e10fb1adf4667e3664d2">ceil</a>(dist / <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#adcacd33d748550926fbff35daa13d8eb">max_suport_layer_height</a>));</div>
<div class="line"><span class="lineno"> 3051</span>                <span class="keywordflow">if</span> (n_layers_extra == 0)</div>
<div class="line"><span class="lineno"> 3052</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3053</span>                <span class="comment">// Continue printing the other layers up to extr2z.</span></div>
<div class="line"><span class="lineno"> 3054</span>                <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a> = <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a> / <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a>(n_layers_extra);</div>
<div class="line"><span class="lineno"> 3055</span>            }</div>
<div class="line"><span class="lineno"> 3056</span>            <span class="keywordflow">if</span> (! <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ac8f1765efb10ac97c597982a0b4847f5">soluble_interface</a> &amp;&amp; extr2-&gt;layer_type == <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8a6078729521b533019c149337c1cdb130">sltTopContact</a>) {</div>
<div class="line"><span class="lineno"> 3057</span>                <span class="comment">// This is a top interface layer, which does not have a height assigned yet. Do it now.</span></div>
<div class="line"><span class="lineno"> 3058</span>                assert(extr2-&gt;height == 0.);</div>
<div class="line"><span class="lineno"> 3059</span>                assert(extr1z &gt; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a97b70b5bd60c1d5a90b636aacd447e4e">first_print_layer_height</a> - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 3060</span>                extr2-&gt;height = <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>;</div>
<div class="line"><span class="lineno"> 3061</span>                extr2-&gt;bottom_z = extr2z = extr2-&gt;print_z - <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>;</div>
<div class="line"><span class="lineno"> 3062</span>                <span class="keywordflow">if</span> (-- n_layers_extra == 0)</div>
<div class="line"><span class="lineno"> 3063</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 3064</span>            }</div>
<div class="line"><span class="lineno"> 3065</span>            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> extr2z_large_steps = extr2z;</div>
<div class="line"><span class="lineno"> 3066</span>            <span class="comment">// Take the largest allowed step in the Z axis until extr2z_large_steps is reached.</span></div>
<div class="line"><span class="lineno"> 3067</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; n_layers_extra; ++ i) {</div>
<div class="line"><span class="lineno"> 3068</span>                MyLayer &amp;layer_new = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7bfdff734ed5d9f415d7eb00ca540be6">layer_allocate</a>(layer_storage, <a class="code hl_enumvalue" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a2daf585d84c3d4ca23335f604b08d6d8af531afe3a0351e256308c42e9d7adeae">sltIntermediate</a>);</div>
<div class="line"><span class="lineno"> 3069</span>                <span class="keywordflow">if</span> (i + 1 == n_layers_extra) {</div>
<div class="line"><span class="lineno"> 3070</span>                    <span class="comment">// Last intermediate layer added. Align the last entered layer with extr2z_large_steps exactly.</span></div>
<div class="line"><span class="lineno"> 3071</span>                    layer_new.bottom_z = (i == 0) ? extr1z : intermediate_layers.<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a46b7df127ea55a76bc6f42c30a06d0da">back</a>()-&gt;print_z;</div>
<div class="line"><span class="lineno"> 3072</span>                    layer_new.print_z = extr2z_large_steps;</div>
<div class="line"><span class="lineno"> 3073</span>                    layer_new.height = layer_new.print_z - layer_new.bottom_z;</div>
<div class="line"><span class="lineno"> 3074</span>                }</div>
<div class="line"><span class="lineno"> 3075</span>                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 3076</span>                    <span class="comment">// Intermediate layer, not the last added.</span></div>
<div class="line"><span class="lineno"> 3077</span>                    layer_new.height = <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>;</div>
<div class="line"><span class="lineno"> 3078</span>                    layer_new.bottom_z = extr1z + i * <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>;</div>
<div class="line"><span class="lineno"> 3079</span>                    layer_new.print_z = layer_new.bottom_z + <a class="code hl_function" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a6ceea497872e0323516dbb68ef605a21">step</a>;</div>
<div class="line"><span class="lineno"> 3080</span>                }</div>
<div class="line"><span class="lineno"> 3081</span>                assert(intermediate_layers.empty() || intermediate_layers.back()-&gt;print_z &lt;= layer_new.print_z);</div>
<div class="line"><span class="lineno"> 3082</span>                intermediate_layers.push_back(&amp;layer_new);</div>
<div class="line"><span class="lineno"> 3083</span>            }</div>
<div class="line"><span class="lineno"> 3084</span>        }</div>
<div class="line"><span class="lineno"> 3085</span>    }</div>
<div class="line"><span class="lineno"> 3086</span> </div>
<div class="line"><span class="lineno"> 3087</span><span class="preprocessor">#ifdef _DEBUG</span></div>
<div class="line"><span class="lineno"> 3088</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; top_contacts.size(); ++i)</div>
<div class="line"><span class="lineno"> 3089</span>        assert(top_contacts[i]-&gt;height &gt; 0.);</div>
<div class="line"><span class="lineno"> 3090</span><span class="preprocessor">#endif </span><span class="comment">/* _DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3091</span> </div>
<div class="line"><span class="lineno"> 3092</span><span class="preprocessor">#if 0 </span><span class="comment">// #ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 3093</span>    <span class="comment">// check bounds</span></div>
<div class="line"><span class="lineno"> 3094</span>    std::ofstream <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>;</div>
<div class="line"><span class="lineno"> 3095</span>    <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.open(<span class="stringliteral">&quot;./SVG/ns_bounds.txt&quot;</span>);</div>
<div class="line"><span class="lineno"> 3096</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.is_open()) {</div>
<div class="line"><span class="lineno"> 3097</span>        <span class="keywordflow">if</span> (!top_contacts.empty()) {</div>
<div class="line"><span class="lineno"> 3098</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <span class="stringliteral">&quot;### Top Contacts ###&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3099</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; t : top_contacts) {</div>
<div class="line"><span class="lineno"> 3100</span>                <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; t-&gt;print_z &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3101</span>            }</div>
<div class="line"><span class="lineno"> 3102</span>        }</div>
<div class="line"><span class="lineno"> 3103</span>        <span class="keywordflow">if</span> (!bottom_contacts.empty()) {</div>
<div class="line"><span class="lineno"> 3104</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <span class="stringliteral">&quot;### Bottome Contacts ###&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3105</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; b : bottom_contacts) {</div>
<div class="line"><span class="lineno"> 3106</span>                <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a>-&gt;print_z &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3107</span>            }</div>
<div class="line"><span class="lineno"> 3108</span>        }</div>
<div class="line"><span class="lineno"> 3109</span>        <span class="keywordflow">if</span> (!intermediate_layers.empty()) {</div>
<div class="line"><span class="lineno"> 3110</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <span class="stringliteral">&quot;### Intermediate Layers ###&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3111</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; i : intermediate_layers) {</div>
<div class="line"><span class="lineno"> 3112</span>                <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; i-&gt;print_z &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3113</span>            }</div>
<div class="line"><span class="lineno"> 3114</span>        }</div>
<div class="line"><span class="lineno"> 3115</span>        <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <span class="stringliteral">&quot;### Slice Layers ###&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3116</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> j = 0; j &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>(); ++j) {</div>
<div class="line"><span class="lineno"> 3117</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> &lt;&lt; <span class="keywordtype">object</span>.layers()[j]-&gt;print_z &lt;&lt; std::endl;</div>
<div class="line"><span class="lineno"> 3118</span>        }</div>
<div class="line"><span class="lineno"> 3119</span>    }</div>
<div class="line"><span class="lineno"> 3120</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 3121</span>    </div>
<div class="line"><span class="lineno"> 3122</span>    <span class="keywordflow">return</span> intermediate_layers;</div>
<div class="line"><span class="lineno"> 3123</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1_geometry_html_a2b2112c1026a31e7c4c00693ca0bc2e2"><div class="ttname"><a href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">Slic3r::Geometry::dist</a></div><div class="ttdeci">T dist(const boost::polygon::point_data&lt; T &gt; &amp;p1, const boost::polygon::point_data&lt; T &gt; &amp;p2)</div><div class="ttdef"><b>Definition</b> Geometry.cpp:287</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a46b7df127ea55a76bc6f42c30a06d0da"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a46b7df127ea55a76bc6f42c30a06d0da">libnest2d::shapelike::back</a></div><div class="ttdeci">TPoint&lt; P &gt; back(const P &amp;p)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:886</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">marchsq::__impl::SquareTag::b</a></div><div class="ttdeci">@ b</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_a6339c74eff90432e3b7ea380898a6c75"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#a6339c74eff90432e3b7ea380898a6c75">Slic3r::SlicingParameters::object_print_z_min</a></div><div class="ttdeci">coordf_t object_print_z_min</div><div class="ttdef"><b>Definition</b> Slicing.hpp:97</div></div>
<div class="ttc" id="astruct_slic3r_1_1_slicing_parameters_html_adcacd33d748550926fbff35daa13d8eb"><div class="ttname"><a href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#adcacd33d748550926fbff35daa13d8eb">Slic3r::SlicingParameters::max_suport_layer_height</a></div><div class="ttdeci">coordf_t max_suport_layer_height</div><div class="ttdef"><b>Definition</b> Slicing.hpp:66</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00102">Slic3r::PrintObjectSupportMaterial::MyLayer::bottom_z</a>, <a class="el" href="../../#l00402">ceil()</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00095">Slic3r::PrintObjectSupportMaterial::MyLayer::extreme_z()</a>, <a class="el" href="../../#l00104">Slic3r::PrintObjectSupportMaterial::MyLayer::height</a>, <a class="el" href="../../#l00166">Slic3r::l2()</a>, <a class="el" href="../../#l00429">Slic3r::layer_allocate()</a>, <a class="el" href="../../#l00097">Slic3r::PrintObjectSupportMaterial::MyLayer::layer_type</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l00099">Slic3r::PrintObjectSupportMaterial::MyLayer::print_z</a>, and <a class="el" href="../../#l00378">size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_ac12b23804745399e2f6c5ffc0d49eeb3_cgraph.svg" width="582" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_ac12b23804745399e2f6c5ffc0d49eeb3_icgraph.svg" width="432" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad404e6eecb194f163f453cbc583f81eb" name="ad404e6eecb194f163f453cbc583f81eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad404e6eecb194f163f453cbc583f81eb">&#9670;&#160;</a></span>synchronize_layers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::PrintObjectSupportMaterial::synchronize_layers </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  165</span>{ <span class="keywordflow">return</span> <span class="comment">/*m_slicing_params.soluble_interface &amp;&amp; */</span>!<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>-&gt;independent_support_layer_height.value; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00252">m_print_config</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_ad404e6eecb194f163f453cbc583f81eb_icgraph.svg" width="419" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a2e498c176aa13f8c7bcf10044d1304fa" name="a2e498c176aa13f8c7bcf10044d1304fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e498c176aa13f8c7bcf10044d1304fa">&#9670;&#160;</a></span>top_contact_layers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">PrintObjectSupportMaterial::MyLayersPtr</a> Slic3r::PrintObjectSupportMaterial::top_contact_layers </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>buildplate_covered</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a8838ab6cb7f099a9c5dd78692b949bcf">MyLayerStorage</a> &amp;&#160;</td>
          <td class="paramname"><em>layer_storage</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2210</span>{</div>
<div class="line"><span class="lineno"> 2211</span><span class="preprocessor">#ifdef SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2212</span>    <span class="keyword">static</span> <span class="keywordtype">int</span> iRun = 0;</div>
<div class="line"><span class="lineno"> 2213</span>    ++ iRun; </div>
<div class="line"><span class="lineno"> 2214</span><span class="preprocessor">    #define SLIC3R_IRUN , iRun</span></div>
<div class="line"><span class="lineno"> 2215</span><span class="preprocessor">#endif </span><span class="comment">/* SLIC3R_DEBUG */</span><span class="preprocessor"></span></div>
<div class="line"><span class="lineno"> 2216</span> </div>
<div class="line"><span class="lineno"> 2217</span>    <span class="comment">// BBS: tree support is selected so normal supports need not be generated.</span></div>
<div class="line"><span class="lineno"> 2218</span>    <span class="comment">// Note we still need to go through the following steps if support is disabled but raft is enabled.</span></div>
<div class="line"><span class="lineno"> 2219</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;enable_support.value &amp;&amp; (<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_type.value != <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#aaaabcf9acc53536eede4610d1218434caa078a64fcb672e05ab32c9da2c0287a3">stNormalAuto</a> &amp;&amp; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_type.value != <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#aaaabcf9acc53536eede4610d1218434caaacecff995bc9c6e05492f1e4ae6503d">stNormal</a>)) {</div>
<div class="line"><span class="lineno"> 2220</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>();</div>
<div class="line"><span class="lineno"> 2221</span>    }</div>
<div class="line"><span class="lineno"> 2222</span> </div>
<div class="line"><span class="lineno"> 2223</span>    <span class="comment">// Slice support enforcers / support blockers.</span></div>
<div class="line"><span class="lineno"> 2224</span>    SupportAnnotations annotations(<span class="keywordtype">object</span>, <a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3abfb433ae14805f6bcb7d41b5cc1840">buildplate_covered</a>);</div>
<div class="line"><span class="lineno"> 2225</span> </div>
<div class="line"><span class="lineno"> 2226</span>    <span class="comment">// Output layers, sorted by top Z.</span></div>
<div class="line"><span class="lineno"> 2227</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> contact_out;</div>
<div class="line"><span class="lineno"> 2228</span> </div>
<div class="line"><span class="lineno"> 2229</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::top_contact_layers() in parallel - start&quot;</span>;</div>
<div class="line"><span class="lineno"> 2230</span>    <span class="comment">// Determine top contact areas.</span></div>
<div class="line"><span class="lineno"> 2231</span>    <span class="comment">// If generating raft only (no support), only calculate top contact areas for the 0th layer.</span></div>
<div class="line"><span class="lineno"> 2232</span>    <span class="comment">// If having a raft, start with 0th layer, otherwise with 1st layer.</span></div>
<div class="line"><span class="lineno"> 2233</span>    <span class="comment">// Note that layer_id &lt; layer-&gt;id when raft_layers &gt; 0 as the layer-&gt;id incorporates the raft layers.</span></div>
<div class="line"><span class="lineno"> 2234</span>    <span class="comment">// So layer_id == 0 means first object layer and layer-&gt;id == 0 means first print layer if there are no explicit raft layers.</span></div>
<div class="line"><span class="lineno"> 2235</span>    <span class="keywordtype">size_t</span> num_layers = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a63c1f7fa0e8ffece7c916dcb3716a4ef">has_support</a>() ? <span class="keywordtype">object</span>.layer_count() : 1;</div>
<div class="line"><span class="lineno"> 2236</span>    <span class="comment">// For each overhang layer, two supporting layers may be generated: One for the overhangs extruded with a bridging flow, </span></div>
<div class="line"><span class="lineno"> 2237</span>    <span class="comment">// and the other for the overhangs extruded with a normal flow.</span></div>
<div class="line"><span class="lineno"> 2238</span>    contact_out.assign(num_layers * 2, <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno"> 2239</span>    tbb::spin_mutex layer_storage_mutex;</div>
<div class="line"><span class="lineno"> 2240</span> </div>
<div class="line"><span class="lineno"> 2241</span>    std::vector&lt;ExPolygons&gt; overhangs_per_layers(num_layers);</div>
<div class="line"><span class="lineno"> 2242</span>    <span class="keywordtype">size_t</span> layer_id_start = this-&gt;<a class="code hl_function" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3c0106d9d58b8f72d32794b42cc76b0f">has_raft</a>() ? 0 : 1;</div>
<div class="line"><span class="lineno"> 2243</span>     <span class="comment">// main part of overhang detection can be parallel</span></div>
<div class="line"><span class="lineno"> 2244</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(layer_id_start, num_layers),</div>
<div class="line"><span class="lineno"> 2245</span>        [&amp;](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 2246</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); layer_id &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); layer_id++) {</div>
<div class="line"><span class="lineno"> 2247</span>                <span class="keyword">const</span> Layer&amp; layer = *<span class="keywordtype">object</span>.layers()[layer_id];</div>
<div class="line"><span class="lineno"> 2248</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>            lower_layer_polygons = (layer_id == 0) ? <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>() : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(<span class="keywordtype">object</span>.layers()[layer_id - 1]-&gt;lslices);</div>
<div class="line"><span class="lineno"> 2249</span> </div>
<div class="line"><span class="lineno"> 2250</span>                overhangs_per_layers[layer_id] = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a218ddd8d0d0e158fe7c18cd30ef604ed">detect_overhangs</a>(layer, layer_id, lower_layer_polygons, *<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>, *<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>, annotations, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a></div>
<div class="line"><span class="lineno"> 2251</span>#ifdef SLIC3R_DEBUG</div>
<div class="line"><span class="lineno"> 2252</span>                    , iRun</div>
<div class="line"><span class="lineno"> 2253</span>#endif <span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2254</span>                );</div>
<div class="line"><span class="lineno"> 2255</span> </div>
<div class="line"><span class="lineno"> 2256</span>                <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno"> 2257</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2258</span>            }</div>
<div class="line"><span class="lineno"> 2259</span>        }</div>
<div class="line"><span class="lineno"> 2260</span>    ); <span class="comment">// end tbb::parallel_for</span></div>
<div class="line"><span class="lineno"> 2261</span> </div>
<div class="line"><span class="lineno"> 2262</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno"> 2263</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>();</div>
<div class="line"><span class="lineno"> 2264</span> </div>
<div class="line"><span class="lineno"> 2265</span>    <span class="comment">// check if the sharp tails should be extended higher</span></div>
<div class="line"><span class="lineno"> 2266</span>    <span class="keywordtype">bool</span> detect_first_sharp_tail_only = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2267</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> extrusion_width = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;line_width.get_abs_value(<span class="keywordtype">object</span>.print()-&gt;config().nozzle_diameter.get_at(<span class="keywordtype">object</span>.config().support_interface_filament-1));</div>
<div class="line"><span class="lineno"> 2268</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> extrusion_width_scaled = <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(extrusion_width);</div>
<div class="line"><span class="lineno"> 2269</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6025cd9b54824e8bcac090b8f5d29337">is_auto</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_type.value) &amp;&amp; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a7b0d40f9a8619b673f9ceea8de04661a">g_config_support_sharp_tails</a> &amp;&amp; !detect_first_sharp_tail_only) {</div>
<div class="line"><span class="lineno"> 2270</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_nr = layer_id_start; layer_nr &lt; num_layers; layer_nr++) {</div>
<div class="line"><span class="lineno"> 2271</span>            <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno"> 2272</span>                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2273</span> </div>
<div class="line"><span class="lineno"> 2274</span>            <span class="keyword">const</span> Layer* layer = <span class="keywordtype">object</span>.get_layer(layer_nr);</div>
<div class="line"><span class="lineno"> 2275</span>            <span class="keyword">const</span> Layer* lower_layer = layer-&gt;lower_layer;</div>
<div class="line"><span class="lineno"> 2276</span>            <span class="keywordflow">if</span> (!lower_layer)</div>
<div class="line"><span class="lineno"> 2277</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2278</span> </div>
<div class="line"><span class="lineno"> 2279</span>            <span class="comment">// BBS detect sharp tail</span></div>
<div class="line"><span class="lineno"> 2280</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">ExPolygons</a>&amp; lower_layer_sharptails = lower_layer-&gt;sharp_tails;</div>
<div class="line"><span class="lineno"> 2281</span>            <span class="keyword">const</span> <span class="keyword">auto</span>&amp; lower_layer_sharptails_height = lower_layer-&gt;sharp_tails_height;</div>
<div class="line"><span class="lineno"> 2282</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> ExPolygon&amp; expoly : layer-&gt;lslices) {</div>
<div class="line"><span class="lineno"> 2283</span>                <span class="keywordtype">bool</span>  is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2284</span>                <span class="keywordtype">float</span> accum_height = layer-&gt;height;</div>
<div class="line"><span class="lineno"> 2285</span>                <span class="keywordflow">do</span> {</div>
<div class="line"><span class="lineno"> 2286</span>                    <span class="comment">// 2. something below</span></div>
<div class="line"><span class="lineno"> 2287</span>                    <span class="comment">// check whether this is above a sharp tail region.</span></div>
<div class="line"><span class="lineno"> 2288</span> </div>
<div class="line"><span class="lineno"> 2289</span>                    <span class="comment">// 2.1 If no sharp tail below, this is considered as common region.</span></div>
<div class="line"><span class="lineno"> 2290</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">ExPolygons</a> supported_by_lower = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9853756af06b71590c902865926b8e28">intersection_ex</a>({ expoly }, lower_layer_sharptails);</div>
<div class="line"><span class="lineno"> 2291</span>                    <span class="keywordflow">if</span> (supported_by_lower.empty()) {</div>
<div class="line"><span class="lineno"> 2292</span>                        is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2293</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2294</span>                    }</div>
<div class="line"><span class="lineno"> 2295</span> </div>
<div class="line"><span class="lineno"> 2296</span>                    <span class="comment">// 2.2 If sharp tail below, check whether it support this region enough.</span></div>
<div class="line"><span class="lineno"> 2297</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 2298</span>                    <span class="comment">// judge by area isn&#39;t reliable, failure cases include 45 degree rotated cube</span></div>
<div class="line"><span class="lineno"> 2299</span>                    <span class="keywordtype">float</span>       supported_area = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a58007b1077539ba492d56398b92fea70">area</a>(supported_by_lower);</div>
<div class="line"><span class="lineno"> 2300</span>                    <span class="keywordflow">if</span> (supported_area &gt; <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a15f6728115269978cc5e0a44c22479a8">area_thresh_well_supported</a>) {</div>
<div class="line"><span class="lineno"> 2301</span>                        is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2302</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2303</span>                    }</div>
<div class="line"><span class="lineno"> 2304</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2305</span>                    BoundingBox bbox = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(supported_by_lower);</div>
<div class="line"><span class="lineno"> 2306</span>                    <span class="keywordflow">if</span> (bbox.size().x() &gt; <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a509efc840b8460ee975221330ef6d82f">length_thresh_well_supported</a> &amp;&amp; bbox.size().y() &gt; <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a509efc840b8460ee975221330ef6d82f">length_thresh_well_supported</a>) {</div>
<div class="line"><span class="lineno"> 2307</span>                        is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2308</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2309</span>                    }</div>
<div class="line"><span class="lineno"> 2310</span> </div>
<div class="line"><span class="lineno"> 2311</span>                    <span class="comment">// 2.3 check whether sharp tail exceed the max height</span></div>
<div class="line"><span class="lineno"> 2312</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; lower_sharp_tail_height : lower_layer_sharptails_height) {</div>
<div class="line"><span class="lineno"> 2313</span>                        <span class="keywordflow">if</span> (lower_sharp_tail_height.first-&gt;overlaps(expoly)) {</div>
<div class="line"><span class="lineno"> 2314</span>                            accum_height += lower_sharp_tail_height.second;</div>
<div class="line"><span class="lineno"> 2315</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2316</span>                        }</div>
<div class="line"><span class="lineno"> 2317</span>                    }</div>
<div class="line"><span class="lineno"> 2318</span>                    <span class="keywordflow">if</span> (accum_height &gt; <a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a852e19ab281b44709b3c5a3779c9c4cf">sharp_tail_max_support_height</a>) {</div>
<div class="line"><span class="lineno"> 2319</span>                        is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2320</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2321</span>                    }</div>
<div class="line"><span class="lineno"> 2322</span> </div>
<div class="line"><span class="lineno"> 2323</span>                    <span class="comment">// 2.4 if the area grows fast than threshold, it get connected to other part or</span></div>
<div class="line"><span class="lineno"> 2324</span>                    <span class="comment">// it has a sharp slop and will be auto supported.</span></div>
<div class="line"><span class="lineno"> 2325</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">ExPolygons</a> new_overhang_expolys = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b1bfe9b50e13403d42de533b8a19916">diff_ex</a>({ expoly }, lower_layer_sharptails);</div>
<div class="line"><span class="lineno"> 2326</span>                    <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> size_diff = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(new_overhang_expolys).<a class="code hl_function" href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a2233d300d197f650b6fefa6ac1607203">size</a>() - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(lower_layer_sharptails).<a class="code hl_function" href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a2233d300d197f650b6fefa6ac1607203">size</a>();</div>
<div class="line"><span class="lineno"> 2327</span>                    <span class="keywordflow">if</span> (size_diff.both_comp(<a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a>(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(5), <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(5)), <span class="stringliteral">&quot;&gt;&quot;</span>) || !<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5e96c84b799b62906e4a46a94eb8916c">offset_ex</a>(new_overhang_expolys, -5.0 * extrusion_width_scaled).<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>()) {</div>
<div class="line"><span class="lineno"> 2328</span>                        is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2329</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2330</span>                    }</div>
<div class="line"><span class="lineno"> 2331</span> </div>
<div class="line"><span class="lineno"> 2332</span>                    <span class="comment">// 2.5 mark the expoly as sharptail</span></div>
<div class="line"><span class="lineno"> 2333</span>                    is_sharp_tail = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2334</span>                } <span class="keywordflow">while</span> (0);</div>
<div class="line"><span class="lineno"> 2335</span> </div>
<div class="line"><span class="lineno"> 2336</span>                <span class="keywordflow">if</span> (is_sharp_tail) {</div>
<div class="line"><span class="lineno"> 2337</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">ExPolygons</a> overhang = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b1bfe9b50e13403d42de533b8a19916">diff_ex</a>({ expoly }, lower_layer-&gt;lslices);</div>
<div class="line"><span class="lineno"> 2338</span>                    layer-&gt;sharp_tails.push_back(expoly);</div>
<div class="line"><span class="lineno"> 2339</span>                    layer-&gt;sharp_tails_height.insert({ &amp;expoly, accum_height });</div>
<div class="line"><span class="lineno"> 2340</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5f240a84e573ed2d7785a439f4239e1a">append</a>(overhangs_per_layers[layer_nr], overhang);</div>
<div class="line"><span class="lineno"> 2341</span><span class="preprocessor">#ifdef SUPPORT_TREE_DEBUG_TO_SVG</span></div>
<div class="line"><span class="lineno"> 2342</span>                    <a class="code hl_enumvalue" href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">SVG</a> svg(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab8637587074b8b8f2fdcbb2a84d7d399">get_svg_filename</a>(std::to_string(layer-&gt;print_z), <span class="stringliteral">&quot;sharp_tail&quot;</span>), <span class="keywordtype">object</span>.bounding_box());</div>
<div class="line"><span class="lineno"> 2343</span>                    <span class="keywordflow">if</span> (svg.is_opened()) svg.draw(overhang, <span class="stringliteral">&quot;yellow&quot;</span>);</div>
<div class="line"><span class="lineno"> 2344</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2345</span>                }</div>
<div class="line"><span class="lineno"> 2346</span> </div>
<div class="line"><span class="lineno"> 2347</span>            }</div>
<div class="line"><span class="lineno"> 2348</span>        }</div>
<div class="line"><span class="lineno"> 2349</span>    }</div>
<div class="line"><span class="lineno"> 2350</span> </div>
<div class="line"><span class="lineno"> 2351</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno"> 2352</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>();</div>
<div class="line"><span class="lineno"> 2353</span> </div>
<div class="line"><span class="lineno"> 2354</span>    <span class="comment">// BBS group overhang clusters</span></div>
<div class="line"><span class="lineno"> 2355</span>    <span class="keyword">const</span> <span class="keywordtype">bool</span> config_remove_small_overhangs = <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;support_remove_small_overhang.value;</div>
<div class="line"><span class="lineno"> 2356</span>    <span class="keywordflow">if</span> (config_remove_small_overhangs) {</div>
<div class="line"><span class="lineno"> 2357</span>        std::vector&lt;OverhangCluster&gt; clusters;</div>
<div class="line"><span class="lineno"> 2358</span>      <span class="keywordtype">double</span> fw_scaled = <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(extrusion_width);</div>
<div class="line"><span class="lineno"> 2359</span>        std::set&lt;ExPolygon*&gt; removed_overhang;</div>
<div class="line"><span class="lineno"> 2360</span> </div>
<div class="line"><span class="lineno"> 2361</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = layer_id_start; layer_id &lt; num_layers; layer_id++) {</div>
<div class="line"><span class="lineno"> 2362</span>            <span class="keyword">const</span> Layer* layer = <span class="keywordtype">object</span>.get_layer(layer_id);</div>
<div class="line"><span class="lineno"> 2363</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; overhang : overhangs_per_layers[layer_id]) {</div>
<div class="line"><span class="lineno"> 2364</span>                OverhangCluster* <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a> = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab8643ace684d7376db449485d1b648bf">add_overhang</a>(clusters, &amp;overhang, layer_id, fw_scaled);</div>
<div class="line"><span class="lineno"> 2365</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ac054ee91b47bfcb7c5e12ff3344c6153">overlaps</a>({ overhang }, layer-&gt;cantilevers))</div>
<div class="line"><span class="lineno"> 2366</span>                    <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>-&gt;is_cantilever = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2367</span>            }</div>
<div class="line"><span class="lineno"> 2368</span>        }</div>
<div class="line"><span class="lineno"> 2369</span> </div>
<div class="line"><span class="lineno"> 2370</span>        <span class="keywordflow">for</span> (OverhangCluster&amp; cluster : clusters) {</div>
<div class="line"><span class="lineno"> 2371</span>            <span class="comment">// 3. check whether the small overhang is sharp tail</span></div>
<div class="line"><span class="lineno"> 2372</span>            <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_sharp_tail = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2373</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.min_layer; layer_id &lt;= <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.max_layer; layer_id++) {</div>
<div class="line"><span class="lineno"> 2374</span>                <span class="keyword">const</span> Layer* layer = <span class="keywordtype">object</span>.get_layer(layer_id);</div>
<div class="line"><span class="lineno"> 2375</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ac054ee91b47bfcb7c5e12ff3344c6153">overlaps</a>(layer-&gt;sharp_tails, <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.merged_overhangs_dilated)) {</div>
<div class="line"><span class="lineno"> 2376</span>                    <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_sharp_tail = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2377</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 2378</span>                }</div>
<div class="line"><span class="lineno"> 2379</span>            }</div>
<div class="line"><span class="lineno"> 2380</span> </div>
<div class="line"><span class="lineno"> 2381</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_sharp_tail &amp;&amp; !<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_cantilever) {</div>
<div class="line"><span class="lineno"> 2382</span>                <span class="comment">// 2. check overhang cluster size is small</span></div>
<div class="line"><span class="lineno"> 2383</span>                <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_small_overhang = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 2384</span>                <span class="keyword">auto</span> erode1 = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5e96c84b799b62906e4a46a94eb8916c">offset_ex</a>(<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.merged_overhangs_dilated, -1.0 * fw_scaled);</div>
<div class="line"><span class="lineno"> 2385</span>                <a class="code hl_typedef" href="../../d8/d9b/point__areas_8cpp.html#a6a2f109ab3e0aba2f61e7d28188c3660">Point</a> bbox_sz = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(erode1).<a class="code hl_function" href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a2233d300d197f650b6fefa6ac1607203">size</a>();</div>
<div class="line"><span class="lineno"> 2386</span>                <span class="keywordflow">if</span> (bbox_sz.x() &lt; 2 * fw_scaled || bbox_sz.y() &lt; 2 * fw_scaled) {</div>
<div class="line"><span class="lineno"> 2387</span>                    <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_small_overhang = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 2388</span>                }</div>
<div class="line"><span class="lineno"> 2389</span>            }</div>
<div class="line"><span class="lineno"> 2390</span> </div>
<div class="line"><span class="lineno"> 2391</span><span class="preprocessor">#ifdef SUPPORT_TREE_DEBUG_TO_SVG</span></div>
<div class="line"><span class="lineno"> 2392</span>            <span class="keyword">const</span> Layer* layer1 = <span class="keywordtype">object</span>.get_layer(<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.min_layer);</div>
<div class="line"><span class="lineno"> 2393</span>            BoundingBox bbox = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.merged_overhangs_dilated);</div>
<div class="line"><span class="lineno"> 2394</span>            bbox.merge(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">get_extents</a>(layer1-&gt;lslices));</div>
<div class="line"><span class="lineno"> 2395</span>            <a class="code hl_enumvalue" href="../../df/ddf/namespacelibnest2d.html#af597612c78e3eb318a885f34ddafa180acd15a75c26008696647b31a3f0de43b3">SVG</a> svg(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">format</a>(<span class="stringliteral">&quot;SVG/overhangCluster_%s_%s_tail=%s_cantilever=%s_small=%s.svg&quot;</span>, <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.min_layer, layer1-&gt;print_z, <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_sharp_tail, <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_cantilever, <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_small_overhang), bbox);</div>
<div class="line"><span class="lineno"> 2396</span>            <span class="keywordflow">if</span> (svg.is_opened()) {</div>
<div class="line"><span class="lineno"> 2397</span>                svg.draw(layer1-&gt;lslices, <span class="stringliteral">&quot;red&quot;</span>);</div>
<div class="line"><span class="lineno"> 2398</span>                svg.draw(<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.merged_overhangs_dilated, <span class="stringliteral">&quot;blue&quot;</span>);</div>
<div class="line"><span class="lineno"> 2399</span>            }</div>
<div class="line"><span class="lineno"> 2400</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 2401</span> </div>
<div class="line"><span class="lineno"> 2402</span>            <span class="comment">// 5. remove small overhangs</span></div>
<div class="line"><span class="lineno"> 2403</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.is_small_overhang) {</div>
<div class="line"><span class="lineno"> 2404</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> overhangs : <a class="code hl_function" href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">cluster</a>.layer_overhangs) {</div>
<div class="line"><span class="lineno"> 2405</span>                    <span class="keywordflow">for</span> (<span class="keyword">auto</span>* poly : overhangs.second)</div>
<div class="line"><span class="lineno"> 2406</span>                        removed_overhang.insert(poly);</div>
<div class="line"><span class="lineno"> 2407</span>                }</div>
<div class="line"><span class="lineno"> 2408</span>            }</div>
<div class="line"><span class="lineno"> 2409</span>        }</div>
<div class="line"><span class="lineno"> 2410</span> </div>
<div class="line"><span class="lineno"> 2411</span>        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = layer_id_start; layer_id &lt; num_layers; layer_id++) {</div>
<div class="line"><span class="lineno"> 2412</span>            <span class="keyword">auto</span>&amp; layer_overhangs = overhangs_per_layers[layer_id];</div>
<div class="line"><span class="lineno"> 2413</span>            <span class="keywordflow">if</span> (layer_overhangs.empty())</div>
<div class="line"><span class="lineno"> 2414</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 2415</span> </div>
<div class="line"><span class="lineno"> 2416</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> poly_idx = 0; poly_idx &lt; layer_overhangs.size(); poly_idx++) {</div>
<div class="line"><span class="lineno"> 2417</span>                <span class="keyword">auto</span>* overhang = &amp;layer_overhangs[poly_idx];</div>
<div class="line"><span class="lineno"> 2418</span>                <span class="keywordflow">if</span> (removed_overhang.find(overhang) != removed_overhang.end()) {</div>
<div class="line"><span class="lineno"> 2419</span>                    overhang-&gt;clear();</div>
<div class="line"><span class="lineno"> 2420</span>                }</div>
<div class="line"><span class="lineno"> 2421</span>            }</div>
<div class="line"><span class="lineno"> 2422</span>        }</div>
<div class="line"><span class="lineno"> 2423</span>    }</div>
<div class="line"><span class="lineno"> 2424</span> </div>
<div class="line"><span class="lineno"> 2425</span>    <span class="keywordflow">if</span> (<span class="keywordtype">object</span>.print()-&gt;canceled())</div>
<div class="line"><span class="lineno"> 2426</span>        <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a>();</div>
<div class="line"><span class="lineno"> 2427</span> </div>
<div class="line"><span class="lineno"> 2428</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> layer_id = layer_id_start; layer_id &lt; num_layers; layer_id++) {</div>
<div class="line"><span class="lineno"> 2429</span>        <span class="keyword">const</span> Layer&amp; layer = *<span class="keywordtype">object</span>.layers()[layer_id];</div>
<div class="line"><span class="lineno"> 2430</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>            overhang_polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(overhangs_per_layers[layer_id]);</div>
<div class="line"><span class="lineno"> 2431</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>            lower_layer_polygons = (layer_id == 0) ? <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a>() : <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">to_polygons</a>(<span class="keywordtype">object</span>.layers()[layer_id - 1]-&gt;lslices);</div>
<div class="line"><span class="lineno"> 2432</span>        SlicesMarginCache   slices_margin;</div>
<div class="line"><span class="lineno"> 2433</span> </div>
<div class="line"><span class="lineno"> 2434</span>        <span class="keyword">auto</span> [contact_polygons, enforcer_polygons, no_interface_offset] =</div>
<div class="line"><span class="lineno"> 2435</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aff9a5089648b96ecd004610b196218c9">detect_contacts</a>(layer, layer_id, overhang_polygons, lower_layer_polygons, *<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>, *<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>, annotations, slices_margin, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a97a975e3e3e5a3aa6fb9f62fa2f2d2fe">gap_xy</a></div>
<div class="line"><span class="lineno"> 2436</span>#ifdef SLIC3R_DEBUG</div>
<div class="line"><span class="lineno"> 2437</span>                , iRun</div>
<div class="line"><span class="lineno"> 2438</span>#endif <span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2439</span>            );</div>
<div class="line"><span class="lineno"> 2440</span> </div>
<div class="line"><span class="lineno"> 2441</span>        <span class="comment">// Now apply the contact areas to the layer where they need to be made.</span></div>
<div class="line"><span class="lineno"> 2442</span>        <span class="keywordflow">if</span> (!contact_polygons.empty() || !overhang_polygons.empty()) {</div>
<div class="line"><span class="lineno"> 2443</span>            <span class="comment">// Allocate the two empty layers.</span></div>
<div class="line"><span class="lineno"> 2444</span>            <span class="keyword">auto</span> [new_layer, bridging_layer] = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a952f04ace4abf5604cd332fdd73e0a22">new_contact_layer</a>(*<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>, *<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a>, layer, layer_storage, layer_storage_mutex);</div>
<div class="line"><span class="lineno"> 2445</span>            <span class="keywordflow">if</span> (new_layer) {</div>
<div class="line"><span class="lineno"> 2446</span>                <span class="comment">// Fill the non-bridging layer with polygons.</span></div>
<div class="line"><span class="lineno"> 2447</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ad2b8944e2c2beec8bed469628592fa09">fill_contact_layer</a>(*new_layer, layer_id, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>,</div>
<div class="line"><span class="lineno"> 2448</span>                    *<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>, slices_margin, overhang_polygons, contact_polygons, enforcer_polygons, lower_layer_polygons,</div>
<div class="line"><span class="lineno"> 2449</span>                    <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#ac4dde773191da1c029deb4b955dff00e">support_material_flow</a>, no_interface_offset</div>
<div class="line"><span class="lineno"> 2450</span>#ifdef SLIC3R_DEBUG</div>
<div class="line"><span class="lineno"> 2451</span>                    , iRun, layer</div>
<div class="line"><span class="lineno"> 2452</span>#endif <span class="comment">// SLIC3R_DEBUG</span></div>
<div class="line"><span class="lineno"> 2453</span>                );</div>
<div class="line"><span class="lineno"> 2454</span>                <span class="comment">// Insert new layer even if there is no interface generated: Likely the support angle is not steep enough to require dense interface,</span></div>
<div class="line"><span class="lineno"> 2455</span>                <span class="comment">// however generating a sparse support will be useful for the object stability.</span></div>
<div class="line"><span class="lineno"> 2456</span>                <span class="comment">// if (! new_layer-&gt;polygons.empty())</span></div>
<div class="line"><span class="lineno"> 2457</span>                contact_out[layer_id * 2] = new_layer;</div>
<div class="line"><span class="lineno"> 2458</span>                <span class="keywordflow">if</span> (bridging_layer != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 2459</span>                    bridging_layer-&gt;polygons = new_layer-&gt;polygons;</div>
<div class="line"><span class="lineno"> 2460</span>                    bridging_layer-&gt;contact_polygons = std::make_unique&lt;Polygons&gt;(*new_layer-&gt;contact_polygons);</div>
<div class="line"><span class="lineno"> 2461</span>                    bridging_layer-&gt;overhang_polygons = std::make_unique&lt;Polygons&gt;(*new_layer-&gt;overhang_polygons);</div>
<div class="line"><span class="lineno"> 2462</span>                    <span class="keywordflow">if</span> (new_layer-&gt;enforcer_polygons)</div>
<div class="line"><span class="lineno"> 2463</span>                        bridging_layer-&gt;enforcer_polygons = std::make_unique&lt;Polygons&gt;(*new_layer-&gt;enforcer_polygons);</div>
<div class="line"><span class="lineno"> 2464</span>                    contact_out[layer_id * 2 + 1] = bridging_layer;</div>
<div class="line"><span class="lineno"> 2465</span>                }</div>
<div class="line"><span class="lineno"> 2466</span>            }</div>
<div class="line"><span class="lineno"> 2467</span>        }</div>
<div class="line"><span class="lineno"> 2468</span>    }</div>
<div class="line"><span class="lineno"> 2469</span> </div>
<div class="line"><span class="lineno"> 2470</span>    <span class="comment">// Compress contact_out, remove the nullptr items.</span></div>
<div class="line"><span class="lineno"> 2471</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aaea096e5f48dc58b390aa7b72f2a02bc">remove_nulls</a>(contact_out);</div>
<div class="line"><span class="lineno"> 2472</span> </div>
<div class="line"><span class="lineno"> 2473</span>    <span class="comment">// Merge close contact layers conservatively: If two layers are closer than the minimum allowed print layer height (the min_layer_height parameter),</span></div>
<div class="line"><span class="lineno"> 2474</span>    <span class="comment">// the top contact layer is merged into the bottom contact layer.</span></div>
<div class="line"><span class="lineno"> 2475</span>    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#addafaf99f7b720980facd06e852df84a">merge_contact_layers</a>(<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>, <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a55763a1077b1ed1353d31a2fd7b6fb8d">m_support_params</a>.<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#aa44e9de566e9b74b48183126984438b7">support_layer_height_min</a>, contact_out);</div>
<div class="line"><span class="lineno"> 2476</span> </div>
<div class="line"><span class="lineno"> 2477</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::top_contact_layers() in parallel - end&quot;</span>;</div>
<div class="line"><span class="lineno"> 2478</span> </div>
<div class="line"><span class="lineno"> 2479</span>    <span class="keywordflow">return</span> contact_out;</div>
<div class="line"><span class="lineno"> 2480</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_bounding_box_base_html_a2233d300d197f650b6fefa6ac1607203"><div class="ttname"><a href="../../dc/d28/class_slic3r_1_1_bounding_box_base.html#a2233d300d197f650b6fefa6ac1607203">Slic3r::BoundingBoxBase::size</a></div><div class="ttdeci">PointClass size() const</div><div class="ttdef"><b>Definition</b> BoundingBox.cpp:170</div></div>
<div class="ttc" id="aclass_slic3r_1_1_print_object_support_material_html_a3c0106d9d58b8f72d32794b42cc76b0f"><div class="ttname"><a href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3c0106d9d58b8f72d32794b42cc76b0f">Slic3r::PrintObjectSupportMaterial::has_raft</a></div><div class="ttdeci">bool has_raft() const</div><div class="ttdef"><b>Definition</b> SupportMaterial.hpp:160</div></div>
<div class="ttc" id="alibslic3r_8h_html_a7b0d40f9a8619b673f9ceea8de04661a"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a7b0d40f9a8619b673f9ceea8de04661a">g_config_support_sharp_tails</a></div><div class="ttdeci">static constexpr bool g_config_support_sharp_tails</div><div class="ttdef"><b>Definition</b> libslic3r.h:91</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03_html_aba0b164a780a5c2f6082883e9ae47bee"><div class="ttname"><a href="../../d2/d6f/namespace_slic3r_1_1sla_1_1anonymous__namespace_02_clustering_8cpp_03.html#aba0b164a780a5c2f6082883e9ae47bee">Slic3r::sla::anonymous_namespace{Clustering.cpp}::cluster</a></div><div class="ttdeci">ClusteredPoints cluster(Index3D &amp;sindex, unsigned max_points, std::function&lt; std::vector&lt; PointIndexEl &gt;(const Index3D &amp;, const PointIndexEl &amp;)&gt; qfn)</div><div class="ttdef"><b>Definition</b> Clustering.cpp:19</div></div>
<div class="ttc" id="anamespace_slic3r_html_a15f6728115269978cc5e0a44c22479a8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a15f6728115269978cc5e0a44c22479a8">Slic3r::area_thresh_well_supported</a></div><div class="ttdeci">static const double area_thresh_well_supported</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1525</div></div>
<div class="ttc" id="anamespace_slic3r_html_a218ddd8d0d0e158fe7c18cd30ef604ed"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a218ddd8d0d0e158fe7c18cd30ef604ed">Slic3r::detect_overhangs</a></div><div class="ttdeci">static ExPolygons detect_overhangs(const Layer &amp;layer, const size_t layer_id, Polygons &amp;lower_layer_polygons, const PrintConfig &amp;print_config, const PrintObjectConfig &amp;object_config, SupportAnnotations &amp;annotations, const double gap_xy)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1532</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2b1bfe9b50e13403d42de533b8a19916"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2b1bfe9b50e13403d42de533b8a19916">Slic3r::diff_ex</a></div><div class="ttdeci">Slic3r::ExPolygons diff_ex(const Slic3r::Polygons &amp;subject, const Slic3r::Polygons &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:709</div></div>
<div class="ttc" id="anamespace_slic3r_html_a509efc840b8460ee975221330ef6d82f"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a509efc840b8460ee975221330ef6d82f">Slic3r::length_thresh_well_supported</a></div><div class="ttdeci">static const double length_thresh_well_supported</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1524</div></div>
<div class="ttc" id="anamespace_slic3r_html_a517930244d210021577457148f9a49e3"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a517930244d210021577457148f9a49e3">Slic3r::ExPolygons</a></div><div class="ttdeci">std::vector&lt; ExPolygon &gt; ExPolygons</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:13</div></div>
<div class="ttc" id="anamespace_slic3r_html_a58007b1077539ba492d56398b92fea70"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a58007b1077539ba492d56398b92fea70">Slic3r::area</a></div><div class="ttdeci">double area(const ExPolygon &amp;poly)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:470</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5e96c84b799b62906e4a46a94eb8916c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5e96c84b799b62906e4a46a94eb8916c">Slic3r::offset_ex</a></div><div class="ttdeci">Slic3r::ExPolygons offset_ex(const Slic3r::Polygons &amp;polygons, const float delta, ClipperLib::JoinType joinType, double miterLimit)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:409</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6025cd9b54824e8bcac090b8f5d29337"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6025cd9b54824e8bcac090b8f5d29337">Slic3r::is_auto</a></div><div class="ttdeci">bool is_auto(SupportType stype)</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:123</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6e3ba75aef7600dbb0a294a47d88ecb8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6e3ba75aef7600dbb0a294a47d88ecb8">Slic3r::get_extents</a></div><div class="ttdeci">BoundingBox get_extents(const ExPolygon &amp;expolygon)</div><div class="ttdef"><b>Definition</b> ExPolygon.cpp:386</div></div>
<div class="ttc" id="anamespace_slic3r_html_a843ba2fe16b213f550fb3d55c55a716e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a843ba2fe16b213f550fb3d55c55a716e">Slic3r::to_polygons</a></div><div class="ttdeci">Polygons to_polygons(const ExPolygon &amp;src)</div><div class="ttdef"><b>Definition</b> ExPolygon.hpp:280</div></div>
<div class="ttc" id="anamespace_slic3r_html_a852e19ab281b44709b3c5a3779c9c4cf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a852e19ab281b44709b3c5a3779c9c4cf">Slic3r::sharp_tail_max_support_height</a></div><div class="ttdeci">static const double sharp_tail_max_support_height</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1528</div></div>
<div class="ttc" id="anamespace_slic3r_html_a952f04ace4abf5604cd332fdd73e0a22"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a952f04ace4abf5604cd332fdd73e0a22">Slic3r::new_contact_layer</a></div><div class="ttdeci">static std::pair&lt; PrintObjectSupportMaterial::MyLayer *, PrintObjectSupportMaterial::MyLayer * &gt; new_contact_layer(const PrintConfig &amp;print_config, const PrintObjectConfig &amp;object_config, const SlicingParameters &amp;slicing_params, const coordf_t support_layer_height_min, const Layer &amp;layer, std::deque&lt; PrintObjectSupportMaterial::MyLayer &gt; &amp;layer_storage, tbb::spin_mutex &amp;layer_storage_mutex)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1844</div></div>
<div class="ttc" id="anamespace_slic3r_html_a9853756af06b71590c902865926b8e28"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a9853756af06b71590c902865926b8e28">Slic3r::intersection_ex</a></div><div class="ttdeci">Slic3r::ExPolygons intersection_ex(const Slic3r::Polygons &amp;subject, const Slic3r::Polygons &amp;clip, ApplySafetyOffset do_safety_offset)</div><div class="ttdef"><b>Definition</b> ClipperUtils.cpp:752</div></div>
<div class="ttc" id="anamespace_slic3r_html_aaaabcf9acc53536eede4610d1218434caa078a64fcb672e05ab32c9da2c0287a3"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aaaabcf9acc53536eede4610d1218434caa078a64fcb672e05ab32c9da2c0287a3">Slic3r::stNormalAuto</a></div><div class="ttdeci">@ stNormalAuto</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:113</div></div>
<div class="ttc" id="anamespace_slic3r_html_aaaabcf9acc53536eede4610d1218434caaacecff995bc9c6e05492f1e4ae6503d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aaaabcf9acc53536eede4610d1218434caaacecff995bc9c6e05492f1e4ae6503d">Slic3r::stNormal</a></div><div class="ttdeci">@ stNormal</div><div class="ttdef"><b>Definition</b> PrintConfig.hpp:113</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab28c13d286b2d1767d7c63b020ebd042"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab28c13d286b2d1767d7c63b020ebd042">Slic3r::format</a></div><div class="ttdeci">std::string format(const char *fmt, TArgs &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> format.hpp:44</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab8637587074b8b8f2fdcbb2a84d7d399"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab8637587074b8b8f2fdcbb2a84d7d399">Slic3r::get_svg_filename</a></div><div class="ttdeci">static std::string get_svg_filename(std::string layer_nr_or_z, std::string tag=&quot;bbl_ts&quot;)</div><div class="ttdef"><b>Definition</b> Generator.cpp:29</div></div>
<div class="ttc" id="anamespace_slic3r_html_ab8643ace684d7376db449485d1b648bf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ab8643ace684d7376db449485d1b648bf">Slic3r::add_overhang</a></div><div class="ttdeci">static OverhangCluster * add_overhang(std::vector&lt; OverhangCluster &gt; &amp;clusters, ExPolygon *overhang, int layer_nr, coordf_t offset_scaled)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2188</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac054ee91b47bfcb7c5e12ff3344c6153"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac054ee91b47bfcb7c5e12ff3344c6153">Slic3r::overlaps</a></div><div class="ttdeci">bool overlaps(const ExPolygons &amp;expolys1, const ExPolygons &amp;expolys2)</div><div class="ttdef"><b>Definition</b> ExPolygon.cpp:177</div></div>
<div class="ttc" id="anamespace_slic3r_html_ad2b8944e2c2beec8bed469628592fa09"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ad2b8944e2c2beec8bed469628592fa09">Slic3r::fill_contact_layer</a></div><div class="ttdeci">static void fill_contact_layer(PrintObjectSupportMaterial::MyLayer &amp;new_layer, size_t layer_id, const SlicingParameters &amp;slicing_params, const PrintObjectConfig &amp;object_config, const SlicesMarginCache &amp;slices_margin, const Polygons &amp;overhang_polygons, const Polygons &amp;contact_polygons, const Polygons &amp;enforcer_polygons, const Polygons &amp;lower_layer_polygons, const Flow &amp;support_material_flow, float no_interface_offset)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1940</div></div>
<div class="ttc" id="anamespace_slic3r_html_addafaf99f7b720980facd06e852df84a"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#addafaf99f7b720980facd06e852df84a">Slic3r::merge_contact_layers</a></div><div class="ttdeci">static void merge_contact_layers(const SlicingParameters &amp;slicing_params, double support_layer_height_min, PrintObjectSupportMaterial::MyLayersPtr &amp;layers)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:2093</div></div>
<div class="ttc" id="anamespace_slic3r_html_aff9a5089648b96ecd004610b196218c9"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aff9a5089648b96ecd004610b196218c9">Slic3r::detect_contacts</a></div><div class="ttdeci">static std::tuple&lt; Polygons, Polygons, double &gt; detect_contacts(const Layer &amp;layer, const size_t layer_id, Polygons &amp;overhang_polygons, Polygons &amp;lower_layer_polygons, const PrintConfig &amp;print_config, const PrintObjectConfig &amp;object_config, SupportAnnotations &amp;annotations, SlicesMarginCache &amp;slices_margin, const double gap_xy)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1716</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02188">Slic3r::add_overhang()</a>, <a class="el" href="../../#l00132">Slic3r::append()</a>, <a class="el" href="../../#l01525">Slic3r::area_thresh_well_supported</a>, <a class="el" href="../../#l00137">Slic3r::Layer::cantilevers</a>, <a class="el" href="../../#l01716">Slic3r::detect_contacts()</a>, <a class="el" href="../../#l01532">Slic3r::detect_overhangs()</a>, <a class="el" href="../../#l00709">Slic3r::diff_ex()</a>, <a class="el" href="../../#l00049">Slic3r::SVG::draw()</a>, <a class="el" href="../../#l00241">Slic3r::empty()</a>, <a class="el" href="../../#l01940">Slic3r::fill_contact_layer()</a>, <a class="el" href="../../#l00044">Slic3r::format()</a>, <a class="el" href="../../#l00091">g_config_support_sharp_tails</a>, <a class="el" href="../../#l00386">Slic3r::get_extents()</a>, <a class="el" href="../../#l00332">Slic3r::get_svg_filename()</a>, <a class="el" href="../../#l00132">Slic3r::Layer::height</a>, <a class="el" href="../../#l00752">Slic3r::intersection_ex()</a>, <a class="el" href="../../#l00123">Slic3r::is_auto()</a>, <a class="el" href="../../#l00043">Slic3r::SVG::is_opened()</a>, <a class="el" href="../../#l01524">Slic3r::length_thresh_well_supported</a>, <a class="el" href="../../#l00128">Slic3r::Layer::lower_layer</a>, <a class="el" href="../../#l00148">Slic3r::Layer::lslices</a>, <a class="el" href="../../#l00067">Slic3r::BoundingBoxBase&lt; PointClass &gt;::merge()</a>, <a class="el" href="../../#l02093">Slic3r::merge_contact_layers()</a>, <a class="el" href="../../#l01844">Slic3r::new_contact_layer()</a>, <a class="el" href="../../#l00409">Slic3r::offset_ex()</a>, <a class="el" href="../../#l00177">Slic3r::overlaps()</a>, <a class="el" href="../../#l00131">Slic3r::Layer::print_z</a>, <a class="el" href="../../#l00374">Slic3r::range()</a>, <a class="el" href="../../#l00198">Slic3r::remove_nulls()</a>, <a class="el" href="../../#l00081">scale_</a>, <a class="el" href="../../#l01528">Slic3r::sharp_tail_max_support_height</a>, <a class="el" href="../../#l00136">Slic3r::Layer::sharp_tails</a>, <a class="el" href="../../#l00138">Slic3r::Layer::sharp_tails_height</a>, <a class="el" href="../../#l00170">Slic3r::BoundingBoxBase&lt; PointClass &gt;::size()</a>, <a class="el" href="../../#l00113">Slic3r::stNormal</a>, <a class="el" href="../../#l00113">Slic3r::stNormalAuto</a>, and <a class="el" href="../../#l00280">Slic3r::to_polygons()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a2e498c176aa13f8c7bcf10044d1304fa_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_a2e498c176aa13f8c7bcf10044d1304fa_icgraph.svg" width="416" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad4c2a04b87513b31fd000ebb6d005a1c" name="ad4c2a04b87513b31fd000ebb6d005a1c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4c2a04b87513b31fd000ebb6d005a1c">&#9670;&#160;</a></span>trim_support_layers_by_object()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PrintObjectSupportMaterial::trim_support_layers_by_object </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>support_layers</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a>&#160;</td>
          <td class="paramname"><em>gap_extra_above</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a>&#160;</td>
          <td class="paramname"><em>gap_extra_below</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../de/db8/namespace_slic3r.html#a2ac5c755948c74f5f5f975acd5057fe9">coordf_t</a>&#160;</td>
          <td class="paramname"><em>gap_xy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 3286</span>{</div>
<div class="line"><span class="lineno"> 3287</span>    <span class="keyword">const</span> <span class="keywordtype">float</span> gap_xy_scaled = float(<a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(gap_xy));</div>
<div class="line"><span class="lineno"> 3288</span> </div>
<div class="line"><span class="lineno"> 3289</span>    <span class="comment">// Collect non-empty layers to be processed in parallel.</span></div>
<div class="line"><span class="lineno"> 3290</span>    <span class="comment">// This is a good idea as pulling a thread from a thread pool for an empty task is expensive.</span></div>
<div class="line"><span class="lineno"> 3291</span>    <a class="code hl_typedef" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> nonempty_layers;</div>
<div class="line"><span class="lineno"> 3292</span>    nonempty_layers.reserve(support_layers.size());</div>
<div class="line"><span class="lineno"> 3293</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx_layer = 0; idx_layer &lt; support_layers.size(); ++ idx_layer) {</div>
<div class="line"><span class="lineno"> 3294</span>        MyLayer *support_layer = support_layers[idx_layer];</div>
<div class="line"><span class="lineno"> 3295</span>        <span class="keywordflow">if</span> (! support_layer-&gt;polygons.empty() &amp;&amp; support_layer-&gt;print_z &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae716f6f022aa86c9be6a7f05717c5287">raft_contact_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3296</span>            <span class="comment">// Non-empty support layer and not a raft layer.</span></div>
<div class="line"><span class="lineno"> 3297</span>            nonempty_layers.push_back(support_layer);</div>
<div class="line"><span class="lineno"> 3298</span>    }</div>
<div class="line"><span class="lineno"> 3299</span> </div>
<div class="line"><span class="lineno"> 3300</span>    <span class="comment">// For all intermediate support layers:</span></div>
<div class="line"><span class="lineno"> 3301</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::trim_support_layers_by_object() in parallel - start&quot;</span>;</div>
<div class="line"><span class="lineno"> 3302</span>    tbb::parallel_for(</div>
<div class="line"><span class="lineno"> 3303</span>        tbb::blocked_range&lt;size_t&gt;(0, nonempty_layers.size()),</div>
<div class="line"><span class="lineno"> 3304</span>        [<span class="keyword">this</span>, &amp;<span class="keywordtype">object</span>, &amp;nonempty_layers, gap_extra_above, gap_extra_below, gap_xy_scaled](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 3305</span>            size_t idx_object_layer_overlapping = size_t(-1);</div>
<div class="line"><span class="lineno"> 3306</span> </div>
<div class="line"><span class="lineno"> 3307</span>            auto is_layers_overlap = [](const MyLayer&amp; support_layer, const Layer&amp; object_layer, coordf_t bridging_height = 0.f) -&gt; bool {</div>
<div class="line"><span class="lineno"> 3308</span>                if (std::abs(support_layer.print_z - object_layer.print_z) &lt; EPSILON)</div>
<div class="line"><span class="lineno"> 3309</span>                    return true;</div>
<div class="line"><span class="lineno"> 3310</span> </div>
<div class="line"><span class="lineno"> 3311</span>                coordf_t object_lh = bridging_height &gt; EPSILON ? bridging_height : object_layer.height;</div>
<div class="line"><span class="lineno"> 3312</span>                if (support_layer.print_z &lt; object_layer.print_z &amp;&amp; support_layer.print_z &gt; object_layer.print_z - object_lh)</div>
<div class="line"><span class="lineno"> 3313</span>                    return true;</div>
<div class="line"><span class="lineno"> 3314</span> </div>
<div class="line"><span class="lineno"> 3315</span>                if (support_layer.print_z &gt; object_layer.print_z &amp;&amp; support_layer.bottom_z &lt; object_layer.print_z - EPSILON)</div>
<div class="line"><span class="lineno"> 3316</span>                    return true;</div>
<div class="line"><span class="lineno"> 3317</span> </div>
<div class="line"><span class="lineno"> 3318</span>                return false;</div>
<div class="line"><span class="lineno"> 3319</span>            };</div>
<div class="line"><span class="lineno"> 3320</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> idx_layer = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.begin(); idx_layer &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.end(); ++ idx_layer) {</div>
<div class="line"><span class="lineno"> 3321</span>                MyLayer &amp;support_layer = *nonempty_layers[idx_layer];</div>
<div class="line"><span class="lineno"> 3322</span>                <span class="comment">// BOOST_LOG_TRIVIAL(trace) &lt;&lt; &quot;Support generator - trim_support_layers_by_object - trimmming non-empty layer &quot; &lt;&lt; idx_layer &lt;&lt; &quot; of &quot; &lt;&lt; nonempty_layers.size();</span></div>
<div class="line"><span class="lineno"> 3323</span>                assert(! support_layer.polygons.empty() &amp;&amp; support_layer.print_z &gt;= <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ae716f6f022aa86c9be6a7f05717c5287">raft_contact_top_z</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>);</div>
<div class="line"><span class="lineno"> 3324</span>                <span class="comment">// Find the overlapping object layers including the extra above / below gap.</span></div>
<div class="line"><span class="lineno"> 3325</span>                <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> z_threshold = support_layer.bottom_print_z() - gap_extra_below + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno"> 3326</span>                idx_object_layer_overlapping = <a class="code hl_function" href="../../d1/d68/class_slic3r_1_1_layer.html#aa0cbe8238d4410456bb61b64ea96128e">Layer::idx_higher_or_equal</a>(</div>
<div class="line"><span class="lineno"> 3327</span>                    <span class="keywordtype">object</span>.layers().<a class="code hl_function" href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">begin</a>(), <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a>(), idx_object_layer_overlapping,</div>
<div class="line"><span class="lineno"> 3328</span>                    [z_threshold](<span class="keyword">const</span> Layer *layer){ <span class="keywordflow">return</span> layer-&gt;print_z &gt;= z_threshold; });</div>
<div class="line"><span class="lineno"> 3329</span>                <span class="comment">// Collect all the object layers intersecting with this layer.</span></div>
<div class="line"><span class="lineno"> 3330</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ae39547681b4c9f15f0d44712cdb01d6a">Polygons</a> polygons_trimming;</div>
<div class="line"><span class="lineno"> 3331</span>                <span class="keywordtype">size_t</span> i = idx_object_layer_overlapping;</div>
<div class="line"><span class="lineno"> 3332</span>                <span class="keywordflow">for</span> (; i &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>(); ++ i) {</div>
<div class="line"><span class="lineno"> 3333</span>                    <span class="keyword">const</span> Layer &amp;object_layer = *<span class="keywordtype">object</span>.layers()[i];</div>
<div class="line"><span class="lineno"> 3334</span>                    <span class="keywordflow">if</span> (object_layer.bottom_z() &gt; support_layer.print_z + gap_extra_above - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3335</span>                        <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3336</span> </div>
<div class="line"><span class="lineno"> 3337</span>                    <span class="keywordtype">bool</span> is_overlap = is_layers_overlap(support_layer, object_layer);</div>
<div class="line"><span class="lineno"> 3338</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> ExPolygon&amp; expoly : object_layer.lslices) {</div>
<div class="line"><span class="lineno"> 3339</span>                        <span class="comment">// BBS</span></div>
<div class="line"><span class="lineno"> 3340</span>                        <span class="keywordtype">bool</span> is_sharptail = !<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9853756af06b71590c902865926b8e28">intersection_ex</a>({ expoly }, object_layer.sharp_tails).<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a83fc268888773d5c0f886fc2e54b8c64">empty</a>();</div>
<div class="line"><span class="lineno"> 3341</span>                        <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> trimming_offset = is_sharptail ? <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a9111d5e56324c880f1a8f185cc3cf645">sharp_tail_xy_gap</a>) :</div>
<div class="line"><span class="lineno"> 3342</span>                                                   is_overlap ? gap_xy_scaled :</div>
<div class="line"><span class="lineno"> 3343</span>                                                   <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a286ab5ffd65184a79428d60bf2a00253">no_overlap_xy_gap</a>);</div>
<div class="line"><span class="lineno"> 3344</span>                        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(polygons_trimming, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>({ expoly }, trimming_offset, <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>));</div>
<div class="line"><span class="lineno"> 3345</span>                    }</div>
<div class="line"><span class="lineno"> 3346</span>                }</div>
<div class="line"><span class="lineno"> 3347</span>                <span class="keywordflow">if</span> (! <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a1cf6e843045184c2a71e988868e29952">m_slicing_params</a>.<a class="code hl_variable" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html#ac8f1765efb10ac97c597982a0b4847f5">soluble_interface</a> &amp;&amp; <a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a66f5a649e3f3bfc65624d776dd55fb1e">m_object_config</a>-&gt;thick_bridges) {</div>
<div class="line"><span class="lineno"> 3348</span>                    <span class="comment">// Collect all bottom surfaces, which will be extruded with a bridging flow.</span></div>
<div class="line"><span class="lineno"> 3349</span>                    <span class="keywordflow">for</span> (; i &lt; <span class="keywordtype">object</span>.layers().<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>(); ++ i) {</div>
<div class="line"><span class="lineno"> 3350</span>                        <span class="keyword">const</span> Layer &amp;object_layer = *<span class="keywordtype">object</span>.layers()[i];</div>
<div class="line"><span class="lineno"> 3351</span>                        <span class="keywordtype">bool</span> some_region_overlaps = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 3352</span>                        <span class="keywordflow">for</span> (LayerRegion *region : object_layer.regions()) {</div>
<div class="line"><span class="lineno"> 3353</span>                            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> bridging_height = region-&gt;region().bridging_height_avg(*<a class="code hl_variable" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a0b59238962f758fd90553b0fca5ca1a7">m_print_config</a>);</div>
<div class="line"><span class="lineno"> 3354</span>                            <span class="keywordflow">if</span> (object_layer.print_z - bridging_height &gt; support_layer.print_z + gap_extra_above - <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno"> 3355</span>                                <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3356</span>                            some_region_overlaps = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 3357</span> </div>
<div class="line"><span class="lineno"> 3358</span>                            <span class="keywordtype">bool</span> is_overlap = is_layers_overlap(support_layer, object_layer, bridging_height);</div>
<div class="line"><span class="lineno"> 3359</span>                            <a class="code hl_typedef" href="../../dd/d47/libslic3r_8h.html#a95c875c81df33d788132374e2b57c6c1">coordf_t</a> trimming_offset = is_overlap ? gap_xy_scaled : <a class="code hl_define" href="../../dd/d47/libslic3r_8h.html#a5e7dd5d14b7e7bb8f1dab0fd4fa3e0f2">scale_</a>(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a286ab5ffd65184a79428d60bf2a00253">no_overlap_xy_gap</a>);</div>
<div class="line"><span class="lineno"> 3360</span>                            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ab4a593838c4a67f7ca75a318a9f707b2">polygons_append</a>(polygons_trimming, </div>
<div class="line"><span class="lineno"> 3361</span>                                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a5ec552d076296fd705739c608edc1580">offset</a>(region-&gt;fill_surfaces.filter_by_type(<a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#abe9699b26eb18f6636b045c930d167d8aab7b75c6465c93d9f8a8d76ab5494037">stBottomBridge</a>), trimming_offset, <a class="code hl_define" href="../../db/d63/_print_object_8cpp.html#a952c572f92c0eee8cc1866011a230243">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>));</div>
<div class="line"><span class="lineno"> 3362</span>                            <span class="keywordflow">if</span> (region-&gt;region().config().detect_overhang_wall.value)</div>
<div class="line"><span class="lineno"> 3363</span>                                <span class="comment">// Add bridging perimeters.</span></div>
<div class="line"><span class="lineno"> 3364</span>                                <a class="code hl_function" href="../../db/de5/namespace_slic3r_1_1_support_material_internal.html#af06542d247756c07539a6b171019fa70">SupportMaterialInternal::collect_bridging_perimeter_areas</a>(region-&gt;perimeters, gap_xy_scaled, polygons_trimming);</div>
<div class="line"><span class="lineno"> 3365</span>                        }</div>
<div class="line"><span class="lineno"> 3366</span>                        <span class="keywordflow">if</span> (! some_region_overlaps)</div>
<div class="line"><span class="lineno"> 3367</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 3368</span>                    }</div>
<div class="line"><span class="lineno"> 3369</span>                }</div>
<div class="line"><span class="lineno"> 3370</span> </div>
<div class="line"><span class="lineno"> 3371</span>                <span class="comment">// $layer-&gt;slices contains the full shape of layer, thus including</span></div>
<div class="line"><span class="lineno"> 3372</span>                <span class="comment">// perimeter&#39;s width. $support contains the full shape of support</span></div>
<div class="line"><span class="lineno"> 3373</span>                <span class="comment">// material, thus including the width of its foremost extrusion.</span></div>
<div class="line"><span class="lineno"> 3374</span>                <span class="comment">// We leave a gap equal to a full extrusion width.</span></div>
<div class="line"><span class="lineno"> 3375</span>                support_layer.polygons = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aed0434d42d75979bb4d469ff41de7158">diff</a>(support_layer.polygons, polygons_trimming);</div>
<div class="line"><span class="lineno"> 3376</span>            }</div>
<div class="line"><span class="lineno"> 3377</span>        });</div>
<div class="line"><span class="lineno"> 3378</span>    BOOST_LOG_TRIVIAL(debug) &lt;&lt; <span class="stringliteral">&quot;PrintObjectSupportMaterial::trim_support_layers_by_object() in parallel - end&quot;</span>;</div>
<div class="line"><span class="lineno"> 3379</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_layer_html_aa0cbe8238d4410456bb61b64ea96128e"><div class="ttname"><a href="../../d1/d68/class_slic3r_1_1_layer.html#aa0cbe8238d4410456bb61b64ea96128e">Slic3r::Layer::idx_higher_or_equal</a></div><div class="ttdeci">static IndexType idx_higher_or_equal(IteratorType begin, IteratorType end, IndexType idx, FN_HIGHER_EQUAL fn_higher_equal)</div><div class="ttdef"><b>Definition</b> Layer.hpp:205</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_support_material_internal_html_af06542d247756c07539a6b171019fa70"><div class="ttname"><a href="../../db/de5/namespace_slic3r_1_1_support_material_internal.html#af06542d247756c07539a6b171019fa70">Slic3r::SupportMaterialInternal::collect_bridging_perimeter_areas</a></div><div class="ttdeci">static void collect_bridging_perimeter_areas(const ExtrusionLoop &amp;loop, const float expansion_scaled, Polygons &amp;out)</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1346</div></div>
<div class="ttc" id="anamespace_slic3r_html_a286ab5ffd65184a79428d60bf2a00253"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a286ab5ffd65184a79428d60bf2a00253">Slic3r::no_overlap_xy_gap</a></div><div class="ttdeci">static const double no_overlap_xy_gap</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1527</div></div>
<div class="ttc" id="anamespace_slic3r_html_a9111d5e56324c880f1a8f185cc3cf645"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a9111d5e56324c880f1a8f185cc3cf645">Slic3r::sharp_tail_xy_gap</a></div><div class="ttdeci">static const double sharp_tail_xy_gap</div><div class="ttdef"><b>Definition</b> SupportMaterial.cpp:1526</div></div>
<div class="ttc" id="anamespace_slic3r_html_abe9699b26eb18f6636b045c930d167d8aab7b75c6465c93d9f8a8d76ab5494037"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#abe9699b26eb18f6636b045c930d167d8aab7b75c6465c93d9f8a8d76ab5494037">Slic3r::stBottomBridge</a></div><div class="ttdeci">@ stBottomBridge</div><div class="ttdef"><b>Definition</b> Surface.hpp:15</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1shapelike_html_a2aeb0374bbb83d0a6452bca14e1bbbda"><div class="ttname"><a href="../../dd/d66/namespacelibnest2d_1_1shapelike.html#a2aeb0374bbb83d0a6452bca14e1bbbda">libnest2d::shapelike::begin</a></div><div class="ttdeci">S::iterator begin(S &amp;sh, const PathTag &amp;)</div><div class="ttdef"><b>Definition</b> geometry_traits.hpp:627</div></div>
<div class="ttc" id="axmltok__impl_8inc_html_ade76451eec04fdb3da08ae68f8afee41"><div class="ttname"><a href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a></div><div class="ttdeci">static int PTRCALL PREFIX(scanPercent)(const ENCODING *enc const char const char * end</div><div class="ttdef"><b>Definition</b> xmltok_impl.inc:881</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00092">Slic3r::PrintObjectSupportMaterial::MyLayer::bottom_print_z()</a>, <a class="el" href="../../#l00133">Slic3r::Layer::bottom_z()</a>, <a class="el" href="../../#l00654">Slic3r::diff()</a>, <a class="el" href="../../#l00241">Slic3r::empty()</a>, <a class="el" href="../../#l00881">end</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00752">Slic3r::intersection_ex()</a>, <a class="el" href="../../#l00148">Slic3r::Layer::lslices</a>, <a class="el" href="../../#l01527">Slic3r::no_overlap_xy_gap</a>, <a class="el" href="../../#l00115">Slic3r::PrintObjectSupportMaterial::MyLayer::polygons</a>, <a class="el" href="../../#l00374">Slic3r::polygons_append()</a>, <a class="el" href="../../#l00131">Slic3r::Layer::print_z</a>, <a class="el" href="../../#l00099">Slic3r::PrintObjectSupportMaterial::MyLayer::print_z</a>, <a class="el" href="../../#l00374">Slic3r::range()</a>, <a class="el" href="../../#l00158">Slic3r::Layer::regions()</a>, <a class="el" href="../../#l00081">scale_</a>, <a class="el" href="../../#l01526">Slic3r::sharp_tail_xy_gap</a>, <a class="el" href="../../#l00136">Slic3r::Layer::sharp_tails</a>, <a class="el" href="../../#l00378">size</a>, <a class="el" href="../../#l00015">Slic3r::stBottomBridge</a>, and <a class="el" href="../../#l00068">SUPPORT_SURFACES_OFFSET_PARAMETERS</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_ad4c2a04b87513b31fd000ebb6d005a1c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_ad4c2a04b87513b31fd000ebb6d005a1c_icgraph.svg" width="404" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aaf631a8aa30155225b24ac24b09df885" name="aaf631a8aa30155225b24ac24b09df885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf631a8aa30155225b24ac24b09df885">&#9670;&#160;</a></span>trim_top_contacts_by_bottom_contacts()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::PrintObjectSupportMaterial::trim_top_contacts_by_bottom_contacts </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a> &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>bottom_contacts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#a3dda6b564a324db929e50807ca95f3d5">MyLayersPtr</a> &amp;&#160;</td>
          <td class="paramname"><em>top_contacts</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 2884</span>{</div>
<div class="line"><span class="lineno"> 2885</span>    tbb::parallel_for(tbb::blocked_range&lt;int&gt;(0, <span class="keywordtype">int</span>(top_contacts.size())),</div>
<div class="line"><span class="lineno"> 2886</span>        [&amp;bottom_contacts, &amp;top_contacts](<span class="keyword">const</span> tbb::blocked_range&lt;int&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 2887</span>            int idx_bottom_overlapping_first = -2;</div>
<div class="line"><span class="lineno"> 2888</span>            <span class="comment">// For all top contact layers, counting downwards due to the way idx_higher_or_equal caches the last index to avoid repeated binary search.</span></div>
<div class="line"><span class="lineno"> 2889</span>            for (int idx_top = range.end() - 1; idx_top &gt;= range.begin(); -- idx_top) {</div>
<div class="line"><span class="lineno"> 2890</span>                MyLayer &amp;layer_top = *top_contacts[idx_top];</div>
<div class="line"><span class="lineno"> 2891</span>                <span class="comment">// Find the first bottom layer overlapping with layer_top.</span></div>
<div class="line"><span class="lineno"> 2892</span>                idx_bottom_overlapping_first = idx_lower_or_equal(bottom_contacts, idx_bottom_overlapping_first, [&amp;layer_top](const MyLayer *layer_bottom){ return layer_bottom-&gt;bottom_print_z() - EPSILON &lt;= layer_top.bottom_z; });</div>
<div class="line"><span class="lineno"> 2893</span>                <span class="comment">// For all top contact layers overlapping with the thick bottom contact layer:</span></div>
<div class="line"><span class="lineno"> 2894</span>                for (int idx_bottom_overlapping = idx_bottom_overlapping_first; idx_bottom_overlapping &gt;= 0; -- idx_bottom_overlapping) {</div>
<div class="line"><span class="lineno"> 2895</span>                    const MyLayer &amp;layer_bottom = *bottom_contacts[idx_bottom_overlapping];</div>
<div class="line"><span class="lineno"> 2896</span>                    assert(layer_bottom.bottom_print_z() - EPSILON &lt;= layer_top.bottom_z);</div>
<div class="line"><span class="lineno"> 2897</span>                    if (layer_top.print_z &lt; layer_bottom.print_z + EPSILON) {</div>
<div class="line"><span class="lineno"> 2898</span>                        <span class="comment">// Layers overlap. Trim layer_top with layer_bottom.</span></div>
<div class="line"><span class="lineno"> 2899</span>                        layer_top.polygons = diff(layer_top.polygons, layer_bottom.polygons);</div>
<div class="line"><span class="lineno"> 2900</span>                    } else</div>
<div class="line"><span class="lineno"> 2901</span>                        break;</div>
<div class="line"><span class="lineno"> 2902</span>                }</div>
<div class="line"><span class="lineno"> 2903</span>            }</div>
<div class="line"><span class="lineno"> 2904</span>        });</div>
<div class="line"><span class="lineno"> 2905</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00374">Slic3r::range()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00461">generate()</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_aaf631a8aa30155225b24ac24b09df885_cgraph.svg" width="332" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d2/d8a/class_slic3r_1_1_print_object_support_material_aaf631a8aa30155225b24ac24b09df885_icgraph.svg" width="411" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a7cd3acbc1d9ab9522230a80f97349800" name="a7cd3acbc1d9ab9522230a80f97349800"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cd3acbc1d9ab9522230a80f97349800">&#9670;&#160;</a></span>m_object</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../de/d87/class_slic3r_1_1_print_object.html">PrintObject</a>* Slic3r::PrintObjectSupportMaterial::m_object</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00348">PrintObjectSupportMaterial()</a>.</p>

</div>
</div>
<a id="a66f5a649e3f3bfc65624d776dd55fb1e" name="a66f5a649e3f3bfc65624d776dd55fb1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66f5a649e3f3bfc65624d776dd55fb1e">&#9670;&#160;</a></span>m_object_config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../de/db8/namespace_slic3r.html#ad48b86fa8e529e56c6bd00ff2f9839ab">PrintObjectConfig</a>* Slic3r::PrintObjectSupportMaterial::m_object_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00348">PrintObjectSupportMaterial()</a>, <a class="el" href="../../#l00163">build_plate_only()</a>, <a class="el" href="../../#l00166">has_contact_loops()</a>, and <a class="el" href="../../#l00162">has_support()</a>.</p>

</div>
</div>
<a id="a0b59238962f758fd90553b0fca5ca1a7" name="a0b59238962f758fd90553b0fca5ca1a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b59238962f758fd90553b0fca5ca1a7">&#9670;&#160;</a></span>m_print_config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const PrintConfig* Slic3r::PrintObjectSupportMaterial::m_print_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00348">PrintObjectSupportMaterial()</a>, and <a class="el" href="../../#l00165">synchronize_layers()</a>.</p>

</div>
</div>
<a id="a1cf6e843045184c2a71e988868e29952" name="a1cf6e843045184c2a71e988868e29952"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cf6e843045184c2a71e988868e29952">&#9670;&#160;</a></span>m_slicing_params</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d2b/struct_slic3r_1_1_slicing_parameters.html">SlicingParameters</a> Slic3r::PrintObjectSupportMaterial::m_slicing_params</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00348">PrintObjectSupportMaterial()</a>, <a class="el" href="../../#l00461">generate()</a>, and <a class="el" href="../../#l00160">has_raft()</a>.</p>

</div>
</div>
<a id="a55763a1077b1ed1353d31a2fd7b6fb8d" name="a55763a1077b1ed1353d31a2fd7b6fb8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55763a1077b1ed1353d31a2fd7b6fb8d">&#9670;&#160;</a></span>m_support_params</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html#d6/db7/struct_slic3r_1_1_print_object_support_material_1_1_support_params">SupportParams</a> Slic3r::PrintObjectSupportMaterial::m_support_params</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00348">PrintObjectSupportMaterial()</a>, and <a class="el" href="../../#l00461">generate()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/libslic3r/<a class="el" href="../../">SupportMaterial.hpp</a></li>
<li>src/libslic3r/<a class="el" href="../../">SupportMaterial.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d2/d8a/class_slic3r_1_1_print_object_support_material.html">PrintObjectSupportMaterial</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
