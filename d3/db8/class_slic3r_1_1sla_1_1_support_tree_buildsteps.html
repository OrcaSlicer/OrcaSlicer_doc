<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrcaSlicer: Slic3r::sla::SupportTreeBuildsteps Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../OrcaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">OrcaSlicer<span id="projectnumber">&#160;1.6.3</span>
   </div>
   <div id="projectbrief">OrcaSlicer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d0/d9a/class_slic3r_1_1sla_1_1_support_tree_buildsteps-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::sla::SupportTreeBuildsteps Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../">src/libslic3r/SLA/SupportTreeBuildsteps.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::sla::SupportTreeBuildsteps:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../de/dcb/class_slic3r_1_1sla_1_1_support_tree_buildsteps__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4a0b47fd75cb0f739554d866d14e5447"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4a0b47fd75cb0f739554d866d14e5447">SupportTreeBuildsteps</a> (<a class="el" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html">SupportTreeBuilder</a> &amp;builder, const <a class="el" href="../../df/d9b/struct_slic3r_1_1sla_1_1_supportable_mesh.html">SupportableMesh</a> &amp;sm)</td></tr>
<tr class="separator:a4a0b47fd75cb0f739554d866d14e5447"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5fe2824654c1aa2b8a3f6909a8579177"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a5fe2824654c1aa2b8a3f6909a8579177">filter</a> ()</td></tr>
<tr class="separator:a5fe2824654c1aa2b8a3f6909a8579177"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf6f1d5929c47943a2626b2f3ed547e0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aaf6f1d5929c47943a2626b2f3ed547e0">add_pinheads</a> ()</td></tr>
<tr class="separator:aaf6f1d5929c47943a2626b2f3ed547e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a21f5be749cbf77b69e503429141b78c6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a21f5be749cbf77b69e503429141b78c6">classify</a> ()</td></tr>
<tr class="separator:a21f5be749cbf77b69e503429141b78c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4456eb60f6c57654454d75390ba579c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae4456eb60f6c57654454d75390ba579c">routing_to_ground</a> ()</td></tr>
<tr class="separator:ae4456eb60f6c57654454d75390ba579c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a053f73f35f3d4850ff72ed551f44872f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a053f73f35f3d4850ff72ed551f44872f">routing_to_model</a> ()</td></tr>
<tr class="separator:a053f73f35f3d4850ff72ed551f44872f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b098cd46a9f41781d92563153edd86d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4b098cd46a9f41781d92563153edd86d">interconnect_pillars</a> ()</td></tr>
<tr class="separator:a4b098cd46a9f41781d92563153edd86d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a486f59078173aa766229f764e4f66360"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a486f59078173aa766229f764e4f66360">merge_result</a> ()</td></tr>
<tr class="separator:a486f59078173aa766229f764e4f66360"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-static-methods" name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a4f7afb78f6c8d2a6499b8be716c19b55"><td class="memItemLeft" align="right" valign="top">static bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4f7afb78f6c8d2a6499b8be716c19b55">execute</a> (<a class="el" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html">SupportTreeBuilder</a> &amp;builder, const <a class="el" href="../../df/d9b/struct_slic3r_1_1sla_1_1_supportable_mesh.html">SupportableMesh</a> &amp;sm)</td></tr>
<tr class="separator:a4f7afb78f6c8d2a6499b8be716c19b55"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a0ae136f8d1b18b1b11bff5e6c584751d"><td class="memItemLeft" align="right" valign="top">using&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> = std::vector&lt; unsigned &gt;</td></tr>
<tr class="separator:a0ae136f8d1b18b1b11bff5e6c584751d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a78a14a259f932eac087b0ceea5e6e0b2"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a78a14a259f932eac087b0ceea5e6e0b2">ray_mesh_intersect</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;s, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir)</td></tr>
<tr class="separator:a78a14a259f932eac087b0ceea5e6e0b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43adf44601f52bed5173092f6ed257bf"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a43adf44601f52bed5173092f6ed257bf">pinhead_mesh_intersect</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;s, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir, double r_pin, double r_back, double width, double safety_d)</td></tr>
<tr class="separator:a43adf44601f52bed5173092f6ed257bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa78a3ee74513855ee75d4616fbb09254"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa78a3ee74513855ee75d4616fbb09254">pinhead_mesh_intersect</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;s, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir, double r_pin, double r_back, double width)</td></tr>
<tr class="separator:aa78a3ee74513855ee75d4616fbb09254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72dfd17e2264afe0b02ef0bd619d897f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a72dfd17e2264afe0b02ef0bd619d897f">bridge_mesh_intersect</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;s, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir, double r, double safety_d)</td></tr>
<tr class="separator:a72dfd17e2264afe0b02ef0bd619d897f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af243f06aad31820983946f1367049558"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#af243f06aad31820983946f1367049558">bridge_mesh_intersect</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;s, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir, double r)</td></tr>
<tr class="separator:af243f06aad31820983946f1367049558"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a693c6704911233292e6d8a04382ea364"><td class="memTemplParams" colspan="2">template&lt;class... Args&gt; </td></tr>
<tr class="memitem:a693c6704911233292e6d8a04382ea364"><td class="memTemplItemLeft" align="right" valign="top">double&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a> (Args &amp;&amp;...args)</td></tr>
<tr class="separator:a693c6704911233292e6d8a04382ea364"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76849559a236c50dd61f7ffb9196624b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a76849559a236c50dd61f7ffb9196624b">interconnect</a> (const <a class="el" href="../../dd/d22/struct_slic3r_1_1sla_1_1_pillar.html">Pillar</a> &amp;pillar, const <a class="el" href="../../dd/d22/struct_slic3r_1_1sla_1_1_pillar.html">Pillar</a> &amp;nextpillar)</td></tr>
<tr class="separator:a76849559a236c50dd61f7ffb9196624b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa44f6227ade9ae0c62df804ed57a2ea9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa44f6227ade9ae0c62df804ed57a2ea9">connect_to_nearpillar</a> (const <a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;<a class="el" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>, <a class="el" href="../../d5/d34/windows_8hpp.html#abc8f9f29715ddba51ee7f197feb6fd26">long</a> nearpillar_id)</td></tr>
<tr class="separator:aa44f6227ade9ae0c62df804ed57a2ea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af2f6e5eb7346d73de6340f23a10a5d16"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#af2f6e5eb7346d73de6340f23a10a5d16">connect_to_ground</a> (<a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;<a class="el" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir)</td></tr>
<tr class="separator:af2f6e5eb7346d73de6340f23a10a5d16"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2ea00b7e249e8ab4953c98d818037fa"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ac2ea00b7e249e8ab4953c98d818037fa">connect_to_ground</a> (<a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;<a class="el" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>)</td></tr>
<tr class="separator:ac2ea00b7e249e8ab4953c98d818037fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60b6b9d8b3c352e7870b72b5d52bf5a2"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60b6b9d8b3c352e7870b72b5d52bf5a2">connect_to_model_body</a> (<a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;<a class="el" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>)</td></tr>
<tr class="separator:a60b6b9d8b3c352e7870b72b5d52bf5a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18a56ee5dc03f81c1300a6ef27d1f5cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a18a56ee5dc03f81c1300a6ef27d1f5cd">search_pillar_and_connect</a> (const <a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;source)</td></tr>
<tr class="separator:a18a56ee5dc03f81c1300a6ef27d1f5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affea939f56a669f4102c8c423e190a8d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#affea939f56a669f4102c8c423e190a8d">create_ground_pillar</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;jp, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;sourcedir, double radius, <a class="el" href="../../d5/d34/windows_8hpp.html#abc8f9f29715ddba51ee7f197feb6fd26">long</a> head_id=<a class="el" href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">SupportTreeNode::ID_UNSET</a>)</td></tr>
<tr class="separator:affea939f56a669f4102c8c423e190a8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb20e43cb033181d2f27adf2b4e18338"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abb20e43cb033181d2f27adf2b4e18338">add_pillar_base</a> (<a class="el" href="../../d5/d34/windows_8hpp.html#abc8f9f29715ddba51ee7f197feb6fd26">long</a> pid)</td></tr>
<tr class="separator:abb20e43cb033181d2f27adf2b4e18338"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9c4122856fb75b9f670cdb74e5aa55d"><td class="memItemLeft" align="right" valign="top">std::optional&lt; <a class="el" href="../../d7/d4c/struct_slic3r_1_1sla_1_1_diff_bridge.html">DiffBridge</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ad9c4122856fb75b9f670cdb74e5aa55d">search_widening_path</a> (const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;jp, const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;dir, double radius, double new_radius)</td></tr>
<tr class="separator:ad9c4122856fb75b9f670cdb74e5aa55d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:a47c51bbf2c104f251e034b6805e32b53"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html">SupportTreeConfig</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a></td></tr>
<tr class="separator:a47c51bbf2c104f251e034b6805e32b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64a91d8667eff3bfa4ae82c52c1f0d04"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html">IndexedMesh</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a></td></tr>
<tr class="separator:a64a91d8667eff3bfa4ae82c52c1f0d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbdde1207bdfb8c15838b4f763ffdd49"><td class="memItemLeft" align="right" valign="top">const std::vector&lt; <a class="el" href="../../d7/d60/struct_slic3r_1_1sla_1_1_support_point.html">SupportPoint</a> &gt; &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">m_support_pts</a></td></tr>
<tr class="separator:abbdde1207bdfb8c15838b4f763ffdd49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57666ed03914acce2131d80dc93aa1bb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">m_iheads</a></td></tr>
<tr class="separator:a57666ed03914acce2131d80dc93aa1bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60bff6a0de62f9b4bec137ef118d0834"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">m_iheads_onmodel</a></td></tr>
<tr class="separator:a60bff6a0de62f9b4bec137ef118d0834"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a4ab81942d146088a49028ac306bc25"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a5a4ab81942d146088a49028ac306bc25">m_iheadless</a></td></tr>
<tr class="separator:a5a4ab81942d146088a49028ac306bc25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f76631a5c1c200d8fc63aec233b1fd0"><td class="memItemLeft" align="right" valign="top">std::map&lt; unsigned, <a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a2f76631a5c1c200d8fc63aec233b1fd0">m_head_to_ground_scans</a></td></tr>
<tr class="separator:a2f76631a5c1c200d8fc63aec233b1fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef07ad82fb77da60753eb21377f87a29"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#a28e5de83ad8f2745d66822d2db50212f">PointSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aef07ad82fb77da60753eb21377f87a29">m_support_nmls</a></td></tr>
<tr class="separator:aef07ad82fb77da60753eb21377f87a29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a126e3cbf62160e4c5dafbe83ee911513"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a126e3cbf62160e4c5dafbe83ee911513">m_pillar_clusters</a></td></tr>
<tr class="separator:a126e3cbf62160e4c5dafbe83ee911513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a108f39afec024089e7ac314872de51fa"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html">SupportTreeBuilder</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a></td></tr>
<tr class="separator:a108f39afec024089e7ac314872de51fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1ae3ae2988e0a469a7e79d2f4478a53"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#a28e5de83ad8f2745d66822d2db50212f">PointSet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a></td></tr>
<tr class="separator:aa1ae3ae2988e0a469a7e79d2f4478a53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a754da787c6ed0af7b1e804713118fc36"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#adda397976fb15a4bfcd4468c0668acea">ThrowOnCancel</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a></td></tr>
<tr class="separator:a754da787c6ed0af7b1e804713118fc36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8192c1341f85e5be750beb22380837a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html">PillarIndex</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a></td></tr>
<tr class="separator:ae8192c1341f85e5be750beb22380837a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c78a487a0fb0a882deec660bb788ee8"><td class="memItemLeft" align="right" valign="top">ccr::BlockingMutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a6c78a487a0fb0a882deec660bb788ee8">m_bridge_mutex</a></td></tr>
<tr class="separator:a6c78a487a0fb0a882deec660bb788ee8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a0ae136f8d1b18b1b11bff5e6c584751d" name="a0ae136f8d1b18b1b11bff5e6c584751d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ae136f8d1b18b1b11bff5e6c584751d">&#9670;&#160;</a></span>PtIndices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">Slic3r::sla::SupportTreeBuildsteps::PtIndices</a> =  std::vector&lt;unsigned&gt;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4a0b47fd75cb0f739554d866d14e5447" name="a4a0b47fd75cb0f739554d866d14e5447"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a0b47fd75cb0f739554d866d14e5447">&#9670;&#160;</a></span>SupportTreeBuildsteps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::sla::SupportTreeBuildsteps::SupportTreeBuildsteps </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html">SupportTreeBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d9b/struct_slic3r_1_1sla_1_1_supportable_mesh.html">SupportableMesh</a> &amp;&#160;</td>
          <td class="paramname"><em>sm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   37</span>    : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>(sm.cfg)</div>
<div class="line"><span class="lineno">   38</span>    , <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>(sm.emesh)</div>
<div class="line"><span class="lineno">   39</span>    , <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">m_support_pts</a>(sm.pts)</div>
<div class="line"><span class="lineno">   40</span>    , <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aef07ad82fb77da60753eb21377f87a29">m_support_nmls</a>(sm.pts.size(), 3)</div>
<div class="line"><span class="lineno">   41</span>    , <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>(builder)</div>
<div class="line"><span class="lineno">   42</span>    , <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>(sm.pts.size(), 3)</div>
<div class="line"><span class="lineno">   43</span>    , <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>(builder.ctl().cancelfn)</div>
<div class="line"><span class="lineno">   44</span>{</div>
<div class="line"><span class="lineno">   45</span>    <span class="comment">// Prepare the support points in Eigen/IGL format as well, we will use</span></div>
<div class="line"><span class="lineno">   46</span>    <span class="comment">// it mostly in this form.</span></div>
<div class="line"><span class="lineno">   47</span> </div>
<div class="line"><span class="lineno">   48</span>    <span class="keywordtype">long</span> i = 0;</div>
<div class="line"><span class="lineno">   49</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> SupportPoint &amp;sp : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">m_support_pts</a>) {</div>
<div class="line"><span class="lineno">   50</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>.row(i)(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>) = <span class="keywordtype">double</span>(sp.pos(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>));</div>
<div class="line"><span class="lineno">   51</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>.row(i)(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>) = <span class="keywordtype">double</span>(sp.pos(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>));</div>
<div class="line"><span class="lineno">   52</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>.row(i)(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = <span class="keywordtype">double</span>(sp.pos(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>));</div>
<div class="line"><span class="lineno">   53</span>        ++i;</div>
<div class="line"><span class="lineno">   54</span>    }</div>
<div class="line"><span class="lineno">   55</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a108f39afec024089e7ac314872de51fa"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">Slic3r::sla::SupportTreeBuildsteps::m_builder</a></div><div class="ttdeci">SupportTreeBuilder &amp; m_builder</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:210</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a47c51bbf2c104f251e034b6805e32b53"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">Slic3r::sla::SupportTreeBuildsteps::m_cfg</a></div><div class="ttdeci">const SupportTreeConfig &amp; m_cfg</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:189</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a64a91d8667eff3bfa4ae82c52c1f0d04"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">Slic3r::sla::SupportTreeBuildsteps::m_mesh</a></div><div class="ttdeci">const IndexedMesh &amp; m_mesh</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:190</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a754da787c6ed0af7b1e804713118fc36"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">Slic3r::sla::SupportTreeBuildsteps::m_thr</a></div><div class="ttdeci">ThrowOnCancel m_thr</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:217</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_aa1ae3ae2988e0a469a7e79d2f4478a53"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">Slic3r::sla::SupportTreeBuildsteps::m_points</a></div><div class="ttdeci">PointSet m_points</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:213</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_abbdde1207bdfb8c15838b4f763ffdd49"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">Slic3r::sla::SupportTreeBuildsteps::m_support_pts</a></div><div class="ttdeci">const std::vector&lt; SupportPoint &gt; &amp; m_support_pts</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:191</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_aef07ad82fb77da60753eb21377f87a29"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aef07ad82fb77da60753eb21377f87a29">Slic3r::sla::SupportTreeBuildsteps::m_support_nmls</a></div><div class="ttdeci">PointSet m_support_nmls</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:202</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Slic3r::sla::Y</a></div><div class="ttdeci">@ Y</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:18</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">Slic3r::sla::X</a></div><div class="ttdeci">@ X</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:18</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Slic3r::sla::Z</a></div><div class="ttdeci">@ Z</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:18</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00213">m_points</a>, <a class="el" href="../../#l00191">m_support_pts</a>, <a class="el" href="../../#l00018">Slic3r::sla::X</a>, <a class="el" href="../../#l00018">Slic3r::sla::Y</a>, and <a class="el" href="../../#l00018">Slic3r::sla::Z</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="abb20e43cb033181d2f27adf2b4e18338" name="abb20e43cb033181d2f27adf2b4e18338"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb20e43cb033181d2f27adf2b4e18338">&#9670;&#160;</a></span>add_pillar_base()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::add_pillar_base </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d5/d34/windows_8hpp.html#abc8f9f29715ddba51ee7f197feb6fd26">long</a>&#160;</td>
          <td class="paramname"><em>pid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  319</span>    {</div>
<div class="line"><span class="lineno">  320</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a885b9c48060246d278a6d69c898ef7e1">add_pillar_base</a>(pid, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a3f463807b0288b56e397262ecbb1b433">base_height_mm</a>, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">base_radius_mm</a>);</div>
<div class="line"><span class="lineno">  321</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a885b9c48060246d278a6d69c898ef7e1"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a885b9c48060246d278a6d69c898ef7e1">Slic3r::sla::SupportTreeBuilder::add_pillar_base</a></div><div class="ttdeci">void add_pillar_base(long pid, double baseheight=3, double radius=2)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.cpp:113</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a3f463807b0288b56e397262ecbb1b433"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a3f463807b0288b56e397262ecbb1b433">Slic3r::sla::SupportTreeConfig::base_height_mm</a></div><div class="ttdeci">double base_height_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:68</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_acd6d38bb77e453b7b6cc42a60001a18a"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">Slic3r::sla::SupportTreeConfig::base_radius_mm</a></div><div class="ttdeci">double base_radius_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:65</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00113">Slic3r::sla::SupportTreeBuilder::add_pillar_base()</a>, <a class="el" href="../../#l00068">Slic3r::sla::SupportTreeConfig::base_height_mm</a>, <a class="el" href="../../#l00065">Slic3r::sla::SupportTreeConfig::base_radius_mm</a>, <a class="el" href="../../#l00210">m_builder</a>, and <a class="el" href="../../#l00189">m_cfg</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_abb20e43cb033181d2f27adf2b4e18338_cgraph.svg" width="399" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aaf6f1d5929c47943a2626b2f3ed547e0" name="aaf6f1d5929c47943a2626b2f3ed547e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf6f1d5929c47943a2626b2f3ed547e0">&#9670;&#160;</a></span>add_pinheads()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::add_pinheads </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  766</span>{</div>
<div class="line"><span class="lineno">  767</span>}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_aaf6f1d5929c47943a2626b2f3ed547e0_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a693c6704911233292e6d8a04382ea364" name="a693c6704911233292e6d8a04382ea364"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a693c6704911233292e6d8a04382ea364">&#9670;&#160;</a></span>bridge_mesh_distance()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class... Args&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">double Slic3r::sla::SupportTreeBuildsteps::bridge_mesh_distance </td>
          <td>(</td>
          <td class="paramtype">Args &amp;&amp;...&#160;</td>
          <td class="paramname"><em>args</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  287</span>                                                      {</div>
<div class="line"><span class="lineno">  288</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a72dfd17e2264afe0b02ef0bd619d897f">bridge_mesh_intersect</a>(std::forward&lt;Args&gt;(args)...).<a class="code hl_function" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html#a136a76c5c42f0ca1c119bf18719c5ff4">distance</a>();</div>
<div class="line"><span class="lineno">  289</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result_html_a136a76c5c42f0ca1c119bf18719c5ff4"><div class="ttname"><a href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html#a136a76c5c42f0ca1c119bf18719c5ff4">Slic3r::sla::IndexedMesh::hit_result::distance</a></div><div class="ttdeci">double distance() const</div><div class="ttdef"><b>Definition</b> IndexedMesh.hpp:91</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a72dfd17e2264afe0b02ef0bd619d897f"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a72dfd17e2264afe0b02ef0bd619d897f">Slic3r::sla::SupportTreeBuildsteps::bridge_mesh_intersect</a></div><div class="ttdeci">IndexedMesh::hit_result bridge_mesh_intersect(const Vec3d &amp;s, const Vec3d &amp;dir, double r, double safety_d)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:259</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00259">bridge_mesh_intersect()</a>, and <a class="el" href="../../#l00091">Slic3r::sla::IndexedMesh::hit_result::distance()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a693c6704911233292e6d8a04382ea364_cgraph.svg" width="388" height="131"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af243f06aad31820983946f1367049558" name="af243f06aad31820983946f1367049558"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af243f06aad31820983946f1367049558">&#9670;&#160;</a></span>bridge_mesh_intersect() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a> Slic3r::sla::SupportTreeBuildsteps::bridge_mesh_intersect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  280</span>    {</div>
<div class="line"><span class="lineno">  281</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a72dfd17e2264afe0b02ef0bd619d897f">bridge_mesh_intersect</a>(s, dir, r,</div>
<div class="line"><span class="lineno">  282</span>                                     r * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aa641974bb0ee1c24c90bb754e4360271">safety_distance_mm</a> /</div>
<div class="line"><span class="lineno">  283</span>                                         <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>);</div>
<div class="line"><span class="lineno">  284</span>    }</div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a2c75265d112b6139202567bb55576f60"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">Slic3r::sla::SupportTreeConfig::head_back_radius_mm</a></div><div class="ttdeci">double head_back_radius_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:45</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_aa641974bb0ee1c24c90bb754e4360271"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aa641974bb0ee1c24c90bb754e4360271">Slic3r::sla::SupportTreeConfig::safety_distance_mm</a></div><div class="ttdeci">static const double constexpr safety_distance_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:102</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00259">bridge_mesh_intersect()</a>, <a class="el" href="../../#l00045">Slic3r::sla::SupportTreeConfig::head_back_radius_mm</a>, <a class="el" href="../../#l00189">m_cfg</a>, and <a class="el" href="../../#l00102">Slic3r::sla::SupportTreeConfig::safety_distance_mm</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_af243f06aad31820983946f1367049558_cgraph.svg" width="388" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a72dfd17e2264afe0b02ef0bd619d897f" name="a72dfd17e2264afe0b02ef0bd619d897f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72dfd17e2264afe0b02ef0bd619d897f">&#9670;&#160;</a></span>bridge_mesh_intersect() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a> Slic3r::sla::SupportTreeBuildsteps::bridge_mesh_intersect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>safety_d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  261</span>{</div>
<div class="line"><span class="lineno">  262</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> SAMPLES = 8;</div>
<div class="line"><span class="lineno">  263</span>    PointRing&lt;SAMPLES&gt; ring{dir};</div>
<div class="line"><span class="lineno">  264</span> </div>
<div class="line"><span class="lineno">  265</span>    <span class="keyword">using </span>Hit = IndexedMesh::hit_result;</div>
<div class="line"><span class="lineno">  266</span> </div>
<div class="line"><span class="lineno">  267</span>    <span class="comment">// Hit results</span></div>
<div class="line"><span class="lineno">  268</span>    std::array&lt;Hit, SAMPLES&gt; hits;</div>
<div class="line"><span class="lineno">  269</span> </div>
<div class="line"><span class="lineno">  270</span>    ccr::for_each(<span class="keywordtype">size_t</span>(0), hits.size(),</div>
<div class="line"><span class="lineno">  271</span>                 [<span class="keyword">this</span>, r, src, <span class="comment">/*ins_check,*/</span> &amp;ring, dir, sd, &amp;hits] (<span class="keywordtype">size_t</span> i)</div>
<div class="line"><span class="lineno">  272</span>    {</div>
<div class="line"><span class="lineno">  273</span>        Hit &amp;hit = hits[i];</div>
<div class="line"><span class="lineno">  274</span> </div>
<div class="line"><span class="lineno">  275</span>        <span class="comment">// Point on the circle on the pin sphere</span></div>
<div class="line"><span class="lineno">  276</span>        Vec3d p = ring.get(i, src, r + sd);</div>
<div class="line"><span class="lineno">  277</span> </div>
<div class="line"><span class="lineno">  278</span>        auto hr = m_mesh.query_ray_hit(p + r * dir, dir);</div>
<div class="line"><span class="lineno">  279</span> </div>
<div class="line"><span class="lineno">  280</span>        if(<span class="comment">/*ins_check &amp;&amp; */</span>hr.is_inside()) {</div>
<div class="line"><span class="lineno">  281</span>            if(hr.distance() &gt; 2 * r + sd) hit = Hit(0.0);</div>
<div class="line"><span class="lineno">  282</span>            else {</div>
<div class="line"><span class="lineno">  283</span>                <span class="comment">// re-cast the ray from the outside of the object</span></div>
<div class="line"><span class="lineno">  284</span>                hit = m_mesh.query_ray_hit(p + (hr.distance() + EPSILON) * dir, dir);</div>
<div class="line"><span class="lineno">  285</span>            }</div>
<div class="line"><span class="lineno">  286</span>        } <span class="keywordflow">else</span> hit = hr;</div>
<div class="line"><span class="lineno">  287</span>    });</div>
<div class="line"><span class="lineno">  288</span> </div>
<div class="line"><span class="lineno">  289</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a61db417e321d1f644c46db44d2a56df8">min_hit</a>(hits);</div>
<div class="line"><span class="lineno">  290</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a61db417e321d1f644c46db44d2a56df8"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a61db417e321d1f644c46db44d2a56df8">Slic3r::sla::min_hit</a></div><div class="ttdeci">static Hit min_hit(const C &amp;hits)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:25</div></div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="../../#l00287">bridge_mesh_distance()</a>, and <a class="el" href="../../#l00276">bridge_mesh_intersect()</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a72dfd17e2264afe0b02ef0bd619d897f_icgraph.svg" width="388" height="147"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a21f5be749cbf77b69e503429141b78c6" name="a21f5be749cbf77b69e503429141b78c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a21f5be749cbf77b69e503429141b78c6">&#9670;&#160;</a></span>classify()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::classify </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  770</span>{</div>
<div class="line"><span class="lineno">  771</span>    <span class="comment">// We should first get the heads that reach the ground directly</span></div>
<div class="line"><span class="lineno">  772</span>    <a class="code hl_typedef" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> ground_head_indices;</div>
<div class="line"><span class="lineno">  773</span>    ground_head_indices.reserve(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">m_iheads</a>.size());</div>
<div class="line"><span class="lineno">  774</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">m_iheads_onmodel</a>.reserve(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">m_iheads</a>.size());</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span>    <span class="comment">// First we decide which heads reach the ground and can be full</span></div>
<div class="line"><span class="lineno">  777</span>    <span class="comment">// pillars and which shall be connected to the model surface (or</span></div>
<div class="line"><span class="lineno">  778</span>    <span class="comment">// search a suitable path around the surface that leads to the</span></div>
<div class="line"><span class="lineno">  779</span>    <span class="comment">// ground -- TODO)</span></div>
<div class="line"><span class="lineno">  780</span>    <span class="keywordflow">for</span>(<span class="keywordtype">unsigned</span> i : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">m_iheads</a>) {</div>
<div class="line"><span class="lineno">  781</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  782</span> </div>
<div class="line"><span class="lineno">  783</span>        Head &amp;<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a> = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(i);</div>
<div class="line"><span class="lineno">  784</span>        <span class="keywordtype">double</span> r = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm;</div>
<div class="line"><span class="lineno">  785</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> headjp = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.junction_point();</div>
<div class="line"><span class="lineno">  786</span> </div>
<div class="line"><span class="lineno">  787</span>        <span class="comment">// collision check</span></div>
<div class="line"><span class="lineno">  788</span>        <span class="keyword">auto</span> hit = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a72dfd17e2264afe0b02ef0bd619d897f">bridge_mesh_intersect</a>(headjp, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>, r);</div>
<div class="line"><span class="lineno">  789</span> </div>
<div class="line"><span class="lineno">  790</span>        <span class="keywordflow">if</span>(std::isinf(hit.distance())) ground_head_indices.emplace_back(i);</div>
<div class="line"><span class="lineno">  791</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a6830954d166c09e66ab41cdb40376b7d">ground_facing_only</a>)  <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.invalidate();</div>
<div class="line"><span class="lineno">  792</span>        <span class="keywordflow">else</span> <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">m_iheads_onmodel</a>.emplace_back(i);</div>
<div class="line"><span class="lineno">  793</span> </div>
<div class="line"><span class="lineno">  794</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a2f76631a5c1c200d8fc63aec233b1fd0">m_head_to_ground_scans</a>[i] = hit;</div>
<div class="line"><span class="lineno">  795</span>    }</div>
<div class="line"><span class="lineno">  796</span> </div>
<div class="line"><span class="lineno">  797</span>    <span class="comment">// We want to search for clusters of points that are far enough</span></div>
<div class="line"><span class="lineno">  798</span>    <span class="comment">// from each other in the XY plane to not cross their pillar bases</span></div>
<div class="line"><span class="lineno">  799</span>    <span class="comment">// These clusters of support points will join in one pillar,</span></div>
<div class="line"><span class="lineno">  800</span>    <span class="comment">// possibly in their centroid support point.</span></div>
<div class="line"><span class="lineno">  801</span> </div>
<div class="line"><span class="lineno">  802</span>    <span class="keyword">auto</span> pointfn = [<span class="keyword">this</span>](<span class="keywordtype">unsigned</span> i) {</div>
<div class="line"><span class="lineno">  803</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(i).<a class="code hl_function" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html#a520e3ac5a258ff6c79e31b2fdb13e52c">junction_point</a>();</div>
<div class="line"><span class="lineno">  804</span>    };</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>    <span class="keyword">auto</span> predicate = [<span class="keyword">this</span>](<span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">PointIndexEl</a> &amp;e1,</div>
<div class="line"><span class="lineno">  807</span>                            <span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">PointIndexEl</a> &amp;e2) {</div>
<div class="line"><span class="lineno">  808</span>        <span class="keywordtype">double</span> d2d = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ae5e4888782aec43d75be4ae861763437">to_2d</a>(e1.first), <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ae5e4888782aec43d75be4ae861763437">to_2d</a>(e2.first));</div>
<div class="line"><span class="lineno">  809</span>        <span class="keywordtype">double</span> d3d = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(e1.first, e2.first);</div>
<div class="line"><span class="lineno">  810</span>        <span class="keywordflow">return</span> d2d &lt; 2 * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">base_radius_mm</a></div>
<div class="line"><span class="lineno">  811</span>               &amp;&amp; d3d &lt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0c7dd6d1b6ab761e6bb8d29d3b3808e1">max_bridge_length_mm</a>;</div>
<div class="line"><span class="lineno">  812</span>    };</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a126e3cbf62160e4c5dafbe83ee911513">m_pillar_clusters</a> = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a11c5880b41bdccb74b532b3a46e7e66a">cluster</a>(ground_head_indices, pointfn, predicate,</div>
<div class="line"><span class="lineno">  815</span>                                <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a07fd7cd4b86424405fa6a1eb5beed422">max_bridges_on_pillar</a>);</div>
<div class="line"><span class="lineno">  816</span>}</div>
<div class="ttc" id="a_block_methods_8h_html_a66cee6936cfa159827535f010684d973"><div class="ttname"><a href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC SegmentReturnType head(Index n)</div><div class="ttdoc">This is the const version of head(Index).</div><div class="ttdef"><b>Definition</b> BlockMethods.h:919</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a19c45b0758c7142dfcb00ea6d7ecdf99"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">Slic3r::sla::SupportTreeBuilder::head</a></div><div class="ttdeci">Head &amp; head(unsigned id)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:382</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a0ae136f8d1b18b1b11bff5e6c584751d"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">Slic3r::sla::SupportTreeBuildsteps::PtIndices</a></div><div class="ttdeci">std::vector&lt; unsigned &gt; PtIndices</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:193</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a126e3cbf62160e4c5dafbe83ee911513"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a126e3cbf62160e4c5dafbe83ee911513">Slic3r::sla::SupportTreeBuildsteps::m_pillar_clusters</a></div><div class="ttdeci">std::vector&lt; PtIndices &gt; m_pillar_clusters</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:206</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a2f76631a5c1c200d8fc63aec233b1fd0"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a2f76631a5c1c200d8fc63aec233b1fd0">Slic3r::sla::SupportTreeBuildsteps::m_head_to_ground_scans</a></div><div class="ttdeci">std::map&lt; unsigned, IndexedMesh::hit_result &gt; m_head_to_ground_scans</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:199</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a57666ed03914acce2131d80dc93aa1bb"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">Slic3r::sla::SupportTreeBuildsteps::m_iheads</a></div><div class="ttdeci">PtIndices m_iheads</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:195</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a60bff6a0de62f9b4bec137ef118d0834"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">Slic3r::sla::SupportTreeBuildsteps::m_iheads_onmodel</a></div><div class="ttdeci">PtIndices m_iheads_onmodel</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:196</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a11c5880b41bdccb74b532b3a46e7e66a"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a11c5880b41bdccb74b532b3a46e7e66a">Slic3r::sla::cluster</a></div><div class="ttdeci">ClusteredPoints cluster(const std::vector&lt; unsigned &gt; &amp;indices, std::function&lt; Vec3d(unsigned)&gt; pointfn, double dist, unsigned max_points)</div><div class="ttdef"><b>Definition</b> Clustering.cpp:93</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a4bdef96a096b7124e071e180958ee0a7"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">Slic3r::sla::PointIndexEl</a></div><div class="ttdeci">std::pair&lt; Vec3d, unsigned &gt; PointIndexEl</div><div class="ttdef"><b>Definition</b> SpatIndex.hpp:16</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_aa20f7e9692481f118a14e85faa01ed0e"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Slic3r::sla::Vec3d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vec3d</div><div class="ttdef"><b>Definition</b> SpatIndex.hpp:15</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_ab2c5a8d29e1e239213ee1f858a0f9014"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">Slic3r::sla::DOWN</a></div><div class="ttdeci">const Vec3d DOWN</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:62</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_aeda213b18f84a384c47ecb9a3c1eb6c3"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">Slic3r::sla::distance</a></div><div class="ttdeci">double distance(const Vec &amp;p)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:53</div></div>
<div class="ttc" id="anamespace_slic3r_html_ae5e4888782aec43d75be4ae861763437"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ae5e4888782aec43d75be4ae861763437">Slic3r::to_2d</a></div><div class="ttdeci">Eigen::Matrix&lt; T, 2, 1, Eigen::DontAlign &gt; to_2d(const Eigen::MatrixBase&lt; Eigen::Matrix&lt; T, N, 1, Options &gt; &gt; &amp;ptN)</div><div class="ttdef"><b>Definition</b> Point.hpp:112</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_head_html_a520e3ac5a258ff6c79e31b2fdb13e52c"><div class="ttname"><a href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html#a520e3ac5a258ff6c79e31b2fdb13e52c">Slic3r::sla::Head::junction_point</a></div><div class="ttdeci">Vec3d junction_point() const</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:108</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a07fd7cd4b86424405fa6a1eb5beed422"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a07fd7cd4b86424405fa6a1eb5beed422">Slic3r::sla::SupportTreeConfig::max_bridges_on_pillar</a></div><div class="ttdeci">unsigned max_bridges_on_pillar</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:87</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a0c7dd6d1b6ab761e6bb8d29d3b3808e1"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0c7dd6d1b6ab761e6bb8d29d3b3808e1">Slic3r::sla::SupportTreeConfig::max_bridge_length_mm</a></div><div class="ttdeci">double max_bridge_length_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:74</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a6830954d166c09e66ab41cdb40376b7d"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a6830954d166c09e66ab41cdb40376b7d">Slic3r::sla::SupportTreeConfig::ground_facing_only</a></div><div class="ttdeci">bool ground_facing_only</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:56</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00919">head()</a>, and <a class="el" href="../../#l00112">Slic3r::to_2d()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a21f5be749cbf77b69e503429141b78c6_cgraph.svg" width="312" height="86"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a21f5be749cbf77b69e503429141b78c6_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ac2ea00b7e249e8ab4953c98d818037fa" name="ac2ea00b7e249e8ab4953c98d818037fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2ea00b7e249e8ab4953c98d818037fa">&#9670;&#160;</a></span>connect_to_ground() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::connect_to_ground </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  917</span>{</div>
<div class="line"><span class="lineno">  918</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#af2f6e5eb7346d73de6340f23a10a5d16">connect_to_ground</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>, <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.dir)) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  919</span> </div>
<div class="line"><span class="lineno">  920</span>    <span class="comment">// Optimize bridge direction:</span></div>
<div class="line"><span class="lineno">  921</span>    <span class="comment">// Straight path failed so we will try to search for a suitable</span></div>
<div class="line"><span class="lineno">  922</span>    <span class="comment">// direction out of the cavity.</span></div>
<div class="line"><span class="lineno">  923</span>    <span class="keyword">auto</span> [polar, azimuth] = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#acbe068093e1e77c258297899a2557961">dir_to_spheric</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.dir);</div>
<div class="line"><span class="lineno">  924</span> </div>
<div class="line"><span class="lineno">  925</span>    Optimizer&lt;AlgNLoptGenetic&gt; solver(<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ac95d11abfe682f14a45bf0aaa9f022fa">get_criteria</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>).stop_score(1e6));</div>
<div class="line"><span class="lineno">  926</span>    solver.seed(0); <span class="comment">// we want deterministic behavior</span></div>
<div class="line"><span class="lineno">  927</span> </div>
<div class="line"><span class="lineno">  928</span>    <span class="keywordtype">double</span> r_back = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm;</div>
<div class="line"><span class="lineno">  929</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> hjp = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.junction_point();</div>
<div class="line"><span class="lineno">  930</span>    <span class="keyword">auto</span> oresult = solver.to_max().optimize(</div>
<div class="line"><span class="lineno">  931</span>        [<span class="keyword">this</span>, hjp, r_back](<span class="keyword">const</span> opt::Input&lt;2&gt; &amp;input) {</div>
<div class="line"><span class="lineno">  932</span>            <span class="keyword">auto</span> &amp;[plr, azm] = input;</div>
<div class="line"><span class="lineno">  933</span>            <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(plr, azm).normalized();</div>
<div class="line"><span class="lineno">  934</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(hjp, <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>, r_back);</div>
<div class="line"><span class="lineno">  935</span>        },</div>
<div class="line"><span class="lineno">  936</span>        <a class="code hl_function" href="../../db/dc1/namespacelibnest2d_1_1opt.html#acbcb2d5b28f92a5b9a2a0e77c10e3daf">initvals</a>({polar, azimuth}),  <span class="comment">// let&#39;s start with what we have</span></div>
<div class="line"><span class="lineno">  937</span>        <a class="code hl_function" href="../../d8/d86/namespace_slic3r_1_1opt.html#ad9b818b6999367924c5dcf86a940c2f4">bounds</a>({ {<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>}, {-<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>} })</div>
<div class="line"><span class="lineno">  938</span>    );</div>
<div class="line"><span class="lineno">  939</span> </div>
<div class="line"><span class="lineno">  940</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> bridgedir = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(oresult.optimum).normalized();</div>
<div class="line"><span class="lineno">  941</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#af2f6e5eb7346d73de6340f23a10a5d16">connect_to_ground</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>, bridgedir);</div>
<div class="line"><span class="lineno">  942</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a693c6704911233292e6d8a04382ea364"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">Slic3r::sla::SupportTreeBuildsteps::bridge_mesh_distance</a></div><div class="ttdeci">double bridge_mesh_distance(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:287</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_af2f6e5eb7346d73de6340f23a10a5d16"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#af2f6e5eb7346d73de6340f23a10a5d16">Slic3r::sla::SupportTreeBuildsteps::connect_to_ground</a></div><div class="ttdeci">bool connect_to_ground(Head &amp;head, const Vec3d &amp;dir)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:892</div></div>
<div class="ttc" id="anamespace_slic3r_1_1opt_html_ad9b818b6999367924c5dcf86a940c2f4"><div class="ttname"><a href="../../d8/d86/namespace_slic3r_1_1opt.html#ad9b818b6999367924c5dcf86a940c2f4">Slic3r::opt::bounds</a></div><div class="ttdeci">Bounds&lt; N &gt; bounds(const Bound(&amp;b)[N])</div><div class="ttdef"><b>Definition</b> Optimizer.hpp:174</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a7a4459118ce110e31fe2e0e48e5b05f0"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">Slic3r::sla::spheric_to_dir</a></div><div class="ttdeci">Vec3d spheric_to_dir(double polar, double azimuth)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:32</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_ac95d11abfe682f14a45bf0aaa9f022fa"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#ac95d11abfe682f14a45bf0aaa9f022fa">Slic3r::sla::get_criteria</a></div><div class="ttdeci">StopCriteria get_criteria(const SupportTreeConfig &amp;cfg)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_acbe068093e1e77c258297899a2557961"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#acbe068093e1e77c258297899a2557961">Slic3r::sla::dir_to_spheric</a></div><div class="ttdeci">std::pair&lt; double, double &gt; dir_to_spheric(const Vec3d &amp;n, double norm=1.)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:23</div></div>
<div class="ttc" id="anamespacelibnest2d_1_1opt_html_acbcb2d5b28f92a5b9a2a0e77c10e3daf"><div class="ttname"><a href="../../db/dc1/namespacelibnest2d_1_1opt.html#acbcb2d5b28f92a5b9a2a0e77c10e3daf">libnest2d::opt::initvals</a></div><div class="ttdeci">tuple&lt; Args... &gt; initvals(Args...args)</div><div class="ttdef"><b>Definition</b> optimizer.hpp:54</div></div>
<div class="ttc" id="aqhalf_8c_html_a3bb856ed0c81ac3a32238bcda8f5a977"><div class="ttname"><a href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a></div><div class="ttdeci">char output neighborhood of facet n Pp do not report precision problems n n list of all options n one line descriptions of all options n V version n</div><div class="ttdef"><b>Definition</b> qhalf.c:162</div></div>
<div class="ttc" id="arboxlib_8c_html_a598a3330b3c21701223ee0ca14316eca"><div class="ttname"><a href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a></div><div class="ttdeci">#define PI</div><div class="ttdef"><b>Definition</b> rboxlib.c:33</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a19fdd4d4863568ec196e1c7abcf6316a"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">Slic3r::sla::SupportTreeConfig::bridge_slope</a></div><div class="ttdeci">double bridge_slope</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:71</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00023">Slic3r::sla::dir_to_spheric()</a>, <a class="el" href="../../#l00017">Slic3r::sla::get_criteria()</a>, <a class="el" href="../../#l00919">head()</a>, <a class="el" href="../../#l00162">n</a>, <a class="el" href="../../#l00147">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::optimize()</a>, <a class="el" href="../../#l00033">PI</a>, <a class="el" href="../../#l00152">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::seed()</a>, <a class="el" href="../../#l00032">Slic3r::sla::spheric_to_dir()</a>, and <a class="el" href="../../#l00124">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::to_max()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_ac2ea00b7e249e8ab4953c98d818037fa_cgraph.svg" width="574" height="412"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="af2f6e5eb7346d73de6340f23a10a5d16" name="af2f6e5eb7346d73de6340f23a10a5d16"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af2f6e5eb7346d73de6340f23a10a5d16">&#9670;&#160;</a></span>connect_to_ground() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::connect_to_ground </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  893</span>{</div>
<div class="line"><span class="lineno">  894</span>    <span class="keyword">auto</span> hjp = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.junction_point();</div>
<div class="line"><span class="lineno">  895</span>    <span class="keywordtype">double</span> r = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm;</div>
<div class="line"><span class="lineno">  896</span>    <span class="keywordtype">double</span> t = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(hjp, dir, <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm);</div>
<div class="line"><span class="lineno">  897</span>    <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a> = 0, tdown = 0;</div>
<div class="line"><span class="lineno">  898</span>    t = std::min(t, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0c7dd6d1b6ab761e6bb8d29d3b3808e1">max_bridge_length_mm</a> * r / <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>);</div>
<div class="line"><span class="lineno">  899</span> </div>
<div class="line"><span class="lineno">  900</span>    <span class="keywordflow">while</span> (d &lt; t &amp;&amp; !std::isinf(tdown = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(hjp + d * dir, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>, r)))</div>
<div class="line"><span class="lineno">  901</span>        <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a> += r;</div>
<div class="line"><span class="lineno">  902</span> </div>
<div class="line"><span class="lineno">  903</span>    <span class="keywordflow">if</span>(!std::isinf(tdown)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  904</span> </div>
<div class="line"><span class="lineno">  905</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> endp = hjp + <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a> * dir;</div>
<div class="line"><span class="lineno">  906</span>    <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  907</span> </div>
<div class="line"><span class="lineno">  908</span>    <span class="keywordflow">if</span> ((ret = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#affea939f56a669f4102c8c423e190a8d">create_ground_pillar</a>(endp, dir, <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm))) {</div>
<div class="line"><span class="lineno">  909</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a23976481a726809d6737abefa6c77f1b">add_bridge</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.id, endp);</div>
<div class="line"><span class="lineno">  910</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">add_junction</a>(endp, <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm);</div>
<div class="line"><span class="lineno">  911</span>    }</div>
<div class="line"><span class="lineno">  912</span> </div>
<div class="line"><span class="lineno">  913</span>    <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  914</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a23976481a726809d6737abefa6c77f1b"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a23976481a726809d6737abefa6c77f1b">Slic3r::sla::SupportTreeBuilder::add_bridge</a></div><div class="ttdeci">const Bridge &amp; add_bridge(const Vec3d &amp;s, const Vec3d &amp;e, double r)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:353</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a39bc20e522b9699d6b4fa1ff10cbaaba"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">Slic3r::sla::SupportTreeBuilder::add_junction</a></div><div class="ttdeci">const Junction &amp; add_junction(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:344</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_affea939f56a669f4102c8c423e190a8d"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#affea939f56a669f4102c8c423e190a8d">Slic3r::sla::SupportTreeBuildsteps::create_ground_pillar</a></div><div class="ttdeci">bool create_ground_pillar(const Vec3d &amp;jp, const Vec3d &amp;sourcedir, double radius, long head_id=SupportTreeNode::ID_UNSET)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:468</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">marchsq::__impl::SquareTag::d</a></div><div class="ttdeci">@ d</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00919">head()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_af2f6e5eb7346d73de6340f23a10a5d16_cgraph.svg" width="267" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a60b6b9d8b3c352e7870b72b5d52bf5a2" name="a60b6b9d8b3c352e7870b72b5d52bf5a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60b6b9d8b3c352e7870b72b5d52bf5a2">&#9670;&#160;</a></span>connect_to_model_body()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::connect_to_model_body </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;&#160;</td>
          <td class="paramname"><em>head</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  945</span>{</div>
<div class="line"><span class="lineno">  946</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.id &lt;= <a class="code hl_variable" href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">SupportTreeNode::ID_UNSET</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  947</span> </div>
<div class="line"><span class="lineno">  948</span>    <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a2f76631a5c1c200d8fc63aec233b1fd0">m_head_to_ground_scans</a>.find(<span class="keywordtype">unsigned</span>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.id));</div>
<div class="line"><span class="lineno">  949</span>    <span class="keywordflow">if</span> (it == <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a2f76631a5c1c200d8fc63aec233b1fd0">m_head_to_ground_scans</a>.end()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  950</span> </div>
<div class="line"><span class="lineno">  951</span>    <span class="keyword">auto</span> &amp;hit = it-&gt;second;</div>
<div class="line"><span class="lineno">  952</span> </div>
<div class="line"><span class="lineno">  953</span>    <span class="keywordflow">if</span> (!hit.is_hit()) {</div>
<div class="line"><span class="lineno">  954</span>        <span class="comment">// TODO scan for potential anchor points on model surface</span></div>
<div class="line"><span class="lineno">  955</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  956</span>    }</div>
<div class="line"><span class="lineno">  957</span> </div>
<div class="line"><span class="lineno">  958</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> hjp = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.junction_point();</div>
<div class="line"><span class="lineno">  959</span>    <span class="keywordtype">double</span> zangle = std::asin(hit.direction()(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>));</div>
<div class="line"><span class="lineno">  960</span>    zangle = std::max(zangle, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>/4);</div>
<div class="line"><span class="lineno">  961</span>    <span class="keywordtype">double</span> h = std::sin(zangle) * <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.fullwidth();</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>    <span class="comment">// The width of the tail head that we would like to have...</span></div>
<div class="line"><span class="lineno">  964</span>    h = std::min(hit.distance() - <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm, h);</div>
<div class="line"><span class="lineno">  965</span> </div>
<div class="line"><span class="lineno">  966</span>    <span class="comment">// If this is a mini pillar dont bother with the tail width, can be 0.</span></div>
<div class="line"><span class="lineno">  967</span>    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm &lt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>) h = std::max(h, 0.);</div>
<div class="line"><span class="lineno">  968</span>    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (h &lt;= 0.) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  969</span> </div>
<div class="line"><span class="lineno">  970</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> endp{hjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), hjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>), hjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - hit.distance() + h};</div>
<div class="line"><span class="lineno">  971</span>    <span class="keyword">auto</span> center_hit = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>.<a class="code hl_function" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a1252260eb1135d8be5ed478a8127c2a2">query_ray_hit</a>(hjp, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>);</div>
<div class="line"><span class="lineno">  972</span> </div>
<div class="line"><span class="lineno">  973</span>    <span class="keywordtype">double</span> hitdiff = center_hit.<a class="code hl_function" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html#a136a76c5c42f0ca1c119bf18719c5ff4">distance</a>() - hit.distance();</div>
<div class="line"><span class="lineno">  974</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> hitp = std::abs(hitdiff) &lt; 2*<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm?</div>
<div class="line"><span class="lineno">  975</span>                     center_hit.position() : hit.position();</div>
<div class="line"><span class="lineno">  976</span> </div>
<div class="line"><span class="lineno">  977</span>    <span class="keywordtype">long</span> pillar_id = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#adb344d88c98255774943600c3ad5901f">add_pillar</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.id, hjp.z() - endp.z());</div>
<div class="line"><span class="lineno">  978</span>    Pillar &amp;pill = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(pillar_id);</div>
<div class="line"><span class="lineno">  979</span> </div>
<div class="line"><span class="lineno">  980</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> taildir = endp - hitp;</div>
<div class="line"><span class="lineno">  981</span>    <span class="keywordtype">double</span> <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a> = (hitp - endp).norm() + <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ad10a5d307debda7615ac59b74cf54434">head_penetration_mm</a>;</div>
<div class="line"><span class="lineno">  982</span>    <span class="keywordtype">double</span> w = <a class="code hl_function" href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">dist</a> - 2 * <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_pin_mm - <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm;</div>
<div class="line"><span class="lineno">  983</span> </div>
<div class="line"><span class="lineno">  984</span>    <span class="keywordflow">if</span> (w &lt; 0.) {</div>
<div class="line"><span class="lineno">  985</span>        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; <span class="stringliteral">&quot;Pinhead width is negative!&quot;</span>;</div>
<div class="line"><span class="lineno">  986</span>        w = 0.;</div>
<div class="line"><span class="lineno">  987</span>    }</div>
<div class="line"><span class="lineno">  988</span> </div>
<div class="line"><span class="lineno">  989</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a60ba8a33efdba2138201545d5d686bf6">add_anchor</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm, <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_pin_mm, w,</div>
<div class="line"><span class="lineno">  990</span>                         <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ad10a5d307debda7615ac59b74cf54434">head_penetration_mm</a>, taildir, hitp);</div>
<div class="line"><span class="lineno">  991</span> </div>
<div class="line"><span class="lineno">  992</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a6c5f1c5f849ddd4541770f714b195c9a">guarded_insert</a>(pill.endpoint(), pill.id);</div>
<div class="line"><span class="lineno">  993</span> </div>
<div class="line"><span class="lineno">  994</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  995</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_indexed_mesh_html_a1252260eb1135d8be5ed478a8127c2a2"><div class="ttname"><a href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a1252260eb1135d8be5ed478a8127c2a2">Slic3r::sla::IndexedMesh::query_ray_hit</a></div><div class="ttdeci">hit_result query_ray_hit(const Vec3d &amp;s, const Vec3d &amp;dir) const</div><div class="ttdef"><b>Definition</b> IndexedMesh.cpp:146</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_pillar_index_html_a6c5f1c5f849ddd4541770f714b195c9a"><div class="ttname"><a href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a6c5f1c5f849ddd4541770f714b195c9a">Slic3r::sla::PillarIndex::guarded_insert</a></div><div class="ttdeci">void guarded_insert(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:126</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a60ba8a33efdba2138201545d5d686bf6"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a60ba8a33efdba2138201545d5d686bf6">Slic3r::sla::SupportTreeBuilder::add_anchor</a></div><div class="ttdeci">const Anchor &amp; add_anchor(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:297</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_adb344d88c98255774943600c3ad5901f"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#adb344d88c98255774943600c3ad5901f">Slic3r::sla::SupportTreeBuilder::add_pillar</a></div><div class="ttdeci">long add_pillar(long headid, double length)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:273</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_ae3ed5926f49bcb0701fa7866c7f22fbb"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">Slic3r::sla::SupportTreeBuilder::pillar</a></div><div class="ttdeci">IntegerOnly&lt; T, const Pillar &amp; &gt; pillar(T id) const</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:401</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_ae8192c1341f85e5be750beb22380837a"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">Slic3r::sla::SupportTreeBuildsteps::m_pillar_index</a></div><div class="ttdeci">PillarIndex m_pillar_index</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:220</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_geometry_html_a2b2112c1026a31e7c4c00693ca0bc2e2"><div class="ttname"><a href="../../d3/dfb/namespace_slic3r_1_1_geometry.html#a2b2112c1026a31e7c4c00693ca0bc2e2">Slic3r::Geometry::dist</a></div><div class="ttdeci">T dist(const boost::polygon::point_data&lt; T &gt; &amp;p1, const boost::polygon::point_data&lt; T &gt; &amp;p2)</div><div class="ttdef"><b>Definition</b> Geometry.cpp:287</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_ad10a5d307debda7615ac59b74cf54434"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ad10a5d307debda7615ac59b74cf54434">Slic3r::sla::SupportTreeConfig::head_penetration_mm</a></div><div class="ttdeci">double head_penetration_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:42</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_node_html_a76078addba57fd698274703ced05c0d3"><div class="ttname"><a href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">Slic3r::sla::SupportTreeNode::ID_UNSET</a></div><div class="ttdeci">static const constexpr long ID_UNSET</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:66</div></div>
<div class="ttc" id="axmlrole_8c_html_a2739afc9d7ed13e98e5e0c5b2e1f0428"><div class="ttname"><a href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a></div><div class="ttdeci">static PROLOG_HANDLER error</div><div class="ttdef"><b>Definition</b> xmlrole.c:109</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00150">Slic3r::sla::Pillar::endpoint()</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00919">head()</a>, <a class="el" href="../../#l00068">Slic3r::sla::SupportTreeNode::id</a>, <a class="el" href="../../#l00033">PI</a>, <a class="el" href="../../#l00116">Slic3r::X</a>, <a class="el" href="../../#l00117">Slic3r::Y</a>, and <a class="el" href="../../#l00118">Slic3r::Z</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a60b6b9d8b3c352e7870b72b5d52bf5a2_cgraph.svg" width="334" height="102"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="aa44f6227ade9ae0c62df804ed57a2ea9" name="aa44f6227ade9ae0c62df804ed57a2ea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa44f6227ade9ae0c62df804ed57a2ea9">&#9670;&#160;</a></span>connect_to_nearpillar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::connect_to_nearpillar </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;&#160;</td>
          <td class="paramname"><em>head</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d34/windows_8hpp.html#abc8f9f29715ddba51ee7f197feb6fd26">long</a>&#160;</td>
          <td class="paramname"><em>nearpillar_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  387</span>{</div>
<div class="line"><span class="lineno">  388</span>    <span class="keyword">auto</span> nearpillar = [<span class="keyword">this</span>, nearpillar_id]() -&gt; <span class="keyword">const</span> Pillar&amp; {</div>
<div class="line"><span class="lineno">  389</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(nearpillar_id);</div>
<div class="line"><span class="lineno">  390</span>    };</div>
<div class="line"><span class="lineno">  391</span> </div>
<div class="line"><span class="lineno">  392</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a94857c5648acbe10e789562b9778d67f">bridgecount</a>(nearpillar()) &gt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a07fd7cd4b86424405fa6a1eb5beed422">max_bridges_on_pillar</a>)</div>
<div class="line"><span class="lineno">  393</span>        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  394</span> </div>
<div class="line"><span class="lineno">  395</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> headjp = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.junction_point();</div>
<div class="line"><span class="lineno">  396</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> nearjp_u = nearpillar().startpoint();</div>
<div class="line"><span class="lineno">  397</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> nearjp_l = nearpillar().endpoint();</div>
<div class="line"><span class="lineno">  398</span> </div>
<div class="line"><span class="lineno">  399</span>    <span class="keywordtype">double</span> r = <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm;</div>
<div class="line"><span class="lineno">  400</span>    <span class="keywordtype">double</span> d2d = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ae5e4888782aec43d75be4ae861763437">to_2d</a>(headjp), <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ae5e4888782aec43d75be4ae861763437">to_2d</a>(nearjp_u));</div>
<div class="line"><span class="lineno">  401</span>    <span class="keywordtype">double</span> d3d = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(headjp, nearjp_u);</div>
<div class="line"><span class="lineno">  402</span> </div>
<div class="line"><span class="lineno">  403</span>    <span class="keywordtype">double</span> hdiff = nearjp_u(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - headjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>);</div>
<div class="line"><span class="lineno">  404</span>    <span class="keywordtype">double</span> slope = std::atan2(hdiff, d2d);</div>
<div class="line"><span class="lineno">  405</span> </div>
<div class="line"><span class="lineno">  406</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> bridgestart = headjp;</div>
<div class="line"><span class="lineno">  407</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> bridgeend = nearjp_u;</div>
<div class="line"><span class="lineno">  408</span>    <span class="keywordtype">double</span> max_len = r * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0c7dd6d1b6ab761e6bb8d29d3b3808e1">max_bridge_length_mm</a> / <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>;</div>
<div class="line"><span class="lineno">  409</span>    <span class="keywordtype">double</span> max_slope = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>;</div>
<div class="line"><span class="lineno">  410</span>    <span class="keywordtype">double</span> zdiff = 0.0;</div>
<div class="line"><span class="lineno">  411</span> </div>
<div class="line"><span class="lineno">  412</span>    <span class="comment">// check the default situation if feasible for a bridge</span></div>
<div class="line"><span class="lineno">  413</span>    <span class="keywordflow">if</span>(d3d &gt; max_len || slope &gt; -max_slope) {</div>
<div class="line"><span class="lineno">  414</span>        <span class="comment">// not feasible to connect the two head junctions. We have to search</span></div>
<div class="line"><span class="lineno">  415</span>        <span class="comment">// for a suitable touch point.</span></div>
<div class="line"><span class="lineno">  416</span> </div>
<div class="line"><span class="lineno">  417</span>        <span class="keywordtype">double</span> Zdown = headjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + d2d * std::tan(-max_slope);</div>
<div class="line"><span class="lineno">  418</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> touchjp = bridgeend; touchjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = Zdown;</div>
<div class="line"><span class="lineno">  419</span>        <span class="keywordtype">double</span> D = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(headjp, touchjp);</div>
<div class="line"><span class="lineno">  420</span>        zdiff = Zdown - nearjp_u(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>);</div>
<div class="line"><span class="lineno">  421</span> </div>
<div class="line"><span class="lineno">  422</span>        <span class="keywordflow">if</span>(zdiff &gt; 0) {</div>
<div class="line"><span class="lineno">  423</span>            Zdown -= zdiff;</div>
<div class="line"><span class="lineno">  424</span>            bridgestart(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) -= zdiff;</div>
<div class="line"><span class="lineno">  425</span>            touchjp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = Zdown;</div>
<div class="line"><span class="lineno">  426</span> </div>
<div class="line"><span class="lineno">  427</span>            <span class="keywordtype">double</span> t = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(headjp, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>, r);</div>
<div class="line"><span class="lineno">  428</span> </div>
<div class="line"><span class="lineno">  429</span>            <span class="comment">// We can&#39;t insert a pillar under the source head to connect</span></div>
<div class="line"><span class="lineno">  430</span>            <span class="comment">// with the nearby pillar&#39;s starting junction</span></div>
<div class="line"><span class="lineno">  431</span>            <span class="keywordflow">if</span>(t &lt; zdiff) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  432</span>        }</div>
<div class="line"><span class="lineno">  433</span> </div>
<div class="line"><span class="lineno">  434</span>        <span class="keywordflow">if</span>(Zdown &lt;= nearjp_u(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &amp;&amp; Zdown &gt;= nearjp_l(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &amp;&amp; D &lt; max_len)</div>
<div class="line"><span class="lineno">  435</span>            bridgeend(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = Zdown;</div>
<div class="line"><span class="lineno">  436</span>        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  437</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  438</span>    }</div>
<div class="line"><span class="lineno">  439</span> </div>
<div class="line"><span class="lineno">  440</span>    <span class="comment">// There will be a minimum distance from the ground where the</span></div>
<div class="line"><span class="lineno">  441</span>    <span class="comment">// bridge is allowed to connect. This is an empiric value.</span></div>
<div class="line"><span class="lineno">  442</span>    <span class="keywordtype">double</span> minz = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a> + 4 * <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.r_back_mm;</div>
<div class="line"><span class="lineno">  443</span>    <span class="keywordflow">if</span>(bridgeend(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt; minz) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  444</span> </div>
<div class="line"><span class="lineno">  445</span>    <span class="keywordtype">double</span> t = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(bridgestart, <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab04ac8a9f6e73d2d497b929c0a4deafd">dirv</a>(bridgestart, bridgeend), r);</div>
<div class="line"><span class="lineno">  446</span> </div>
<div class="line"><span class="lineno">  447</span>    <span class="comment">// Cannot insert the bridge. (further search might not worth the hassle)</span></div>
<div class="line"><span class="lineno">  448</span>    <span class="keywordflow">if</span>(t &lt; <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(bridgestart, bridgeend)) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  449</span> </div>
<div class="line"><span class="lineno">  450</span>    std::lock_guard&lt;ccr::BlockingMutex&gt; lk(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a6c78a487a0fb0a882deec660bb788ee8">m_bridge_mutex</a>);</div>
<div class="line"><span class="lineno">  451</span> </div>
<div class="line"><span class="lineno">  452</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a94857c5648acbe10e789562b9778d67f">bridgecount</a>(nearpillar()) &lt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a07fd7cd4b86424405fa6a1eb5beed422">max_bridges_on_pillar</a>) {</div>
<div class="line"><span class="lineno">  453</span>        <span class="comment">// A partial pillar is needed under the starting head.</span></div>
<div class="line"><span class="lineno">  454</span>        <span class="keywordflow">if</span>(zdiff &gt; 0) {</div>
<div class="line"><span class="lineno">  455</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#adb344d88c98255774943600c3ad5901f">add_pillar</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.id, headjp.z() - bridgestart.z());</div>
<div class="line"><span class="lineno">  456</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">add_junction</a>(bridgestart, r);</div>
<div class="line"><span class="lineno">  457</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a23976481a726809d6737abefa6c77f1b">add_bridge</a>(bridgestart, bridgeend, r);</div>
<div class="line"><span class="lineno">  458</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  459</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a23976481a726809d6737abefa6c77f1b">add_bridge</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.id, bridgeend);</div>
<div class="line"><span class="lineno">  460</span>        }</div>
<div class="line"><span class="lineno">  461</span> </div>
<div class="line"><span class="lineno">  462</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a58def42683c9fb1345be8355df3d8a64">increment_bridges</a>(nearpillar());</div>
<div class="line"><span class="lineno">  463</span>    } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  464</span> </div>
<div class="line"><span class="lineno">  465</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  466</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a52e5bfc7da77c57a7f2d558438750783"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">Slic3r::sla::SupportTreeBuilder::ground_level</a></div><div class="ttdeci">double ground_level</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:252</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a58def42683c9fb1345be8355df3d8a64"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a58def42683c9fb1345be8355df3d8a64">Slic3r::sla::SupportTreeBuilder::increment_bridges</a></div><div class="ttdeci">void increment_bridges(const Pillar &amp;pillar)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:306</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a94857c5648acbe10e789562b9778d67f"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a94857c5648acbe10e789562b9778d67f">Slic3r::sla::SupportTreeBuilder::bridgecount</a></div><div class="ttdeci">unsigned bridgecount(const Pillar &amp;pillar) const</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:324</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a6c78a487a0fb0a882deec660bb788ee8"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a6c78a487a0fb0a882deec660bb788ee8">Slic3r::sla::SupportTreeBuildsteps::m_bridge_mutex</a></div><div class="ttdeci">ccr::BlockingMutex m_bridge_mutex</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:223</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_ab04ac8a9f6e73d2d497b929c0a4deafd"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#ab04ac8a9f6e73d2d497b929c0a4deafd">Slic3r::sla::dirv</a></div><div class="ttdeci">Vec3d dirv(const Vec3d &amp;startp, const Vec3d &amp;endp)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:115</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00115">Slic3r::sla::dirv()</a>, <a class="el" href="../../#l00919">head()</a>, <a class="el" href="../../#l00112">Slic3r::to_2d()</a>, and <a class="el" href="../../#l00118">Slic3r::Z</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_aa44f6227ade9ae0c62df804ed57a2ea9_cgraph.svg" width="326" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="affea939f56a669f4102c8c423e190a8d" name="affea939f56a669f4102c8c423e190a8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affea939f56a669f4102c8c423e190a8d">&#9670;&#160;</a></span>create_ground_pillar()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::create_ground_pillar </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>jp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>sourcedir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d5/d34/windows_8hpp.html#abc8f9f29715ddba51ee7f197feb6fd26">long</a>&#160;</td>
          <td class="paramname"><em>head_id</em> = <code><a class="el" href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">SupportTreeNode::ID_UNSET</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  472</span>{</div>
<div class="line"><span class="lineno">  473</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>  jp           = hjp, endp = jp, dir = sourcedir;</div>
<div class="line"><span class="lineno">  474</span>    <span class="keywordtype">long</span>   pillar_id    = <a class="code hl_variable" href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">SupportTreeNode::ID_UNSET</a>;</div>
<div class="line"><span class="lineno">  475</span>    <span class="keywordtype">bool</span>   can_add_base = <span class="keyword">false</span>, non_head = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  476</span> </div>
<div class="line"><span class="lineno">  477</span>    <span class="keywordtype">double</span> gndlvl = 0.; <span class="comment">// The Z level where pedestals should be</span></div>
<div class="line"><span class="lineno">  478</span>    <span class="keywordtype">double</span> jp_gnd = 0.; <span class="comment">// The lowest Z where a junction center can be</span></div>
<div class="line"><span class="lineno">  479</span>    <span class="keywordtype">double</span> gap_dist = 0.; <span class="comment">// The gap distance between the model and the pad</span></div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>    <span class="keyword">auto</span> to_floor = [&amp;gndlvl](<span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;p) { <span class="keywordflow">return</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>{p.x(), p.y(), gndlvl}; };</div>
<div class="line"><span class="lineno">  482</span> </div>
<div class="line"><span class="lineno">  483</span>    <span class="keyword">auto</span> eval_limits = [<span class="keyword">this</span>, &amp;radius, &amp;can_add_base, &amp;gndlvl, &amp;gap_dist, &amp;jp_gnd]</div>
<div class="line"><span class="lineno">  484</span>        (<span class="keywordtype">bool</span> base_en = <span class="keyword">true</span>)</div>
<div class="line"><span class="lineno">  485</span>    {</div>
<div class="line"><span class="lineno">  486</span>        can_add_base  = base_en &amp;&amp; radius &gt;= <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>;</div>
<div class="line"><span class="lineno">  487</span>        <span class="keywordtype">double</span> base_r = can_add_base ? <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">base_radius_mm</a> : 0.;</div>
<div class="line"><span class="lineno">  488</span>        gndlvl        = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a>;</div>
<div class="line"><span class="lineno">  489</span>        <span class="keywordflow">if</span> (!can_add_base) gndlvl -= <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>.<a class="code hl_function" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#aa0c340005433e2f3109b3ce71efd0a6b">ground_level_offset</a>();</div>
<div class="line"><span class="lineno">  490</span>        jp_gnd   = gndlvl + (can_add_base ? 0. : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>);</div>
<div class="line"><span class="lineno">  491</span>        gap_dist = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aa8eff4efe264cff44de4347f95087f50">pillar_base_safety_distance_mm</a> + base_r + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno">  492</span>    };</div>
<div class="line"><span class="lineno">  493</span> </div>
<div class="line"><span class="lineno">  494</span>    eval_limits();</div>
<div class="line"><span class="lineno">  495</span> </div>
<div class="line"><span class="lineno">  496</span>    <span class="comment">// We are dealing with a mini pillar that&#39;s potentially too long</span></div>
<div class="line"><span class="lineno">  497</span>    <span class="keywordflow">if</span> (radius &lt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a> &amp;&amp; jp.z() - gndlvl &gt; 20 * radius)</div>
<div class="line"><span class="lineno">  498</span>    {</div>
<div class="line"><span class="lineno">  499</span>        std::optional&lt;DiffBridge&gt; diffbr =</div>
<div class="line"><span class="lineno">  500</span>            <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ad9c4122856fb75b9f670cdb74e5aa55d">search_widening_path</a>(jp, dir, radius, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>);</div>
<div class="line"><span class="lineno">  501</span> </div>
<div class="line"><span class="lineno">  502</span>        <span class="keywordflow">if</span> (diffbr &amp;&amp; diffbr-&gt;endp.z() &gt; jp_gnd) {</div>
<div class="line"><span class="lineno">  503</span>            <span class="keyword">auto</span> &amp;br = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#aee1ce4bce3630d49114cd78ef245dd22">add_diffbridge</a>(*diffbr);</div>
<div class="line"><span class="lineno">  504</span>            <span class="keywordflow">if</span> (head_id &gt;= 0) <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(head_id).<a class="code hl_variable" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html#a0cd60b0c7c548bf2c595d7fa46ff1c1b">bridge_id</a> = br.id;</div>
<div class="line"><span class="lineno">  505</span>            endp = diffbr-&gt;endp;</div>
<div class="line"><span class="lineno">  506</span>            radius = diffbr-&gt;end_r;</div>
<div class="line"><span class="lineno">  507</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">add_junction</a>(endp, radius);</div>
<div class="line"><span class="lineno">  508</span>            non_head = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  509</span>            dir = diffbr-&gt;get_dir();</div>
<div class="line"><span class="lineno">  510</span>            eval_limits();</div>
<div class="line"><span class="lineno">  511</span>        } <span class="keywordflow">else</span> <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  512</span>    }</div>
<div class="line"><span class="lineno">  513</span> </div>
<div class="line"><span class="lineno">  514</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a4719a17eb0d700db9bd8eb2e33d4c3a0">object_elevation_mm</a> &lt; <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>)</div>
<div class="line"><span class="lineno">  515</span>    {</div>
<div class="line"><span class="lineno">  516</span>        <span class="comment">// get a suitable direction for the corrector bridge. It is the</span></div>
<div class="line"><span class="lineno">  517</span>        <span class="comment">// original sourcedir&#39;s azimuth but the polar angle is saturated to the</span></div>
<div class="line"><span class="lineno">  518</span>        <span class="comment">// configured bridge slope.</span></div>
<div class="line"><span class="lineno">  519</span>        <span class="keyword">auto</span> [polar, azimuth] = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#acbe068093e1e77c258297899a2557961">dir_to_spheric</a>(dir);</div>
<div class="line"><span class="lineno">  520</span>        polar = <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>;</div>
<div class="line"><span class="lineno">  521</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a> = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(polar, azimuth).normalized();</div>
<div class="line"><span class="lineno">  522</span>        <span class="keywordtype">double</span> t = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(endp, d, radius);</div>
<div class="line"><span class="lineno">  523</span>        <span class="keywordtype">double</span> tmax = std::min(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0c7dd6d1b6ab761e6bb8d29d3b3808e1">max_bridge_length_mm</a>, t);</div>
<div class="line"><span class="lineno">  524</span>        t = 0.;</div>
<div class="line"><span class="lineno">  525</span> </div>
<div class="line"><span class="lineno">  526</span>        <span class="keywordtype">double</span> zd = endp.z() - jp_gnd;</div>
<div class="line"><span class="lineno">  527</span>        <span class="keywordtype">double</span> tmax2 = zd / std::sqrt(1 - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a> * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>);</div>
<div class="line"><span class="lineno">  528</span>        tmax = std::min(tmax, tmax2);</div>
<div class="line"><span class="lineno">  529</span> </div>
<div class="line"><span class="lineno">  530</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> nexp = endp;</div>
<div class="line"><span class="lineno">  531</span>        <span class="keywordtype">double</span> dlast = 0.;</div>
<div class="line"><span class="lineno">  532</span>        <span class="keywordflow">while</span> (((dlast = std::sqrt(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>.<a class="code hl_function" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a2a04cac4f6377dd553fd379b0c54c629">squared_distance</a>(to_floor(nexp)))) &lt; gap_dist ||</div>
<div class="line"><span class="lineno">  533</span>                !std::isinf(<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(nexp, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>, radius))) &amp;&amp; t &lt; tmax) {</div>
<div class="line"><span class="lineno">  534</span>            t += radius;</div>
<div class="line"><span class="lineno">  535</span>            nexp = endp + t * <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a>;</div>
<div class="line"><span class="lineno">  536</span>        }</div>
<div class="line"><span class="lineno">  537</span> </div>
<div class="line"><span class="lineno">  538</span>        <span class="keywordflow">if</span> (dlast &lt; gap_dist &amp;&amp; can_add_base) {</div>
<div class="line"><span class="lineno">  539</span>            nexp         = endp;</div>
<div class="line"><span class="lineno">  540</span>            t            = 0.;</div>
<div class="line"><span class="lineno">  541</span>            can_add_base = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  542</span>            eval_limits(can_add_base);</div>
<div class="line"><span class="lineno">  543</span> </div>
<div class="line"><span class="lineno">  544</span>            zd = endp.z() - jp_gnd;</div>
<div class="line"><span class="lineno">  545</span>            tmax2 = zd / std::sqrt(1 - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a> * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>);</div>
<div class="line"><span class="lineno">  546</span>            tmax = std::min(tmax, tmax2);</div>
<div class="line"><span class="lineno">  547</span> </div>
<div class="line"><span class="lineno">  548</span>            <span class="keywordflow">while</span> (((dlast = std::sqrt(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>.<a class="code hl_function" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a2a04cac4f6377dd553fd379b0c54c629">squared_distance</a>(to_floor(nexp)))) &lt; gap_dist ||</div>
<div class="line"><span class="lineno">  549</span>                    !std::isinf(<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(nexp, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>, radius))) &amp;&amp; t &lt; tmax) {</div>
<div class="line"><span class="lineno">  550</span>                t += radius;</div>
<div class="line"><span class="lineno">  551</span>                nexp = endp + t * <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a>;</div>
<div class="line"><span class="lineno">  552</span>            }</div>
<div class="line"><span class="lineno">  553</span>        }</div>
<div class="line"><span class="lineno">  554</span> </div>
<div class="line"><span class="lineno">  555</span>        <span class="comment">// Could not find a path to avoid the pad gap</span></div>
<div class="line"><span class="lineno">  556</span>        <span class="keywordflow">if</span> (dlast &lt; gap_dist) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  557</span> </div>
<div class="line"><span class="lineno">  558</span>        <span class="keywordflow">if</span> (t &gt; 0.) { <span class="comment">// Need to make additional bridge</span></div>
<div class="line"><span class="lineno">  559</span>            <span class="keyword">const</span> Bridge&amp; br = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a23976481a726809d6737abefa6c77f1b">add_bridge</a>(endp, nexp, radius);</div>
<div class="line"><span class="lineno">  560</span>            <span class="keywordflow">if</span> (head_id &gt;= 0) <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(head_id).<a class="code hl_variable" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html#a0cd60b0c7c548bf2c595d7fa46ff1c1b">bridge_id</a> = br.id;</div>
<div class="line"><span class="lineno">  561</span> </div>
<div class="line"><span class="lineno">  562</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">add_junction</a>(nexp, radius);</div>
<div class="line"><span class="lineno">  563</span>            endp = nexp;</div>
<div class="line"><span class="lineno">  564</span>            non_head = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  565</span>        }</div>
<div class="line"><span class="lineno">  566</span>    }</div>
<div class="line"><span class="lineno">  567</span> </div>
<div class="line"><span class="lineno">  568</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> gp = to_floor(endp);</div>
<div class="line"><span class="lineno">  569</span>    <span class="keywordtype">double</span> h = endp.z() - gp.z();</div>
<div class="line"><span class="lineno">  570</span> </div>
<div class="line"><span class="lineno">  571</span>    pillar_id = head_id &gt;= 0 &amp;&amp; !non_head ? <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#adb344d88c98255774943600c3ad5901f">add_pillar</a>(head_id, h) :</div>
<div class="line"><span class="lineno">  572</span>                                            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#adb344d88c98255774943600c3ad5901f">add_pillar</a>(gp, h, radius);</div>
<div class="line"><span class="lineno">  573</span> </div>
<div class="line"><span class="lineno">  574</span>    <span class="keywordflow">if</span> (can_add_base)</div>
<div class="line"><span class="lineno">  575</span>        <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abb20e43cb033181d2f27adf2b4e18338">add_pillar_base</a>(pillar_id);</div>
<div class="line"><span class="lineno">  576</span> </div>
<div class="line"><span class="lineno">  577</span>    <span class="keywordflow">if</span>(pillar_id &gt;= 0) <span class="comment">// Save the pillar endpoint in the spatial index</span></div>
<div class="line"><span class="lineno">  578</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a6c5f1c5f849ddd4541770f714b195c9a">guarded_insert</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(pillar_id).endpt,</div>
<div class="line"><span class="lineno">  579</span>                                      <span class="keywordtype">unsigned</span>(pillar_id));</div>
<div class="line"><span class="lineno">  580</span> </div>
<div class="line"><span class="lineno">  581</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  582</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_indexed_mesh_html_a2a04cac4f6377dd553fd379b0c54c629"><div class="ttname"><a href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a2a04cac4f6377dd553fd379b0c54c629">Slic3r::sla::IndexedMesh::squared_distance</a></div><div class="ttdeci">double squared_distance(const Vec3d &amp;p, int &amp;i, Vec3d &amp;c) const</div><div class="ttdef"><b>Definition</b> IndexedMesh.cpp:308</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_indexed_mesh_html_aa0c340005433e2f3109b3ce71efd0a6b"><div class="ttname"><a href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#aa0c340005433e2f3109b3ce71efd0a6b">Slic3r::sla::IndexedMesh::ground_level_offset</a></div><div class="ttdeci">void ground_level_offset(double o)</div><div class="ttdef"><b>Definition</b> IndexedMesh.hpp:63</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_aee1ce4bce3630d49114cd78ef245dd22"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#aee1ce4bce3630d49114cd78ef245dd22">Slic3r::sla::SupportTreeBuilder::add_diffbridge</a></div><div class="ttdeci">const DiffBridge &amp; add_diffbridge(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:377</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_abb20e43cb033181d2f27adf2b4e18338"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abb20e43cb033181d2f27adf2b4e18338">Slic3r::sla::SupportTreeBuildsteps::add_pillar_base</a></div><div class="ttdeci">void add_pillar_base(long pid)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:318</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_ad9c4122856fb75b9f670cdb74e5aa55d"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ad9c4122856fb75b9f670cdb74e5aa55d">Slic3r::sla::SupportTreeBuildsteps::search_widening_path</a></div><div class="ttdeci">std::optional&lt; DiffBridge &gt; search_widening_path(const Vec3d &amp;jp, const Vec3d &amp;dir, double radius, double new_radius)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:584</div></div>
<div class="ttc" id="alibslic3r_8h_html_a75f355966e0a97665eaf5a4c79baa7af"><div class="ttname"><a href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a></div><div class="ttdeci">static constexpr double EPSILON</div><div class="ttdef"><b>Definition</b> libslic3r.h:52</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_head_html_a0cd60b0c7c548bf2c595d7fa46ff1c1b"><div class="ttname"><a href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html#a0cd60b0c7c548bf2c595d7fa46ff1c1b">Slic3r::sla::Head::bridge_id</a></div><div class="ttdeci">long bridge_id</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:85</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a4719a17eb0d700db9bd8eb2e33d4c3a0"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a4719a17eb0d700db9bd8eb2e33d4c3a0">Slic3r::sla::SupportTreeConfig::object_elevation_mm</a></div><div class="ttdeci">double object_elevation_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:81</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_aa8eff4efe264cff44de4347f95087f50"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aa8eff4efe264cff44de4347f95087f50">Slic3r::sla::SupportTreeConfig::pillar_base_safety_distance_mm</a></div><div class="ttdeci">double pillar_base_safety_distance_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:85</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00023">Slic3r::sla::dir_to_spheric()</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00068">Slic3r::sla::SupportTreeNode::id</a>, <a class="el" href="../../#l00033">PI</a>, and <a class="el" href="../../#l00032">Slic3r::sla::spheric_to_dir()</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_affea939f56a669f4102c8c423e190a8d_cgraph.svg" width="360" height="118"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4f7afb78f6c8d2a6499b8be716c19b55" name="a4f7afb78f6c8d2a6499b8be716c19b55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f7afb78f6c8d2a6499b8be716c19b55">&#9670;&#160;</a></span>execute()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::execute </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html">SupportTreeBuilder</a> &amp;&#160;</td>
          <td class="paramname"><em>builder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../df/d9b/struct_slic3r_1_1sla_1_1_supportable_mesh.html">SupportableMesh</a> &amp;&#160;</td>
          <td class="paramname"><em>sm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   59</span>{</div>
<div class="line"><span class="lineno">   60</span>    <span class="keywordflow">if</span>(sm.pts.empty()) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">   61</span> </div>
<div class="line"><span class="lineno">   62</span>    builder.ground_level = sm.emesh.ground_level() - sm.cfg.object_elevation_mm;</div>
<div class="line"><span class="lineno">   63</span> </div>
<div class="line"><span class="lineno">   64</span>    <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4a0b47fd75cb0f739554d866d14e5447">SupportTreeBuildsteps</a> alg(builder, sm);</div>
<div class="line"><span class="lineno">   65</span> </div>
<div class="line"><span class="lineno">   66</span>    <span class="comment">// Let&#39;s define the individual steps of the processing. We can experiment</span></div>
<div class="line"><span class="lineno">   67</span>    <span class="comment">// later with the ordering and the dependencies between them.</span></div>
<div class="line"><span class="lineno">   68</span>    <span class="keyword">enum</span> Steps {</div>
<div class="line"><span class="lineno">   69</span>        BEGIN,</div>
<div class="line"><span class="lineno">   70</span>        FILTER,</div>
<div class="line"><span class="lineno">   71</span>        PINHEADS,</div>
<div class="line"><span class="lineno">   72</span>        CLASSIFY,</div>
<div class="line"><span class="lineno">   73</span>        ROUTING_GROUND,</div>
<div class="line"><span class="lineno">   74</span>        ROUTING_NONGROUND,</div>
<div class="line"><span class="lineno">   75</span>        CASCADE_PILLARS,</div>
<div class="line"><span class="lineno">   76</span>        MERGE_RESULT,</div>
<div class="line"><span class="lineno">   77</span>        DONE,</div>
<div class="line"><span class="lineno">   78</span>        ABORT,</div>
<div class="line"><span class="lineno">   79</span>        NUM_STEPS</div>
<div class="line"><span class="lineno">   80</span>        <span class="comment">//...</span></div>
<div class="line"><span class="lineno">   81</span>    };</div>
<div class="line"><span class="lineno">   82</span> </div>
<div class="line"><span class="lineno">   83</span>    <span class="comment">// Collect the algorithm steps into a nice sequence</span></div>
<div class="line"><span class="lineno">   84</span>    std::array&lt;std::function&lt;<a class="code hl_function" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>()&gt;, NUM_STEPS&gt; program = {</div>
<div class="line"><span class="lineno">   85</span>        [] () {</div>
<div class="line"><span class="lineno">   86</span>            <span class="comment">// Begin...</span></div>
<div class="line"><span class="lineno">   87</span>            <span class="comment">// Potentially clear up the shared data (not needed for now)</span></div>
<div class="line"><span class="lineno">   88</span>        },</div>
<div class="line"><span class="lineno">   89</span> </div>
<div class="line"><span class="lineno">   90</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a5fe2824654c1aa2b8a3f6909a8579177">SupportTreeBuildsteps::filter</a>, &amp;alg),</div>
<div class="line"><span class="lineno">   91</span> </div>
<div class="line"><span class="lineno">   92</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aaf6f1d5929c47943a2626b2f3ed547e0">SupportTreeBuildsteps::add_pinheads</a>, &amp;alg),</div>
<div class="line"><span class="lineno">   93</span> </div>
<div class="line"><span class="lineno">   94</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a21f5be749cbf77b69e503429141b78c6">SupportTreeBuildsteps::classify</a>, &amp;alg),</div>
<div class="line"><span class="lineno">   95</span> </div>
<div class="line"><span class="lineno">   96</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae4456eb60f6c57654454d75390ba579c">SupportTreeBuildsteps::routing_to_ground</a>, &amp;alg),</div>
<div class="line"><span class="lineno">   97</span> </div>
<div class="line"><span class="lineno">   98</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a053f73f35f3d4850ff72ed551f44872f">SupportTreeBuildsteps::routing_to_model</a>, &amp;alg),</div>
<div class="line"><span class="lineno">   99</span> </div>
<div class="line"><span class="lineno">  100</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4b098cd46a9f41781d92563153edd86d">SupportTreeBuildsteps::interconnect_pillars</a>, &amp;alg),</div>
<div class="line"><span class="lineno">  101</span> </div>
<div class="line"><span class="lineno">  102</span>        std::bind(&amp;<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a486f59078173aa766229f764e4f66360">SupportTreeBuildsteps::merge_result</a>, &amp;alg),</div>
<div class="line"><span class="lineno">  103</span> </div>
<div class="line"><span class="lineno">  104</span>        [] () {</div>
<div class="line"><span class="lineno">  105</span>            <span class="comment">// Done</span></div>
<div class="line"><span class="lineno">  106</span>        },</div>
<div class="line"><span class="lineno">  107</span> </div>
<div class="line"><span class="lineno">  108</span>        [] () {</div>
<div class="line"><span class="lineno">  109</span>            <span class="comment">// Abort</span></div>
<div class="line"><span class="lineno">  110</span>        }</div>
<div class="line"><span class="lineno">  111</span>    };</div>
<div class="line"><span class="lineno">  112</span> </div>
<div class="line"><span class="lineno">  113</span>    Steps pc = BEGIN;</div>
<div class="line"><span class="lineno">  114</span> </div>
<div class="line"><span class="lineno">  115</span>    <span class="keywordflow">if</span>(sm.cfg.ground_facing_only) {</div>
<div class="line"><span class="lineno">  116</span>        program[ROUTING_NONGROUND] = []() {</div>
<div class="line"><span class="lineno">  117</span>            BOOST_LOG_TRIVIAL(info)</div>
<div class="line"><span class="lineno">  118</span>                &lt;&lt; <span class="stringliteral">&quot;Skipping model-facing supports as requested.&quot;</span>;</div>
<div class="line"><span class="lineno">  119</span>        };</div>
<div class="line"><span class="lineno">  120</span>    }</div>
<div class="line"><span class="lineno">  121</span> </div>
<div class="line"><span class="lineno">  122</span>    <span class="comment">// Let&#39;s define a simple automaton that will run our program.</span></div>
<div class="line"><span class="lineno">  123</span>    <span class="keyword">auto</span> progress = [&amp;builder, &amp;pc] () {</div>
<div class="line"><span class="lineno">  124</span>        <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;std::string, NUM_STEPS&gt; stepstr {</div>
<div class="line"><span class="lineno">  125</span>            <span class="stringliteral">&quot;Starting&quot;</span>,</div>
<div class="line"><span class="lineno">  126</span>            <span class="stringliteral">&quot;Filtering&quot;</span>,</div>
<div class="line"><span class="lineno">  127</span>            <span class="stringliteral">&quot;Generate pinheads&quot;</span>,</div>
<div class="line"><span class="lineno">  128</span>            <span class="stringliteral">&quot;Classification&quot;</span>,</div>
<div class="line"><span class="lineno">  129</span>            <span class="stringliteral">&quot;Routing to ground&quot;</span>,</div>
<div class="line"><span class="lineno">  130</span>            <span class="stringliteral">&quot;Routing supports to model surface&quot;</span>,</div>
<div class="line"><span class="lineno">  131</span>            <span class="stringliteral">&quot;Interconnecting pillars&quot;</span>,</div>
<div class="line"><span class="lineno">  132</span>            <span class="stringliteral">&quot;Merging support mesh&quot;</span>,</div>
<div class="line"><span class="lineno">  133</span>            <span class="stringliteral">&quot;Done&quot;</span>,</div>
<div class="line"><span class="lineno">  134</span>            <span class="stringliteral">&quot;Abort&quot;</span></div>
<div class="line"><span class="lineno">  135</span>        };</div>
<div class="line"><span class="lineno">  136</span> </div>
<div class="line"><span class="lineno">  137</span>        <span class="keyword">static</span> <span class="keyword">const</span> std::array&lt;unsigned, NUM_STEPS&gt; stepstate {</div>
<div class="line"><span class="lineno">  138</span>            0,</div>
<div class="line"><span class="lineno">  139</span>            10,</div>
<div class="line"><span class="lineno">  140</span>            30,</div>
<div class="line"><span class="lineno">  141</span>            50,</div>
<div class="line"><span class="lineno">  142</span>            60,</div>
<div class="line"><span class="lineno">  143</span>            70,</div>
<div class="line"><span class="lineno">  144</span>            80,</div>
<div class="line"><span class="lineno">  145</span>            99,</div>
<div class="line"><span class="lineno">  146</span>            100,</div>
<div class="line"><span class="lineno">  147</span>            0</div>
<div class="line"><span class="lineno">  148</span>        };</div>
<div class="line"><span class="lineno">  149</span> </div>
<div class="line"><span class="lineno">  150</span>        <span class="keywordflow">if</span>(builder.ctl().stopcondition()) pc = ABORT;</div>
<div class="line"><span class="lineno">  151</span> </div>
<div class="line"><span class="lineno">  152</span>        <span class="keywordflow">switch</span>(pc) {</div>
<div class="line"><span class="lineno">  153</span>        <span class="keywordflow">case</span> BEGIN: pc = FILTER; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  154</span>        <span class="keywordflow">case</span> FILTER: pc = PINHEADS; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  155</span>        <span class="keywordflow">case</span> PINHEADS: pc = CLASSIFY; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  156</span>        <span class="keywordflow">case</span> CLASSIFY: pc = ROUTING_GROUND; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  157</span>        <span class="keywordflow">case</span> ROUTING_GROUND: pc = ROUTING_NONGROUND; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  158</span>        <span class="keywordflow">case</span> ROUTING_NONGROUND: pc = CASCADE_PILLARS; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  159</span>        <span class="keywordflow">case</span> CASCADE_PILLARS: pc = MERGE_RESULT; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  160</span>        <span class="keywordflow">case</span> MERGE_RESULT: pc = DONE; <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  161</span>        <span class="keywordflow">case</span> DONE:</div>
<div class="line"><span class="lineno">  162</span>        <span class="keywordflow">case</span> ABORT: <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  163</span>        <span class="keywordflow">default</span>: ;</div>
<div class="line"><span class="lineno">  164</span>        }</div>
<div class="line"><span class="lineno">  165</span> </div>
<div class="line"><span class="lineno">  166</span>        builder.ctl().statuscb(stepstate[pc], stepstr[pc]);</div>
<div class="line"><span class="lineno">  167</span>    };</div>
<div class="line"><span class="lineno">  168</span> </div>
<div class="line"><span class="lineno">  169</span>    <span class="comment">// Just here we run the computation...</span></div>
<div class="line"><span class="lineno">  170</span>    <span class="keywordflow">while</span>(pc &lt; DONE) {</div>
<div class="line"><span class="lineno">  171</span>        progress();</div>
<div class="line"><span class="lineno">  172</span>        program[pc]();</div>
<div class="line"><span class="lineno">  173</span>    }</div>
<div class="line"><span class="lineno">  174</span> </div>
<div class="line"><span class="lineno">  175</span>    <span class="keywordflow">return</span> pc == ABORT;</div>
<div class="line"><span class="lineno">  176</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a053f73f35f3d4850ff72ed551f44872f"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a053f73f35f3d4850ff72ed551f44872f">Slic3r::sla::SupportTreeBuildsteps::routing_to_model</a></div><div class="ttdeci">void routing_to_model()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:1034</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a21f5be749cbf77b69e503429141b78c6"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a21f5be749cbf77b69e503429141b78c6">Slic3r::sla::SupportTreeBuildsteps::classify</a></div><div class="ttdeci">void classify()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:769</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a486f59078173aa766229f764e4f66360"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a486f59078173aa766229f764e4f66360">Slic3r::sla::SupportTreeBuildsteps::merge_result</a></div><div class="ttdeci">void merge_result()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:370</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a4a0b47fd75cb0f739554d866d14e5447"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4a0b47fd75cb0f739554d866d14e5447">Slic3r::sla::SupportTreeBuildsteps::SupportTreeBuildsteps</a></div><div class="ttdeci">SupportTreeBuildsteps(SupportTreeBuilder &amp;builder, const SupportableMesh &amp;sm)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:35</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a4b098cd46a9f41781d92563153edd86d"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a4b098cd46a9f41781d92563153edd86d">Slic3r::sla::SupportTreeBuildsteps::interconnect_pillars</a></div><div class="ttdeci">void interconnect_pillars()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:1064</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a5fe2824654c1aa2b8a3f6909a8579177"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a5fe2824654c1aa2b8a3f6909a8579177">Slic3r::sla::SupportTreeBuildsteps::filter</a></div><div class="ttdeci">void filter()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:629</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_aaf6f1d5929c47943a2626b2f3ed547e0"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aaf6f1d5929c47943a2626b2f3ed547e0">Slic3r::sla::SupportTreeBuildsteps::add_pinheads</a></div><div class="ttdeci">void add_pinheads()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:765</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_ae4456eb60f6c57654454d75390ba579c"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae4456eb60f6c57654454d75390ba579c">Slic3r::sla::SupportTreeBuildsteps::routing_to_ground</a></div><div class="ttdeci">void routing_to_ground()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:818</div></div>
<div class="ttc" id="aglu-libtess_8h_html_a4292190e3f1f6b373a760c7d9316ad3c"><div class="ttname"><a href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a></div><div class="ttdeci">typedef void(GLAPIENTRYP _GLUfuncptr)(void)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00765">add_pinheads()</a>, <a class="el" href="../../#l00124">Slic3r::sla::SupportableMesh::cfg</a>, <a class="el" href="../../#l00769">classify()</a>, <a class="el" href="../../#l00169">Slic3r::sla::SupportTree::ctl()</a>, <a class="el" href="../../#l00122">Slic3r::sla::SupportableMesh::emesh</a>, <a class="el" href="../../#l00629">filter()</a>, <a class="el" href="../../#l00056">Slic3r::sla::SupportTreeConfig::ground_facing_only</a>, <a class="el" href="../../#l00062">Slic3r::sla::IndexedMesh::ground_level()</a>, <a class="el" href="../../#l00252">Slic3r::sla::SupportTreeBuilder::ground_level</a>, <a class="el" href="../../#l01064">interconnect_pillars()</a>, <a class="el" href="../../#l00370">merge_result()</a>, <a class="el" href="../../#l00081">Slic3r::sla::SupportTreeConfig::object_elevation_mm</a>, <a class="el" href="../../#l00123">Slic3r::sla::SupportableMesh::pts</a>, <a class="el" href="../../#l00818">routing_to_ground()</a>, <a class="el" href="../../#l01034">routing_to_model()</a>, <a class="el" href="../../#l00018">Slic3r::sla::JobController::statuscb</a>, <a class="el" href="../../#l00021">Slic3r::sla::JobController::stopcondition</a>, and <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00080">Slic3r::sla::SupportTree::create()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a4f7afb78f6c8d2a6499b8be716c19b55_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a4f7afb78f6c8d2a6499b8be716c19b55_icgraph.svg" width="576" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a5fe2824654c1aa2b8a3f6909a8579177" name="a5fe2824654c1aa2b8a3f6909a8579177"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5fe2824654c1aa2b8a3f6909a8579177">&#9670;&#160;</a></span>filter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::filter </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  630</span>{</div>
<div class="line"><span class="lineno">  631</span>    <span class="comment">// Get the points that are too close to each other and keep only the</span></div>
<div class="line"><span class="lineno">  632</span>    <span class="comment">// first one</span></div>
<div class="line"><span class="lineno">  633</span>    <span class="keyword">auto</span> aliases = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a11c5880b41bdccb74b532b3a46e7e66a">cluster</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#a8e2aa33e60d49256aadb266dca37fef1">D_SP</a>, 2);</div>
<div class="line"><span class="lineno">  634</span> </div>
<div class="line"><span class="lineno">  635</span>    <a class="code hl_typedef" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> filtered_indices;</div>
<div class="line"><span class="lineno">  636</span>    filtered_indices.reserve(aliases.size());</div>
<div class="line"><span class="lineno">  637</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">m_iheads</a>.reserve(aliases.size());</div>
<div class="line"><span class="lineno">  638</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a5a4ab81942d146088a49028ac306bc25">m_iheadless</a>.reserve(aliases.size());</div>
<div class="line"><span class="lineno">  639</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; a : aliases) {</div>
<div class="line"><span class="lineno">  640</span>        <span class="comment">// Here we keep only the front point of the cluster.</span></div>
<div class="line"><span class="lineno">  641</span>        filtered_indices.emplace_back(<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a>.front());</div>
<div class="line"><span class="lineno">  642</span>    }</div>
<div class="line"><span class="lineno">  643</span> </div>
<div class="line"><span class="lineno">  644</span>    <span class="comment">// calculate the normals to the triangles for filtered points</span></div>
<div class="line"><span class="lineno">  645</span>    <span class="keyword">auto</span> nmls = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aca74c6f3de3536e981773b3e8782a2ba">sla::normals</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ac28ffc139e12ef4ed5b515b1800ffa4c">head_front_radius_mm</a>,</div>
<div class="line"><span class="lineno">  646</span>                             <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>, filtered_indices);</div>
<div class="line"><span class="lineno">  647</span> </div>
<div class="line"><span class="lineno">  648</span>    <span class="comment">// Not all of the support points have to be a valid position for</span></div>
<div class="line"><span class="lineno">  649</span>    <span class="comment">// support creation. The angle may be inappropriate or there may</span></div>
<div class="line"><span class="lineno">  650</span>    <span class="comment">// not be enough space for the pinhead. Filtering is applied for</span></div>
<div class="line"><span class="lineno">  651</span>    <span class="comment">// these reasons.</span></div>
<div class="line"><span class="lineno">  652</span> </div>
<div class="line"><span class="lineno">  653</span>    std::vector&lt;Head&gt; heads; heads.reserve(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">m_support_pts</a>.size());</div>
<div class="line"><span class="lineno">  654</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> SupportPoint &amp;sp : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">m_support_pts</a>) {</div>
<div class="line"><span class="lineno">  655</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  656</span>        heads.emplace_back(</div>
<div class="line"><span class="lineno">  657</span>            std::nan(<span class="stringliteral">&quot;&quot;</span>),</div>
<div class="line"><span class="lineno">  658</span>            sp.head_front_radius,</div>
<div class="line"><span class="lineno">  659</span>            0.,</div>
<div class="line"><span class="lineno">  660</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ad10a5d307debda7615ac59b74cf54434">head_penetration_mm</a>,</div>
<div class="line"><span class="lineno">  661</span>            Vec3d::Zero(),         <span class="comment">// dir</span></div>
<div class="line"><span class="lineno">  662</span>            sp.pos.cast&lt;<span class="keywordtype">double</span>&gt;() <span class="comment">// displacement</span></div>
<div class="line"><span class="lineno">  663</span>            );</div>
<div class="line"><span class="lineno">  664</span>    }</div>
<div class="line"><span class="lineno">  665</span> </div>
<div class="line"><span class="lineno">  666</span>    std::function&lt;<a class="code hl_function" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>(<span class="keywordtype">unsigned</span>, <span class="keywordtype">size_t</span>, <span class="keywordtype">double</span>)&gt; filterfn;</div>
<div class="line"><span class="lineno">  667</span>    filterfn = [<span class="keyword">this</span>, &amp;nmls, &amp;heads, &amp;filterfn](<span class="keywordtype">unsigned</span> fidx, <span class="keywordtype">size_t</span> i, <span class="keywordtype">double</span> back_r) {</div>
<div class="line"><span class="lineno">  668</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  669</span> </div>
<div class="line"><span class="lineno">  670</span>        <span class="keyword">auto</span> <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> = nmls.row(<a class="code hl_typedef" href="../../d0/da5/namespace_eigen.html#a62e77e0933482dafde8fe197d9a2cfde">Eigen::Index</a>(i));</div>
<div class="line"><span class="lineno">  671</span> </div>
<div class="line"><span class="lineno">  672</span>        <span class="comment">// for all normals we generate the spherical coordinates and</span></div>
<div class="line"><span class="lineno">  673</span>        <span class="comment">// saturate the polar angle to 45 degrees from the bottom then</span></div>
<div class="line"><span class="lineno">  674</span>        <span class="comment">// convert back to standard coordinates to get the new normal.</span></div>
<div class="line"><span class="lineno">  675</span>        <span class="comment">// Then we just create a quaternion from the two normals</span></div>
<div class="line"><span class="lineno">  676</span>        <span class="comment">// (Quaternion::FromTwoVectors) and apply the rotation to the</span></div>
<div class="line"><span class="lineno">  677</span>        <span class="comment">// arrow head.</span></div>
<div class="line"><span class="lineno">  678</span> </div>
<div class="line"><span class="lineno">  679</span>        <span class="keyword">auto</span> [polar, azimuth] = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#acbe068093e1e77c258297899a2557961">dir_to_spheric</a>(<a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>);</div>
<div class="line"><span class="lineno">  680</span> </div>
<div class="line"><span class="lineno">  681</span>        <span class="comment">// skip if the tilt is not sane</span></div>
<div class="line"><span class="lineno">  682</span>        <span class="keywordflow">if</span> (polar &lt; <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19d9f8e91150b93dff3e90be756af0be">normal_cutoff_angle</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno">  683</span> </div>
<div class="line"><span class="lineno">  684</span>        <span class="comment">// We saturate the polar angle to 3pi/4</span></div>
<div class="line"><span class="lineno">  685</span>        polar = std::max(polar, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>);</div>
<div class="line"><span class="lineno">  686</span> </div>
<div class="line"><span class="lineno">  687</span>        <span class="comment">// save the head (pinpoint) position</span></div>
<div class="line"><span class="lineno">  688</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> hp = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>.row(fidx);</div>
<div class="line"><span class="lineno">  689</span> </div>
<div class="line"><span class="lineno">  690</span>        <span class="keywordtype">double</span> lmin = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aef9c770499b2340c9f75a00c40ec56b2">head_width_mm</a>, lmax = lmin;</div>
<div class="line"><span class="lineno">  691</span> </div>
<div class="line"><span class="lineno">  692</span>        <span class="keywordflow">if</span> (back_r &lt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>) {</div>
<div class="line"><span class="lineno">  693</span>            lmin = 0., lmax = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ad10a5d307debda7615ac59b74cf54434">head_penetration_mm</a>;</div>
<div class="line"><span class="lineno">  694</span>        }</div>
<div class="line"><span class="lineno">  695</span> </div>
<div class="line"><span class="lineno">  696</span>        <span class="comment">// The distance needed for a pinhead to not collide with model.</span></div>
<div class="line"><span class="lineno">  697</span>        <span class="keywordtype">double</span> w = lmin + 2 * back_r + 2 * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ac28ffc139e12ef4ed5b515b1800ffa4c">head_front_radius_mm</a> -</div>
<div class="line"><span class="lineno">  698</span>                   <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ad10a5d307debda7615ac59b74cf54434">head_penetration_mm</a>;</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordtype">double</span> pin_r = double(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abbdde1207bdfb8c15838b4f763ffdd49">m_support_pts</a>[fidx].head_front_radius);</div>
<div class="line"><span class="lineno">  701</span> </div>
<div class="line"><span class="lineno">  702</span>        <span class="comment">// Reassemble the now corrected normal</span></div>
<div class="line"><span class="lineno">  703</span>        <span class="keyword">auto</span> nn = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(polar, azimuth).normalized();</div>
<div class="line"><span class="lineno">  704</span> </div>
<div class="line"><span class="lineno">  705</span>        <span class="comment">// check available distance</span></div>
<div class="line"><span class="lineno">  706</span>        IndexedMesh::hit_result t = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a43adf44601f52bed5173092f6ed257bf">pinhead_mesh_intersect</a>(hp, nn, pin_r,</div>
<div class="line"><span class="lineno">  707</span>                                                           back_r, w);</div>
<div class="line"><span class="lineno">  708</span> </div>
<div class="line"><span class="lineno">  709</span>        <span class="keywordflow">if</span> (t.distance() &lt; w) {</div>
<div class="line"><span class="lineno">  710</span>            <span class="comment">// Let&#39;s try to optimize this angle, there might be a</span></div>
<div class="line"><span class="lineno">  711</span>            <span class="comment">// viable normal that doesn&#39;t collide with the model</span></div>
<div class="line"><span class="lineno">  712</span>            <span class="comment">// geometry and its very close to the default.</span></div>
<div class="line"><span class="lineno">  713</span> </div>
<div class="line"><span class="lineno">  714</span>            Optimizer&lt;AlgNLoptGenetic&gt; solver(<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ac95d11abfe682f14a45bf0aaa9f022fa">get_criteria</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>));</div>
<div class="line"><span class="lineno">  715</span>            solver.seed(0); <span class="comment">// we want deterministic behavior</span></div>
<div class="line"><span class="lineno">  716</span> </div>
<div class="line"><span class="lineno">  717</span>            <span class="keyword">auto</span> oresult = solver.to_max().optimize(</div>
<div class="line"><span class="lineno">  718</span>                [<span class="keyword">this</span>, pin_r, back_r, hp](<span class="keyword">const</span> opt::Input&lt;3&gt; &amp;input)</div>
<div class="line"><span class="lineno">  719</span>                {</div>
<div class="line"><span class="lineno">  720</span>                    <span class="keyword">auto</span> &amp;[plr, azm, l] = input;</div>
<div class="line"><span class="lineno">  721</span> </div>
<div class="line"><span class="lineno">  722</span>                    <span class="keyword">auto</span> dir = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(plr, azm).normalized();</div>
<div class="line"><span class="lineno">  723</span> </div>
<div class="line"><span class="lineno">  724</span>                    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a43adf44601f52bed5173092f6ed257bf">pinhead_mesh_intersect</a>(</div>
<div class="line"><span class="lineno">  725</span>                        hp, dir, pin_r, back_r, l).<a class="code hl_function" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html#a136a76c5c42f0ca1c119bf18719c5ff4">distance</a>();</div>
<div class="line"><span class="lineno">  726</span>                },</div>
<div class="line"><span class="lineno">  727</span>                <a class="code hl_function" href="../../db/dc1/namespacelibnest2d_1_1opt.html#acbcb2d5b28f92a5b9a2a0e77c10e3daf">initvals</a>({polar, azimuth, (lmin + lmax) / 2.}), <span class="comment">// start with what we have</span></div>
<div class="line"><span class="lineno">  728</span>                <a class="code hl_function" href="../../d8/d86/namespace_slic3r_1_1opt.html#ad9b818b6999367924c5dcf86a940c2f4">bounds</a>({</div>
<div class="line"><span class="lineno">  729</span>                    {<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>},    <span class="comment">// Must not exceed the slope limit</span></div>
<div class="line"><span class="lineno">  730</span>                    {-<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>}, <span class="comment">// azimuth can be a full search</span></div>
<div class="line"><span class="lineno">  731</span>                    {lmin, lmax}</div>
<div class="line"><span class="lineno">  732</span>                }));</div>
<div class="line"><span class="lineno">  733</span> </div>
<div class="line"><span class="lineno">  734</span>            <span class="keywordflow">if</span>(oresult.score &gt; w) {</div>
<div class="line"><span class="lineno">  735</span>                polar = std::get&lt;0&gt;(oresult.optimum);</div>
<div class="line"><span class="lineno">  736</span>                azimuth = std::get&lt;1&gt;(oresult.optimum);</div>
<div class="line"><span class="lineno">  737</span>                nn = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(polar, azimuth).normalized();</div>
<div class="line"><span class="lineno">  738</span>                lmin = std::get&lt;2&gt;(oresult.optimum);</div>
<div class="line"><span class="lineno">  739</span>                t = IndexedMesh::hit_result(oresult.score);</div>
<div class="line"><span class="lineno">  740</span>            }</div>
<div class="line"><span class="lineno">  741</span>        }</div>
<div class="line"><span class="lineno">  742</span> </div>
<div class="line"><span class="lineno">  743</span>        <span class="keywordflow">if</span> (t.distance() &gt; w &amp;&amp; hp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + w * nn(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &gt;= <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a>) {</div>
<div class="line"><span class="lineno">  744</span>            Head &amp;h = heads[fidx];</div>
<div class="line"><span class="lineno">  745</span>            h.id = fidx; h.dir = nn; h.width_mm = lmin; h.r_back_mm = back_r;</div>
<div class="line"><span class="lineno">  746</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (back_r &gt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#af17596cc20d49a9037865f48ae78d44e">head_fallback_radius_mm</a>) {</div>
<div class="line"><span class="lineno">  747</span>            filterfn(fidx, i, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#af17596cc20d49a9037865f48ae78d44e">head_fallback_radius_mm</a>);</div>
<div class="line"><span class="lineno">  748</span>        }</div>
<div class="line"><span class="lineno">  749</span>    };</div>
<div class="line"><span class="lineno">  750</span> </div>
<div class="line"><span class="lineno">  751</span>    ccr::for_each(<span class="keywordtype">size_t</span>(0), filtered_indices.size(),</div>
<div class="line"><span class="lineno">  752</span>                  [<span class="keyword">this</span>, &amp;filterfn, &amp;filtered_indices] (<span class="keywordtype">size_t</span> i) {</div>
<div class="line"><span class="lineno">  753</span>                      filterfn(filtered_indices[i], i, m_cfg.head_back_radius_mm);</div>
<div class="line"><span class="lineno">  754</span>                  });</div>
<div class="line"><span class="lineno">  755</span> </div>
<div class="line"><span class="lineno">  756</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; heads.size(); ++i)</div>
<div class="line"><span class="lineno">  757</span>        <span class="keywordflow">if</span> (heads[i].is_valid()) {</div>
<div class="line"><span class="lineno">  758</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#af350fc6b6f247b8151ee6ed97820c3a9">add_head</a>(i, heads[i]);</div>
<div class="line"><span class="lineno">  759</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a57666ed03914acce2131d80dc93aa1bb">m_iheads</a>.emplace_back(i);</div>
<div class="line"><span class="lineno">  760</span>        }</div>
<div class="line"><span class="lineno">  761</span> </div>
<div class="line"><span class="lineno">  762</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  763</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_af350fc6b6f247b8151ee6ed97820c3a9"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#af350fc6b6f247b8151ee6ed97820c3a9">Slic3r::sla::SupportTreeBuilder::add_head</a></div><div class="ttdeci">Head &amp; add_head(unsigned id, Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:260</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a43adf44601f52bed5173092f6ed257bf"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a43adf44601f52bed5173092f6ed257bf">Slic3r::sla::SupportTreeBuildsteps::pinhead_mesh_intersect</a></div><div class="ttdeci">IndexedMesh::hit_result pinhead_mesh_intersect(const Vec3d &amp;s, const Vec3d &amp;dir, double r_pin, double r_back, double width, double safety_d)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:178</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a5a4ab81942d146088a49028ac306bc25"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a5a4ab81942d146088a49028ac306bc25">Slic3r::sla::SupportTreeBuildsteps::m_iheadless</a></div><div class="ttdeci">PtIndices m_iheadless</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:197</div></div>
<div class="ttc" id="anamespace_eigen_html_a62e77e0933482dafde8fe197d9a2cfde"><div class="ttname"><a href="../../d0/da5/namespace_eigen.html#a62e77e0933482dafde8fe197d9a2cfde">Eigen::Index</a></div><div class="ttdeci">EIGEN_DEFAULT_DENSE_INDEX_TYPE Index</div><div class="ttdoc">The Index type as used for the API.</div><div class="ttdef"><b>Definition</b> Meta.h:33</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a8e2aa33e60d49256aadb266dca37fef1"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a8e2aa33e60d49256aadb266dca37fef1">Slic3r::sla::D_SP</a></div><div class="ttdeci">const double D_SP</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:15</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_aca74c6f3de3536e981773b3e8782a2ba"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#aca74c6f3de3536e981773b3e8782a2ba">Slic3r::sla::normals</a></div><div class="ttdeci">PointSet normals(const PointSet &amp;points, const IndexedMesh &amp;mesh, double eps, std::function&lt; void()&gt; thr, const std::vector&lt; unsigned &gt; &amp;pt_indices)</div><div class="ttdef"><b>Definition</b> IndexedMesh.cpp:328</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">marchsq::__impl::SquareTag::a</a></div><div class="ttdeci">@ a</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a19d9f8e91150b93dff3e90be756af0be"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19d9f8e91150b93dff3e90be756af0be">Slic3r::sla::SupportTreeConfig::normal_cutoff_angle</a></div><div class="ttdeci">static const double constexpr normal_cutoff_angle</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:99</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_ac28ffc139e12ef4ed5b515b1800ffa4c"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ac28ffc139e12ef4ed5b515b1800ffa4c">Slic3r::sla::SupportTreeConfig::head_front_radius_mm</a></div><div class="ttdeci">double head_front_radius_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:39</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_aef9c770499b2340c9f75a00c40ec56b2"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aef9c770499b2340c9f75a00c40ec56b2">Slic3r::sla::SupportTreeConfig::head_width_mm</a></div><div class="ttdeci">double head_width_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:50</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_af17596cc20d49a9037865f48ae78d44e"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#af17596cc20d49a9037865f48ae78d44e">Slic3r::sla::SupportTreeConfig::head_fallback_radius_mm</a></div><div class="ttdeci">double head_fallback_radius_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:47</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00015">Slic3r::sla::D_SP</a>, <a class="el" href="../../#l00073">Slic3r::sla::Head::dir</a>, <a class="el" href="../../#l00023">Slic3r::sla::dir_to_spheric()</a>, <a class="el" href="../../#l00091">Slic3r::sla::IndexedMesh::hit_result::distance()</a>, <a class="el" href="../../#l00017">Slic3r::sla::get_criteria()</a>, <a class="el" href="../../#l00068">Slic3r::sla::SupportTreeNode::id</a>, <a class="el" href="../../#l00162">n</a>, <a class="el" href="../../#l00147">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::optimize()</a>, <a class="el" href="../../#l00033">PI</a>, <a class="el" href="../../#l00076">Slic3r::sla::Head::r_back_mm</a>, <a class="el" href="../../#l00152">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::seed()</a>, <a class="el" href="../../#l00032">Slic3r::sla::spheric_to_dir()</a>, <a class="el" href="../../#l00124">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::to_max()</a>, <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void()</a>, <a class="el" href="../../#l00078">Slic3r::sla::Head::width_mm</a>, and <a class="el" href="../../#l00118">Slic3r::Z</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a5fe2824654c1aa2b8a3f6909a8579177_cgraph.svg" width="588" height="478"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a5fe2824654c1aa2b8a3f6909a8579177_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a76849559a236c50dd61f7ffb9196624b" name="a76849559a236c50dd61f7ffb9196624b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76849559a236c50dd61f7ffb9196624b">&#9670;&#160;</a></span>interconnect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::interconnect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d22/struct_slic3r_1_1sla_1_1_pillar.html">Pillar</a> &amp;&#160;</td>
          <td class="paramname"><em>pillar</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d22/struct_slic3r_1_1sla_1_1_pillar.html">Pillar</a> &amp;&#160;</td>
          <td class="paramname"><em>nextpillar</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  294</span>{</div>
<div class="line"><span class="lineno">  295</span>    <span class="comment">// We need to get the starting point of the zig-zag pattern. We have to</span></div>
<div class="line"><span class="lineno">  296</span>    <span class="comment">// be aware that the two head junctions are at different heights. We</span></div>
<div class="line"><span class="lineno">  297</span>    <span class="comment">// may start from the lowest junction and call it a day but this</span></div>
<div class="line"><span class="lineno">  298</span>    <span class="comment">// strategy would leave unconnected a lot of pillar duos where the</span></div>
<div class="line"><span class="lineno">  299</span>    <span class="comment">// shorter pillar is too short to start a new bridge but the taller</span></div>
<div class="line"><span class="lineno">  300</span>    <span class="comment">// pillar could still be bridged with the shorter one.</span></div>
<div class="line"><span class="lineno">  301</span>    <span class="keywordtype">bool</span> was_connected = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  302</span> </div>
<div class="line"><span class="lineno">  303</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> supper = pillar.startpoint();</div>
<div class="line"><span class="lineno">  304</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> slower = nextpillar.startpoint();</div>
<div class="line"><span class="lineno">  305</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> eupper = pillar.endpoint();</div>
<div class="line"><span class="lineno">  306</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> elower = nextpillar.endpoint();</div>
<div class="line"><span class="lineno">  307</span> </div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7abaca913d02bce2f4a9b78d5884f9a8f7">zmin</a> = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a> + <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a3f463807b0288b56e397262ecbb1b433">base_height_mm</a>;</div>
<div class="line"><span class="lineno">  309</span>    eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = std::max(eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>), <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7abaca913d02bce2f4a9b78d5884f9a8f7">zmin</a>);</div>
<div class="line"><span class="lineno">  310</span>    elower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = std::max(elower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>), <a class="code hl_enumvalue" href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7abaca913d02bce2f4a9b78d5884f9a8f7">zmin</a>);</div>
<div class="line"><span class="lineno">  311</span> </div>
<div class="line"><span class="lineno">  312</span>    <span class="comment">// The usable length of both pillars should be positive</span></div>
<div class="line"><span class="lineno">  313</span>    <span class="keywordflow">if</span>(slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - elower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt; 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  314</span>    <span class="keywordflow">if</span>(supper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt; 0) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  315</span> </div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordtype">double</span> pillar_dist = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>{slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>)},</div>
<div class="line"><span class="lineno">  317</span>                                  <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>{supper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), supper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>)});</div>
<div class="line"><span class="lineno">  318</span>    <span class="keywordtype">double</span> bridge_distance = pillar_dist / std::cos(-<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>);</div>
<div class="line"><span class="lineno">  319</span>    <span class="keywordtype">double</span> zstep = pillar_dist * std::tan(-<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>);</div>
<div class="line"><span class="lineno">  320</span> </div>
<div class="line"><span class="lineno">  321</span>    <span class="keywordflow">if</span>(pillar_dist &lt; 2 * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a> ||</div>
<div class="line"><span class="lineno">  322</span>        pillar_dist &gt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#af81c7c272736d1079d33da417a4029e8">max_pillar_link_distance_mm</a>) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  323</span> </div>
<div class="line"><span class="lineno">  324</span>    <span class="keywordflow">if</span>(supper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt; slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>)) supper.swap(slower);</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">if</span>(eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt; elower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>)) eupper.swap(elower);</div>
<div class="line"><span class="lineno">  326</span> </div>
<div class="line"><span class="lineno">  327</span>    <span class="keywordtype">double</span> startz = 0, endz = 0;</div>
<div class="line"><span class="lineno">  328</span> </div>
<div class="line"><span class="lineno">  329</span>    startz = slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - zstep &lt; supper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) ? slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - zstep : slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>);</div>
<div class="line"><span class="lineno">  330</span>    endz = eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + zstep &gt; elower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) ? eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + zstep : eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>);</div>
<div class="line"><span class="lineno">  331</span> </div>
<div class="line"><span class="lineno">  332</span>    <span class="keywordflow">if</span>(slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt; std::abs(zstep)) {</div>
<div class="line"><span class="lineno">  333</span>        <span class="comment">// no space for even one cross</span></div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>        <span class="comment">// Get max available space</span></div>
<div class="line"><span class="lineno">  336</span>        startz = std::min(supper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>), slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - zstep);</div>
<div class="line"><span class="lineno">  337</span>        endz = std::max(eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + zstep, elower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>));</div>
<div class="line"><span class="lineno">  338</span> </div>
<div class="line"><span class="lineno">  339</span>        <span class="comment">// Align to center</span></div>
<div class="line"><span class="lineno">  340</span>        <span class="keywordtype">double</span> available_dist = (startz - endz);</div>
<div class="line"><span class="lineno">  341</span>        <span class="keywordtype">double</span> rounds = std::floor(available_dist / std::abs(zstep));</div>
<div class="line"><span class="lineno">  342</span>        startz -= 0.5 * (available_dist - rounds * std::abs(zstep));</div>
<div class="line"><span class="lineno">  343</span>    }</div>
<div class="line"><span class="lineno">  344</span> </div>
<div class="line"><span class="lineno">  345</span>    <span class="keyword">auto</span> pcm = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0f0b055a45504fd2ae90765f4cefe6db">pillar_connection_mode</a>;</div>
<div class="line"><span class="lineno">  346</span>    <span class="keywordtype">bool</span> docrosses =</div>
<div class="line"><span class="lineno">  347</span>        pcm == <a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a14dd6b7cc4fe3e8ea2a1018f0b9f5c2ea22aadb26447d87b550b155a4d764fad0">PillarConnectionMode::cross</a> ||</div>
<div class="line"><span class="lineno">  348</span>        (pcm == <a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a14dd6b7cc4fe3e8ea2a1018f0b9f5c2eab72f3bd391ba731a35708bfd8cd8a68f">PillarConnectionMode::dynamic</a> &amp;&amp;</div>
<div class="line"><span class="lineno">  349</span>         pillar_dist &gt; 2*<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">base_radius_mm</a>);</div>
<div class="line"><span class="lineno">  350</span> </div>
<div class="line"><span class="lineno">  351</span>    <span class="comment">// &#39;sj&#39; means starting junction, &#39;ej&#39; is the end junction of a bridge.</span></div>
<div class="line"><span class="lineno">  352</span>    <span class="comment">// They will be swapped in every iteration thus the zig-zag pattern.</span></div>
<div class="line"><span class="lineno">  353</span>    <span class="comment">// According to a config parameter, a second bridge may be added which</span></div>
<div class="line"><span class="lineno">  354</span>    <span class="comment">// results in a cross connection between the pillars.</span></div>
<div class="line"><span class="lineno">  355</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> sj = supper, ej = slower; sj(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = startz; ej(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = sj(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + zstep;</div>
<div class="line"><span class="lineno">  356</span> </div>
<div class="line"><span class="lineno">  357</span>    <span class="comment">// TODO: This is a workaround to not have a faulty last bridge</span></div>
<div class="line"><span class="lineno">  358</span>    <span class="keywordflow">while</span>(ej(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &gt;= eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) <span class="comment">/*endz*/</span>) {</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(sj, <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab04ac8a9f6e73d2d497b929c0a4deafd">dirv</a>(sj, ej), pillar.r) &gt;= bridge_distance)</div>
<div class="line"><span class="lineno">  360</span>        {</div>
<div class="line"><span class="lineno">  361</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ac710babcb3a5fe5216c9bc75a69357ac">add_crossbridge</a>(sj, ej, pillar.r);</div>
<div class="line"><span class="lineno">  362</span>            was_connected = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  363</span>        }</div>
<div class="line"><span class="lineno">  364</span> </div>
<div class="line"><span class="lineno">  365</span>        <span class="comment">// double bridging: (crosses)</span></div>
<div class="line"><span class="lineno">  366</span>        <span class="keywordflow">if</span>(docrosses) {</div>
<div class="line"><span class="lineno">  367</span>            <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> sjback(ej(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), ej(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>), sj(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>));</div>
<div class="line"><span class="lineno">  368</span>            <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> ejback(sj(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), sj(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>), ej(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>));</div>
<div class="line"><span class="lineno">  369</span>            <span class="keywordflow">if</span> (sjback(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &lt;= slower(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &amp;&amp; ejback(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &gt;= eupper(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &amp;&amp;</div>
<div class="line"><span class="lineno">  370</span>                <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(sjback, <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab04ac8a9f6e73d2d497b929c0a4deafd">dirv</a>(sjback, ejback),</div>
<div class="line"><span class="lineno">  371</span>                                      pillar.r) &gt;= bridge_distance) {</div>
<div class="line"><span class="lineno">  372</span>                <span class="comment">// need to check collision for the cross stick</span></div>
<div class="line"><span class="lineno">  373</span>                <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ac710babcb3a5fe5216c9bc75a69357ac">add_crossbridge</a>(sjback, ejback, pillar.r);</div>
<div class="line"><span class="lineno">  374</span>                was_connected = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  375</span>            }</div>
<div class="line"><span class="lineno">  376</span>        }</div>
<div class="line"><span class="lineno">  377</span> </div>
<div class="line"><span class="lineno">  378</span>        sj.swap(ej);</div>
<div class="line"><span class="lineno">  379</span>        ej(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) = sj(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) + zstep;</div>
<div class="line"><span class="lineno">  380</span>    }</div>
<div class="line"><span class="lineno">  381</span> </div>
<div class="line"><span class="lineno">  382</span>    <span class="keywordflow">return</span> was_connected;</div>
<div class="line"><span class="lineno">  383</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_ac710babcb3a5fe5216c9bc75a69357ac"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ac710babcb3a5fe5216c9bc75a69357ac">Slic3r::sla::SupportTreeBuilder::add_crossbridge</a></div><div class="ttdeci">const Bridge &amp; add_crossbridge(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:372</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a14dd6b7cc4fe3e8ea2a1018f0b9f5c2ea22aadb26447d87b550b155a4d764fad0"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a14dd6b7cc4fe3e8ea2a1018f0b9f5c2ea22aadb26447d87b550b155a4d764fad0">Slic3r::sla::PillarConnectionMode::cross</a></div><div class="ttdeci">@ cross</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a14dd6b7cc4fe3e8ea2a1018f0b9f5c2eab72f3bd391ba731a35708bfd8cd8a68f"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a14dd6b7cc4fe3e8ea2a1018f0b9f5c2eab72f3bd391ba731a35708bfd8cd8a68f">Slic3r::sla::PillarConnectionMode::dynamic</a></div><div class="ttdeci">@ dynamic</div></div>
<div class="ttc" id="anamespace_slic3r_html_a40e8e384542f32f8150cabd3db031651"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Slic3r::Vec2d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 2, 1, Eigen::DontAlign &gt; Vec2d</div><div class="ttdef"><b>Definition</b> Point.hpp:45</div></div>
<div class="ttc" id="astat_8h_html_a6c58d6d683698a3e7886533dc3241ca7abaca913d02bce2f4a9b78d5884f9a8f7"><div class="ttname"><a href="../../d2/d1b/stat_8h.html#a6c58d6d683698a3e7886533dc3241ca7abaca913d02bce2f4a9b78d5884f9a8f7">zmin</a></div><div class="ttdeci">@ zmin</div><div class="ttdef"><b>Definition</b> stat.h:347</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a0f0b055a45504fd2ae90765f4cefe6db"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0f0b055a45504fd2ae90765f4cefe6db">Slic3r::sla::SupportTreeConfig::pillar_connection_mode</a></div><div class="ttdeci">PillarConnectionMode pillar_connection_mode</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:53</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_af81c7c272736d1079d33da417a4029e8"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#af81c7c272736d1079d33da417a4029e8">Slic3r::sla::SupportTreeConfig::max_pillar_link_distance_mm</a></div><div class="ttdeci">double max_pillar_link_distance_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:77</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00115">Slic3r::sla::dirv()</a>, <a class="el" href="../../#l00150">Slic3r::sla::Pillar::endpoint()</a>, <a class="el" href="../../#l00129">Slic3r::sla::Pillar::r</a>, <a class="el" href="../../#l00145">Slic3r::sla::Pillar::startpoint()</a>, <a class="el" href="../../#l00886">Eigen::PlainObjectBase&lt; Derived &gt;::swap()</a>, <a class="el" href="../../#l00116">Slic3r::X</a>, <a class="el" href="../../#l00117">Slic3r::Y</a>, <a class="el" href="../../#l00118">Slic3r::Z</a>, and <a class="el" href="../../#l00347">zmin</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a76849559a236c50dd61f7ffb9196624b_cgraph.svg" width="380" height="232"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a4b098cd46a9f41781d92563153edd86d" name="a4b098cd46a9f41781d92563153edd86d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b098cd46a9f41781d92563153edd86d">&#9670;&#160;</a></span>interconnect_pillars()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::interconnect_pillars </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1065</span>{</div>
<div class="line"><span class="lineno"> 1066</span>    <span class="comment">// Now comes the algorithm that connects pillars with each other.</span></div>
<div class="line"><span class="lineno"> 1067</span>    <span class="comment">// Ideally every pillar should be connected with at least one of its</span></div>
<div class="line"><span class="lineno"> 1068</span>    <span class="comment">// neighbors if that neighbor is within max_pillar_link_distance</span></div>
<div class="line"><span class="lineno"> 1069</span> </div>
<div class="line"><span class="lineno"> 1070</span>    <span class="comment">// Pillars with height exceeding H1 will require at least one neighbor</span></div>
<div class="line"><span class="lineno"> 1071</span>    <span class="comment">// to connect with. Height exceeding H2 require two neighbors.</span></div>
<div class="line"><span class="lineno"> 1072</span>    <span class="keywordtype">double</span> H1 = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ae420c4d9bf7d7e58791f3a403d76c35f">max_solo_pillar_height_mm</a>;</div>
<div class="line"><span class="lineno"> 1073</span>    <span class="keywordtype">double</span> H2 = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a01a6f4d92fc8eb3a9a708456a7588c58">max_dual_pillar_height_mm</a>;</div>
<div class="line"><span class="lineno"> 1074</span>    <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a> = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#af81c7c272736d1079d33da417a4029e8">max_pillar_link_distance_mm</a>;</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>    <span class="comment">//A connection between two pillars only counts if the height ratio is</span></div>
<div class="line"><span class="lineno"> 1077</span>    <span class="comment">// bigger than 50%</span></div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keywordtype">double</span> min_height_ratio = 0.5;</div>
<div class="line"><span class="lineno"> 1079</span> </div>
<div class="line"><span class="lineno"> 1080</span>    std::set&lt;unsigned long&gt; pairs;</div>
<div class="line"><span class="lineno"> 1081</span> </div>
<div class="line"><span class="lineno"> 1082</span>    <span class="comment">// A function to connect one pillar with its neighbors. THe number of</span></div>
<div class="line"><span class="lineno"> 1083</span>    <span class="comment">// neighbors is given in the configuration. This function if called</span></div>
<div class="line"><span class="lineno"> 1084</span>    <span class="comment">// for every pillar in the pillar index. A pair of pillar will not</span></div>
<div class="line"><span class="lineno"> 1085</span>    <span class="comment">// be connected multiple times this is ensured by the &#39;pairs&#39; set which</span></div>
<div class="line"><span class="lineno"> 1086</span>    <span class="comment">// remembers the processed pillar pairs</span></div>
<div class="line"><span class="lineno"> 1087</span>    <span class="keyword">auto</span> cascadefn =</div>
<div class="line"><span class="lineno"> 1088</span>        [<span class="keyword">this</span>, <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a>, &amp;pairs, min_height_ratio, H1] (<span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">PointIndexEl</a>&amp; el)</div>
<div class="line"><span class="lineno"> 1089</span>    {</div>
<div class="line"><span class="lineno"> 1090</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> qp = el.first;    <span class="comment">// endpoint of the pillar</span></div>
<div class="line"><span class="lineno"> 1091</span> </div>
<div class="line"><span class="lineno"> 1092</span>        <span class="keyword">const</span> Pillar&amp; pillar = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(el.second); <span class="comment">// actual pillar</span></div>
<div class="line"><span class="lineno"> 1093</span> </div>
<div class="line"><span class="lineno"> 1094</span>        <span class="comment">// Get the max number of neighbors a pillar should connect to</span></div>
<div class="line"><span class="lineno"> 1095</span>        <span class="keywordtype">unsigned</span> neighbors = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a3530bb98463522d95a83398eb8bb26a9">pillar_cascade_neighbors</a>;</div>
<div class="line"><span class="lineno"> 1096</span> </div>
<div class="line"><span class="lineno"> 1097</span>        <span class="comment">// connections are already enough for the pillar</span></div>
<div class="line"><span class="lineno"> 1098</span>        <span class="keywordflow">if</span>(pillar.links &gt;= neighbors) <span class="keywordflow">return</span>;</div>
<div class="line"><span class="lineno"> 1099</span> </div>
<div class="line"><span class="lineno"> 1100</span>        <span class="keywordtype">double</span> max_d = <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a> * pillar.r / <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>;</div>
<div class="line"><span class="lineno"> 1101</span>        <span class="comment">// Query all remaining points within reach</span></div>
<div class="line"><span class="lineno"> 1102</span>        <span class="keyword">auto</span> qres = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#aee6aade607d6d7b8ef3fb8504e70acfc">query</a>([qp, max_d](<span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">PointIndexEl</a>&amp; e){</div>
<div class="line"><span class="lineno"> 1103</span>            <span class="keywordflow">return</span> <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(e.first, qp) &lt; max_d;</div>
<div class="line"><span class="lineno"> 1104</span>        });</div>
<div class="line"><span class="lineno"> 1105</span> </div>
<div class="line"><span class="lineno"> 1106</span>        <span class="comment">// sort the result by distance (have to check if this is needed)</span></div>
<div class="line"><span class="lineno"> 1107</span>        std::sort(qres.begin(), qres.end(),</div>
<div class="line"><span class="lineno"> 1108</span>                  [qp](<span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">PointIndexEl</a>&amp; e1, <span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#a4bdef96a096b7124e071e180958ee0a7">PointIndexEl</a>&amp; e2){</div>
<div class="line"><span class="lineno"> 1109</span>                      return distance(e1.first, qp) &lt; distance(e2.first, qp);</div>
<div class="line"><span class="lineno"> 1110</span>                  });</div>
<div class="line"><span class="lineno"> 1111</span> </div>
<div class="line"><span class="lineno"> 1112</span>        <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; re : qres) { <span class="comment">// process the queried neighbors</span></div>
<div class="line"><span class="lineno"> 1113</span> </div>
<div class="line"><span class="lineno"> 1114</span>            <span class="keywordflow">if</span>(re.second == el.second) <span class="keywordflow">continue</span>; <span class="comment">// Skip self</span></div>
<div class="line"><span class="lineno"> 1115</span> </div>
<div class="line"><span class="lineno"> 1116</span>            <span class="keyword">auto</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a> = el.second, <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">b</a> = re.second;</div>
<div class="line"><span class="lineno"> 1117</span> </div>
<div class="line"><span class="lineno"> 1118</span>            <span class="comment">// Get unique hash for the given pair (order doesn&#39;t matter)</span></div>
<div class="line"><span class="lineno"> 1119</span>            <span class="keyword">auto</span> hashval = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a9ad9ea358eb9284a34f93220ae7a1b87">pairhash</a>(a, b);</div>
<div class="line"><span class="lineno"> 1120</span> </div>
<div class="line"><span class="lineno"> 1121</span>            <span class="comment">// Search for the pair amongst the remembered pairs</span></div>
<div class="line"><span class="lineno"> 1122</span>            <span class="keywordflow">if</span>(pairs.find(hashval) != pairs.end()) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1123</span> </div>
<div class="line"><span class="lineno"> 1124</span>            <span class="keyword">const</span> Pillar&amp; neighborpillar = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(re.second);</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>            <span class="comment">// this neighbor is occupied, skip</span></div>
<div class="line"><span class="lineno"> 1127</span>            <span class="keywordflow">if</span> (neighborpillar.links &gt;= neighbors) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1128</span>            <span class="keywordflow">if</span> (neighborpillar.r &lt; pillar.r) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>            <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a76849559a236c50dd61f7ffb9196624b">interconnect</a>(pillar, neighborpillar)) {</div>
<div class="line"><span class="lineno"> 1131</span>                pairs.insert(hashval);</div>
<div class="line"><span class="lineno"> 1132</span> </div>
<div class="line"><span class="lineno"> 1133</span>                <span class="comment">// If the interconnection length between the two pillars is</span></div>
<div class="line"><span class="lineno"> 1134</span>                <span class="comment">// less than 50% of the longer pillar&#39;s height, don&#39;t count</span></div>
<div class="line"><span class="lineno"> 1135</span>                <span class="keywordflow">if</span>(pillar.height &lt; H1 ||</div>
<div class="line"><span class="lineno"> 1136</span>                    neighborpillar.height / pillar.height &gt; min_height_ratio)</div>
<div class="line"><span class="lineno"> 1137</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">increment_links</a>(pillar);</div>
<div class="line"><span class="lineno"> 1138</span> </div>
<div class="line"><span class="lineno"> 1139</span>                <span class="keywordflow">if</span>(neighborpillar.height &lt; H1 ||</div>
<div class="line"><span class="lineno"> 1140</span>                    pillar.height / neighborpillar.height &gt; min_height_ratio)</div>
<div class="line"><span class="lineno"> 1141</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">increment_links</a>(neighborpillar);</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>            }</div>
<div class="line"><span class="lineno"> 1144</span> </div>
<div class="line"><span class="lineno"> 1145</span>            <span class="comment">// connections are enough for one pillar</span></div>
<div class="line"><span class="lineno"> 1146</span>            <span class="keywordflow">if</span>(pillar.links &gt;= neighbors) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1147</span>        }</div>
<div class="line"><span class="lineno"> 1148</span>    };</div>
<div class="line"><span class="lineno"> 1149</span> </div>
<div class="line"><span class="lineno"> 1150</span>    <span class="comment">// Run the cascade for the pillars in the index</span></div>
<div class="line"><span class="lineno"> 1151</span>    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a730279f31f6e625cdbdb45d94635d70d">foreach</a>(cascadefn);</div>
<div class="line"><span class="lineno"> 1152</span> </div>
<div class="line"><span class="lineno"> 1153</span>    <span class="comment">// We would be done here if we could allow some pillars to not be</span></div>
<div class="line"><span class="lineno"> 1154</span>    <span class="comment">// connected with any neighbors. But this might leave the support tree</span></div>
<div class="line"><span class="lineno"> 1155</span>    <span class="comment">// unprintable.</span></div>
<div class="line"><span class="lineno"> 1156</span>    <span class="comment">//</span></div>
<div class="line"><span class="lineno"> 1157</span>    <span class="comment">// The current solution is to insert additional pillars next to these</span></div>
<div class="line"><span class="lineno"> 1158</span>    <span class="comment">// lonely pillars. One or even two additional pillar might get inserted</span></div>
<div class="line"><span class="lineno"> 1159</span>    <span class="comment">// depending on the length of the lonely pillar.</span></div>
<div class="line"><span class="lineno"> 1160</span> </div>
<div class="line"><span class="lineno"> 1161</span>    <span class="keywordtype">size_t</span> pillarcount = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ab8476c24a5d68b3dfcee43026bd81c0f">pillarcount</a>();</div>
<div class="line"><span class="lineno"> 1162</span> </div>
<div class="line"><span class="lineno"> 1163</span>    <span class="comment">// Again, go through all pillars, this time in the whole support tree</span></div>
<div class="line"><span class="lineno"> 1164</span>    <span class="comment">// not just the index.</span></div>
<div class="line"><span class="lineno"> 1165</span>    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> pid = 0; pid &lt; pillarcount; pid++) {</div>
<div class="line"><span class="lineno"> 1166</span>        <span class="keyword">auto</span> pillar = [<span class="keyword">this</span>, pid]() { <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(pid); };</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span>        <span class="comment">// Decide how many additional pillars will be needed:</span></div>
<div class="line"><span class="lineno"> 1169</span> </div>
<div class="line"><span class="lineno"> 1170</span>        <span class="keywordtype">unsigned</span> needpillars = 0;</div>
<div class="line"><span class="lineno"> 1171</span>        <span class="keywordflow">if</span> (pillar().bridges &gt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a07fd7cd4b86424405fa6a1eb5beed422">max_bridges_on_pillar</a>)</div>
<div class="line"><span class="lineno"> 1172</span>            needpillars = 3;</div>
<div class="line"><span class="lineno"> 1173</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pillar().links &lt; 2 &amp;&amp; pillar().height &gt; H2) {</div>
<div class="line"><span class="lineno"> 1174</span>            <span class="comment">// Not enough neighbors to support this pillar</span></div>
<div class="line"><span class="lineno"> 1175</span>            needpillars = 2;</div>
<div class="line"><span class="lineno"> 1176</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (pillar().links &lt; 1 &amp;&amp; pillar().height &gt; H1) {</div>
<div class="line"><span class="lineno"> 1177</span>            <span class="comment">// No neighbors could be found and the pillar is too long.</span></div>
<div class="line"><span class="lineno"> 1178</span>            needpillars = 1;</div>
<div class="line"><span class="lineno"> 1179</span>        }</div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>        needpillars = std::max(pillar().links, needpillars) - pillar().links;</div>
<div class="line"><span class="lineno"> 1182</span>        <span class="keywordflow">if</span> (needpillars == 0) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 1183</span> </div>
<div class="line"><span class="lineno"> 1184</span>        <span class="comment">// Search for new pillar locations:</span></div>
<div class="line"><span class="lineno"> 1185</span> </div>
<div class="line"><span class="lineno"> 1186</span>        <span class="keywordtype">bool</span>   found    = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 1187</span>        <span class="keywordtype">double</span> alpha    = 0; <span class="comment">// goes to 2Pi</span></div>
<div class="line"><span class="lineno"> 1188</span>        <span class="keywordtype">double</span> r        = 2 * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">base_radius_mm</a>;</div>
<div class="line"><span class="lineno"> 1189</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>  pillarsp = pillar().startpoint();</div>
<div class="line"><span class="lineno"> 1190</span> </div>
<div class="line"><span class="lineno"> 1191</span>        <span class="comment">// temp value for starting point detection</span></div>
<div class="line"><span class="lineno"> 1192</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> sp(pillarsp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), pillarsp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>), pillarsp(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) - r);</div>
<div class="line"><span class="lineno"> 1193</span> </div>
<div class="line"><span class="lineno"> 1194</span>        <span class="comment">// A vector of bool for placement feasbility</span></div>
<div class="line"><span class="lineno"> 1195</span>        std::vector&lt;bool&gt;  canplace(needpillars, <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 1196</span>        std::vector&lt;Vec3d&gt; spts(needpillars); <span class="comment">// vector of starting points</span></div>
<div class="line"><span class="lineno"> 1197</span> </div>
<div class="line"><span class="lineno"> 1198</span>        <span class="keywordtype">double</span> gnd      = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a>;</div>
<div class="line"><span class="lineno"> 1199</span>        <span class="keywordtype">double</span> min_dist = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aa8eff4efe264cff44de4347f95087f50">pillar_base_safety_distance_mm</a> +</div>
<div class="line"><span class="lineno"> 1200</span>                          <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#acd6d38bb77e453b7b6cc42a60001a18a">base_radius_mm</a> + <a class="code hl_variable" href="../../dd/d47/libslic3r_8h.html#a75f355966e0a97665eaf5a4c79baa7af">EPSILON</a>;</div>
<div class="line"><span class="lineno"> 1201</span> </div>
<div class="line"><span class="lineno"> 1202</span>        <span class="keywordflow">while</span>(!found &amp;&amp; alpha &lt; 2*<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>) {</div>
<div class="line"><span class="lineno"> 1203</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> = 0;</div>
<div class="line"><span class="lineno"> 1204</span>                 <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> &lt; needpillars &amp;&amp; (!<a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> || canplace[<a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> - 1]);</div>
<div class="line"><span class="lineno"> 1205</span>                 <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>++)</div>
<div class="line"><span class="lineno"> 1206</span>            {</div>
<div class="line"><span class="lineno"> 1207</span>                <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a0cc175b9c0f1b6a831c399e269772661">a</a> = alpha + <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> * <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> / 3;</div>
<div class="line"><span class="lineno"> 1208</span>                <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>  s = sp;</div>
<div class="line"><span class="lineno"> 1209</span>                s(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>) += std::cos(a) * r;</div>
<div class="line"><span class="lineno"> 1210</span>                s(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>) += std::sin(a) * r;</div>
<div class="line"><span class="lineno"> 1211</span>                spts[<a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>] = s;</div>
<div class="line"><span class="lineno"> 1212</span> </div>
<div class="line"><span class="lineno"> 1213</span>                <span class="comment">// Check the path vertically down</span></div>
<div class="line"><span class="lineno"> 1214</span>                <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> check_from = s + <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>{0., 0., pillar().r};</div>
<div class="line"><span class="lineno"> 1215</span>                <span class="keyword">auto</span> hr = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a72dfd17e2264afe0b02ef0bd619d897f">bridge_mesh_intersect</a>(check_from, <a class="code hl_variable" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab2c5a8d29e1e239213ee1f858a0f9014">DOWN</a>, pillar().r);</div>
<div class="line"><span class="lineno"> 1216</span>                <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> gndsp{s(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), s(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>), gnd};</div>
<div class="line"><span class="lineno"> 1217</span> </div>
<div class="line"><span class="lineno"> 1218</span>                <span class="comment">// If the path is clear, check for pillar base collisions</span></div>
<div class="line"><span class="lineno"> 1219</span>                canplace[<a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>] = std::isinf(hr.distance()) &amp;&amp;</div>
<div class="line"><span class="lineno"> 1220</span>                              std::sqrt(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>.<a class="code hl_function" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a2a04cac4f6377dd553fd379b0c54c629">squared_distance</a>(gndsp)) &gt;</div>
<div class="line"><span class="lineno"> 1221</span>                                  min_dist;</div>
<div class="line"><span class="lineno"> 1222</span>            }</div>
<div class="line"><span class="lineno"> 1223</span> </div>
<div class="line"><span class="lineno"> 1224</span>            found = std::all_of(canplace.begin(), canplace.end(),</div>
<div class="line"><span class="lineno"> 1225</span>                                [](<span class="keywordtype">bool</span> v) { return v; });</div>
<div class="line"><span class="lineno"> 1226</span> </div>
<div class="line"><span class="lineno"> 1227</span>            <span class="comment">// 20 angles will be tried...</span></div>
<div class="line"><span class="lineno"> 1228</span>            alpha += 0.1 * <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>;</div>
<div class="line"><span class="lineno"> 1229</span>        }</div>
<div class="line"><span class="lineno"> 1230</span> </div>
<div class="line"><span class="lineno"> 1231</span>        std::vector&lt;long&gt; newpills;</div>
<div class="line"><span class="lineno"> 1232</span>        newpills.reserve(needpillars);</div>
<div class="line"><span class="lineno"> 1233</span> </div>
<div class="line"><span class="lineno"> 1234</span>        <span class="keywordflow">if</span> (found)</div>
<div class="line"><span class="lineno"> 1235</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> = 0; <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a> &lt; needpillars; <a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>++) {</div>
<div class="line"><span class="lineno"> 1236</span>                <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> s = spts[<a class="code hl_variable" href="../../df/d17/qhalf_8c.html#a3bb856ed0c81ac3a32238bcda8f5a977">n</a>];</div>
<div class="line"><span class="lineno"> 1237</span>                Pillar p(<a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>{s.x(), s.y(), gnd}, s.z() - gnd, pillar().r);</div>
<div class="line"><span class="lineno"> 1238</span> </div>
<div class="line"><span class="lineno"> 1239</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a76849559a236c50dd61f7ffb9196624b">interconnect</a>(pillar(), p)) {</div>
<div class="line"><span class="lineno"> 1240</span>                    Pillar &amp;pp = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#adb344d88c98255774943600c3ad5901f">add_pillar</a>(p));</div>
<div class="line"><span class="lineno"> 1241</span> </div>
<div class="line"><span class="lineno"> 1242</span>                    <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#abb20e43cb033181d2f27adf2b4e18338">add_pillar_base</a>(pp.id);</div>
<div class="line"><span class="lineno"> 1243</span> </div>
<div class="line"><span class="lineno"> 1244</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#ad5b651654acbcea9ae361b2a653c15fa">insert</a>(pp.endpoint(), <span class="keywordtype">unsigned</span>(pp.id));</div>
<div class="line"><span class="lineno"> 1245</span> </div>
<div class="line"><span class="lineno"> 1246</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">add_junction</a>(s, pillar().r);</div>
<div class="line"><span class="lineno"> 1247</span>                    <span class="keywordtype">double</span> t = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(pillarsp, <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ab04ac8a9f6e73d2d497b929c0a4deafd">dirv</a>(pillarsp, s),</div>
<div class="line"><span class="lineno"> 1248</span>                                                    pillar().r);</div>
<div class="line"><span class="lineno"> 1249</span>                    <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(pillarsp, s) &lt; t)</div>
<div class="line"><span class="lineno"> 1250</span>                        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a23976481a726809d6737abefa6c77f1b">add_bridge</a>(pillarsp, s, pillar().r);</div>
<div class="line"><span class="lineno"> 1251</span> </div>
<div class="line"><span class="lineno"> 1252</span>                    <span class="keywordflow">if</span> (pillar().endpoint()(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6af37bb734068baa8f45899ec84b1c6af2">Z</a>) &gt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a> + pillar().r)</div>
<div class="line"><span class="lineno"> 1253</span>                        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a39bc20e522b9699d6b4fa1ff10cbaaba">add_junction</a>(pillar().endpoint(), pillar().r);</div>
<div class="line"><span class="lineno"> 1254</span> </div>
<div class="line"><span class="lineno"> 1255</span>                    newpills.emplace_back(pp.id);</div>
<div class="line"><span class="lineno"> 1256</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">increment_links</a>(pillar());</div>
<div class="line"><span class="lineno"> 1257</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">increment_links</a>(pp);</div>
<div class="line"><span class="lineno"> 1258</span>                }</div>
<div class="line"><span class="lineno"> 1259</span>            }</div>
<div class="line"><span class="lineno"> 1260</span> </div>
<div class="line"><span class="lineno"> 1261</span>        <span class="keywordflow">if</span>(!newpills.empty()) {</div>
<div class="line"><span class="lineno"> 1262</span>            <span class="keywordflow">for</span>(<span class="keyword">auto</span> it = newpills.begin(), nx = std::next(it);</div>
<div class="line"><span class="lineno"> 1263</span>                 nx != newpills.end(); ++it, ++nx) {</div>
<div class="line"><span class="lineno"> 1264</span>                <span class="keyword">const</span> Pillar&amp; itpll = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(*it);</div>
<div class="line"><span class="lineno"> 1265</span>                <span class="keyword">const</span> Pillar&amp; nxpll = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(*nx);</div>
<div class="line"><span class="lineno"> 1266</span>                <span class="keywordflow">if</span>(<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a76849559a236c50dd61f7ffb9196624b">interconnect</a>(itpll, nxpll)) {</div>
<div class="line"><span class="lineno"> 1267</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">increment_links</a>(itpll);</div>
<div class="line"><span class="lineno"> 1268</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">increment_links</a>(nxpll);</div>
<div class="line"><span class="lineno"> 1269</span>                }</div>
<div class="line"><span class="lineno"> 1270</span>            }</div>
<div class="line"><span class="lineno"> 1271</span> </div>
<div class="line"><span class="lineno"> 1272</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a730279f31f6e625cdbdb45d94635d70d">foreach</a>(cascadefn);</div>
<div class="line"><span class="lineno"> 1273</span>        }</div>
<div class="line"><span class="lineno"> 1274</span>    }</div>
<div class="line"><span class="lineno"> 1275</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_pillar_index_html_a730279f31f6e625cdbdb45d94635d70d"><div class="ttname"><a href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a730279f31f6e625cdbdb45d94635d70d">Slic3r::sla::PillarIndex::foreach</a></div><div class="ttdeci">void foreach(Fn fn)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:150</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_pillar_index_html_ad5b651654acbcea9ae361b2a653c15fa"><div class="ttname"><a href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#ad5b651654acbcea9ae361b2a653c15fa">Slic3r::sla::PillarIndex::insert</a></div><div class="ttdeci">void insert(Args &amp;&amp;...args)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:139</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_pillar_index_html_aee6aade607d6d7b8ef3fb8504e70acfc"><div class="ttname"><a href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#aee6aade607d6d7b8ef3fb8504e70acfc">Slic3r::sla::PillarIndex::query</a></div><div class="ttdeci">std::vector&lt; PointIndexEl &gt; query(Args &amp;&amp;...args) const</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:145</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a87ab3924dd732d94e135f69015290815"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a87ab3924dd732d94e135f69015290815">Slic3r::sla::SupportTreeBuilder::increment_links</a></div><div class="ttdeci">void increment_links(const Pillar &amp;pillar)</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:315</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_ab8476c24a5d68b3dfcee43026bd81c0f"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ab8476c24a5d68b3dfcee43026bd81c0f">Slic3r::sla::SupportTreeBuilder::pillarcount</a></div><div class="ttdeci">size_t pillarcount() const</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.hpp:391</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a76849559a236c50dd61f7ffb9196624b"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a76849559a236c50dd61f7ffb9196624b">Slic3r::sla::SupportTreeBuildsteps::interconnect</a></div><div class="ttdeci">bool interconnect(const Pillar &amp;pillar, const Pillar &amp;nextpillar)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:292</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a9ad9ea358eb9284a34f93220ae7a1b87"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a9ad9ea358eb9284a34f93220ae7a1b87">Slic3r::sla::pairhash</a></div><div class="ttdeci">IntegerOnly&lt; DoubleI &gt; pairhash(I a, I b)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:172</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a92eb5ffee6ae2fec3ad71c777531578f">marchsq::__impl::SquareTag::b</a></div><div class="ttdeci">@ b</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a01a6f4d92fc8eb3a9a708456a7588c58"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a01a6f4d92fc8eb3a9a708456a7588c58">Slic3r::sla::SupportTreeConfig::max_dual_pillar_height_mm</a></div><div class="ttdeci">static const double constexpr max_dual_pillar_height_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:105</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_a3530bb98463522d95a83398eb8bb26a9"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a3530bb98463522d95a83398eb8bb26a9">Slic3r::sla::SupportTreeConfig::pillar_cascade_neighbors</a></div><div class="ttdeci">static const unsigned constexpr pillar_cascade_neighbors</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:108</div></div>
<div class="ttc" id="astruct_slic3r_1_1sla_1_1_support_tree_config_html_ae420c4d9bf7d7e58791f3a403d76c35f"><div class="ttname"><a href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#ae420c4d9bf7d7e58791f3a403d76c35f">Slic3r::sla::SupportTreeConfig::max_solo_pillar_height_mm</a></div><div class="ttdeci">static const double constexpr max_solo_pillar_height_mm</div><div class="ttdef"><b>Definition</b> SupportTree.hpp:104</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00115">Slic3r::sla::dirv()</a>, <a class="el" href="../../#l00150">Slic3r::sla::Pillar::endpoint()</a>, <a class="el" href="../../#l00052">EPSILON</a>, <a class="el" href="../../#l00129">Slic3r::sla::Pillar::height</a>, <a class="el" href="../../#l00068">Slic3r::sla::SupportTreeNode::id</a>, <a class="el" href="../../#l00140">Slic3r::sla::Pillar::links</a>, <a class="el" href="../../#l00162">n</a>, <a class="el" href="../../#l00172">Slic3r::sla::pairhash()</a>, <a class="el" href="../../#l00033">PI</a>, <a class="el" href="../../#l00129">Slic3r::sla::Pillar::r</a>, <a class="el" href="../../#l00116">Slic3r::X</a>, <a class="el" href="../../#l00117">Slic3r::Y</a>, and <a class="el" href="../../#l00118">Slic3r::Z</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a4b098cd46a9f41781d92563153edd86d_cgraph.svg" width="451" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a4b098cd46a9f41781d92563153edd86d_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a486f59078173aa766229f764e4f66360" name="a486f59078173aa766229f764e4f66360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a486f59078173aa766229f764e4f66360">&#9670;&#160;</a></span>merge_result()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::merge_result </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  370</span>{ <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a57bcbf4a1b9f716b3f5ffcf79c0bd217">merged_mesh</a>(); }</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_builder_html_a57bcbf4a1b9f716b3f5ffcf79c0bd217"><div class="ttname"><a href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a57bcbf4a1b9f716b3f5ffcf79c0bd217">Slic3r::sla::SupportTreeBuilder::merged_mesh</a></div><div class="ttdeci">const indexed_triangle_set &amp; merged_mesh(size_t steps=45) const</div><div class="ttdef"><b>Definition</b> SupportTreeBuilder.cpp:125</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00210">m_builder</a>, and <a class="el" href="../../#l00125">Slic3r::sla::SupportTreeBuilder::merged_mesh()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a486f59078173aa766229f764e4f66360_cgraph.svg" width="100%" height="579"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a486f59078173aa766229f764e4f66360_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aa78a3ee74513855ee75d4616fbb09254" name="aa78a3ee74513855ee75d4616fbb09254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa78a3ee74513855ee75d4616fbb09254">&#9670;&#160;</a></span>pinhead_mesh_intersect() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a> Slic3r::sla::SupportTreeBuildsteps::pinhead_mesh_intersect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_back</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>width</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  256</span>    {</div>
<div class="line"><span class="lineno">  257</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a43adf44601f52bed5173092f6ed257bf">pinhead_mesh_intersect</a>(s, dir, r_pin, r_back, width,</div>
<div class="line"><span class="lineno">  258</span>                                      r_back * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#aa641974bb0ee1c24c90bb754e4360271">safety_distance_mm</a> /</div>
<div class="line"><span class="lineno">  259</span>                                          <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>);</div>
<div class="line"><span class="lineno">  260</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00045">Slic3r::sla::SupportTreeConfig::head_back_radius_mm</a>, <a class="el" href="../../#l00189">m_cfg</a>, <a class="el" href="../../#l00178">pinhead_mesh_intersect()</a>, and <a class="el" href="../../#l00102">Slic3r::sla::SupportTreeConfig::safety_distance_mm</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_aa78a3ee74513855ee75d4616fbb09254_cgraph.svg" width="626" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a43adf44601f52bed5173092f6ed257bf" name="a43adf44601f52bed5173092f6ed257bf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43adf44601f52bed5173092f6ed257bf">&#9670;&#160;</a></span>pinhead_mesh_intersect() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a> Slic3r::sla::SupportTreeBuildsteps::pinhead_mesh_intersect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_pin</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>r_back</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>width</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>safety_d</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  185</span>{</div>
<div class="line"><span class="lineno">  186</span>    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> SAMPLES = 8;</div>
<div class="line"><span class="lineno">  187</span> </div>
<div class="line"><span class="lineno">  188</span>    <span class="comment">// Move away slightly from the touching point to avoid raycasting on the</span></div>
<div class="line"><span class="lineno">  189</span>    <span class="comment">// inner surface of the mesh.</span></div>
<div class="line"><span class="lineno">  190</span> </div>
<div class="line"><span class="lineno">  191</span>    <span class="keyword">auto</span>&amp; m = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>;</div>
<div class="line"><span class="lineno">  192</span>    <span class="keyword">using </span>HitResult = IndexedMesh::hit_result;</div>
<div class="line"><span class="lineno">  193</span> </div>
<div class="line"><span class="lineno">  194</span>    <span class="comment">// Hit results</span></div>
<div class="line"><span class="lineno">  195</span>    std::array&lt;HitResult, SAMPLES&gt; hits;</div>
<div class="line"><span class="lineno">  196</span> </div>
<div class="line"><span class="lineno">  197</span>    <span class="keyword">struct </span>Rings {</div>
<div class="line"><span class="lineno">  198</span>        <span class="keywordtype">double</span> rpin;</div>
<div class="line"><span class="lineno">  199</span>        <span class="keywordtype">double</span> rback;</div>
<div class="line"><span class="lineno">  200</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a>  spin;</div>
<div class="line"><span class="lineno">  201</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a>  sback;</div>
<div class="line"><span class="lineno">  202</span>        PointRing&lt;SAMPLES&gt; ring;</div>
<div class="line"><span class="lineno">  203</span> </div>
<div class="line"><span class="lineno">  204</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> backring(<span class="keywordtype">size_t</span> idx) { <span class="keywordflow">return</span> ring.get(idx, sback, rback); }</div>
<div class="line"><span class="lineno">  205</span>        <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> pinring(<span class="keywordtype">size_t</span> idx) { <span class="keywordflow">return</span> ring.get(idx, spin, rpin); }</div>
<div class="line"><span class="lineno">  206</span>    } rings {r_pin + sd, r_back + sd, s, s + <a class="code hl_function" href="../../d0/d25/namespace_slic3r_1_1arrangement.html#a33f0b7d9bab3e419c4d2d41d06b21093">width</a> * dir, dir};</div>
<div class="line"><span class="lineno">  207</span> </div>
<div class="line"><span class="lineno">  208</span>    <span class="comment">// We will shoot multiple rays from the head pinpoint in the direction</span></div>
<div class="line"><span class="lineno">  209</span>    <span class="comment">// of the pinhead robe (side) surface. The result will be the smallest</span></div>
<div class="line"><span class="lineno">  210</span>    <span class="comment">// hit distance.</span></div>
<div class="line"><span class="lineno">  211</span> </div>
<div class="line"><span class="lineno">  212</span>    ccr::for_each(<span class="keywordtype">size_t</span>(0), hits.size(),</div>
<div class="line"><span class="lineno">  213</span>                  [&amp;m, &amp;rings, sd, &amp;hits](<span class="keywordtype">size_t</span> i) {</div>
<div class="line"><span class="lineno">  214</span> </div>
<div class="line"><span class="lineno">  215</span>       <span class="comment">// Point on the circle on the pin sphere</span></div>
<div class="line"><span class="lineno">  216</span>       Vec3d ps = rings.pinring(i);</div>
<div class="line"><span class="lineno">  217</span>       <span class="comment">// This is the point on the circle on the back sphere</span></div>
<div class="line"><span class="lineno">  218</span>       Vec3d p = rings.backring(i);</div>
<div class="line"><span class="lineno">  219</span> </div>
<div class="line"><span class="lineno">  220</span>       auto &amp;hit = hits[i];</div>
<div class="line"><span class="lineno">  221</span> </div>
<div class="line"><span class="lineno">  222</span>       <span class="comment">// Point ps is not on mesh but can be inside or</span></div>
<div class="line"><span class="lineno">  223</span>       <span class="comment">// outside as well. This would cause many problems</span></div>
<div class="line"><span class="lineno">  224</span>       <span class="comment">// with ray-casting. To detect the position we will</span></div>
<div class="line"><span class="lineno">  225</span>       <span class="comment">// use the ray-casting result (which has an is_inside</span></div>
<div class="line"><span class="lineno">  226</span>       <span class="comment">// predicate).</span></div>
<div class="line"><span class="lineno">  227</span> </div>
<div class="line"><span class="lineno">  228</span>       Vec3d n = (p - ps).normalized();</div>
<div class="line"><span class="lineno">  229</span>       auto  q = m.query_ray_hit(ps + sd * n, n);</div>
<div class="line"><span class="lineno">  230</span> </div>
<div class="line"><span class="lineno">  231</span>       if (q.is_inside()) { <span class="comment">// the hit is inside the model</span></div>
<div class="line"><span class="lineno">  232</span>           if (q.distance() &gt; rings.rpin) {</div>
<div class="line"><span class="lineno">  233</span>               <span class="comment">// If we are inside the model and the hit</span></div>
<div class="line"><span class="lineno">  234</span>               <span class="comment">// distance is bigger than our pin circle</span></div>
<div class="line"><span class="lineno">  235</span>               <span class="comment">// diameter, it probably indicates that the</span></div>
<div class="line"><span class="lineno">  236</span>               <span class="comment">// support point was already inside the</span></div>
<div class="line"><span class="lineno">  237</span>               <span class="comment">// model, or there is really no space</span></div>
<div class="line"><span class="lineno">  238</span>               <span class="comment">// around the point. We will assign a zero</span></div>
<div class="line"><span class="lineno">  239</span>               <span class="comment">// hit distance to these cases which will</span></div>
<div class="line"><span class="lineno">  240</span>               <span class="comment">// enforce the function return value to be</span></div>
<div class="line"><span class="lineno">  241</span>               <span class="comment">// an invalid ray with zero hit distance.</span></div>
<div class="line"><span class="lineno">  242</span>               <span class="comment">// (see min_element at the end)</span></div>
<div class="line"><span class="lineno">  243</span>               hit = HitResult(0.0);</div>
<div class="line"><span class="lineno">  244</span>           } else {</div>
<div class="line"><span class="lineno">  245</span>               <span class="comment">// re-cast the ray from the outside of the</span></div>
<div class="line"><span class="lineno">  246</span>               <span class="comment">// object. The starting point has an offset</span></div>
<div class="line"><span class="lineno">  247</span>               <span class="comment">// of 2*safety_distance because the</span></div>
<div class="line"><span class="lineno">  248</span>               <span class="comment">// original ray has also had an offset</span></div>
<div class="line"><span class="lineno">  249</span>               auto q2 = m.query_ray_hit(ps + (q.distance() + 2 * sd) * n, n);</div>
<div class="line"><span class="lineno">  250</span>               hit = q2;</div>
<div class="line"><span class="lineno">  251</span>           }</div>
<div class="line"><span class="lineno">  252</span>       } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  253</span>           hit = q;</div>
<div class="line"><span class="lineno">  254</span>    });</div>
<div class="line"><span class="lineno">  255</span> </div>
<div class="line"><span class="lineno">  256</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a61db417e321d1f644c46db44d2a56df8">min_hit</a>(hits);</div>
<div class="line"><span class="lineno">  257</span>}</div>
<div class="ttc" id="anamespace_slic3r_1_1arrangement_html_a33f0b7d9bab3e419c4d2d41d06b21093"><div class="ttname"><a href="../../d0/d25/namespace_slic3r_1_1arrangement.html#a33f0b7d9bab3e419c4d2d41d06b21093">Slic3r::arrangement::width</a></div><div class="ttdeci">coord_t width(const BoundingBox &amp;box)</div><div class="ttdef"><b>Definition</b> Arrange.cpp:793</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6b8e15a6e63fb72a48bc5e49b8a6f6b1"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Slic3r::Vec3d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vec3d</div><div class="ttdef"><b>Definition</b> Point.hpp:46</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00096">Slic3r::sla::PointRing&lt; N &gt;::get()</a>, and <a class="el" href="../../#l00190">m_mesh</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00250">pinhead_mesh_intersect()</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a43adf44601f52bed5173092f6ed257bf_cgraph.svg" width="404" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a43adf44601f52bed5173092f6ed257bf_icgraph.svg" width="408" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a78a14a259f932eac087b0ceea5e6e0b2" name="a78a14a259f932eac087b0ceea5e6e0b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a14a259f932eac087b0ceea5e6e0b2">&#9670;&#160;</a></span>ray_mesh_intersect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a> Slic3r::sla::SupportTreeBuildsteps::ray_mesh_intersect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  227</span>    {</div>
<div class="line"><span class="lineno">  228</span>        <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a64a91d8667eff3bfa4ae82c52c1f0d04">m_mesh</a>.<a class="code hl_function" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html#a1252260eb1135d8be5ed478a8127c2a2">query_ray_hit</a>(s, dir);</div>
<div class="line"><span class="lineno">  229</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00190">m_mesh</a>, and <a class="el" href="../../#l00146">Slic3r::sla::IndexedMesh::query_ray_hit()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a78a14a259f932eac087b0ceea5e6e0b2_cgraph.svg" width="100%" height="414"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ae4456eb60f6c57654454d75390ba579c" name="ae4456eb60f6c57654454d75390ba579c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4456eb60f6c57654454d75390ba579c">&#9670;&#160;</a></span>routing_to_ground()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::routing_to_ground </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  819</span>{</div>
<div class="line"><span class="lineno">  820</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa08bef6ae20fa1b81be46635a370acac">ClusterEl</a> cl_centroids;</div>
<div class="line"><span class="lineno">  821</span>    cl_centroids.reserve(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a126e3cbf62160e4c5dafbe83ee911513">m_pillar_clusters</a>.size());</div>
<div class="line"><span class="lineno">  822</span> </div>
<div class="line"><span class="lineno">  823</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;cl : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a126e3cbf62160e4c5dafbe83ee911513">m_pillar_clusters</a>) {</div>
<div class="line"><span class="lineno">  824</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  825</span> </div>
<div class="line"><span class="lineno">  826</span>        <span class="comment">// place all the centroid head positions into the index. We</span></div>
<div class="line"><span class="lineno">  827</span>        <span class="comment">// will query for alternative pillar positions. If a sidehead</span></div>
<div class="line"><span class="lineno">  828</span>        <span class="comment">// cannot connect to the cluster centroid, we have to search</span></div>
<div class="line"><span class="lineno">  829</span>        <span class="comment">// for another head with a full pillar. Also when there are two</span></div>
<div class="line"><span class="lineno">  830</span>        <span class="comment">// elements in the cluster, the centroid is arbitrary and the</span></div>
<div class="line"><span class="lineno">  831</span>        <span class="comment">// sidehead is allowed to connect to a nearby pillar to</span></div>
<div class="line"><span class="lineno">  832</span>        <span class="comment">// increase structural stability.</span></div>
<div class="line"><span class="lineno">  833</span> </div>
<div class="line"><span class="lineno">  834</span>        <span class="keywordflow">if</span> (cl.empty()) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  835</span> </div>
<div class="line"><span class="lineno">  836</span>        <span class="comment">// get the current cluster centroid</span></div>
<div class="line"><span class="lineno">  837</span>        <span class="keyword">auto</span> &amp;      thr    = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>;</div>
<div class="line"><span class="lineno">  838</span>        <span class="keyword">const</span> <span class="keyword">auto</span> &amp;points = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa1ae3ae2988e0a469a7e79d2f4478a53">m_points</a>;</div>
<div class="line"><span class="lineno">  839</span> </div>
<div class="line"><span class="lineno">  840</span>        <span class="keywordtype">long</span> lcid = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a53139898a9e4bd8b552a133b8bb9703d">cluster_centroid</a>(</div>
<div class="line"><span class="lineno">  841</span>            cl, [&amp;points](<span class="keywordtype">size_t</span> idx) { <span class="keywordflow">return</span> points.row(<span class="keywordtype">long</span>(idx)); },</div>
<div class="line"><span class="lineno">  842</span>            [thr](<span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;p1, <span class="keyword">const</span> <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;p2) {</div>
<div class="line"><span class="lineno">  843</span>                thr();</div>
<div class="line"><span class="lineno">  844</span>                <span class="keywordflow">return</span> <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#aeda213b18f84a384c47ecb9a3c1eb6c3">distance</a>(<a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(p1(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), p1(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>)), <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a40e8e384542f32f8150cabd3db031651">Vec2d</a>(p2(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), p2(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>)));</div>
<div class="line"><span class="lineno">  845</span>            });</div>
<div class="line"><span class="lineno">  846</span> </div>
<div class="line"><span class="lineno">  847</span>        assert(lcid &gt;= 0);</div>
<div class="line"><span class="lineno">  848</span>        <span class="keywordtype">unsigned</span> hid = cl[size_t(lcid)]; <span class="comment">// Head ID</span></div>
<div class="line"><span class="lineno">  849</span> </div>
<div class="line"><span class="lineno">  850</span>        cl_centroids.emplace_back(hid);</div>
<div class="line"><span class="lineno">  851</span> </div>
<div class="line"><span class="lineno">  852</span>        Head &amp;h = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(hid);</div>
<div class="line"><span class="lineno">  853</span> </div>
<div class="line"><span class="lineno">  854</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#affea939f56a669f4102c8c423e190a8d">create_ground_pillar</a>(h.junction_point(), h.dir, h.r_back_mm, h.id)) {</div>
<div class="line"><span class="lineno">  855</span>            BOOST_LOG_TRIVIAL(warning)</div>
<div class="line"><span class="lineno">  856</span>                &lt;&lt; <span class="stringliteral">&quot;Pillar cannot be created for support point id: &quot;</span> &lt;&lt; hid;</div>
<div class="line"><span class="lineno">  857</span>            <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">m_iheads_onmodel</a>.emplace_back(h.id);</div>
<div class="line"><span class="lineno">  858</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  859</span>        }</div>
<div class="line"><span class="lineno">  860</span>    }</div>
<div class="line"><span class="lineno">  861</span> </div>
<div class="line"><span class="lineno">  862</span>    <span class="comment">// now we will go through the clusters ones again and connect the</span></div>
<div class="line"><span class="lineno">  863</span>    <span class="comment">// sidepoints with the cluster centroid (which is a ground pillar)</span></div>
<div class="line"><span class="lineno">  864</span>    <span class="comment">// or a nearby pillar if the centroid is unreachable.</span></div>
<div class="line"><span class="lineno">  865</span>    <span class="keywordtype">size_t</span> ci = 0;</div>
<div class="line"><span class="lineno">  866</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> cl : <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a126e3cbf62160e4c5dafbe83ee911513">m_pillar_clusters</a>) {</div>
<div class="line"><span class="lineno">  867</span>        <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  868</span> </div>
<div class="line"><span class="lineno">  869</span>        <span class="keyword">auto</span> cidx = cl_centroids[ci++];</div>
<div class="line"><span class="lineno">  870</span> </div>
<div class="line"><span class="lineno">  871</span>        <span class="keyword">auto</span> q = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#aee6aade607d6d7b8ef3fb8504e70acfc">query</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(cidx).<a class="code hl_function" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html#a520e3ac5a258ff6c79e31b2fdb13e52c">junction_point</a>(), 1);</div>
<div class="line"><span class="lineno">  872</span>        <span class="keywordflow">if</span> (!q.empty()) {</div>
<div class="line"><span class="lineno">  873</span>            <span class="keywordtype">long</span> centerpillarID = q.front().second;</div>
<div class="line"><span class="lineno">  874</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> c : cl) {</div>
<div class="line"><span class="lineno">  875</span>                <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno">  876</span>                <span class="keywordflow">if</span> (c == cidx) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno">  877</span> </div>
<div class="line"><span class="lineno">  878</span>                <span class="keyword">auto</span> &amp;sidehead = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a19c45b0758c7142dfcb00ea6d7ecdf99">head</a>(c);</div>
<div class="line"><span class="lineno">  879</span> </div>
<div class="line"><span class="lineno">  880</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa44f6227ade9ae0c62df804ed57a2ea9">connect_to_nearpillar</a>(sidehead, centerpillarID) &amp;&amp;</div>
<div class="line"><span class="lineno">  881</span>                    !<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a18a56ee5dc03f81c1300a6ef27d1f5cd">search_pillar_and_connect</a>(sidehead)) {</div>
<div class="line"><span class="lineno">  882</span>                    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> pstart = sidehead.junction_point();</div>
<div class="line"><span class="lineno">  883</span>                    <span class="comment">// Vec3d pend = Vec3d{pstart(X), pstart(Y), gndlvl};</span></div>
<div class="line"><span class="lineno">  884</span>                    <span class="comment">// Could not find a pillar, create one</span></div>
<div class="line"><span class="lineno">  885</span>                    <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#affea939f56a669f4102c8c423e190a8d">create_ground_pillar</a>(pstart, sidehead.dir, sidehead.r_back_mm, sidehead.id);</div>
<div class="line"><span class="lineno">  886</span>                }</div>
<div class="line"><span class="lineno">  887</span>            }</div>
<div class="line"><span class="lineno">  888</span>        }</div>
<div class="line"><span class="lineno">  889</span>    }</div>
<div class="line"><span class="lineno">  890</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a18a56ee5dc03f81c1300a6ef27d1f5cd"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a18a56ee5dc03f81c1300a6ef27d1f5cd">Slic3r::sla::SupportTreeBuildsteps::search_pillar_and_connect</a></div><div class="ttdeci">bool search_pillar_and_connect(const Head &amp;source)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:997</div></div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_aa44f6227ade9ae0c62df804ed57a2ea9"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa44f6227ade9ae0c62df804ed57a2ea9">Slic3r::sla::SupportTreeBuildsteps::connect_to_nearpillar</a></div><div class="ttdeci">bool connect_to_nearpillar(const Head &amp;head, long nearpillar_id)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:385</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a53139898a9e4bd8b552a133b8bb9703d"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a53139898a9e4bd8b552a133b8bb9703d">Slic3r::sla::cluster_centroid</a></div><div class="ttdeci">long cluster_centroid(const ClusterEl &amp;clust, PointFn pointfn, DistFn df)</div><div class="ttdef"><b>Definition</b> Clustering.hpp:33</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_aa08bef6ae20fa1b81be46635a370acac"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#aa08bef6ae20fa1b81be46635a370acac">Slic3r::sla::ClusterEl</a></div><div class="ttdeci">std::vector&lt; unsigned &gt; ClusterEl</div><div class="ttdef"><b>Definition</b> Clustering.hpp:11</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00033">Slic3r::sla::cluster_centroid()</a>, <a class="el" href="../../#l00073">Slic3r::sla::Head::dir</a>, <a class="el" href="../../#l00068">Slic3r::sla::SupportTreeNode::id</a>, <a class="el" href="../../#l00108">Slic3r::sla::Head::junction_point()</a>, <a class="el" href="../../#l00076">Slic3r::sla::Head::r_back_mm</a>, <a class="el" href="../../#l00116">Slic3r::X</a>, and <a class="el" href="../../#l00117">Slic3r::Y</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_ae4456eb60f6c57654454d75390ba579c_cgraph.svg" width="100%" height="388"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_ae4456eb60f6c57654454d75390ba579c_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a053f73f35f3d4850ff72ed551f44872f" name="a053f73f35f3d4850ff72ed551f44872f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a053f73f35f3d4850ff72ed551f44872f">&#9670;&#160;</a></span>routing_to_model()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::sla::SupportTreeBuildsteps::routing_to_model </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 1035</span>{</div>
<div class="line"><span class="lineno"> 1036</span>    <span class="comment">// We need to check if there is an easy way out to the bed surface.</span></div>
<div class="line"><span class="lineno"> 1037</span>    <span class="comment">// If it can be routed there with a bridge shorter than</span></div>
<div class="line"><span class="lineno"> 1038</span>    <span class="comment">// min_bridge_distance.</span></div>
<div class="line"><span class="lineno"> 1039</span> </div>
<div class="line"><span class="lineno"> 1040</span>    ccr::for_each(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">m_iheads_onmodel</a>.begin(), <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60bff6a0de62f9b4bec137ef118d0834">m_iheads_onmodel</a>.end(),</div>
<div class="line"><span class="lineno"> 1041</span>                  [<span class="keyword">this</span>] (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> idx) {</div>
<div class="line"><span class="lineno"> 1042</span>        m_thr();</div>
<div class="line"><span class="lineno"> 1043</span> </div>
<div class="line"><span class="lineno"> 1044</span>        auto&amp; head = m_builder.head(idx);</div>
<div class="line"><span class="lineno"> 1045</span> </div>
<div class="line"><span class="lineno"> 1046</span>        <span class="comment">// Search nearby pillar</span></div>
<div class="line"><span class="lineno"> 1047</span>        if (search_pillar_and_connect(head)) { return; }</div>
<div class="line"><span class="lineno"> 1048</span> </div>
<div class="line"><span class="lineno"> 1049</span>        <span class="comment">// Cannot connect to nearby pillar. We will try to search for</span></div>
<div class="line"><span class="lineno"> 1050</span>        <span class="comment">// a route to the ground.</span></div>
<div class="line"><span class="lineno"> 1051</span>        if (<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#af2f6e5eb7346d73de6340f23a10a5d16">connect_to_ground</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>)) { <span class="keywordflow">return</span>; }</div>
<div class="line"><span class="lineno"> 1052</span> </div>
<div class="line"><span class="lineno"> 1053</span>        <span class="comment">// No route to the ground, so connect to the model body as a last resort</span></div>
<div class="line"><span class="lineno"> 1054</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60b6b9d8b3c352e7870b72b5d52bf5a2">connect_to_model_body</a>(<a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>)) { <span class="keywordflow">return</span>; }</div>
<div class="line"><span class="lineno"> 1055</span> </div>
<div class="line"><span class="lineno"> 1056</span>        <span class="comment">// We have failed to route this head.</span></div>
<div class="line"><span class="lineno"> 1057</span>        BOOST_LOG_TRIVIAL(warning)</div>
<div class="line"><span class="lineno"> 1058</span>                &lt;&lt; <span class="stringliteral">&quot;Failed to route model facing support point. ID: &quot;</span> &lt;&lt; idx;</div>
<div class="line"><span class="lineno"> 1059</span> </div>
<div class="line"><span class="lineno"> 1060</span>        <a class="code hl_function" href="../../d6/d4f/_block_methods_8h.html#a66cee6936cfa159827535f010684d973">head</a>.invalidate();</div>
<div class="line"><span class="lineno"> 1061</span>    });</div>
<div class="line"><span class="lineno"> 1062</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_support_tree_buildsteps_html_a60b6b9d8b3c352e7870b72b5d52bf5a2"><div class="ttname"><a href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a60b6b9d8b3c352e7870b72b5d52bf5a2">Slic3r::sla::SupportTreeBuildsteps::connect_to_model_body</a></div><div class="ttdeci">bool connect_to_model_body(Head &amp;head)</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.cpp:944</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00919">head()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00057">execute()</a>.</p>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a053f73f35f3d4850ff72ed551f44872f_cgraph.svg" width="298" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a053f73f35f3d4850ff72ed551f44872f_icgraph.svg" width="100%" height="300"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a18a56ee5dc03f81c1300a6ef27d1f5cd" name="a18a56ee5dc03f81c1300a6ef27d1f5cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18a56ee5dc03f81c1300a6ef27d1f5cd">&#9670;&#160;</a></span>search_pillar_and_connect()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::sla::SupportTreeBuildsteps::search_pillar_and_connect </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d0/d03/struct_slic3r_1_1sla_1_1_head.html">Head</a> &amp;&#160;</td>
          <td class="paramname"><em>source</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  998</span>{</div>
<div class="line"><span class="lineno">  999</span>    <span class="comment">// Hope that a local copy takes less time than the whole search loop.</span></div>
<div class="line"><span class="lineno"> 1000</span>    <span class="comment">// We also need to remove elements progressively from the copied index.</span></div>
<div class="line"><span class="lineno"> 1001</span>    PointIndex spindex = <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#ae8192c1341f85e5be750beb22380837a">m_pillar_index</a>.<a class="code hl_function" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a2d325329e6ae54618fbe8548c2448b5f">guarded_clone</a>();</div>
<div class="line"><span class="lineno"> 1002</span> </div>
<div class="line"><span class="lineno"> 1003</span>    <span class="keywordtype">long</span> nearest_id = <a class="code hl_variable" href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">SupportTreeNode::ID_UNSET</a>;</div>
<div class="line"><span class="lineno"> 1004</span> </div>
<div class="line"><span class="lineno"> 1005</span>    <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> querypt = source.junction_point();</div>
<div class="line"><span class="lineno"> 1006</span> </div>
<div class="line"><span class="lineno"> 1007</span>    <span class="keywordflow">while</span>(nearest_id &lt; 0 &amp;&amp; !spindex.empty()) { <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a754da787c6ed0af7b1e804713118fc36">m_thr</a>();</div>
<div class="line"><span class="lineno"> 1008</span>        <span class="comment">// loop until a suitable head is not found</span></div>
<div class="line"><span class="lineno"> 1009</span>        <span class="comment">// if there is a pillar closer than the cluster center</span></div>
<div class="line"><span class="lineno"> 1010</span>        <span class="comment">// (this may happen as the clustering is not perfect)</span></div>
<div class="line"><span class="lineno"> 1011</span>        <span class="comment">// than we will bridge to this closer pillar</span></div>
<div class="line"><span class="lineno"> 1012</span> </div>
<div class="line"><span class="lineno"> 1013</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> qp(querypt(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a543d7f91c29cb79266ee7057245ccd7d">X</a>), querypt(<a class="code hl_enumvalue" href="../../d2/d57/namespace_slic3r_1_1sla.html#a87ee4f08b86bf972ebf5df89bbf2adf6a361f1cfece5e4cc32dccfe27534d44de">Y</a>), <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a>);</div>
<div class="line"><span class="lineno"> 1014</span>        <span class="keyword">auto</span> qres = spindex.nearest(qp, 1);</div>
<div class="line"><span class="lineno"> 1015</span>        <span class="keywordflow">if</span>(qres.empty()) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 1016</span> </div>
<div class="line"><span class="lineno"> 1017</span>        <span class="keyword">auto</span> ne = qres.front();</div>
<div class="line"><span class="lineno"> 1018</span>        nearest_id = ne.second;</div>
<div class="line"><span class="lineno"> 1019</span> </div>
<div class="line"><span class="lineno"> 1020</span>        <span class="keywordflow">if</span>(nearest_id &gt;= 0) {</div>
<div class="line"><span class="lineno"> 1021</span>            <span class="keywordflow">if</span> (<span class="keywordtype">size_t</span>(nearest_id) &lt; <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ab8476c24a5d68b3dfcee43026bd81c0f">pillarcount</a>()) {</div>
<div class="line"><span class="lineno"> 1022</span>                <span class="keywordflow">if</span>(!<a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#aa44f6227ade9ae0c62df804ed57a2ea9">connect_to_nearpillar</a>(source, nearest_id) ||</div>
<div class="line"><span class="lineno"> 1023</span>                    <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_function" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#ae3ed5926f49bcb0701fa7866c7f22fbb">pillar</a>(nearest_id).r &lt; source.r_back_mm) {</div>
<div class="line"><span class="lineno"> 1024</span>                    nearest_id = <a class="code hl_variable" href="../../d4/d53/struct_slic3r_1_1sla_1_1_support_tree_node.html#a76078addba57fd698274703ced05c0d3">SupportTreeNode::ID_UNSET</a>;    <span class="comment">// continue searching</span></div>
<div class="line"><span class="lineno"> 1025</span>                    spindex.remove(ne);       <span class="comment">// without the current pillar</span></div>
<div class="line"><span class="lineno"> 1026</span>                }</div>
<div class="line"><span class="lineno"> 1027</span>            }</div>
<div class="line"><span class="lineno"> 1028</span>        }</div>
<div class="line"><span class="lineno"> 1029</span>    }</div>
<div class="line"><span class="lineno"> 1030</span> </div>
<div class="line"><span class="lineno"> 1031</span>    <span class="keywordflow">return</span> nearest_id &gt;= 0;</div>
<div class="line"><span class="lineno"> 1032</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1sla_1_1_pillar_index_html_a2d325329e6ae54618fbe8548c2448b5f"><div class="ttname"><a href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html#a2d325329e6ae54618fbe8548c2448b5f">Slic3r::sla::PillarIndex::guarded_clone</a></div><div class="ttdeci">PointIndex guarded_clone()</div><div class="ttdef"><b>Definition</b> SupportTreeBuildsteps.hpp:157</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00051">Slic3r::sla::PointIndex::empty()</a>, <a class="el" href="../../#l00108">Slic3r::sla::Head::junction_point()</a>, <a class="el" href="../../#l00070">Slic3r::sla::PointIndex::nearest()</a>, <a class="el" href="../../#l00076">Slic3r::sla::Head::r_back_mm</a>, <a class="el" href="../../#l00055">Slic3r::sla::PointIndex::remove()</a>, <a class="el" href="../../#l00116">Slic3r::X</a>, and <a class="el" href="../../#l00117">Slic3r::Y</a>.</p>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_a18a56ee5dc03f81c1300a6ef27d1f5cd_cgraph.svg" width="100%" height="486"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad9c4122856fb75b9f670cdb74e5aa55d" name="ad9c4122856fb75b9f670cdb74e5aa55d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9c4122856fb75b9f670cdb74e5aa55d">&#9670;&#160;</a></span>search_widening_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::optional&lt; <a class="el" href="../../d7/d4c/struct_slic3r_1_1sla_1_1_diff_bridge.html">DiffBridge</a> &gt; Slic3r::sla::SupportTreeBuildsteps::search_widening_path </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>jp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>radius</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>new_radius</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  586</span>{</div>
<div class="line"><span class="lineno">  587</span>    <span class="keywordtype">double</span> w = radius + 2 * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>;</div>
<div class="line"><span class="lineno">  588</span>    <span class="keywordtype">double</span> stopval = w + jp.z() - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a>;</div>
<div class="line"><span class="lineno">  589</span>    Optimizer&lt;AlgNLoptSubplex&gt; solver(<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#ac95d11abfe682f14a45bf0aaa9f022fa">get_criteria</a>(<a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>).stop_score(stopval));</div>
<div class="line"><span class="lineno">  590</span> </div>
<div class="line"><span class="lineno">  591</span>    <span class="keyword">auto</span> [polar, azimuth] = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#acbe068093e1e77c258297899a2557961">dir_to_spheric</a>(dir);</div>
<div class="line"><span class="lineno">  592</span> </div>
<div class="line"><span class="lineno">  593</span>    <span class="keywordtype">double</span> fallback_ratio = radius / <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>;</div>
<div class="line"><span class="lineno">  594</span> </div>
<div class="line"><span class="lineno">  595</span>    <span class="keyword">auto</span> oresult = solver.to_max().optimize(</div>
<div class="line"><span class="lineno">  596</span>        [<span class="keyword">this</span>, jp, radius, new_radius](<span class="keyword">const</span> opt::Input&lt;3&gt; &amp;input) {</div>
<div class="line"><span class="lineno">  597</span>            <span class="keyword">auto</span> &amp;[plr, azm, t] = input;</div>
<div class="line"><span class="lineno">  598</span> </div>
<div class="line"><span class="lineno">  599</span>            <span class="keyword">auto</span>   <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a8277e0910d750195b448797616e091ad">d</a>   = <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(plr, azm).normalized();</div>
<div class="line"><span class="lineno">  600</span>            <span class="keywordtype">double</span> ret = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a43adf44601f52bed5173092f6ed257bf">pinhead_mesh_intersect</a>(jp, d, radius, new_radius, t)</div>
<div class="line"><span class="lineno">  601</span>                             .<a class="code hl_function" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html#a136a76c5c42f0ca1c119bf18719c5ff4">distance</a>();</div>
<div class="line"><span class="lineno">  602</span>            <span class="keywordtype">double</span> <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a74e8333ad11685ff3bdae589c8f6e34d">down</a> = <a class="code hl_function" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a693c6704911233292e6d8a04382ea364">bridge_mesh_distance</a>(jp + t * d, d, new_radius);</div>
<div class="line"><span class="lineno">  603</span> </div>
<div class="line"><span class="lineno">  604</span>            <span class="keywordflow">if</span> (ret &gt; t &amp;&amp; std::isinf(down))</div>
<div class="line"><span class="lineno">  605</span>                ret += jp.z() - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a108f39afec024089e7ac314872de51fa">m_builder</a>.<a class="code hl_variable" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html#a52e5bfc7da77c57a7f2d558438750783">ground_level</a>;</div>
<div class="line"><span class="lineno">  606</span> </div>
<div class="line"><span class="lineno">  607</span>            <span class="keywordflow">return</span> ret;</div>
<div class="line"><span class="lineno">  608</span>        },</div>
<div class="line"><span class="lineno">  609</span>        <a class="code hl_function" href="../../db/dc1/namespacelibnest2d_1_1opt.html#acbcb2d5b28f92a5b9a2a0e77c10e3daf">initvals</a>({polar, azimuth, w}), <span class="comment">// start with what we have</span></div>
<div class="line"><span class="lineno">  610</span>        <a class="code hl_function" href="../../d8/d86/namespace_slic3r_1_1opt.html#ad9b818b6999367924c5dcf86a940c2f4">bounds</a>({</div>
<div class="line"><span class="lineno">  611</span>            {<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a> - <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a19fdd4d4863568ec196e1c7abcf6316a">bridge_slope</a>, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>}, <span class="comment">// Must not exceed the slope limit</span></div>
<div class="line"><span class="lineno">  612</span>            {-<a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>, <a class="code hl_define" href="../../d4/d08/rboxlib_8c.html#a598a3330b3c21701223ee0ca14316eca">PI</a>}, <span class="comment">// azimuth can be a full search</span></div>
<div class="line"><span class="lineno">  613</span>            {radius + <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>,</div>
<div class="line"><span class="lineno">  614</span>                  fallback_ratio * <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a0c7dd6d1b6ab761e6bb8d29d3b3808e1">max_bridge_length_mm</a>}</div>
<div class="line"><span class="lineno">  615</span>        }));</div>
<div class="line"><span class="lineno">  616</span> </div>
<div class="line"><span class="lineno">  617</span>    <span class="keywordflow">if</span> (oresult.score &gt;= stopval) {</div>
<div class="line"><span class="lineno">  618</span>        polar       = std::get&lt;0&gt;(oresult.optimum);</div>
<div class="line"><span class="lineno">  619</span>        azimuth     = std::get&lt;1&gt;(oresult.optimum);</div>
<div class="line"><span class="lineno">  620</span>        <span class="keywordtype">double</span> t    = std::get&lt;2&gt;(oresult.optimum);</div>
<div class="line"><span class="lineno">  621</span>        <a class="code hl_typedef" href="../../d2/d57/namespace_slic3r_1_1sla.html#aa20f7e9692481f118a14e85faa01ed0e">Vec3d</a>  endp = jp + t * <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a7a4459118ce110e31fe2e0e48e5b05f0">spheric_to_dir</a>(polar, azimuth);</div>
<div class="line"><span class="lineno">  622</span> </div>
<div class="line"><span class="lineno">  623</span>        <span class="keywordflow">return</span> DiffBridge(jp, endp, radius, <a class="code hl_variable" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a47c51bbf2c104f251e034b6805e32b53">m_cfg</a>.<a class="code hl_variable" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html#a2c75265d112b6139202567bb55576f60">head_back_radius_mm</a>);</div>
<div class="line"><span class="lineno">  624</span>    }</div>
<div class="line"><span class="lineno">  625</span> </div>
<div class="line"><span class="lineno">  626</span>    <span class="keywordflow">return</span> {};</div>
<div class="line"><span class="lineno">  627</span>}</div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_ad1b266b182e7c12ec61378819e3785f1a74e8333ad11685ff3bdae589c8f6e34d"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#ad1b266b182e7c12ec61378819e3785f1a74e8333ad11685ff3bdae589c8f6e34d">marchsq::__impl::Dir::down</a></div><div class="ttdeci">@ down</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00023">Slic3r::sla::dir_to_spheric()</a>, <a class="el" href="../../#l00017">Slic3r::sla::get_criteria()</a>, <a class="el" href="../../#l00147">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::optimize()</a>, <a class="el" href="../../#l00033">PI</a>, <a class="el" href="../../#l00032">Slic3r::sla::spheric_to_dir()</a>, and <a class="el" href="../../#l00124">Slic3r::opt::Optimizer&lt; Method, Enable &gt;::to_max()</a>.</p>
<div id="dynsection-31" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-31-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-31-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-31-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps_ad9c4122856fb75b9f670cdb74e5aa55d_cgraph.svg" width="635" height="298"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a6c78a487a0fb0a882deec660bb788ee8" name="a6c78a487a0fb0a882deec660bb788ee8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c78a487a0fb0a882deec660bb788ee8">&#9670;&#160;</a></span>m_bridge_mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">ccr::BlockingMutex Slic3r::sla::SupportTreeBuildsteps::m_bridge_mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a108f39afec024089e7ac314872de51fa" name="a108f39afec024089e7ac314872de51fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a108f39afec024089e7ac314872de51fa">&#9670;&#160;</a></span>m_builder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d07/class_slic3r_1_1sla_1_1_support_tree_builder.html">SupportTreeBuilder</a>&amp; Slic3r::sla::SupportTreeBuildsteps::m_builder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00318">add_pillar_base()</a>, and <a class="el" href="../../#l00370">merge_result()</a>.</p>

</div>
</div>
<a id="a47c51bbf2c104f251e034b6805e32b53" name="a47c51bbf2c104f251e034b6805e32b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47c51bbf2c104f251e034b6805e32b53">&#9670;&#160;</a></span>m_cfg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d4/df4/struct_slic3r_1_1sla_1_1_support_tree_config.html">SupportTreeConfig</a>&amp; Slic3r::sla::SupportTreeBuildsteps::m_cfg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00318">add_pillar_base()</a>, <a class="el" href="../../#l00276">bridge_mesh_intersect()</a>, and <a class="el" href="../../#l00250">pinhead_mesh_intersect()</a>.</p>

</div>
</div>
<a id="a2f76631a5c1c200d8fc63aec233b1fd0" name="a2f76631a5c1c200d8fc63aec233b1fd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f76631a5c1c200d8fc63aec233b1fd0">&#9670;&#160;</a></span>m_head_to_ground_scans</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;unsigned, <a class="el" href="../../db/d86/class_slic3r_1_1sla_1_1_indexed_mesh_1_1hit__result.html">IndexedMesh::hit_result</a>&gt; Slic3r::sla::SupportTreeBuildsteps::m_head_to_ground_scans</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a5a4ab81942d146088a49028ac306bc25" name="a5a4ab81942d146088a49028ac306bc25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a4ab81942d146088a49028ac306bc25">&#9670;&#160;</a></span>m_iheadless</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> Slic3r::sla::SupportTreeBuildsteps::m_iheadless</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a57666ed03914acce2131d80dc93aa1bb" name="a57666ed03914acce2131d80dc93aa1bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57666ed03914acce2131d80dc93aa1bb">&#9670;&#160;</a></span>m_iheads</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> Slic3r::sla::SupportTreeBuildsteps::m_iheads</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a60bff6a0de62f9b4bec137ef118d0834" name="a60bff6a0de62f9b4bec137ef118d0834"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60bff6a0de62f9b4bec137ef118d0834">&#9670;&#160;</a></span>m_iheads_onmodel</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a> Slic3r::sla::SupportTreeBuildsteps::m_iheads_onmodel</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a64a91d8667eff3bfa4ae82c52c1f0d04" name="a64a91d8667eff3bfa4ae82c52c1f0d04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64a91d8667eff3bfa4ae82c52c1f0d04">&#9670;&#160;</a></span>m_mesh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="../../d6/d2e/class_slic3r_1_1sla_1_1_indexed_mesh.html">IndexedMesh</a>&amp; Slic3r::sla::SupportTreeBuildsteps::m_mesh</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00178">pinhead_mesh_intersect()</a>, and <a class="el" href="../../#l00225">ray_mesh_intersect()</a>.</p>

</div>
</div>
<a id="a126e3cbf62160e4c5dafbe83ee911513" name="a126e3cbf62160e4c5dafbe83ee911513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a126e3cbf62160e4c5dafbe83ee911513">&#9670;&#160;</a></span>m_pillar_clusters</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;<a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html#a0ae136f8d1b18b1b11bff5e6c584751d">PtIndices</a>&gt; Slic3r::sla::SupportTreeBuildsteps::m_pillar_clusters</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae8192c1341f85e5be750beb22380837a" name="ae8192c1341f85e5be750beb22380837a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8192c1341f85e5be750beb22380837a">&#9670;&#160;</a></span>m_pillar_index</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d7/d21/class_slic3r_1_1sla_1_1_pillar_index.html">PillarIndex</a> Slic3r::sla::SupportTreeBuildsteps::m_pillar_index</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa1ae3ae2988e0a469a7e79d2f4478a53" name="aa1ae3ae2988e0a469a7e79d2f4478a53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1ae3ae2988e0a469a7e79d2f4478a53">&#9670;&#160;</a></span>m_points</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#a28e5de83ad8f2745d66822d2db50212f">PointSet</a> Slic3r::sla::SupportTreeBuildsteps::m_points</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00035">SupportTreeBuildsteps()</a>.</p>

</div>
</div>
<a id="aef07ad82fb77da60753eb21377f87a29" name="aef07ad82fb77da60753eb21377f87a29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef07ad82fb77da60753eb21377f87a29">&#9670;&#160;</a></span>m_support_nmls</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#a28e5de83ad8f2745d66822d2db50212f">PointSet</a> Slic3r::sla::SupportTreeBuildsteps::m_support_nmls</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="abbdde1207bdfb8c15838b4f763ffdd49" name="abbdde1207bdfb8c15838b4f763ffdd49"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbdde1207bdfb8c15838b4f763ffdd49">&#9670;&#160;</a></span>m_support_pts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::vector&lt;<a class="el" href="../../d7/d60/struct_slic3r_1_1sla_1_1_support_point.html">SupportPoint</a>&gt;&amp; Slic3r::sla::SupportTreeBuildsteps::m_support_pts</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00035">SupportTreeBuildsteps()</a>.</p>

</div>
</div>
<a id="a754da787c6ed0af7b1e804713118fc36" name="a754da787c6ed0af7b1e804713118fc36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a754da787c6ed0af7b1e804713118fc36">&#9670;&#160;</a></span>m_thr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html#adda397976fb15a4bfcd4468c0668acea">ThrowOnCancel</a> Slic3r::sla::SupportTreeBuildsteps::m_thr</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/libslic3r/SLA/<a class="el" href="../../">SupportTreeBuildsteps.hpp</a></li>
<li>src/libslic3r/SLA/<a class="el" href="../../">SupportTreeBuildsteps.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d2/d57/namespace_slic3r_1_1sla.html">sla</a></li><li class="navelem"><a class="el" href="../../d3/db8/class_slic3r_1_1sla_1_1_support_tree_buildsteps.html">SupportTreeBuildsteps</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
