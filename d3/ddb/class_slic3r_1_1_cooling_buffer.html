<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrcaSlicer: Slic3r::CoolingBuffer Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../OrcaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">OrcaSlicer<span id="projectnumber">&#160;1.6.3</span>
   </div>
   <div id="projectbrief">OrcaSlicer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('d3/ddb/class_slic3r_1_1_cooling_buffer.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../d6/d52/class_slic3r_1_1_cooling_buffer-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::CoolingBuffer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="../../">src/libslic3r/GCode/CoolingBuffer.hpp</a>&gt;</code></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::CoolingBuffer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d8d/class_slic3r_1_1_cooling_buffer__coll__graph.svg" width="596" height="348"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:af79601fb79aecb7f2d657a2921545242"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#af79601fb79aecb7f2d657a2921545242">CoolingBuffer</a> (<a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;gcodegen)</td></tr>
<tr class="separator:af79601fb79aecb7f2d657a2921545242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9cb99a8e449d284c4b76b1ef6c3ab6df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a9cb99a8e449d284c4b76b1ef6c3ab6df">reset</a> (const <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &amp;<a class="el" href="../../db/d17/xmltok_8h.html#d3/d90/structposition">position</a>)</td></tr>
<tr class="separator:a9cb99a8e449d284c4b76b1ef6c3ab6df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad18a9e8f3e8078621f09f7d3c8691d35"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad18a9e8f3e8078621f09f7d3c8691d35">set_current_extruder</a> (unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> extruder_id)</td></tr>
<tr class="separator:ad18a9e8f3e8078621f09f7d3c8691d35"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3313bc5271e4cc935b529572e0cac6e3"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3313bc5271e4cc935b529572e0cac6e3">process_layer</a> (std::string &amp;&amp;gcode, size_t layer_id, bool flush)</td></tr>
<tr class="separator:a3313bc5271e4cc935b529572e0cac6e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a07b3bb46704ba94699e78cdc560deef8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a07b3bb46704ba94699e78cdc560deef8">operator=</a> (const <a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp;)=delete</td></tr>
<tr class="separator:a07b3bb46704ba94699e78cdc560deef8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad65e3b942d606c994b626d0818f46e10"><td class="memItemLeft" align="right" valign="top">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad65e3b942d606c994b626d0818f46e10">parse_layer_gcode</a> (const std::string &amp;gcode, std::vector&lt; float &gt; &amp;current_pos) const</td></tr>
<tr class="separator:ad65e3b942d606c994b626d0818f46e10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a039c2dcd08f3d002182b4d009caafd7c"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a039c2dcd08f3d002182b4d009caafd7c">calculate_layer_slowdown</a> (std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;per_extruder_adjustments)</td></tr>
<tr class="separator:a039c2dcd08f3d002182b4d009caafd7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad6d6ecc9309d2fa4f3962bc4715b73fc"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad6d6ecc9309d2fa4f3962bc4715b73fc">apply_layer_cooldown</a> (const std::string &amp;gcode, size_t layer_id, float layer_time, std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;per_extruder_adjustments)</td></tr>
<tr class="separator:ad6d6ecc9309d2fa4f3962bc4715b73fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ace03e18b93c1e6ef690fe4d171bc3e11"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a></td></tr>
<tr class="separator:ace03e18b93c1e6ef690fe4d171bc3e11"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b5d76a211c23bf0db73c90ef41e6886"><td class="memItemLeft" align="right" valign="top">std::vector&lt; char &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a2b5d76a211c23bf0db73c90ef41e6886">m_axis</a></td></tr>
<tr class="separator:a2b5d76a211c23bf0db73c90ef41e6886"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a54a957a8014098e34682fc52e8fcdbd4"><td class="memItemLeft" align="right" valign="top">std::vector&lt; float &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a></td></tr>
<tr class="separator:a54a957a8014098e34682fc52e8fcdbd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6a8b43f1a4e019265862ae709eb57b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a></td></tr>
<tr class="separator:ab6a8b43f1a4e019265862ae709eb57b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1131825fa00e1c777edfcc668b44a070"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a></td></tr>
<tr class="separator:a1131825fa00e1c777edfcc668b44a070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f70d25be0e9b27329aec4f3489d20f7"><td class="memItemLeft" align="right" valign="top">std::vector&lt; unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a></td></tr>
<tr class="separator:a1f70d25be0e9b27329aec4f3489d20f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaad867e6e51db8529b95dd20f565e524"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a> { 0 }</td></tr>
<tr class="separator:aaad867e6e51db8529b95dd20f565e524"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a31140eda5547d15e3b78e43f576768f0"><td class="memItemLeft" align="right" valign="top">const std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a></td></tr>
<tr class="separator:a31140eda5547d15e3b78e43f576768f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ab506fd68632cff030b041c5cd6de8d"><td class="memItemLeft" align="right" valign="top">const PrintConfig &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a></td></tr>
<tr class="separator:a1ab506fd68632cff030b041c5cd6de8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73dca3613882898f631e407325cfa742"><td class="memItemLeft" align="right" valign="top">unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a></td></tr>
<tr class="separator:a73dca3613882898f631e407325cfa742"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82fae524c24635ded4fdeb6457b5260e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">m_cooling_logic_proportional</a> = false</td></tr>
<tr class="separator:a82fae524c24635ded4fdeb6457b5260e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3234bcf20b9a40c0a186b6eb30c7b037"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a></td></tr>
<tr class="separator:a3234bcf20b9a40c0a186b6eb30c7b037"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="af79601fb79aecb7f2d657a2921545242" name="af79601fb79aecb7f2d657a2921545242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af79601fb79aecb7f2d657a2921545242">&#9670;&#160;</a></span>CoolingBuffer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Slic3r::CoolingBuffer::CoolingBuffer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../dd/dc8/class_slic3r_1_1_g_code.html">GCode</a> &amp;&#160;</td>
          <td class="paramname"><em>gcodegen</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   20</span>                                            : <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>(gcodegen.config()), <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>(gcodegen.writer().toolchange_prefix()), <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a>(0)</div>
<div class="line"><span class="lineno">   21</span>{</div>
<div class="line"><span class="lineno">   22</span>    this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a9cb99a8e449d284c4b76b1ef6c3ab6df">reset</a>(gcodegen.writer().get_position());</div>
<div class="line"><span class="lineno">   23</span> </div>
<div class="line"><span class="lineno">   24</span>    <span class="keyword">const</span> std::vector&lt;Extruder&gt; &amp;extruders = gcodegen.writer().extruders();</div>
<div class="line"><span class="lineno">   25</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.reserve(extruders.size());</div>
<div class="line"><span class="lineno">   26</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> Extruder &amp;ex : extruders) {</div>
<div class="line"><span class="lineno">   27</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a> = std::max(ex.id() + 1, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a>);</div>
<div class="line"><span class="lineno">   28</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.emplace_back(ex.id());</div>
<div class="line"><span class="lineno">   29</span>    }</div>
<div class="line"><span class="lineno">   30</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a1ab506fd68632cff030b041c5cd6de8d"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">Slic3r::CoolingBuffer::m_config</a></div><div class="ttdeci">const PrintConfig &amp; m_config</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:55</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a1f70d25be0e9b27329aec4f3489d20f7"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">Slic3r::CoolingBuffer::m_extruder_ids</a></div><div class="ttdeci">std::vector&lt; unsigned int &gt; m_extruder_ids</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:49</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a31140eda5547d15e3b78e43f576768f0"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">Slic3r::CoolingBuffer::m_toolchange_prefix</a></div><div class="ttdeci">const std::string m_toolchange_prefix</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:52</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a73dca3613882898f631e407325cfa742"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">Slic3r::CoolingBuffer::m_current_extruder</a></div><div class="ttdeci">unsigned int m_current_extruder</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:56</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a9cb99a8e449d284c4b76b1ef6c3ab6df"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a9cb99a8e449d284c4b76b1ef6c3ab6df">Slic3r::CoolingBuffer::reset</a></div><div class="ttdeci">void reset(const Vec3d &amp;position)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:32</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_aaad867e6e51db8529b95dd20f565e524"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">Slic3r::CoolingBuffer::m_num_extruders</a></div><div class="ttdeci">unsigned int m_num_extruders</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:51</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00036">Slic3r::GCodeWriter::extruders()</a>, <a class="el" href="../../#l00078">Slic3r::GCodeWriter::get_position()</a>, <a class="el" href="../../#l00049">m_extruder_ids</a>, <a class="el" href="../../#l00051">m_num_extruders</a>, <a class="el" href="../../#l00032">reset()</a>, and <a class="el" href="../../#l00187">Slic3r::GCode::writer()</a>.</p>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_af79601fb79aecb7f2d657a2921545242_cgraph.svg" width="344" height="232"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ad6d6ecc9309d2fa4f3962bc4715b73fc" name="ad6d6ecc9309d2fa4f3962bc4715b73fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad6d6ecc9309d2fa4f3962bc4715b73fc">&#9670;&#160;</a></span>apply_layer_cooldown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::apply_layer_cooldown </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>layer_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>per_extruder_adjustments</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  714</span>{</div>
<div class="line"><span class="lineno">  715</span>    <span class="comment">// First sort the adjustment lines by of multiple extruders by their position in the source G-code.</span></div>
<div class="line"><span class="lineno">  716</span>    std::vector&lt;const CoolingLine*&gt; lines;</div>
<div class="line"><span class="lineno">  717</span>    {</div>
<div class="line"><span class="lineno">  718</span>        <span class="keywordtype">size_t</span> n_lines = 0;</div>
<div class="line"><span class="lineno">  719</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> PerExtruderAdjustments &amp;adj : per_extruder_adjustments)</div>
<div class="line"><span class="lineno">  720</span>            n_lines += adj.lines.<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>();</div>
<div class="line"><span class="lineno">  721</span>        lines.reserve(n_lines);</div>
<div class="line"><span class="lineno">  722</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> PerExtruderAdjustments &amp;adj : per_extruder_adjustments)</div>
<div class="line"><span class="lineno">  723</span>            for (const CoolingLine &amp;line : adj.lines)</div>
<div class="line"><span class="lineno">  724</span>                lines.emplace_back(&amp;line);</div>
<div class="line"><span class="lineno">  725</span>        std::sort(lines.begin(), lines.end(), [](<span class="keyword">const</span> CoolingLine *ln1, <span class="keyword">const</span> CoolingLine *ln2) { return ln1-&gt;line_start &lt; ln2-&gt;line_start; } );</div>
<div class="line"><span class="lineno">  726</span>    }</div>
<div class="line"><span class="lineno">  727</span>    <span class="comment">// Second generate the adjusted G-code.</span></div>
<div class="line"><span class="lineno">  728</span>    std::string new_gcode;</div>
<div class="line"><span class="lineno">  729</span>    new_gcode.reserve(<a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.size() * 2);</div>
<div class="line"><span class="lineno">  730</span>    <span class="keywordtype">bool</span> overhang_fan_control= <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  731</span>    <span class="keywordtype">int</span>  overhang_fan_speed   = 0;</div>
<div class="line"><span class="lineno">  732</span>    <span class="keywordtype">bool</span> supp_interface_fan_control= <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  733</span>    <span class="keywordtype">int</span>  supp_interface_fan_speed = 0;</div>
<div class="line"><span class="lineno">  734</span>    <span class="keyword">auto</span> change_extruder_set_fan = [ <span class="keyword">this</span>, layer_id, layer_time, &amp;new_gcode, &amp;overhang_fan_control, &amp;overhang_fan_speed, &amp;supp_interface_fan_control, &amp;supp_interface_fan_speed](<span class="keywordtype">bool</span> immediately_apply) {</div>
<div class="line"><span class="lineno">  735</span><span class="preprocessor">#define EXTRUDER_CONFIG(OPT) m_config.OPT.get_at(m_current_extruder)</span></div>
<div class="line"><span class="lineno">  736</span>        <span class="keywordtype">int</span> fan_min_speed = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(fan_min_speed);</div>
<div class="line"><span class="lineno">  737</span>        <span class="keywordtype">int</span> fan_speed_new = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(reduce_fan_stop_start_freq) ? fan_min_speed : 0;</div>
<div class="line"><span class="lineno">  738</span>        <span class="comment">//BBS</span></div>
<div class="line"><span class="lineno">  739</span>        <span class="keywordtype">int</span> additional_fan_speed_new = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a9b6fe8a165a005c9dd45203f17cbc9e6">additional_cooling_fan_speed</a>);</div>
<div class="line"><span class="lineno">  740</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a> = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a>);</div>
<div class="line"><span class="lineno">  741</span>        <span class="comment">// Is the fan speed ramp enabled?</span></div>
<div class="line"><span class="lineno">  742</span>        <span class="keywordtype">int</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b749a352e579f793bce113731ac4684">full_fan_speed_layer</a> = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b749a352e579f793bce113731ac4684">full_fan_speed_layer</a>);</div>
<div class="line"><span class="lineno">  743</span>        supp_interface_fan_speed = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(support_material_interface_fan_speed);</div>
<div class="line"><span class="lineno">  744</span> </div>
<div class="line"><span class="lineno">  745</span>        <span class="keywordflow">if</span> (close_fan_the_first_x_layers &lt;= 0 &amp;&amp; full_fan_speed_layer &gt; 0) {</div>
<div class="line"><span class="lineno">  746</span>            <span class="comment">// When ramping up fan speed from close_fan_the_first_x_layers to full_fan_speed_layer, force close_fan_the_first_x_layers above zero,</span></div>
<div class="line"><span class="lineno">  747</span>            <span class="comment">// so there will be a zero fan speed at least at the 1st layer.</span></div>
<div class="line"><span class="lineno">  748</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a> = 1;</div>
<div class="line"><span class="lineno">  749</span>        }</div>
<div class="line"><span class="lineno">  750</span>        <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(layer_id) &gt;= <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a>) {</div>
<div class="line"><span class="lineno">  751</span>            <span class="keywordtype">int</span>   fan_max_speed             = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(fan_max_speed);</div>
<div class="line"><span class="lineno">  752</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a> = float(<a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>));</div>
<div class="line"><span class="lineno">  753</span>            <span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a34bb79fb8234fc9563f7c3e8fc65e7f0">fan_cooling_layer_time</a>      = float(<a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a34bb79fb8234fc9563f7c3e8fc65e7f0">fan_cooling_layer_time</a>));</div>
<div class="line"><span class="lineno">  754</span>            <span class="comment">//BBS: always enable the fan speed interpolation according to layer time</span></div>
<div class="line"><span class="lineno">  755</span>            <span class="comment">//if (EXTRUDER_CONFIG(cooling)) {</span></div>
<div class="line"><span class="lineno">  756</span>                <span class="keywordflow">if</span> (layer_time &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>) {</div>
<div class="line"><span class="lineno">  757</span>                    <span class="comment">// Layer time very short. Enable the fan to a full throttle.</span></div>
<div class="line"><span class="lineno">  758</span>                    fan_speed_new = fan_max_speed;</div>
<div class="line"><span class="lineno">  759</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (layer_time &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a34bb79fb8234fc9563f7c3e8fc65e7f0">fan_cooling_layer_time</a>) {</div>
<div class="line"><span class="lineno">  760</span>                    <span class="comment">// Layer time quite short. Enable the fan proportionally according to the current layer time.</span></div>
<div class="line"><span class="lineno">  761</span>                    assert(layer_time &gt;= <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>);</div>
<div class="line"><span class="lineno">  762</span>                    <span class="keywordtype">double</span> t = (layer_time - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>) / (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a34bb79fb8234fc9563f7c3e8fc65e7f0">fan_cooling_layer_time</a> - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>);</div>
<div class="line"><span class="lineno">  763</span>                    fan_speed_new = <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a>(t * fan_min_speed + (1. - t) * fan_max_speed) + 0.5);</div>
<div class="line"><span class="lineno">  764</span>                }</div>
<div class="line"><span class="lineno">  765</span>            <span class="comment">//}</span></div>
<div class="line"><span class="lineno">  766</span>            overhang_fan_speed   = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(overhang_fan_speed);</div>
<div class="line"><span class="lineno">  767</span>            <span class="keywordflow">if</span> (<span class="keywordtype">int</span>(layer_id) &gt;= <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a> &amp;&amp; <span class="keywordtype">int</span>(layer_id) + 1 &lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b749a352e579f793bce113731ac4684">full_fan_speed_layer</a>) {</div>
<div class="line"><span class="lineno">  768</span>                <span class="comment">// Ramp up the fan speed from close_fan_the_first_x_layers to full_fan_speed_layer.</span></div>
<div class="line"><span class="lineno">  769</span>                <span class="keywordtype">float</span> factor = float(<span class="keywordtype">int</span>(layer_id + 1) - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a>) / float(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a2b749a352e579f793bce113731ac4684">full_fan_speed_layer</a> - <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">close_fan_the_first_x_layers</a>);</div>
<div class="line"><span class="lineno">  770</span>                fan_speed_new    = std::clamp(<span class="keywordtype">int</span>(<span class="keywordtype">float</span>(fan_speed_new) * factor + 0.5f), 0, 255);</div>
<div class="line"><span class="lineno">  771</span>                overhang_fan_speed = std::clamp(<span class="keywordtype">int</span>(<span class="keywordtype">float</span>(overhang_fan_speed) * factor + 0.5f), 0, 255);</div>
<div class="line"><span class="lineno">  772</span>            }</div>
<div class="line"><span class="lineno">  773</span>            supp_interface_fan_speed = <a class="code hl_define" href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a>(support_material_interface_fan_speed);</div>
<div class="line"><span class="lineno">  774</span>            supp_interface_fan_control = supp_interface_fan_speed &gt;= 0;</div>
<div class="line"><span class="lineno">  775</span> </div>
<div class="line"><span class="lineno">  776</span><span class="preprocessor">#undef EXTRUDER_CONFIG</span></div>
<div class="line"><span class="lineno">  777</span>            overhang_fan_control= overhang_fan_speed &gt; fan_speed_new;</div>
<div class="line"><span class="lineno">  778</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  779</span>            overhang_fan_control= <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  780</span>            overhang_fan_speed   = 0;</div>
<div class="line"><span class="lineno">  781</span>            fan_speed_new      = 0;</div>
<div class="line"><span class="lineno">  782</span>            additional_fan_speed_new = 0;</div>
<div class="line"><span class="lineno">  783</span>            supp_interface_fan_control= <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  784</span>            supp_interface_fan_speed   = 0;</div>
<div class="line"><span class="lineno">  785</span>        }</div>
<div class="line"><span class="lineno">  786</span>        <span class="keywordflow">if</span> (fan_speed_new != <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a>) {</div>
<div class="line"><span class="lineno">  787</span>            <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> = fan_speed_new;</div>
<div class="line"><span class="lineno">  788</span>            <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a> = fan_speed_new;</div>
<div class="line"><span class="lineno">  789</span>            <span class="keywordflow">if</span> (immediately_apply)</div>
<div class="line"><span class="lineno">  790</span>                new_gcode  += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a3915a7b9648a6097ba68bf89682627f2">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a>);</div>
<div class="line"><span class="lineno">  791</span>        }</div>
<div class="line"><span class="lineno">  792</span>        <span class="comment">//BBS</span></div>
<div class="line"><span class="lineno">  793</span>        <span class="keywordflow">if</span> (additional_fan_speed_new != <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a>) {</div>
<div class="line"><span class="lineno">  794</span>            <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a> = additional_fan_speed_new;</div>
<div class="line"><span class="lineno">  795</span>            <span class="keywordflow">if</span> (immediately_apply &amp;&amp; <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.auxiliary_fan.value)</div>
<div class="line"><span class="lineno">  796</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a7486ffb14da36c2f659314b485c538dd">GCodeWriter::set_additional_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a>);</div>
<div class="line"><span class="lineno">  797</span>        }</div>
<div class="line"><span class="lineno">  798</span>    };</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>         *<a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a>               = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str();</div>
<div class="line"><span class="lineno">  801</span>    <span class="keywordtype">int</span>                 current_feedrate  = 0;</div>
<div class="line"><span class="lineno">  802</span>    change_extruder_set_fan(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  803</span> </div>
<div class="line"><span class="lineno">  804</span>    <span class="comment">// Reduce set fan commands by deferring the GCodeWriter::set_fan calls. Inspired by SuperSlicer</span></div>
<div class="line"><span class="lineno">  805</span>    <span class="comment">// define fan_speed_change_requests and initialize it with all possible types fan speed change requests</span></div>
<div class="line"><span class="lineno">  806</span>    std::unordered_map&lt;int, bool&gt; fan_speed_change_requests = {{<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>, <span class="keyword">false</span>},</div>
<div class="line"><span class="lineno">  807</span>                                                               {<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>, <span class="keyword">false</span>},</div>
<div class="line"><span class="lineno">  808</span>                                                               {<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">CoolingLine::TYPE_FORCE_RESUME_FAN</a>, <span class="keyword">false</span>}};</div>
<div class="line"><span class="lineno">  809</span>    <span class="keywordtype">bool</span> need_set_fan = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  810</span> </div>
<div class="line"><span class="lineno">  811</span>    <span class="keywordflow">for</span> (<span class="keyword">const</span> CoolingLine *line : lines) {</div>
<div class="line"><span class="lineno">  812</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *line_start  = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str() + line-&gt;line_start;</div>
<div class="line"><span class="lineno">  813</span>        <span class="keyword">const</span> <span class="keywordtype">char</span> *line_end    = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str() + line-&gt;line_end;</div>
<div class="line"><span class="lineno">  814</span>        <span class="keywordflow">if</span> (line_start &gt; pos)</div>
<div class="line"><span class="lineno">  815</span>            new_gcode.append(pos, line_start - pos);</div>
<div class="line"><span class="lineno">  816</span>        <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0">CoolingLine::TYPE_SET_TOOL</a>) {</div>
<div class="line"><span class="lineno">  817</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_extruder = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)atoi(line_start + <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>.size());</div>
<div class="line"><span class="lineno">  818</span>            <span class="keywordflow">if</span> (new_extruder != <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a>) {</div>
<div class="line"><span class="lineno">  819</span>                <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a> = new_extruder;</div>
<div class="line"><span class="lineno">  820</span>                change_extruder_set_fan(<span class="keyword">false</span>); <span class="comment">//BBS: will force to resume fan speed when filament change is finished</span></div>
<div class="line"><span class="lineno">  821</span>            }</div>
<div class="line"><span class="lineno">  822</span>            new_gcode.append(line_start, line_end - line_start);</div>
<div class="line"><span class="lineno">  823</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>) {</div>
<div class="line"><span class="lineno">  824</span>            <span class="keywordflow">if</span> (overhang_fan_control &amp;&amp; !fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>]) {</div>
<div class="line"><span class="lineno">  825</span>                need_set_fan = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  826</span>                fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  827</span>           }</div>
<div class="line"><span class="lineno">  828</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a118985b1441c285950e4996617ce8ecf">CoolingLine::TYPE_OVERHANG_FAN_END</a>) {</div>
<div class="line"><span class="lineno">  829</span>            <span class="keywordflow">if</span> (overhang_fan_control &amp;&amp; fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>]) {</div>
<div class="line"><span class="lineno">  830</span>                fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>] = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  831</span>            }</div>
<div class="line"><span class="lineno">  832</span>            need_set_fan = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  833</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>) {</div>
<div class="line"><span class="lineno">  834</span>            <span class="keywordflow">if</span> (supp_interface_fan_control &amp;&amp; !fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>]) {</div>
<div class="line"><span class="lineno">  835</span>                fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  836</span>                need_set_fan = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  837</span>            }</div>
<div class="line"><span class="lineno">  838</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa3985122b749b62f135e4aeb939a5661">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_END</a> &amp;&amp; fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>]) {</div>
<div class="line"><span class="lineno">  839</span>            <span class="keywordflow">if</span> (supp_interface_fan_control) {</div>
<div class="line"><span class="lineno">  840</span>                fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>] = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  841</span>            }</div>
<div class="line"><span class="lineno">  842</span>            need_set_fan = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  843</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">CoolingLine::TYPE_FORCE_RESUME_FAN</a>) {</div>
<div class="line"><span class="lineno">  844</span>            <span class="comment">// check if any fan speed change request is active</span></div>
<div class="line"><span class="lineno">  845</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> != -1 &amp;&amp; !std::any_of(fan_speed_change_requests.begin(), fan_speed_change_requests.end(), [](<span class="keyword">const</span> std::pair&lt;int, bool&gt;&amp; p) { return p.second; })){</div>
<div class="line"><span class="lineno">  846</span>                fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">CoolingLine::TYPE_FORCE_RESUME_FAN</a>] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  847</span>                need_set_fan = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  848</span>            }</div>
<div class="line"><span class="lineno">  849</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a> != -1 &amp;&amp; <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.auxiliary_fan.value)</div>
<div class="line"><span class="lineno">  850</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a7486ffb14da36c2f659314b485c538dd">GCodeWriter::set_additional_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a>);</div>
<div class="line"><span class="lineno">  851</span>        }</div>
<div class="line"><span class="lineno">  852</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9">CoolingLine::TYPE_EXTRUDE_END</a>) {</div>
<div class="line"><span class="lineno">  853</span>            <span class="comment">// Just remove this comment.</span></div>
<div class="line"><span class="lineno">  854</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;type &amp; (<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">CoolingLine::TYPE_HAS_F</a>)) {</div>
<div class="line"><span class="lineno">  855</span>            <span class="comment">// Find the start of a comment, or roll to the end of line.</span></div>
<div class="line"><span class="lineno">  856</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> = line_start;</div>
<div class="line"><span class="lineno">  857</span>            <span class="keywordflow">for</span> (; <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> &lt; line_end &amp;&amp; *<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> != <span class="charliteral">&#39;;&#39;</span>; ++ <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a>);</div>
<div class="line"><span class="lineno">  858</span>            <span class="comment">// Find the &#39;F&#39; word.</span></div>
<div class="line"><span class="lineno">  859</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *fpos            = strstr(line_start + 2, <span class="stringliteral">&quot; F&quot;</span>) + 2;</div>
<div class="line"><span class="lineno">  860</span>            <span class="keywordtype">int</span>         new_feedrate    = current_feedrate;</div>
<div class="line"><span class="lineno">  861</span>            <span class="comment">// Modify the F word of the current G-code line.</span></div>
<div class="line"><span class="lineno">  862</span>            <span class="keywordtype">bool</span>        modify          = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  863</span>            <span class="comment">// Remove the F word from the current G-code line.</span></div>
<div class="line"><span class="lineno">  864</span>            <span class="keywordtype">bool</span>        remove          = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  865</span>            assert(fpos != <span class="keyword">nullptr</span>);</div>
<div class="line"><span class="lineno">  866</span>            new_feedrate = line-&gt;slowdown ? <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(<a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a>(60. * line-&gt;feedrate + 0.5)) : atoi(fpos);</div>
<div class="line"><span class="lineno">  867</span>            <span class="keywordflow">if</span> (new_feedrate == current_feedrate) {</div>
<div class="line"><span class="lineno">  868</span>                <span class="comment">// No need to change the F value.</span></div>
<div class="line"><span class="lineno">  869</span>                <span class="keywordflow">if</span> ((line-&gt;type &amp; (<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>)) || line-&gt;length == 0.)</div>
<div class="line"><span class="lineno">  870</span>                    <span class="comment">// Feedrate does not change and this line does not move the print head. Skip the complete G-code line including the G-code comment.</span></div>
<div class="line"><span class="lineno">  871</span>                    <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> = line_end;</div>
<div class="line"><span class="lineno">  872</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  873</span>                    <span class="comment">// Remove the feedrate from the G0/G1 line. The G-code line may become empty!</span></div>
<div class="line"><span class="lineno">  874</span>                    remove = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  875</span>            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line-&gt;slowdown) {</div>
<div class="line"><span class="lineno">  876</span>                <span class="comment">// The F value will be overwritten.</span></div>
<div class="line"><span class="lineno">  877</span>                modify = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno">  878</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  879</span>                <span class="comment">// The F value is different from current_feedrate, but not slowed down, thus the G-code line will not be modified.</span></div>
<div class="line"><span class="lineno">  880</span>                <span class="comment">// Emit the line without the comment.</span></div>
<div class="line"><span class="lineno">  881</span>                new_gcode.append(line_start, end - line_start);</div>
<div class="line"><span class="lineno">  882</span>                current_feedrate = new_feedrate;</div>
<div class="line"><span class="lineno">  883</span>            }</div>
<div class="line"><span class="lineno">  884</span>            <span class="keywordflow">if</span> (modify || remove) {</div>
<div class="line"><span class="lineno">  885</span>                <span class="keywordflow">if</span> (modify) {</div>
<div class="line"><span class="lineno">  886</span>                    <span class="comment">// Replace the feedrate.</span></div>
<div class="line"><span class="lineno">  887</span>                    new_gcode.append(line_start, fpos - line_start);</div>
<div class="line"><span class="lineno">  888</span>                    current_feedrate = new_feedrate;</div>
<div class="line"><span class="lineno">  889</span>                    <span class="keywordtype">char</span> buf[64];</div>
<div class="line"><span class="lineno">  890</span>                    sprintf(buf, <span class="stringliteral">&quot;%d&quot;</span>, <span class="keywordtype">int</span>(current_feedrate));</div>
<div class="line"><span class="lineno">  891</span>                    new_gcode += buf;</div>
<div class="line"><span class="lineno">  892</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  893</span>                    <span class="comment">// Remove the feedrate word.</span></div>
<div class="line"><span class="lineno">  894</span>                    <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> = fpos;</div>
<div class="line"><span class="lineno">  895</span>                    <span class="comment">// Roll the pointer before the &#39;F&#39; word.</span></div>
<div class="line"><span class="lineno">  896</span>                    <span class="keywordflow">for</span> (<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> -= 2; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> &gt; line_start &amp;&amp; (*<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> == <span class="charliteral">&#39; &#39;</span> || *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> == <span class="charliteral">&#39;\t&#39;</span>); -- <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno">  897</span> </div>
<div class="line"><span class="lineno">  898</span>                    <span class="keywordflow">if</span> ((<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> - line_start == 1) &amp;&amp; *line_start == <span class="charliteral">&#39;G&#39;</span> &amp;&amp; (*<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> == <span class="charliteral">&#39;1&#39;</span> || *<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> == <span class="charliteral">&#39;0&#39;</span>)) {</div>
<div class="line"><span class="lineno">  899</span>                        <span class="comment">// BBS: only remain &quot;G1&quot; or &quot;G0&quot; of this line after remove &#39;F&#39; part, don&#39;t save</span></div>
<div class="line"><span class="lineno">  900</span>                    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  901</span>                        <span class="comment">// Append up to the F word, without the trailing whitespace.</span></div>
<div class="line"><span class="lineno">  902</span>                        new_gcode.append(line_start, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a> - line_start + 1);</div>
<div class="line"><span class="lineno">  903</span>                    }</div>
<div class="line"><span class="lineno">  904</span>                }</div>
<div class="line"><span class="lineno">  905</span>                <span class="comment">// Skip the non-whitespaces of the F parameter up the comment or end of line.</span></div>
<div class="line"><span class="lineno">  906</span>                <span class="keywordflow">for</span> (; fpos != <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> &amp;&amp; *fpos != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *fpos != <span class="charliteral">&#39;;&#39;</span> &amp;&amp; *fpos != <span class="charliteral">&#39;\n&#39;</span>; ++ fpos);</div>
<div class="line"><span class="lineno">  907</span>                <span class="comment">// Append the rest of the line without the comment.</span></div>
<div class="line"><span class="lineno">  908</span>                <span class="keywordflow">if</span> (fpos &lt; end)</div>
<div class="line"><span class="lineno">  909</span>                    <span class="comment">// The G-code line is not empty yet. Emit the rest of it.</span></div>
<div class="line"><span class="lineno">  910</span>                    new_gcode.append(fpos, end - fpos);</div>
<div class="line"><span class="lineno">  911</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (remove &amp;&amp; new_gcode == <span class="stringliteral">&quot;G1&quot;</span>) {</div>
<div class="line"><span class="lineno">  912</span>                    <span class="comment">// The G-code line only contained the F word, now it is empty. Remove it completely including the comments.</span></div>
<div class="line"><span class="lineno">  913</span>                    new_gcode.resize(new_gcode.size() - 2);</div>
<div class="line"><span class="lineno">  914</span>                    <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> = line_end;</div>
<div class="line"><span class="lineno">  915</span>                }</div>
<div class="line"><span class="lineno">  916</span>            }</div>
<div class="line"><span class="lineno">  917</span>            <span class="comment">// Process the rest of the line.</span></div>
<div class="line"><span class="lineno">  918</span>            <span class="keywordflow">if</span> (end &lt; line_end) {</div>
<div class="line"><span class="lineno">  919</span>                <span class="keywordflow">if</span> (line-&gt;type &amp; (<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a> | <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>)) {</div>
<div class="line"><span class="lineno">  920</span>                    <span class="comment">// Process comments, remove &quot;;_EXTRUDE_SET_SPEED&quot;, &quot;;_EXTERNAL_PERIMETER&quot;, &quot;;_WIPE&quot;</span></div>
<div class="line"><span class="lineno">  921</span>                    std::string comment(end, line_end);</div>
<div class="line"><span class="lineno">  922</span>                    boost::replace_all(comment, <span class="stringliteral">&quot;;_EXTRUDE_SET_SPEED&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  923</span>                    <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a>)</div>
<div class="line"><span class="lineno">  924</span>                        boost::replace_all(comment, <span class="stringliteral">&quot;;_EXTERNAL_PERIMETER&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  925</span>                    <span class="keywordflow">if</span> (line-&gt;type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>)</div>
<div class="line"><span class="lineno">  926</span>                        boost::replace_all(comment, <span class="stringliteral">&quot;;_WIPE&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno">  927</span>                    new_gcode += comment;</div>
<div class="line"><span class="lineno">  928</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  929</span>                    <span class="comment">// Just attach the rest of the source line.</span></div>
<div class="line"><span class="lineno">  930</span>                    new_gcode.append(end, line_end - end);</div>
<div class="line"><span class="lineno">  931</span>                }</div>
<div class="line"><span class="lineno">  932</span>            }</div>
<div class="line"><span class="lineno">  933</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  934</span>            new_gcode.append(line_start, line_end - line_start);</div>
<div class="line"><span class="lineno">  935</span>        }</div>
<div class="line"><span class="lineno">  936</span> </div>
<div class="line"><span class="lineno">  937</span>        <span class="keywordflow">if</span> (need_set_fan) {</div>
<div class="line"><span class="lineno">  938</span>            <span class="keywordflow">if</span> (fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>]){</div>
<div class="line"><span class="lineno">  939</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a3915a7b9648a6097ba68bf89682627f2">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, overhang_fan_speed);</div>
<div class="line"><span class="lineno">  940</span>                <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a> = overhang_fan_speed;</div>
<div class="line"><span class="lineno">  941</span>            }</div>
<div class="line"><span class="lineno">  942</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>]){</div>
<div class="line"><span class="lineno">  943</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a3915a7b9648a6097ba68bf89682627f2">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, supp_interface_fan_speed);</div>
<div class="line"><span class="lineno">  944</span>                <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a> = supp_interface_fan_speed;</div>
<div class="line"><span class="lineno">  945</span>            }</div>
<div class="line"><span class="lineno">  946</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span>(fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">CoolingLine::TYPE_FORCE_RESUME_FAN</a>] &amp;&amp; <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a> != -1){</div>
<div class="line"><span class="lineno">  947</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a3915a7b9648a6097ba68bf89682627f2">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a>);</div>
<div class="line"><span class="lineno">  948</span>                fan_speed_change_requests[<a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">CoolingLine::TYPE_FORCE_RESUME_FAN</a>] = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  949</span>            }</div>
<div class="line"><span class="lineno">  950</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  951</span>                new_gcode += <a class="code hl_function" href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a3915a7b9648a6097ba68bf89682627f2">GCodeWriter::set_fan</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.gcode_flavor, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a>);</div>
<div class="line"><span class="lineno">  952</span>            need_set_fan = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno">  953</span>        }</div>
<div class="line"><span class="lineno">  954</span>        <a class="code hl_function" href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">pos</a> = line_end;</div>
<div class="line"><span class="lineno">  955</span>    }</div>
<div class="line"><span class="lineno">  956</span>    <span class="keyword">const</span> <span class="keywordtype">char</span> *gcode_end = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str() + <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.size();</div>
<div class="line"><span class="lineno">  957</span>    <span class="keywordflow">if</span> (pos &lt; gcode_end)</div>
<div class="line"><span class="lineno">  958</span>        new_gcode.append(pos, gcode_end - pos);</div>
<div class="line"><span class="lineno">  959</span> </div>
<div class="line"><span class="lineno">  960</span>    <span class="keywordflow">return</span> new_gcode;</div>
<div class="line"><span class="lineno">  961</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a3230e10964844c34fb73eaccc84dc8a7"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a3230e10964844c34fb73eaccc84dc8a7">floor</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const FloorReturnType floor() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:388</div></div>
<div class="ttc" id="a_g_code_8cpp_html_a2dec0e9fe2fb1c9e3862bc3fd4b2d911"><div class="ttname"><a href="../../df/d40/_g_code_8cpp.html#a2dec0e9fe2fb1c9e3862bc3fd4b2d911">EXTRUDER_CONFIG</a></div><div class="ttdeci">#define EXTRUDER_CONFIG(OPT)</div><div class="ttdef"><b>Definition</b> GCode.cpp:767</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a1131825fa00e1c777edfcc668b44a070"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">Slic3r::CoolingBuffer::m_additional_fan_speed</a></div><div class="ttdeci">int m_additional_fan_speed</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:46</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a3234bcf20b9a40c0a186b6eb30c7b037"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">Slic3r::CoolingBuffer::m_current_fan_speed</a></div><div class="ttdeci">int m_current_fan_speed</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:61</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ab6a8b43f1a4e019265862ae709eb57b6"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">Slic3r::CoolingBuffer::m_fan_speed</a></div><div class="ttdeci">int m_fan_speed</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:45</div></div>
<div class="ttc" id="aclass_slic3r_1_1_g_code_writer_html_a3915a7b9648a6097ba68bf89682627f2"><div class="ttname"><a href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a3915a7b9648a6097ba68bf89682627f2">Slic3r::GCodeWriter::set_fan</a></div><div class="ttdeci">static std::string set_fan(const GCodeFlavor gcode_flavor, unsigned int speed)</div><div class="ttdef"><b>Definition</b> GCodeWriter.cpp:727</div></div>
<div class="ttc" id="aclass_slic3r_1_1_g_code_writer_html_a7486ffb14da36c2f659314b485c538dd"><div class="ttname"><a href="../../da/d7a/class_slic3r_1_1_g_code_writer.html#a7486ffb14da36c2f659314b485c538dd">Slic3r::GCodeWriter::set_additional_fan</a></div><div class="ttdeci">static std::string set_additional_fan(unsigned int speed)</div><div class="ttdef"><b>Definition</b> GCodeWriter.cpp:768</div></div>
<div class="ttc" id="alzoconf_8h_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition</b> lzoconf.h:340</div></div>
<div class="ttc" id="alzoconf_8h_html_a809275ccd755fb7b88661d952134b14d"><div class="ttname"><a href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a></div><div class="ttdeci">lzo_uint size</div><div class="ttdef"><b>Definition</b> lzoconf.h:378</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">Slic3r::Utils::TimeFormat::gcode</a></div><div class="ttdeci">@ gcode</div></div>
<div class="ttc" id="anamespace_slic3r_1_1sla_html_a2d49c0885f5562f98fbb19cbe6590d11"><div class="ttname"><a href="../../d2/d57/namespace_slic3r_1_1sla.html#a2d49c0885f5562f98fbb19cbe6590d11">Slic3r::sla::pos</a></div><div class="ttdeci">Vec3d pos(const Pt &amp;p)</div><div class="ttdef"><b>Definition</b> ReprojectPointsOnMesh.hpp:14</div></div>
<div class="ttc" id="anamespace_slic3r_html_a13c2a30eb6db9198adb41fd19619c951"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">Slic3r::slow_down_layer_time</a></div><div class="ttdeci">machine_min_extruding_rate slow_down_layer_time((ConfigOptionBool, spiral_mode))((ConfigOptionInt</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2b749a352e579f793bce113731ac4684"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2b749a352e579f793bce113731ac4684">Slic3r::full_fan_speed_layer</a></div><div class="ttdeci">machine_min_extruding_rate full_fan_speed_layer((ConfigOptionInts, fan_max_speed))((ConfigOptionFloats</div></div>
<div class="ttc" id="anamespace_slic3r_html_a34bb79fb8234fc9563f7c3e8fc65e7f0"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a34bb79fb8234fc9563f7c3e8fc65e7f0">Slic3r::fan_cooling_layer_time</a></div><div class="ttdeci">machine_min_extruding_rate fan_cooling_layer_time((ConfigOptionStrings, filament_colour))((ConfigOptionFloat</div></div>
<div class="ttc" id="anamespace_slic3r_html_a92b2e5013291a55201abda7303b67baf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">Slic3r::f</a></div><div class="ttdeci">static double f(double x, double z_sin, double z_cos, bool vertical, bool flip)</div><div class="ttdef"><b>Definition</b> FillGyroid.cpp:12</div></div>
<div class="ttc" id="anamespace_slic3r_html_a9b6fe8a165a005c9dd45203f17cbc9e6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a9b6fe8a165a005c9dd45203f17cbc9e6">Slic3r::additional_cooling_fan_speed</a></div><div class="ttdeci">machine_min_extruding_rate additional_cooling_fan_speed((ConfigOptionBool, reduce_crossing_wall))((ConfigOptionFloatOrPercent</div></div>
<div class="ttc" id="anamespace_slic3r_html_aee4066525dc830ba39e211f2a5590d44"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">Slic3r::close_fan_the_first_x_layers</a></div><div class="ttdeci">machine_min_extruding_rate close_fan_the_first_x_layers((ConfigOptionEnum&lt; DraftShield &gt;, draft_shield))((ConfigOptionFloat</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a118985b1441c285950e4996617ce8ecf"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a118985b1441c285950e4996617ce8ecf">Slic3r::CoolingLine::TYPE_OVERHANG_FAN_END</a></div><div class="ttdeci">@ TYPE_OVERHANG_FAN_END</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:51</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">Slic3r::CoolingLine::TYPE_OVERHANG_FAN_START</a></div><div class="ttdeci">@ TYPE_OVERHANG_FAN_START</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:50</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">Slic3r::CoolingLine::TYPE_ADJUSTABLE</a></div><div class="ttdeci">@ TYPE_ADJUSTABLE</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:54</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">Slic3r::CoolingLine::TYPE_WIPE</a></div><div class="ttdeci">@ TYPE_WIPE</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:58</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">Slic3r::CoolingLine::TYPE_FORCE_RESUME_FAN</a></div><div class="ttdeci">@ TYPE_FORCE_RESUME_FAN</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:64</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">Slic3r::CoolingLine::TYPE_HAS_F</a></div><div class="ttdeci">@ TYPE_HAS_F</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:57</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9">Slic3r::CoolingLine::TYPE_EXTRUDE_END</a></div><div class="ttdeci">@ TYPE_EXTRUDE_END</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:49</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">Slic3r::CoolingLine::TYPE_EXTERNAL_PERIMETER</a></div><div class="ttdeci">@ TYPE_EXTERNAL_PERIMETER</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:55</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8aa3985122b749b62f135e4aeb939a5661"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa3985122b749b62f135e4aeb939a5661">Slic3r::CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_END</a></div><div class="ttdeci">@ TYPE_SUPPORT_INTERFACE_FAN_END</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:66</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">Slic3r::CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a></div><div class="ttdeci">@ TYPE_SUPPORT_INTERFACE_FAN_START</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:65</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0">Slic3r::CoolingLine::TYPE_SET_TOOL</a></div><div class="ttdeci">@ TYPE_SET_TOOL</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:48</div></div>
<div class="ttc" id="axmltok__impl_8inc_html_ade76451eec04fdb3da08ae68f8afee41"><div class="ttname"><a href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a></div><div class="ttdeci">static int PTRCALL PREFIX(scanPercent)(const ENCODING *enc const char const char * end</div><div class="ttdef"><b>Definition</b> xmltok_impl.inc:881</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../de/db8/namespace_slic3r.html#a9b6fe8a165a005c9dd45203f17cbc9e6">Slic3r::additional_cooling_fan_speed()</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#aee4066525dc830ba39e211f2a5590d44">Slic3r::close_fan_the_first_x_layers()</a>, <a class="el" href="../../#l00881">end</a>, <a class="el" href="../../#l00767">EXTRUDER_CONFIG</a>, <a class="el" href="../../#l00012">Slic3r::f()</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a34bb79fb8234fc9563f7c3e8fc65e7f0">Slic3r::fan_cooling_layer_time()</a>, <a class="el" href="../../#l00388">floor()</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a2b749a352e579f793bce113731ac4684">Slic3r::full_fan_speed_layer()</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00046">m_additional_fan_speed</a>, <a class="el" href="../../#l00055">m_config</a>, <a class="el" href="../../#l00056">m_current_extruder</a>, <a class="el" href="../../#l00061">m_current_fan_speed</a>, <a class="el" href="../../#l00045">m_fan_speed</a>, <a class="el" href="../../#l00052">m_toolchange_prefix</a>, <a class="el" href="../../#l00768">Slic3r::GCodeWriter::set_additional_fan()</a>, <a class="el" href="../../#l00727">Slic3r::GCodeWriter::set_fan()</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">Slic3r::slow_down_layer_time()</a>, <a class="el" href="../../#l00054">Slic3r::CoolingLine::TYPE_ADJUSTABLE</a>, <a class="el" href="../../#l00055">Slic3r::CoolingLine::TYPE_EXTERNAL_PERIMETER</a>, <a class="el" href="../../#l00049">Slic3r::CoolingLine::TYPE_EXTRUDE_END</a>, <a class="el" href="../../#l00064">Slic3r::CoolingLine::TYPE_FORCE_RESUME_FAN</a>, <a class="el" href="../../#l00057">Slic3r::CoolingLine::TYPE_HAS_F</a>, <a class="el" href="../../#l00051">Slic3r::CoolingLine::TYPE_OVERHANG_FAN_END</a>, <a class="el" href="../../#l00050">Slic3r::CoolingLine::TYPE_OVERHANG_FAN_START</a>, <a class="el" href="../../#l00048">Slic3r::CoolingLine::TYPE_SET_TOOL</a>, <a class="el" href="../../#l00066">Slic3r::CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_END</a>, <a class="el" href="../../#l00065">Slic3r::CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>, and <a class="el" href="../../#l00058">Slic3r::CoolingLine::TYPE_WIPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00299">process_layer()</a>.</p>
<div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad6d6ecc9309d2fa4f3962bc4715b73fc_cgraph.svg" width="539" height="527"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad6d6ecc9309d2fa4f3962bc4715b73fc_icgraph.svg" width="358" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a039c2dcd08f3d002182b4d009caafd7c" name="a039c2dcd08f3d002182b4d009caafd7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a039c2dcd08f3d002182b4d009caafd7c">&#9670;&#160;</a></span>calculate_layer_slowdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float Slic3r::CoolingBuffer::calculate_layer_slowdown </td>
          <td>(</td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; &amp;&#160;</td>
          <td class="paramname"><em>per_extruder_adjustments</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  645</span>{</div>
<div class="line"><span class="lineno">  646</span>    <span class="comment">// Sort the extruders by an increasing slow_down_layer_time.</span></div>
<div class="line"><span class="lineno">  647</span>    <span class="comment">// The layers with a lower slow_down_layer_time are slowed down</span></div>
<div class="line"><span class="lineno">  648</span>    <span class="comment">// together with all the other layers with slow_down_layer_time above.</span></div>
<div class="line"><span class="lineno">  649</span>    std::vector&lt;PerExtruderAdjustments*&gt; by_slowdown_time;</div>
<div class="line"><span class="lineno">  650</span>    by_slowdown_time.reserve(per_extruder_adjustments.size());</div>
<div class="line"><span class="lineno">  651</span>    <span class="comment">// Only insert entries, which are adjustable (have cooling enabled and non-zero stretchable time).</span></div>
<div class="line"><span class="lineno">  652</span>    <span class="comment">// Collect total print time of non-adjustable extruders.</span></div>
<div class="line"><span class="lineno">  653</span>    <span class="keywordtype">float</span> elapsed_time_total0 = 0.f;</div>
<div class="line"><span class="lineno">  654</span>    <span class="keywordflow">for</span> (PerExtruderAdjustments &amp;adj : per_extruder_adjustments) {</div>
<div class="line"><span class="lineno">  655</span>        <span class="comment">// Curren total time for this extruder.</span></div>
<div class="line"><span class="lineno">  656</span>        adj.time_total  = adj.elapsed_time_total();</div>
<div class="line"><span class="lineno">  657</span>        <span class="comment">// Maximum time for this extruder, when all extrusion moves are slowed down to min_extrusion_speed.</span></div>
<div class="line"><span class="lineno">  658</span>        adj.time_maximum = adj.maximum_time_after_slowdown(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  659</span>        <span class="keywordflow">if</span> (adj.cooling_slow_down_enabled &amp;&amp; adj.lines.size() &gt; 0) {</div>
<div class="line"><span class="lineno">  660</span>            by_slowdown_time.emplace_back(&amp;adj);</div>
<div class="line"><span class="lineno">  661</span>            <span class="keywordflow">if</span> (! <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">m_cooling_logic_proportional</a>)</div>
<div class="line"><span class="lineno">  662</span>                <span class="comment">// sorts the lines, also sets adj.time_non_adjustable</span></div>
<div class="line"><span class="lineno">  663</span>                adj.sort_lines_by_decreasing_feedrate();</div>
<div class="line"><span class="lineno">  664</span>        } <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  665</span>            elapsed_time_total0 += adj.elapsed_time_total();</div>
<div class="line"><span class="lineno">  666</span>    }</div>
<div class="line"><span class="lineno">  667</span>    std::sort(by_slowdown_time.begin(), by_slowdown_time.end(),</div>
<div class="line"><span class="lineno">  668</span>        [](<span class="keyword">const</span> PerExtruderAdjustments *adj1, <span class="keyword">const</span> PerExtruderAdjustments *adj2)</div>
<div class="line"><span class="lineno">  669</span>            { return adj1-&gt;slow_down_layer_time &lt; adj2-&gt;slow_down_layer_time; });</div>
<div class="line"><span class="lineno">  670</span> </div>
<div class="line"><span class="lineno">  671</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> cur_begin = by_slowdown_time.begin(); cur_begin != by_slowdown_time.end(); ++ cur_begin) {</div>
<div class="line"><span class="lineno">  672</span>        PerExtruderAdjustments &amp;adj = *(*cur_begin);</div>
<div class="line"><span class="lineno">  673</span>        <span class="comment">// Calculate the current adjusted elapsed_time_total over the non-finalized extruders.</span></div>
<div class="line"><span class="lineno">  674</span>        <span class="keywordtype">float</span> total = elapsed_time_total0;</div>
<div class="line"><span class="lineno">  675</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cur_begin; it != by_slowdown_time.end(); ++ it)</div>
<div class="line"><span class="lineno">  676</span>            total += (*it)-&gt;time_total;</div>
<div class="line"><span class="lineno">  677</span>        <span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a> = adj.slow_down_layer_time * 1.001f;</div>
<div class="line"><span class="lineno">  678</span>        <span class="keywordflow">if</span> (total &gt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>) {</div>
<div class="line"><span class="lineno">  679</span>            <span class="comment">// The current total time is above the minimum threshold of the rest of the extruders, don&#39;t adjust anything.</span></div>
<div class="line"><span class="lineno">  680</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  681</span>            <span class="comment">// Adjust this and all the following (higher m_config.slow_down_layer_time) extruders.</span></div>
<div class="line"><span class="lineno">  682</span>            <span class="comment">// Sum maximum slow down time as if everything was slowed down including the external perimeters.</span></div>
<div class="line"><span class="lineno">  683</span>            <span class="keywordtype">float</span> max_time = elapsed_time_total0;</div>
<div class="line"><span class="lineno">  684</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cur_begin; it != by_slowdown_time.end(); ++ it)</div>
<div class="line"><span class="lineno">  685</span>                max_time += (*it)-&gt;time_maximum;</div>
<div class="line"><span class="lineno">  686</span>            <span class="keywordflow">if</span> (max_time &gt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>) {</div>
<div class="line"><span class="lineno">  687</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">m_cooling_logic_proportional</a>)</div>
<div class="line"><span class="lineno">  688</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a711f88c15f46e5453b898127bcf2237d">extruder_range_slow_down_proportional</a>(cur_begin, by_slowdown_time.end(), elapsed_time_total0, total, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a>);</div>
<div class="line"><span class="lineno">  689</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  690</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#afcf089e9b7f7cb598c4ee7b3dde781c6">extruder_range_slow_down_non_proportional</a>(cur_begin, by_slowdown_time.end(), <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">slow_down_layer_time</a> - total);</div>
<div class="line"><span class="lineno">  691</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  692</span>                <span class="comment">// Slow down to maximum possible.</span></div>
<div class="line"><span class="lineno">  693</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = cur_begin; it != by_slowdown_time.end(); ++ it)</div>
<div class="line"><span class="lineno">  694</span>                    (*it)-&gt;slowdown_to_minimum_feedrate(<span class="keyword">true</span>);</div>
<div class="line"><span class="lineno">  695</span>            }</div>
<div class="line"><span class="lineno">  696</span>        }</div>
<div class="line"><span class="lineno">  697</span>        elapsed_time_total0 += adj.elapsed_time_total();</div>
<div class="line"><span class="lineno">  698</span>    }</div>
<div class="line"><span class="lineno">  699</span> </div>
<div class="line"><span class="lineno">  700</span>    <span class="keywordflow">return</span> elapsed_time_total0;</div>
<div class="line"><span class="lineno">  701</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a82fae524c24635ded4fdeb6457b5260e"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a82fae524c24635ded4fdeb6457b5260e">Slic3r::CoolingBuffer::m_cooling_logic_proportional</a></div><div class="ttdeci">bool m_cooling_logic_proportional</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:59</div></div>
<div class="ttc" id="anamespace_slic3r_html_a711f88c15f46e5453b898127bcf2237d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a711f88c15f46e5453b898127bcf2237d">Slic3r::extruder_range_slow_down_proportional</a></div><div class="ttdeci">static float extruder_range_slow_down_proportional(std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_begin, std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_end, float elapsed_time_total0, float elapsed_time_before_slowdown, float slow_down_layer_time)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:510</div></div>
<div class="ttc" id="anamespace_slic3r_html_afcf089e9b7f7cb598c4ee7b3dde781c6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#afcf089e9b7f7cb598c4ee7b3dde781c6">Slic3r::extruder_range_slow_down_non_proportional</a></div><div class="ttdeci">static void extruder_range_slow_down_non_proportional(std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_begin, std::vector&lt; PerExtruderAdjustments * &gt;::iterator it_end, float time_stretch)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:566</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00104">Slic3r::PerExtruderAdjustments::elapsed_time_total()</a>, <a class="el" href="../../#l00566">Slic3r::extruder_range_slow_down_non_proportional()</a>, <a class="el" href="../../#l00510">Slic3r::extruder_range_slow_down_proportional()</a>, <a class="el" href="../../#l00059">m_cooling_logic_proportional</a>, <a class="el" href="../../#l00221">Slic3r::PerExtruderAdjustments::slow_down_layer_time</a>, <a class="el" href="../../de/db8/namespace_slic3r.html#a13c2a30eb6db9198adb41fd19619c951">Slic3r::slow_down_layer_time()</a>, and <a class="el" href="../../#l00233">Slic3r::PerExtruderAdjustments::time_total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00299">process_layer()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a039c2dcd08f3d002182b4d009caafd7c_cgraph.svg" width="100%" height="456"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a039c2dcd08f3d002182b4d009caafd7c_icgraph.svg" width="382" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a07b3bb46704ba94699e78cdc560deef8" name="a07b3bb46704ba94699e78cdc560deef8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a07b3bb46704ba94699e78cdc560deef8">&#9670;&#160;</a></span>operator=()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp; Slic3r::CoolingBuffer::operator= </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a> &amp;&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span><span class="mlabel">delete</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad65e3b942d606c994b626d0818f46e10" name="ad65e3b942d606c994b626d0818f46e10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad65e3b942d606c994b626d0818f46e10">&#9670;&#160;</a></span>parse_layer_gcode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt; <a class="el" href="../../df/d62/struct_slic3r_1_1_per_extruder_adjustments.html">PerExtruderAdjustments</a> &gt; Slic3r::CoolingBuffer::parse_layer_gcode </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; float &gt; &amp;&#160;</td>
          <td class="paramname"><em>current_pos</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  322</span>{</div>
<div class="line"><span class="lineno">  323</span>    std::vector&lt;PerExtruderAdjustments&gt; per_extruder_adjustments(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.size());</div>
<div class="line"><span class="lineno">  324</span>    std::vector&lt;size_t&gt;                 map_extruder_to_per_extruder_adjustment(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#aaad867e6e51db8529b95dd20f565e524">m_num_extruders</a>, 0);</div>
<div class="line"><span class="lineno">  325</span>    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>.size(); ++ i) {</div>
<div class="line"><span class="lineno">  326</span>        PerExtruderAdjustments &amp;adj         = per_extruder_adjustments[i];</div>
<div class="line"><span class="lineno">  327</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>            extruder_id = <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1f70d25be0e9b27329aec4f3489d20f7">m_extruder_ids</a>[i];</div>
<div class="line"><span class="lineno">  328</span>        adj.extruder_id               = extruder_id;</div>
<div class="line"><span class="lineno">  329</span>        adj.cooling_slow_down_enabled = <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.slow_down_for_layer_cooling.get_at(extruder_id);</div>
<div class="line"><span class="lineno">  330</span>        adj.slow_down_layer_time = float(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.slow_down_layer_time.get_at(extruder_id));</div>
<div class="line"><span class="lineno">  331</span>        adj.slow_down_min_speed           = float(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.slow_down_min_speed.get_at(extruder_id));</div>
<div class="line"><span class="lineno">  332</span>        map_extruder_to_per_extruder_adjustment[extruder_id] = i;</div>
<div class="line"><span class="lineno">  333</span>    }</div>
<div class="line"><span class="lineno">  334</span> </div>
<div class="line"><span class="lineno">  335</span>    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>      current_extruder  = <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a>;</div>
<div class="line"><span class="lineno">  336</span>    PerExtruderAdjustments *adjustment  = &amp;per_extruder_adjustments[map_extruder_to_per_extruder_adjustment[current_extruder]];</div>
<div class="line"><span class="lineno">  337</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>       *line_start = <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str();</div>
<div class="line"><span class="lineno">  338</span>    <span class="keyword">const</span> <span class="keywordtype">char</span>       *line_end   = line_start;</div>
<div class="line"><span class="lineno">  339</span>    <span class="comment">// Index of an existing CoolingLine of the current adjustment, which holds the feedrate setting command</span></div>
<div class="line"><span class="lineno">  340</span>    <span class="comment">// for a sequence of extrusion moves.</span></div>
<div class="line"><span class="lineno">  341</span>    <span class="keywordtype">size_t</span>            active_speed_modifier = size_t(-1);</div>
<div class="line"><span class="lineno">  342</span> </div>
<div class="line"><span class="lineno">  343</span>    <span class="keywordflow">for</span> (; *line_start != 0; line_start = line_end) </div>
<div class="line"><span class="lineno">  344</span>    {</div>
<div class="line"><span class="lineno">  345</span>        <span class="keywordflow">while</span> (*line_end != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; *line_end != 0)</div>
<div class="line"><span class="lineno">  346</span>            ++ line_end;</div>
<div class="line"><span class="lineno">  347</span>        <span class="comment">// sline will not contain the trailing &#39;\n&#39;.</span></div>
<div class="line"><span class="lineno">  348</span>        std::string sline(line_start, line_end);</div>
<div class="line"><span class="lineno">  349</span>        <span class="comment">// CoolingLine will contain the trailing &#39;\n&#39;.</span></div>
<div class="line"><span class="lineno">  350</span>        <span class="keywordflow">if</span> (*line_end == <span class="charliteral">&#39;\n&#39;</span>)</div>
<div class="line"><span class="lineno">  351</span>            ++ line_end;</div>
<div class="line"><span class="lineno">  352</span>        CoolingLine line(0, line_start - <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str(), line_end - <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>.c_str());</div>
<div class="line"><span class="lineno">  353</span>        <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G0 &quot;</span>))</div>
<div class="line"><span class="lineno">  354</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a86302893b07ce0f16510bddaeac92c4b">CoolingLine::TYPE_G0</a>;</div>
<div class="line"><span class="lineno">  355</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G1 &quot;</span>))</div>
<div class="line"><span class="lineno">  356</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714">CoolingLine::TYPE_G1</a>;</div>
<div class="line"><span class="lineno">  357</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G92 &quot;</span>))</div>
<div class="line"><span class="lineno">  358</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">CoolingLine::TYPE_G92</a>;</div>
<div class="line"><span class="lineno">  359</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G2 &quot;</span>))</div>
<div class="line"><span class="lineno">  360</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6c8ac812deec9f360a6e5a74a2b81279">CoolingLine::TYPE_G2</a>;</div>
<div class="line"><span class="lineno">  361</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G3 &quot;</span>))</div>
<div class="line"><span class="lineno">  362</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb8dc87b61424083b4264308190b184e">CoolingLine::TYPE_G3</a>;</div>
<div class="line"><span class="lineno">  363</span>        <span class="keywordflow">if</span> (line.type) {</div>
<div class="line"><span class="lineno">  364</span>            <span class="comment">// G0, G1 or G92</span></div>
<div class="line"><span class="lineno">  365</span>            <span class="comment">// Parse the G-code line.</span></div>
<div class="line"><span class="lineno">  366</span>            std::vector&lt;float&gt; new_pos(current_pos);</div>
<div class="line"><span class="lineno">  367</span>            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> = sline.data() + 3;</div>
<div class="line"><span class="lineno">  368</span>            <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><span class="lineno">  369</span>                <span class="comment">// Skip whitespaces.</span></div>
<div class="line"><span class="lineno">  370</span>                <span class="keywordflow">for</span> (; *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="charliteral">&#39; &#39;</span> || *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="charliteral">&#39;\t&#39;</span>; ++ <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>);</div>
<div class="line"><span class="lineno">  371</span>                <span class="keywordflow">if</span> (*c == 0 || *c == <span class="charliteral">&#39;;&#39;</span>)</div>
<div class="line"><span class="lineno">  372</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno">  373</span> </div>
<div class="line"><span class="lineno">  374</span>                assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>()); <span class="comment">// for atof</span></div>
<div class="line"><span class="lineno">  375</span>                <span class="comment">//BBS: Parse the axis.</span></div>
<div class="line"><span class="lineno">  376</span>                <span class="keywordtype">size_t</span> axis = (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &gt;= <span class="charliteral">&#39;X&#39;</span> &amp;&amp; *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt;= <span class="charliteral">&#39;Z&#39;</span>) ? (*c - <span class="charliteral">&#39;X&#39;</span>) :</div>
<div class="line"><span class="lineno">  377</span>                              (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="charliteral">&#39;E&#39;</span>) ? 3 : (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="stringliteral">&#39;F&#39;</span>) ? 4 :</div>
<div class="line"><span class="lineno">  378</span>                              (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="stringliteral">&#39;I&#39;</span>) ? 5 : (*<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> == <span class="stringliteral">&#39;J&#39;</span>) ? 6 : size_t(-1);</div>
<div class="line"><span class="lineno">  379</span>                <span class="keywordflow">if</span> (axis != <span class="keywordtype">size_t</span>(-1)) {</div>
<div class="line"><span class="lineno">  380</span>                    new_pos[axis] = float(atof(++c));</div>
<div class="line"><span class="lineno">  381</span>                    <span class="keywordflow">if</span> (axis == 4) {</div>
<div class="line"><span class="lineno">  382</span>                        <span class="comment">// Convert mm/min to mm/sec.</span></div>
<div class="line"><span class="lineno">  383</span>                        new_pos[4] /= 60.f;</div>
<div class="line"><span class="lineno">  384</span>                        <span class="keywordflow">if</span> ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">CoolingLine::TYPE_G92</a>) == 0)</div>
<div class="line"><span class="lineno">  385</span>                            <span class="comment">// This is G0 or G1 line and it sets the feedrate. This mark is used for reducing the duplicate F calls.</span></div>
<div class="line"><span class="lineno">  386</span>                            line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">CoolingLine::TYPE_HAS_F</a>;</div>
<div class="line"><span class="lineno">  387</span>                    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (axis == 5 || axis == 6) {</div>
<div class="line"><span class="lineno">  388</span>                        <span class="comment">// BBS: get position of arc center</span></div>
<div class="line"><span class="lineno">  389</span>                        new_pos[axis] += current_pos[axis - 5];</div>
<div class="line"><span class="lineno">  390</span>                    }</div>
<div class="line"><span class="lineno">  391</span>                }</div>
<div class="line"><span class="lineno">  392</span>                <span class="comment">// Skip this word.</span></div>
<div class="line"><span class="lineno">  393</span>                <span class="keywordflow">for</span> (; *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> != <span class="charliteral">&#39; &#39;</span> &amp;&amp; *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> != <span class="charliteral">&#39;\t&#39;</span> &amp;&amp; *<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> != 0; ++ <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>);</div>
<div class="line"><span class="lineno">  394</span>            }</div>
<div class="line"><span class="lineno">  395</span>            <span class="keywordtype">bool</span> external_perimeter = boost::contains(sline, <span class="stringliteral">&quot;;_EXTERNAL_PERIMETER&quot;</span>);</div>
<div class="line"><span class="lineno">  396</span>            <span class="keywordtype">bool</span> wipe               = boost::contains(sline, <span class="stringliteral">&quot;;_WIPE&quot;</span>);</div>
<div class="line"><span class="lineno">  397</span>            <span class="keywordflow">if</span> (external_perimeter)</div>
<div class="line"><span class="lineno">  398</span>                line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa25bf1fd30d74ea4ddd240495dbcab77">CoolingLine::TYPE_EXTERNAL_PERIMETER</a>;</div>
<div class="line"><span class="lineno">  399</span>            <span class="keywordflow">if</span> (wipe)</div>
<div class="line"><span class="lineno">  400</span>                line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3ab5a2f1d37f31f00bd65b52b86cd34d">CoolingLine::TYPE_WIPE</a>;</div>
<div class="line"><span class="lineno">  401</span>            <span class="keywordflow">if</span> (boost::contains(sline, <span class="stringliteral">&quot;;_EXTRUDE_SET_SPEED&quot;</span>) &amp;&amp; ! wipe) {</div>
<div class="line"><span class="lineno">  402</span>                line.type |= <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a>;</div>
<div class="line"><span class="lineno">  403</span>                active_speed_modifier = adjustment-&gt;lines.size();</div>
<div class="line"><span class="lineno">  404</span>            }</div>
<div class="line"><span class="lineno">  405</span>            <span class="keywordflow">if</span> ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">CoolingLine::TYPE_G92</a>) == 0) {</div>
<div class="line"><span class="lineno">  406</span>                <span class="comment">//BBS: G0, G1, G2, G3. Calculate the duration.</span></div>
<div class="line"><span class="lineno">  407</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.use_relative_e_distances.value)</div>
<div class="line"><span class="lineno">  408</span>                    <span class="comment">// Reset extruder accumulator.</span></div>
<div class="line"><span class="lineno">  409</span>                    current_pos[3] = 0.f;</div>
<div class="line"><span class="lineno">  410</span>                <span class="keywordtype">float</span> dif[4];</div>
<div class="line"><span class="lineno">  411</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; 4; ++ i)</div>
<div class="line"><span class="lineno">  412</span>                    dif[i] = new_pos[i] - current_pos[i];</div>
<div class="line"><span class="lineno">  413</span>                <span class="keywordtype">float</span> dxy2 = 0;</div>
<div class="line"><span class="lineno">  414</span>                <span class="comment">//BBS: support to calculate length of arc</span></div>
<div class="line"><span class="lineno">  415</span>                <span class="keywordflow">if</span> (line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6c8ac812deec9f360a6e5a74a2b81279">CoolingLine::TYPE_G2</a> || line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb8dc87b61424083b4264308190b184e">CoolingLine::TYPE_G3</a>) {</div>
<div class="line"><span class="lineno">  416</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#a550769bbd4e7537ff90a656f5b0c23b2">start</a>(current_pos[0], current_pos[1], 0);</div>
<div class="line"><span class="lineno">  417</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a>(new_pos[0], new_pos[1], 0);</div>
<div class="line"><span class="lineno">  418</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> center(new_pos[5], new_pos[6], 0);</div>
<div class="line"><span class="lineno">  419</span>                    <span class="keywordtype">bool</span> <a class="code hl_function" href="../../d8/d21/namespaceagg.html#a15f6dc4d5a75c9bad184e40f231850f1">is_ccw</a> = line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb8dc87b61424083b4264308190b184e">CoolingLine::TYPE_G3</a>;</div>
<div class="line"><span class="lineno">  420</span>                    <span class="keywordtype">float</span> dxy = <a class="code hl_function" href="../../d9/deb/class_slic3r_1_1_arc_segment.html#a6efd04b6b5b2a776dc4d5e548963bebb">ArcSegment::calc_arc_length</a>(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#a550769bbd4e7537ff90a656f5b0c23b2">start</a>, end, center, is_ccw);</div>
<div class="line"><span class="lineno">  421</span>                    dxy2 = dxy * dxy;</div>
<div class="line"><span class="lineno">  422</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  423</span>                    dxy2 = dif[0] * dif[0] + dif[1] * dif[1];</div>
<div class="line"><span class="lineno">  424</span>                }</div>
<div class="line"><span class="lineno">  425</span>                <span class="keywordtype">float</span> dxyz2 = dxy2 + dif[2] * dif[2];</div>
<div class="line"><span class="lineno">  426</span>                <span class="keywordflow">if</span> (dxyz2 &gt; 0.f) {</div>
<div class="line"><span class="lineno">  427</span>                    <span class="comment">// Movement in xyz, calculate time from the xyz Euclidian distance.</span></div>
<div class="line"><span class="lineno">  428</span>                    line.length = <a class="code hl_function" href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a>(dxyz2);</div>
<div class="line"><span class="lineno">  429</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (std::abs(dif[3]) &gt; 0.f) {</div>
<div class="line"><span class="lineno">  430</span>                    <span class="comment">// Movement in the extruder axis.</span></div>
<div class="line"><span class="lineno">  431</span>                    line.length = std::abs(dif[3]);</div>
<div class="line"><span class="lineno">  432</span>                }</div>
<div class="line"><span class="lineno">  433</span>                line.feedrate = new_pos[4];</div>
<div class="line"><span class="lineno">  434</span>                assert((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a>) == 0 || line.feedrate &gt; 0.f);</div>
<div class="line"><span class="lineno">  435</span>                <span class="keywordflow">if</span> (line.length &gt; 0)</div>
<div class="line"><span class="lineno">  436</span>                    line.time = line.length / line.feedrate;</div>
<div class="line"><span class="lineno">  437</span>                line.time_max = line.time;</div>
<div class="line"><span class="lineno">  438</span>                <span class="keywordflow">if</span> ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a278cf8b960f724a3506f775d95cb3104">CoolingLine::TYPE_ADJUSTABLE</a>) || active_speed_modifier != <span class="keywordtype">size_t</span>(-1))</div>
<div class="line"><span class="lineno">  439</span>                    line.time_max = (adjustment-&gt;slow_down_min_speed == 0.f) ? FLT_MAX : <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../df/db1/math_8h.html#a5083c48fbfb60dd70808789479f4db53">max</a>(line.time, line.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">length</a> / adjustment-&gt;<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a180d1038ce3d0b5f1d9d8dfbe7dee30f">slow_down_min_speed</a>);</div>
<div class="line"><span class="lineno">  440</span>                <span class="comment">// BBS: add G2 and G3 support</span></div>
<div class="line"><span class="lineno">  441</span>                <span class="keywordflow">if</span> (active_speed_modifier &lt; adjustment-&gt;lines.size() &amp;&amp; ((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714">CoolingLine::TYPE_G1</a>) ||</div>
<div class="line"><span class="lineno">  442</span>                                                                         (line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6c8ac812deec9f360a6e5a74a2b81279">CoolingLine::TYPE_G2</a>) ||</div>
<div class="line"><span class="lineno">  443</span>                                                                         (line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb8dc87b61424083b4264308190b184e">CoolingLine::TYPE_G3</a>))) {</div>
<div class="line"><span class="lineno">  444</span>                    <span class="comment">// Inside the &quot;;_EXTRUDE_SET_SPEED&quot; blocks, there must not be a G1 Fxx entry.</span></div>
<div class="line"><span class="lineno">  445</span>                    assert((line.type &amp; <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6d15a4d2f553a6aa729dc79ed60d6fa6">CoolingLine::TYPE_HAS_F</a>) == 0);</div>
<div class="line"><span class="lineno">  446</span>                    CoolingLine &amp;sm = adjustment-&gt;lines[active_speed_modifier];</div>
<div class="line"><span class="lineno">  447</span>                    assert(sm.feedrate &gt; 0.f);</div>
<div class="line"><span class="lineno">  448</span>                    sm.length   += line.length;</div>
<div class="line"><span class="lineno">  449</span>                    sm.time     += line.time;</div>
<div class="line"><span class="lineno">  450</span>                    <span class="keywordflow">if</span> (sm.time_max != FLT_MAX) {</div>
<div class="line"><span class="lineno">  451</span>                        <span class="keywordflow">if</span> (line.time_max == FLT_MAX)</div>
<div class="line"><span class="lineno">  452</span>                            sm.time_max = FLT_MAX;</div>
<div class="line"><span class="lineno">  453</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  454</span>                            sm.time_max += line.time_max;</div>
<div class="line"><span class="lineno">  455</span>                    }</div>
<div class="line"><span class="lineno">  456</span>                    <span class="comment">// Don&#39;t store this line.</span></div>
<div class="line"><span class="lineno">  457</span>                    line.type = 0;</div>
<div class="line"><span class="lineno">  458</span>                }</div>
<div class="line"><span class="lineno">  459</span>            }</div>
<div class="line"><span class="lineno">  460</span>            current_pos = std::move(new_pos);</div>
<div class="line"><span class="lineno">  461</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_EXTRUDE_END&quot;</span>)) {</div>
<div class="line"><span class="lineno">  462</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a91eba6bbac191e1e9ecbbf7c97d158c9">CoolingLine::TYPE_EXTRUDE_END</a>;</div>
<div class="line"><span class="lineno">  463</span>            active_speed_modifier = size_t(-1);</div>
<div class="line"><span class="lineno">  464</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>)) {</div>
<div class="line"><span class="lineno">  465</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> new_extruder = (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)atoi(sline.c_str() + <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a31140eda5547d15e3b78e43f576768f0">m_toolchange_prefix</a>.size());</div>
<div class="line"><span class="lineno">  466</span>            <span class="comment">// Only change extruder in case the number is meaningful. User could provide an out-of-range index through custom gcodes - those shall be ignored.</span></div>
<div class="line"><span class="lineno">  467</span>            <span class="keywordflow">if</span> (new_extruder &lt; map_extruder_to_per_extruder_adjustment.size()) {</div>
<div class="line"><span class="lineno">  468</span>                <span class="keywordflow">if</span> (new_extruder != current_extruder) {</div>
<div class="line"><span class="lineno">  469</span>                    <span class="comment">// Switch the tool.</span></div>
<div class="line"><span class="lineno">  470</span>                    line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb7a2ab368edd5078cd74b1ffb5b61a0">CoolingLine::TYPE_SET_TOOL</a>;</div>
<div class="line"><span class="lineno">  471</span>                    current_extruder = new_extruder;</div>
<div class="line"><span class="lineno">  472</span>                    adjustment         = &amp;per_extruder_adjustments[map_extruder_to_per_extruder_adjustment[current_extruder]];</div>
<div class="line"><span class="lineno">  473</span>                }</div>
<div class="line"><span class="lineno">  474</span>            }</div>
<div class="line"><span class="lineno">  475</span>            <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  476</span>                <span class="comment">// Only log the error in case of MM printer. Single extruder printers likely ignore any T anyway.</span></div>
<div class="line"><span class="lineno">  477</span>                <span class="keywordflow">if</span> (map_extruder_to_per_extruder_adjustment.size() &gt; 1)</div>
<div class="line"><span class="lineno">  478</span>                    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; <span class="stringliteral">&quot;CoolingBuffer encountered an invalid toolchange, maybe from a custom gcode: &quot;</span> &lt;&lt; sline;</div>
<div class="line"><span class="lineno">  479</span>            }</div>
<div class="line"><span class="lineno">  480</span> </div>
<div class="line"><span class="lineno">  481</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_OVERHANG_FAN_START&quot;</span>)) {</div>
<div class="line"><span class="lineno">  482</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a1b5622e11de0bdbcc238d6cab4e8b476">CoolingLine::TYPE_OVERHANG_FAN_START</a>;</div>
<div class="line"><span class="lineno">  483</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_OVERHANG_FAN_END&quot;</span>)) {</div>
<div class="line"><span class="lineno">  484</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a118985b1441c285950e4996617ce8ecf">CoolingLine::TYPE_OVERHANG_FAN_END</a>;</div>
<div class="line"><span class="lineno">  485</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_SUPP_INTERFACE_FAN_START&quot;</span>)) {</div>
<div class="line"><span class="lineno">  486</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa4e7e2a71131803b8147f3e9e328bae8">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>;</div>
<div class="line"><span class="lineno">  487</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_SUPP_INTERFACE_FAN_END&quot;</span>)) {</div>
<div class="line"><span class="lineno">  488</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8aa3985122b749b62f135e4aeb939a5661">CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_END</a>;</div>
<div class="line"><span class="lineno">  489</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;G4 &quot;</span>)) {</div>
<div class="line"><span class="lineno">  490</span>            <span class="comment">// Parse the wait time.</span></div>
<div class="line"><span class="lineno">  491</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3a38181f98654e9bea75b1e4bde91c56">CoolingLine::TYPE_G4</a>;</div>
<div class="line"><span class="lineno">  492</span>            <span class="keywordtype">size_t</span> pos_S = sline.find(<span class="charliteral">&#39;S&#39;</span>, 3);</div>
<div class="line"><span class="lineno">  493</span>            <span class="keywordtype">size_t</span> pos_P = sline.find(<span class="charliteral">&#39;P&#39;</span>, 3);</div>
<div class="line"><span class="lineno">  494</span>            assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>()); <span class="comment">// for atof</span></div>
<div class="line"><span class="lineno">  495</span>            line.time = line.time_max = float(</div>
<div class="line"><span class="lineno">  496</span>                (pos_S &gt; 0) ? atof(sline.c_str() + pos_S + 1) :</div>
<div class="line"><span class="lineno">  497</span>                (pos_P &gt; 0) ? atof(sline.c_str() + pos_P + 1) * 0.001 : 0.);</div>
<div class="line"><span class="lineno">  498</span>        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::starts_with(sline, <span class="stringliteral">&quot;;_FORCE_RESUME_FAN_SPEED&quot;</span>)) {</div>
<div class="line"><span class="lineno">  499</span>            line.type = <a class="code hl_enumvalue" href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a640e82af913cc888f95ca002302f5833">CoolingLine::TYPE_FORCE_RESUME_FAN</a>;</div>
<div class="line"><span class="lineno">  500</span>        }</div>
<div class="line"><span class="lineno">  501</span>        <span class="keywordflow">if</span> (line.type != 0)</div>
<div class="line"><span class="lineno">  502</span>            adjustment-&gt;lines.emplace_back(std::move(line));</div>
<div class="line"><span class="lineno">  503</span>    }</div>
<div class="line"><span class="lineno">  504</span> </div>
<div class="line"><span class="lineno">  505</span>    <span class="keywordflow">return</span> per_extruder_adjustments;</div>
<div class="line"><span class="lineno">  506</span>}</div>
<div class="ttc" id="a_array_cwise_unary_ops_8h_html_a656b9217a2fcb6de59dc8d1eb3079cc7"><div class="ttname"><a href="../../d4/df0/_array_cwise_unary_ops_8h.html#a656b9217a2fcb6de59dc8d1eb3079cc7">sqrt</a></div><div class="ttdeci">EIGEN_DEVICE_FUNC const SqrtReturnType sqrt() const</div><div class="ttdef"><b>Definition</b> ArrayCwiseUnaryOps.h:152</div></div>
<div class="ttc" id="aclass_slic3r_1_1_arc_segment_html_a6efd04b6b5b2a776dc4d5e548963bebb"><div class="ttname"><a href="../../d9/deb/class_slic3r_1_1_arc_segment.html#a6efd04b6b5b2a776dc4d5e548963bebb">Slic3r::ArcSegment::calc_arc_length</a></div><div class="ttdeci">static float calc_arc_length(Vec3f start_pos, Vec3f end_pos, Vec3f center_pos, bool is_ccw)</div><div class="ttdef"><b>Definition</b> Circle.cpp:511</div></div>
<div class="ttc" id="amath_8h_html_a5083c48fbfb60dd70808789479f4db53"><div class="ttname"><a href="../../df/db1/math_8h.html#a5083c48fbfb60dd70808789479f4db53">max</a></div><div class="ttdeci">const T &amp; max(const T &amp;a, const T &amp;b)</div><div class="ttdef"><b>Definition</b> math.h:391</div></div>
<div class="ttc" id="anamespace_slic3r_html_a180d1038ce3d0b5f1d9d8dfbe7dee30f"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a180d1038ce3d0b5f1d9d8dfbe7dee30f">Slic3r::slow_down_min_speed</a></div><div class="ttdeci">machine_min_extruding_rate slow_down_min_speed((ConfigOptionFloats, nozzle_diameter))((ConfigOptionBool</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1eea52f5cabe9f6172fcec07fb0fed76"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">Slic3r::length</a></div><div class="ttdeci">double length(const Points &amp;pts)</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:133</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4e0a52bc52a09b283b7b06e2f0c272cc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Slic3r::Vec3f</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 3, 1, Eigen::DontAlign &gt; Vec3f</div><div class="ttdef"><b>Definition</b> Point.hpp:44</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7fc4c0f61833ab1abb7195cd75463e56"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">Slic3r::is_decimal_separator_point</a></div><div class="ttdeci">bool is_decimal_separator_point()</div><div class="ttdef"><b>Definition</b> LocalesUtils.cpp:46</div></div>
<div class="ttc" id="anamespaceagg_html_a15f6dc4d5a75c9bad184e40f231850f1"><div class="ttname"><a href="../../d8/d21/namespaceagg.html#a15f6dc4d5a75c9bad184e40f231850f1">agg::is_ccw</a></div><div class="ttdeci">bool is_ccw(unsigned c)</div><div class="ttdef"><b>Definition</b> agg_basics.h:466</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">marchsq::__impl::SquareTag::c</a></div><div class="ttdeci">@ c</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a3a38181f98654e9bea75b1e4bde91c56"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3a38181f98654e9bea75b1e4bde91c56">Slic3r::CoolingLine::TYPE_G4</a></div><div class="ttdeci">@ TYPE_G4</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:59</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a3b26b9a1fc7e01c26e0df46a61ab6704">Slic3r::CoolingLine::TYPE_G92</a></div><div class="ttdeci">@ TYPE_G92</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:60</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a6c8ac812deec9f360a6e5a74a2b81279"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a6c8ac812deec9f360a6e5a74a2b81279">Slic3r::CoolingLine::TYPE_G2</a></div><div class="ttdeci">@ TYPE_G2</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:62</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8a86302893b07ce0f16510bddaeac92c4b"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8a86302893b07ce0f16510bddaeac92c4b">Slic3r::CoolingLine::TYPE_G0</a></div><div class="ttdeci">@ TYPE_G0</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:52</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8abcc58fa48d00152becc69653669cd714">Slic3r::CoolingLine::TYPE_G1</a></div><div class="ttdeci">@ TYPE_G1</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:53</div></div>
<div class="ttc" id="astruct_slic3r_1_1_cooling_line_html_a42c6c12abf0bd3b5481fe6a09bf289c8adb8dc87b61424083b4264308190b184e"><div class="ttname"><a href="../../db/d1f/struct_slic3r_1_1_cooling_line.html#a42c6c12abf0bd3b5481fe6a09bf289c8adb8dc87b61424083b4264308190b184e">Slic3r::CoolingLine::TYPE_G3</a></div><div class="ttdeci">@ TYPE_G3</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:63</div></div>
<div class="ttc" id="axmlrole_8c_html_a2739afc9d7ed13e98e5e0c5b2e1f0428"><div class="ttname"><a href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a></div><div class="ttdeci">static PROLOG_HANDLER error</div><div class="ttdef"><b>Definition</b> xmlrole.c:109</div></div>
<div class="ttc" id="axmltok__impl_8inc_html_a550769bbd4e7537ff90a656f5b0c23b2"><div class="ttname"><a href="../../d2/d86/xmltok__impl_8inc.html#a550769bbd4e7537ff90a656f5b0c23b2">start</a></div><div class="ttdeci">start</div><div class="ttdef"><b>Definition</b> xmltok_impl.inc:1203</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00511">Slic3r::ArcSegment::calc_arc_length()</a>, <a class="el" href="../../#l00219">Slic3r::PerExtruderAdjustments::cooling_slow_down_enabled</a>, <a class="el" href="../../#l00881">end</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00217">Slic3r::PerExtruderAdjustments::extruder_id</a>, <a class="el" href="../../#l00091">Slic3r::CoolingLine::feedrate</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00046">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l00089">Slic3r::CoolingLine::length</a>, <a class="el" href="../../#l00226">Slic3r::PerExtruderAdjustments::lines</a>, <a class="el" href="../../#l00055">m_config</a>, <a class="el" href="../../#l00056">m_current_extruder</a>, <a class="el" href="../../#l00049">m_extruder_ids</a>, <a class="el" href="../../#l00051">m_num_extruders</a>, <a class="el" href="../../#l00052">m_toolchange_prefix</a>, <a class="el" href="../../#l00221">Slic3r::PerExtruderAdjustments::slow_down_layer_time</a>, <a class="el" href="../../#l00223">Slic3r::PerExtruderAdjustments::slow_down_min_speed</a>, <a class="el" href="../../#l00152">sqrt()</a>, <a class="el" href="../../#l01203">start</a>, <a class="el" href="../../#l00093">Slic3r::CoolingLine::time</a>, <a class="el" href="../../#l00095">Slic3r::CoolingLine::time_max</a>, <a class="el" href="../../#l00083">Slic3r::CoolingLine::type</a>, <a class="el" href="../../#l00054">Slic3r::CoolingLine::TYPE_ADJUSTABLE</a>, <a class="el" href="../../#l00055">Slic3r::CoolingLine::TYPE_EXTERNAL_PERIMETER</a>, <a class="el" href="../../#l00049">Slic3r::CoolingLine::TYPE_EXTRUDE_END</a>, <a class="el" href="../../#l00064">Slic3r::CoolingLine::TYPE_FORCE_RESUME_FAN</a>, <a class="el" href="../../#l00052">Slic3r::CoolingLine::TYPE_G0</a>, <a class="el" href="../../#l00053">Slic3r::CoolingLine::TYPE_G1</a>, <a class="el" href="../../#l00062">Slic3r::CoolingLine::TYPE_G2</a>, <a class="el" href="../../#l00063">Slic3r::CoolingLine::TYPE_G3</a>, <a class="el" href="../../#l00059">Slic3r::CoolingLine::TYPE_G4</a>, <a class="el" href="../../#l00060">Slic3r::CoolingLine::TYPE_G92</a>, <a class="el" href="../../#l00057">Slic3r::CoolingLine::TYPE_HAS_F</a>, <a class="el" href="../../#l00051">Slic3r::CoolingLine::TYPE_OVERHANG_FAN_END</a>, <a class="el" href="../../#l00050">Slic3r::CoolingLine::TYPE_OVERHANG_FAN_START</a>, <a class="el" href="../../#l00048">Slic3r::CoolingLine::TYPE_SET_TOOL</a>, <a class="el" href="../../#l00066">Slic3r::CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_END</a>, <a class="el" href="../../#l00065">Slic3r::CoolingLine::TYPE_SUPPORT_INTERFACE_FAN_START</a>, and <a class="el" href="../../#l00058">Slic3r::CoolingLine::TYPE_WIPE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00299">process_layer()</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad65e3b942d606c994b626d0818f46e10_cgraph.svg" width="659" height="216"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_ad65e3b942d606c994b626d0818f46e10_icgraph.svg" width="342" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a3313bc5271e4cc935b529572e0cac6e3" name="a3313bc5271e4cc935b529572e0cac6e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3313bc5271e4cc935b529572e0cac6e3">&#9670;&#160;</a></span>process_layer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::process_layer </td>
          <td>(</td>
          <td class="paramtype">std::string &amp;&amp;&#160;</td>
          <td class="paramname"><em>gcode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>layer_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>flush</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  300</span>{</div>
<div class="line"><span class="lineno">  301</span>    <span class="comment">// Cache the input G-code.</span></div>
<div class="line"><span class="lineno">  302</span>    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>.empty())</div>
<div class="line"><span class="lineno">  303</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a> = std::move(gcode);</div>
<div class="line"><span class="lineno">  304</span>    <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno">  305</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a> += <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a>;</div>
<div class="line"><span class="lineno">  306</span> </div>
<div class="line"><span class="lineno">  307</span>    std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>;</div>
<div class="line"><span class="lineno">  308</span>    <span class="keywordflow">if</span> (flush) {</div>
<div class="line"><span class="lineno">  309</span>        <span class="comment">// This is either an object layer or the very last print layer. Calculate cool down over the collected support layers</span></div>
<div class="line"><span class="lineno">  310</span>        <span class="comment">// and one object layer.</span></div>
<div class="line"><span class="lineno">  311</span>        std::vector&lt;PerExtruderAdjustments&gt; per_extruder_adjustments = this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad65e3b942d606c994b626d0818f46e10">parse_layer_gcode</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>, <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>);</div>
<div class="line"><span class="lineno">  312</span>        <span class="keywordtype">float</span> layer_time_stretched = this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a039c2dcd08f3d002182b4d009caafd7c">calculate_layer_slowdown</a>(per_extruder_adjustments);</div>
<div class="line"><span class="lineno">  313</span>        <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = this-&gt;<a class="code hl_function" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad6d6ecc9309d2fa4f3962bc4715b73fc">apply_layer_cooldown</a>(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>, layer_id, layer_time_stretched, per_extruder_adjustments);</div>
<div class="line"><span class="lineno">  314</span>        <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">m_gcode</a>.clear();</div>
<div class="line"><span class="lineno">  315</span>    }</div>
<div class="line"><span class="lineno">  316</span>    <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>;</div>
<div class="line"><span class="lineno">  317</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a039c2dcd08f3d002182b4d009caafd7c"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a039c2dcd08f3d002182b4d009caafd7c">Slic3r::CoolingBuffer::calculate_layer_slowdown</a></div><div class="ttdeci">float calculate_layer_slowdown(std::vector&lt; PerExtruderAdjustments &gt; &amp;per_extruder_adjustments)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:644</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_a54a957a8014098e34682fc52e8fcdbd4"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">Slic3r::CoolingBuffer::m_current_pos</a></div><div class="ttdeci">std::vector&lt; float &gt; m_current_pos</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:43</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ace03e18b93c1e6ef690fe4d171bc3e11"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ace03e18b93c1e6ef690fe4d171bc3e11">Slic3r::CoolingBuffer::m_gcode</a></div><div class="ttdeci">std::string m_gcode</div><div class="ttdef"><b>Definition</b> CoolingBuffer.hpp:39</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ad65e3b942d606c994b626d0818f46e10"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad65e3b942d606c994b626d0818f46e10">Slic3r::CoolingBuffer::parse_layer_gcode</a></div><div class="ttdeci">std::vector&lt; PerExtruderAdjustments &gt; parse_layer_gcode(const std::string &amp;gcode, std::vector&lt; float &gt; &amp;current_pos) const</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:321</div></div>
<div class="ttc" id="aclass_slic3r_1_1_cooling_buffer_html_ad6d6ecc9309d2fa4f3962bc4715b73fc"><div class="ttname"><a href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ad6d6ecc9309d2fa4f3962bc4715b73fc">Slic3r::CoolingBuffer::apply_layer_cooldown</a></div><div class="ttdeci">std::string apply_layer_cooldown(const std::string &amp;gcode, size_t layer_id, float layer_time, std::vector&lt; PerExtruderAdjustments &gt; &amp;per_extruder_adjustments)</div><div class="ttdef"><b>Definition</b> CoolingBuffer.cpp:705</div></div>
<div class="ttc" id="atestmini_8c_html_ad9e5eed42092079dea4d90550ff5fcf0"><div class="ttname"><a href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a></div><div class="ttdeci">static unsigned char __LZO_MMODEL out[OUT_LEN]</div><div class="ttdef"><b>Definition</b> testmini.c:58</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, <a class="el" href="../../#l00644">calculate_layer_slowdown()</a>, <a class="el" href="../../#l00043">m_current_pos</a>, <a class="el" href="../../#l00039">m_gcode</a>, <a class="el" href="../../#l00058">out</a>, and <a class="el" href="../../#l00321">parse_layer_gcode()</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a3313bc5271e4cc935b529572e0cac6e3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a9cb99a8e449d284c4b76b1ef6c3ab6df" name="a9cb99a8e449d284c4b76b1ef6c3ab6df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9cb99a8e449d284c4b76b1ef6c3ab6df">&#9670;&#160;</a></span>reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::CoolingBuffer::reset </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> &amp;&#160;</td>
          <td class="paramname"><em>position</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   33</span>{</div>
<div class="line"><span class="lineno">   34</span>    <span class="comment">// BBS: add I and J axis to store center of arc</span></div>
<div class="line"><span class="lineno">   35</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>.assign(7, 0.f);</div>
<div class="line"><span class="lineno">   36</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[0] = float(<a class="code hl_struct" href="../../db/d17/xmltok_8h.html#d3/d90/structposition">position</a>.x());</div>
<div class="line"><span class="lineno">   37</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[1] = float(<a class="code hl_struct" href="../../db/d17/xmltok_8h.html#d3/d90/structposition">position</a>.y());</div>
<div class="line"><span class="lineno">   38</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[2] = float(<a class="code hl_struct" href="../../db/d17/xmltok_8h.html#d3/d90/structposition">position</a>.z());</div>
<div class="line"><span class="lineno">   39</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a54a957a8014098e34682fc52e8fcdbd4">m_current_pos</a>[4] = float(<a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1ab506fd68632cff030b041c5cd6de8d">m_config</a>.travel_speed.value);</div>
<div class="line"><span class="lineno">   40</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#ab6a8b43f1a4e019265862ae709eb57b6">m_fan_speed</a> = -1;</div>
<div class="line"><span class="lineno">   41</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a1131825fa00e1c777edfcc668b44a070">m_additional_fan_speed</a> = -1;</div>
<div class="line"><span class="lineno">   42</span>    <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a3234bcf20b9a40c0a186b6eb30c7b037">m_current_fan_speed</a> = -1;</div>
<div class="line"><span class="lineno">   43</span>}</div>
<div class="ttc" id="axmltok_8h_html_d3/d90/structposition"><div class="ttname"><a href="../../db/d17/xmltok_8h.html#d3/d90/structposition">position</a></div><div class="ttdef"><b>Definition</b> xmltok.h:110</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00046">m_additional_fan_speed</a>, <a class="el" href="../../#l00055">m_config</a>, <a class="el" href="../../#l00061">m_current_fan_speed</a>, <a class="el" href="../../#l00043">m_current_pos</a>, and <a class="el" href="../../#l00045">m_fan_speed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l00020">CoolingBuffer()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d3/ddb/class_slic3r_1_1_cooling_buffer_a9cb99a8e449d284c4b76b1ef6c3ab6df_icgraph.svg" width="342" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="ad18a9e8f3e8078621f09f7d3c8691d35" name="ad18a9e8f3e8078621f09f7d3c8691d35"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad18a9e8f3e8078621f09f7d3c8691d35">&#9670;&#160;</a></span>set_current_extruder()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::CoolingBuffer::set_current_extruder </td>
          <td>(</td>
          <td class="paramtype">unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>extruder_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">   27</span>{ <a class="code hl_variable" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html#a73dca3613882898f631e407325cfa742">m_current_extruder</a> = extruder_id; }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00056">m_current_extruder</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a1131825fa00e1c777edfcc668b44a070" name="a1131825fa00e1c777edfcc668b44a070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1131825fa00e1c777edfcc668b44a070">&#9670;&#160;</a></span>m_additional_fan_speed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> Slic3r::CoolingBuffer::m_additional_fan_speed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, and <a class="el" href="../../#l00032">reset()</a>.</p>

</div>
</div>
<a id="a2b5d76a211c23bf0db73c90ef41e6886" name="a2b5d76a211c23bf0db73c90ef41e6886"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b5d76a211c23bf0db73c90ef41e6886">&#9670;&#160;</a></span>m_axis</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;char&gt; Slic3r::CoolingBuffer::m_axis</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1ab506fd68632cff030b041c5cd6de8d" name="a1ab506fd68632cff030b041c5cd6de8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ab506fd68632cff030b041c5cd6de8d">&#9670;&#160;</a></span>m_config</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const PrintConfig&amp; Slic3r::CoolingBuffer::m_config</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, <a class="el" href="../../#l00321">parse_layer_gcode()</a>, and <a class="el" href="../../#l00032">reset()</a>.</p>

</div>
</div>
<a id="a82fae524c24635ded4fdeb6457b5260e" name="a82fae524c24635ded4fdeb6457b5260e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82fae524c24635ded4fdeb6457b5260e">&#9670;&#160;</a></span>m_cooling_logic_proportional</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::CoolingBuffer::m_cooling_logic_proportional = false</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00644">calculate_layer_slowdown()</a>.</p>

</div>
</div>
<a id="a73dca3613882898f631e407325cfa742" name="a73dca3613882898f631e407325cfa742"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73dca3613882898f631e407325cfa742">&#9670;&#160;</a></span>m_current_extruder</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> Slic3r::CoolingBuffer::m_current_extruder</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, <a class="el" href="../../#l00321">parse_layer_gcode()</a>, and <a class="el" href="../../#l00027">set_current_extruder()</a>.</p>

</div>
</div>
<a id="a3234bcf20b9a40c0a186b6eb30c7b037" name="a3234bcf20b9a40c0a186b6eb30c7b037"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3234bcf20b9a40c0a186b6eb30c7b037">&#9670;&#160;</a></span>m_current_fan_speed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> Slic3r::CoolingBuffer::m_current_fan_speed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, and <a class="el" href="../../#l00032">reset()</a>.</p>

</div>
</div>
<a id="a54a957a8014098e34682fc52e8fcdbd4" name="a54a957a8014098e34682fc52e8fcdbd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a54a957a8014098e34682fc52e8fcdbd4">&#9670;&#160;</a></span>m_current_pos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;float&gt; Slic3r::CoolingBuffer::m_current_pos</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00299">process_layer()</a>, and <a class="el" href="../../#l00032">reset()</a>.</p>

</div>
</div>
<a id="a1f70d25be0e9b27329aec4f3489d20f7" name="a1f70d25be0e9b27329aec4f3489d20f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f70d25be0e9b27329aec4f3489d20f7">&#9670;&#160;</a></span>m_extruder_ids</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&gt; Slic3r::CoolingBuffer::m_extruder_ids</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00020">CoolingBuffer()</a>, and <a class="el" href="../../#l00321">parse_layer_gcode()</a>.</p>

</div>
</div>
<a id="ab6a8b43f1a4e019265862ae709eb57b6" name="ab6a8b43f1a4e019265862ae709eb57b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6a8b43f1a4e019265862ae709eb57b6">&#9670;&#160;</a></span>m_fan_speed</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> Slic3r::CoolingBuffer::m_fan_speed</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, and <a class="el" href="../../#l00032">reset()</a>.</p>

</div>
</div>
<a id="ace03e18b93c1e6ef690fe4d171bc3e11" name="ace03e18b93c1e6ef690fe4d171bc3e11"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace03e18b93c1e6ef690fe4d171bc3e11">&#9670;&#160;</a></span>m_gcode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::CoolingBuffer::m_gcode</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00299">process_layer()</a>.</p>

</div>
</div>
<a id="aaad867e6e51db8529b95dd20f565e524" name="aaad867e6e51db8529b95dd20f565e524"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaad867e6e51db8529b95dd20f565e524">&#9670;&#160;</a></span>m_num_extruders</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> Slic3r::CoolingBuffer::m_num_extruders { 0 }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00020">CoolingBuffer()</a>, and <a class="el" href="../../#l00321">parse_layer_gcode()</a>.</p>

</div>
</div>
<a id="a31140eda5547d15e3b78e43f576768f0" name="a31140eda5547d15e3b78e43f576768f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a31140eda5547d15e3b78e43f576768f0">&#9670;&#160;</a></span>m_toolchange_prefix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const std::string Slic3r::CoolingBuffer::m_toolchange_prefix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00705">apply_layer_cooldown()</a>, and <a class="el" href="../../#l00321">parse_layer_gcode()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/libslic3r/GCode/<a class="el" href="../../">CoolingBuffer.hpp</a></li>
<li>src/libslic3r/GCode/<a class="el" href="../../">CoolingBuffer.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../d3/ddb/class_slic3r_1_1_cooling_buffer.html">CoolingBuffer</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
