<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.7"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OrcaSlicer: Slic3r::_BBS_3MF_Exporter Class Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../OrcaSlicer_32px.png"/></td>
  <td id="projectalign">
   <div id="projectname">OrcaSlicer<span id="projectnumber">&#160;1.6.3</span>
   </div>
   <div id="projectbrief">OrcaSlicer</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.7 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html','../../'); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pri-types">Private Types</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-static-methods">Static Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="../../da/d75/class_slic3r_1_1___b_b_s__3_m_f___exporter-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">Slic3r::_BBS_3MF_Exporter Class Reference</div></div>
</div><!--header-->
<div class="contents">
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Inheritance diagram for Slic3r::_BBS_3MF_Exporter:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../d6/d25/class_slic3r_1_1___b_b_s__3_m_f___exporter__inherit__graph.svg" width="196" height="111"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<div id="dynsection-1" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::_BBS_3MF_Exporter:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d2/d79/class_slic3r_1_1___b_b_s__3_m_f___exporter__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="nested-classes" name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d60/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_build_item.html">BuildItem</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a></td></tr>
<tr class="separator:d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aceb467c22a717b4c4b92c997f017e937"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aceb467c22a717b4c4b92c997f017e937">save_model_to_file</a> (<a class="el" href="../../d0/d65/struct_slic3r_1_1_store_params.html">StoreParams</a> &amp;store_params)</td></tr>
<tr class="separator:aceb467c22a717b4c4b92c997f017e937"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30761659b70cd1335cec40305b97938f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a30761659b70cd1335cec40305b97938f">save_object_mesh</a> (const std::string &amp;temp_path, <a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> const &amp;object, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> obj_id)</td></tr>
<tr class="separator:a30761659b70cd1335cec40305b97938f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a024876787a227255ac56f4783999a6cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a024876787a227255ac56f4783999a6cd">log_errors</a> ()</td></tr>
<tr class="separator:a024876787a227255ac56f4783999a6cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:aeb183b0dd78db016982544618ad1b1eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a> (const std::string &amp;<a class="el" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) const</td></tr>
<tr class="separator:aeb183b0dd78db016982544618ad1b1eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad12ad7f0f5f4407e61b1762ee28695ad"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#ad12ad7f0f5f4407e61b1762ee28695ad">clear_errors</a> ()</td></tr>
<tr class="separator:ad12ad7f0f5f4407e61b1762ee28695ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-types" name="pri-types"></a>
Private Types</h2></td></tr>
<tr class="memitem:a37a7177b9445f5e20f346770cfb0bb29"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; const <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a> *, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37a7177b9445f5e20f346770cfb0bb29">VolumeToObjectIDMap</a></td></tr>
<tr class="separator:a37a7177b9445f5e20f346770cfb0bb29"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143cb428c677b32b91929df141624a97"><td class="memItemLeft" align="right" valign="top">typedef std::vector&lt; <a class="el" href="../../dd/d60/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_build_item.html">BuildItem</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a143cb428c677b32b91929df141624a97">BuildItemsList</a></td></tr>
<tr class="separator:a143cb428c677b32b91929df141624a97"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ae29c114509a8a577b59347476adabd"><td class="memItemLeft" align="right" valign="top">typedef std::map&lt; <a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> const *, <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a></td></tr>
<tr class="separator:a9ae29c114509a8a577b59347476adabd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-methods" name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:a8a9233123f226629c50c25de6b5b925e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8a9233123f226629c50c25de6b5b925e">_save_model_to_file</a> (const std::string &amp;filename, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;plate_data_list, std::vector&lt; <a class="el" href="../../d9/db2/class_slic3r_1_1_preset.html">Preset</a> * &gt; &amp;project_presets, const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *config, const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;thumbnail_data, const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;top_thumbnail_data, const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;pick_thumbnail_data, <a class="el" href="../../de/db8/namespace_slic3r.html#afd5b13b75ef46c5be8480e3981d21008">Export3mfProgressFn</a> proFn, const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;calibration_data, const std::vector&lt; <a class="el" href="../../d2/d70/struct_slic3r_1_1_plate_b_box_data.html">PlateBBoxData</a> * &gt; &amp;id_bboxes, <a class="el" href="../../d9/d65/class_slic3r_1_1_b_b_l_project.html">BBLProject</a> *project=nullptr, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> export_plate_idx=-1)</td></tr>
<tr class="separator:a8a9233123f226629c50c25de6b5b925e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac323ea063fd4dbfaa9670e1b2ffa30d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const std::string &amp;path_in_zip, const std::string &amp;file_path)</td></tr>
<tr class="separator:aac323ea063fd4dbfaa9670e1b2ffa30d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45321e2c03a229bdd81f9e7341e3619c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a45321e2c03a229bdd81f9e7341e3619c">_add_content_types_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive)</td></tr>
<tr class="separator:a45321e2c03a229bdd81f9e7341e3619c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9d32b5a85133cbe6bd44b7399714f83"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab9d32b5a85133cbe6bd44b7399714f83">_add_thumbnail_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> &amp;thumbnail_data, const char *local_path, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> index)</td></tr>
<tr class="separator:ab9d32b5a85133cbe6bd44b7399714f83"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fea892ce676b2b37e4a6fa3eca76818"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1fea892ce676b2b37e4a6fa3eca76818">_add_calibration_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> &amp;thumbnail_data, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> index)</td></tr>
<tr class="separator:a1fea892ce676b2b37e4a6fa3eca76818"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8bfb52545805cbda11ee2564cca0b3e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae8bfb52545805cbda11ee2564cca0b3e">_add_bbox_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../d2/d70/struct_slic3r_1_1_plate_b_box_data.html">PlateBBoxData</a> &amp;id_bboxes, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> index)</td></tr>
<tr class="separator:ae8bfb52545805cbda11ee2564cca0b3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4933ea38f3dae4574aba8ae00c7d09d3"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a4933ea38f3dae4574aba8ae00c7d09d3">_add_relationships_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, std::string const &amp;from={}, std::vector&lt; std::string &gt; const &amp;targets={}, std::vector&lt; std::string &gt; const &amp;types={}, <a class="el" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">PackingTemporaryData</a> data=<a class="el" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">PackingTemporaryData</a>(), <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> export_plate_idx=-1) const</td></tr>
<tr class="separator:a4933ea38f3dae4574aba8ae00c7d09d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b9b1e54ffc278d13207b57c393f68c5"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8b9b1e54ffc278d13207b57c393f68c5">_add_model_file_to_archive</a> (const std::string &amp;filename, <a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> &amp;objects_data, <a class="el" href="../../de/db8/namespace_slic3r.html#afd5b13b75ef46c5be8480e3981d21008">Export3mfProgressFn</a> proFn=nullptr, <a class="el" href="../../d9/d65/class_slic3r_1_1_b_b_l_project.html">BBLProject</a> *project=nullptr) const</td></tr>
<tr class="separator:a8b9b1e54ffc278d13207b57c393f68c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1140b5f6c517ae1a3a7ccaa59f8a86a7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1140b5f6c517ae1a3a7ccaa59f8a86a7">_add_object_to_model_stream</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> &amp;context, <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> const &amp;object_data) const</td></tr>
<tr class="separator:a1140b5f6c517ae1a3a7ccaa59f8a86a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2dccf6e7ac2a1799e89bb1941306f92e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a2dccf6e7ac2a1799e89bb1941306f92e">_add_object_components_to_stream</a> (std::stringstream &amp;stream, <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> const &amp;object_data) const</td></tr>
<tr class="separator:a2dccf6e7ac2a1799e89bb1941306f92e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513ded708e8008e49a6ee1853e4cd78a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a513ded708e8008e49a6ee1853e4cd78a">_add_mesh_to_object_stream</a> (std::function&lt; bool(std::string &amp;, bool)&gt; const &amp;flush, <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> const &amp;object_data) const</td></tr>
<tr class="separator:a513ded708e8008e49a6ee1853e4cd78a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3cd7d8b68cd42fe1adbfd3ab08d37737"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a3cd7d8b68cd42fe1adbfd3ab08d37737">_add_build_to_model_stream</a> (std::stringstream &amp;stream, const <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a143cb428c677b32b91929df141624a97">BuildItemsList</a> &amp;build_items) const</td></tr>
<tr class="separator:a3cd7d8b68cd42fe1adbfd3ab08d37737"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c5be5270eba03a8fa0620c2aef7190f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a5c5be5270eba03a8fa0620c2aef7190f">_add_layer_height_profile_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a5c5be5270eba03a8fa0620c2aef7190f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44929132c23c05d2203cb4753205725d"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a44929132c23c05d2203cb4753205725d">_add_layer_config_ranges_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a44929132c23c05d2203cb4753205725d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3de1c94e8943ee9e7de8a5561681ad"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3de1c94e8943ee9e7de8a5561681ad">_add_sla_support_points_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a0b3de1c94e8943ee9e7de8a5561681ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a955eaf9c798d1961c127d47169fbff7a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a955eaf9c798d1961c127d47169fbff7a">_add_sla_drain_holes_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a955eaf9c798d1961c127d47169fbff7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e315fe74341077954a59875e8544557"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1e315fe74341077954a59875e8544557">_add_print_config_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> &amp;config)</td></tr>
<tr class="separator:a1e315fe74341077954a59875e8544557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a39b6634ca7c5bb1c010ef81aaffd30d6"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a39b6634ca7c5bb1c010ef81aaffd30d6">_add_project_config_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> &amp;config, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:a39b6634ca7c5bb1c010ef81aaffd30d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3109dd91e88010df1ac59a4abd07fcda"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a3109dd91e88010df1ac59a4abd07fcda">_add_project_embedded_presets_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, std::vector&lt; <a class="el" href="../../d9/db2/class_slic3r_1_1_preset.html">Preset</a> * &gt; project_presets)</td></tr>
<tr class="separator:a3109dd91e88010df1ac59a4abd07fcda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a68d95b3efe8c797d038e853eb5ee56d0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a68d95b3efe8c797d038e853eb5ee56d0">_add_model_config_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;plate_data_list, const <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> &amp;objects_data, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> export_plate_idx=-1, bool save_gcode=true, bool use_loaded_id=false)</td></tr>
<tr class="separator:a68d95b3efe8c797d038e853eb5ee56d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad156077c6909c1454a17775d6320fd8b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad156077c6909c1454a17775d6320fd8b">_add_cut_information_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model)</td></tr>
<tr class="separator:ad156077c6909c1454a17775d6320fd8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82b8d8a0a786da63860be8e975c5cbea"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a82b8d8a0a786da63860be8e975c5cbea">_add_slice_info_config_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;plate_data_list, const <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> &amp;objects_data)</td></tr>
<tr class="separator:a82b8d8a0a786da63860be8e975c5cbea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad75378873dc729ccaadacc900f7ab4c"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aad75378873dc729ccaadacc900f7ab4c">_add_gcode_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;plate_data_list, <a class="el" href="../../de/db8/namespace_slic3r.html#afd5b13b75ef46c5be8480e3981d21008">Export3mfProgressFn</a> proFn=nullptr)</td></tr>
<tr class="separator:aad75378873dc729ccaadacc900f7ab4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29fd6be9e68ca4129b832e3bdda62905"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a29fd6be9e68ca4129b832e3bdda62905">_add_custom_gcode_per_print_z_file_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *config)</td></tr>
<tr class="separator:a29fd6be9e68ca4129b832e3bdda62905"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae15c2e44ecbb30004fc956e88106c8b7"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae15c2e44ecbb30004fc956e88106c8b7">_add_auxiliary_dir_to_archive</a> (<a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;archive, const std::string &amp;aux_dir, <a class="el" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">PackingTemporaryData</a> &amp;data)</td></tr>
<tr class="separator:ae15c2e44ecbb30004fc956e88106c8b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-static-methods" name="pri-static-methods"></a>
Static Private Member Functions</h2></td></tr>
<tr class="memitem:aec61a6b8b9408b3f4abfbe9e4b779f04"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aec61a6b8b9408b3f4abfbe9e4b779f04">convert_instance_id_to_resource_id</a> (const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;model, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> obj_id, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> instance_id)</td></tr>
<tr class="separator:aec61a6b8b9408b3f4abfbe9e4b779f04"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-attribs" name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ad34ccbefd8eca0765b07c77b7091deba"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad34ccbefd8eca0765b07c77b7091deba">m_fullpath_sources</a> { true }</td></tr>
<tr class="separator:ad34ccbefd8eca0765b07c77b7091deba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb5341110ef0128ebb4a0177c445f90e"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aeb5341110ef0128ebb4a0177c445f90e">m_zip64</a> { true }</td></tr>
<tr class="separator:aeb5341110ef0128ebb4a0177c445f90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b3245afa5ff887330174b30e99dd849"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a> { false }</td></tr>
<tr class="separator:a0b3245afa5ff887330174b30e99dd849"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37c43634cb1b86fd2b775610276d5aef"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> { false }</td></tr>
<tr class="separator:a37c43634cb1b86fd2b775610276d5aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a541e5a5ab7699b8118a34f463d4de4d9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a> { false }</td></tr>
<tr class="separator:a541e5a5ab7699b8118a34f463d4de4d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad695d28ee8fc512c34b09e1ff35b8dfc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad695d28ee8fc512c34b09e1ff35b8dfc">m_split_model</a> { false }</td></tr>
<tr class="separator:ad695d28ee8fc512c34b09e1ff35b8dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab21f3eabb9b22ff3812f57bfb3ad167a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">m_save_gcode</a> { false }</td></tr>
<tr class="separator:ab21f3eabb9b22ff3812f57bfb3ad167a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8856bb149dc5ca68a79659031b0ed158"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a> { false }</td></tr>
<tr class="separator:a8856bb149dc5ca68a79659031b0ed158"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa60db1b06a1b01b42a73903ea77ef58a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aa60db1b06a1b01b42a73903ea77ef58a">m_skip_auxiliary</a> { false }</td></tr>
<tr class="separator:aa60db1b06a1b01b42a73903ea77ef58a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65e62a707f6d881b3aa2cea516c0cebe"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a65e62a707f6d881b3aa2cea516c0cebe">m_use_loaded_id</a> { false }</td></tr>
<tr class="separator:a65e62a707f6d881b3aa2cea516c0cebe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a434a249c20f16929f5e0db7b466acee0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a434a249c20f16929f5e0db7b466acee0">m_share_mesh</a> { false }</td></tr>
<tr class="separator:a434a249c20f16929f5e0db7b466acee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae9c8d078a717d20ab0a5d997f0aa7bb2"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae9c8d078a717d20ab0a5d997f0aa7bb2">m_thumbnail_middle</a> = <a class="el" href="../../dd/d80/bbs__3mf_8cpp.html#a7e1910247df78b3f23ffa66afe254c92">PRINTER_THUMBNAIL_MIDDLE_FILE</a></td></tr>
<tr class="separator:ae9c8d078a717d20ab0a5d997f0aa7bb2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a469435942cd59432a1e6a7a8fa26bbf7"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a469435942cd59432a1e6a7a8fa26bbf7">m_thumbnail_small</a> = <a class="el" href="../../dd/d80/bbs__3mf_8cpp.html#ab5f1c75c6c32c5c6f6c775493ce18d53">PRINTER_THUMBNAIL_SMALL_FILE</a></td></tr>
<tr class="separator:a469435942cd59432a1e6a7a8fa26bbf7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81723a1f39a3a30fb2e256ca6dfc6635"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> const *, std::pair&lt; <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> *, <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a> const * &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a81723a1f39a3a30fb2e256ca6dfc6635">m_shared_meshes</a></td></tr>
<tr class="separator:a81723a1f39a3a30fb2e256ca6dfc6635"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a702e3dbabc13a3a6531087d2f038412b"><td class="memItemLeft" align="right" valign="top">std::map&lt; <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a> const *, std::pair&lt; std::string, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> &gt; &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a702e3dbabc13a3a6531087d2f038412b">m_volume_paths</a></td></tr>
<tr class="separator:a702e3dbabc13a3a6531087d2f038412b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93fd2b8551ac6acd0c6e27c47b9bff14"><td class="memItemLeft" align="right" valign="top">boost::mutex&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">mutex</a></td></tr>
<tr class="separator:a93fd2b8551ac6acd0c6e27c47b9bff14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e830efe3a74f6d6ffbc7bef55900c27"><td class="memItemLeft" align="right" valign="top">std::vector&lt; std::string &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a4e830efe3a74f6d6ffbc7bef55900c27">m_errors</a></td></tr>
<tr class="separator:a4e830efe3a74f6d6ffbc7bef55900c27"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"></div><hr/><h2 class="groupheader">Class Documentation</h2>
<a name="d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data" id="d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data"></a>
<h2 class="memtitle"><span class="permalink"><a href="#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">&#9670;&#160;</a></span>Slic3r::_BBS_3MF_Exporter::ObjectData</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct Slic3r::_BBS_3MF_Exporter::ObjectData</td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="textblock"></div><div id="dynsection-2" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Slic3r::_BBS_3MF_Exporter::ObjectData:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d6/dcf/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data__coll__graph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
<center><span class="legend">[<a target="top" href="../../graph_legend.html">legend</a>]</span></center></div>
<table class="fieldtable">
<tr><th colspan="3">Class Members</th></tr>
<tr><td class="fieldtype">
<a id="a54cde544a7302c222ea25c97aae60f56" name="a54cde544a7302c222ea25c97aae60f56"></a><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a></td>
<td class="fieldname">
backup_id</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a80ce5926e846e99001a8db40620439f8" name="a80ce5926e846e99001a8db40620439f8"></a><a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> const  *</td>
<td class="fieldname">
object</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a9f6d2561bef1d88e3ddbdaf40b9a4463" name="a9f6d2561bef1d88e3ddbdaf40b9a4463"></a><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a></td>
<td class="fieldname">
object_id = 0</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a3a0be4da4dbf8e2f652f850d66a21149" name="a3a0be4da4dbf8e2f652f850d66a21149"></a>bool</td>
<td class="fieldname">
share_mesh = false</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="ae4eedf988a394576ab492cd587dfa7e6" name="ae4eedf988a394576ab492cd587dfa7e6"></a>string</td>
<td class="fieldname">
sub_path</td>
<td class="fielddoc">
</td></tr>
<tr><td class="fieldtype">
<a id="a0830ae40d6efaeac5d1166dcf1a94201" name="a0830ae40d6efaeac5d1166dcf1a94201"></a><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37a7177b9445f5e20f346770cfb0bb29">VolumeToObjectIDMap</a></td>
<td class="fieldname">
volumes_objectID</td>
<td class="fielddoc">
</td></tr>
</table>

</div>
</div>
<h2 class="groupheader">Member Typedef Documentation</h2>
<a id="a143cb428c677b32b91929df141624a97" name="a143cb428c677b32b91929df141624a97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143cb428c677b32b91929df141624a97">&#9670;&#160;</a></span>BuildItemsList</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::vector&lt;<a class="el" href="../../dd/d60/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_build_item.html">BuildItem</a>&gt; <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a143cb428c677b32b91929df141624a97">Slic3r::_BBS_3MF_Exporter::BuildItemsList</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a9ae29c114509a8a577b59347476adabd" name="a9ae29c114509a8a577b59347476adabd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ae29c114509a8a577b59347476adabd">&#9670;&#160;</a></span>ObjectToObjectDataMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;<a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> const *, <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a>&gt; <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">Slic3r::_BBS_3MF_Exporter::ObjectToObjectDataMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a37a7177b9445f5e20f346770cfb0bb29" name="a37a7177b9445f5e20f346770cfb0bb29"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37a7177b9445f5e20f346770cfb0bb29">&#9670;&#160;</a></span>VolumeToObjectIDMap</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">typedef std::map&lt;const <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a>*, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&gt; <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37a7177b9445f5e20f346770cfb0bb29">Slic3r::_BBS_3MF_Exporter::VolumeToObjectIDMap</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ae15c2e44ecbb30004fc956e88106c8b7" name="ae15c2e44ecbb30004fc956e88106c8b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae15c2e44ecbb30004fc956e88106c8b7">&#9670;&#160;</a></span>_add_auxiliary_dir_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_auxiliary_dir_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>aux_dir</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">PackingTemporaryData</a> &amp;&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7423</span>{</div>
<div class="line"><span class="lineno"> 7424</span>    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7425</span> </div>
<div class="line"><span class="lineno"> 7426</span>    <span class="keywordflow">if</span> (aux_dir.empty()) {</div>
<div class="line"><span class="lineno"> 7427</span>        <span class="comment">//no accessory directories</span></div>
<div class="line"><span class="lineno"> 7428</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 7429</span>    }</div>
<div class="line"><span class="lineno"> 7430</span> </div>
<div class="line"><span class="lineno"> 7431</span>    boost::filesystem::path dir = boost::filesystem::path(aux_dir);</div>
<div class="line"><span class="lineno"> 7432</span>    <span class="keywordflow">if</span> (!boost::filesystem::exists(dir))</div>
<div class="line"><span class="lineno"> 7433</span>    {</div>
<div class="line"><span class="lineno"> 7434</span>        <span class="comment">//no accessory directories</span></div>
<div class="line"><span class="lineno"> 7435</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 7436</span>    }</div>
<div class="line"><span class="lineno"> 7437</span> </div>
<div class="line"><span class="lineno"> 7438</span>    <span class="keyword">static</span> std::string <span class="keyword">const</span> nocomp_exts[] = {<span class="stringliteral">&quot;.png&quot;</span>, <span class="stringliteral">&quot;.jpg&quot;</span>, <span class="stringliteral">&quot;.mp4&quot;</span>, <span class="stringliteral">&quot;.jpeg&quot;</span>};</div>
<div class="line"><span class="lineno"> 7439</span>    std::deque&lt;boost::filesystem::path&gt; directories({dir});</div>
<div class="line"><span class="lineno"> 7440</span>    <span class="keywordtype">int</span> root_dir_len = dir.string().length() + 1;</div>
<div class="line"><span class="lineno"> 7441</span>    <span class="comment">//boost file access</span></div>
<div class="line"><span class="lineno"> 7442</span>    <span class="keywordflow">while</span> (!directories.empty()) {</div>
<div class="line"><span class="lineno"> 7443</span>        boost::filesystem::directory_iterator iterator(directories.front());</div>
<div class="line"><span class="lineno"> 7444</span>        directories.pop_front();</div>
<div class="line"><span class="lineno"> 7445</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;dir_entry : iterator)</div>
<div class="line"><span class="lineno"> 7446</span>        {</div>
<div class="line"><span class="lineno"> 7447</span>            std::string src_file;</div>
<div class="line"><span class="lineno"> 7448</span>            std::string dst_in_3mf;</div>
<div class="line"><span class="lineno"> 7449</span>            <span class="keywordflow">if</span> (boost::filesystem::is_directory(dir_entry.path()))</div>
<div class="line"><span class="lineno"> 7450</span>            {</div>
<div class="line"><span class="lineno"> 7451</span>                directories.push_back(dir_entry.path());</div>
<div class="line"><span class="lineno"> 7452</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 7453</span>            }</div>
<div class="line"><span class="lineno"> 7454</span>            <span class="keywordflow">if</span> (boost::filesystem::is_regular_file(dir_entry.path()) &amp;&amp; !<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aa60db1b06a1b01b42a73903ea77ef58a">m_skip_auxiliary</a>)</div>
<div class="line"><span class="lineno"> 7455</span>            {</div>
<div class="line"><span class="lineno"> 7456</span>                src_file = dir_entry.path().string();</div>
<div class="line"><span class="lineno"> 7457</span>                dst_in_3mf = dir_entry.path().string();</div>
<div class="line"><span class="lineno"> 7458</span>                dst_in_3mf.replace(0, root_dir_len, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aea553492bf4ca64a2df40b1ddcdc1f57">AUXILIARY_DIR</a>);</div>
<div class="line"><span class="lineno"> 7459</span>                std::replace(dst_in_3mf.begin(), dst_in_3mf.end(), <span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;/&#39;</span>);</div>
<div class="line"><span class="lineno"> 7460</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3c8d854eb65aaa006441456538d17a30">_3MF_COVER_FILE</a>.compare(1, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3c8d854eb65aaa006441456538d17a30">_3MF_COVER_FILE</a>.length() - 1, dst_in_3mf) == 0) {</div>
<div class="line"><span class="lineno"> 7461</span>                    data._3mf_thumbnail = dst_in_3mf;</div>
<div class="line"><span class="lineno"> 7462</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a469435942cd59432a1e6a7a8fa26bbf7">m_thumbnail_small</a>.compare(1, <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a469435942cd59432a1e6a7a8fa26bbf7">m_thumbnail_small</a>.length() - 1, dst_in_3mf) == 0) {</div>
<div class="line"><span class="lineno"> 7463</span>                    data._3mf_printer_thumbnail_small = dst_in_3mf;</div>
<div class="line"><span class="lineno"> 7464</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae9c8d078a717d20ab0a5d997f0aa7bb2">m_thumbnail_middle</a> == <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a469435942cd59432a1e6a7a8fa26bbf7">m_thumbnail_small</a>) data._3mf_printer_thumbnail_middle = dst_in_3mf;</div>
<div class="line"><span class="lineno"> 7465</span>                } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae9c8d078a717d20ab0a5d997f0aa7bb2">m_thumbnail_middle</a>.compare(1, <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae9c8d078a717d20ab0a5d997f0aa7bb2">m_thumbnail_middle</a>.length() - 1, dst_in_3mf) == 0) {</div>
<div class="line"><span class="lineno"> 7466</span>                    data._3mf_printer_thumbnail_middle = dst_in_3mf;</div>
<div class="line"><span class="lineno"> 7467</span>                }</div>
<div class="line"><span class="lineno"> 7468</span>                result &amp;= <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a>(archive, dst_in_3mf, src_file);</div>
<div class="line"><span class="lineno"> 7469</span>            }</div>
<div class="line"><span class="lineno"> 7470</span>        }</div>
<div class="line"><span class="lineno"> 7471</span>    }</div>
<div class="line"><span class="lineno"> 7472</span> </div>
<div class="line"><span class="lineno"> 7473</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 7474</span>}</div>
<div class="ttc" id="abbs__3mf_8cpp_html_a3c8d854eb65aaa006441456538d17a30"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a3c8d854eb65aaa006441456538d17a30">_3MF_COVER_FILE</a></div><div class="ttdeci">const std::string _3MF_COVER_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:147</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aea553492bf4ca64a2df40b1ddcdc1f57"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aea553492bf4ca64a2df40b1ddcdc1f57">AUXILIARY_DIR</a></div><div class="ttdeci">const std::string AUXILIARY_DIR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:160</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a469435942cd59432a1e6a7a8fa26bbf7"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a469435942cd59432a1e6a7a8fa26bbf7">Slic3r::_BBS_3MF_Exporter::m_thumbnail_small</a></div><div class="ttdeci">std::string m_thumbnail_small</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5178</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_aa60db1b06a1b01b42a73903ea77ef58a"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aa60db1b06a1b01b42a73903ea77ef58a">Slic3r::_BBS_3MF_Exporter::m_skip_auxiliary</a></div><div class="ttdeci">bool m_skip_auxiliary</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5174</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_aac323ea063fd4dbfaa9670e1b2ffa30d"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">Slic3r::_BBS_3MF_Exporter::_add_file_to_archive</a></div><div class="ttdeci">bool _add_file_to_archive(mz_zip_archive &amp;archive, const std::string &amp;path_in_zip, const std::string &amp;file_path)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5790</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ae9c8d078a717d20ab0a5d997f0aa7bb2"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae9c8d078a717d20ab0a5d997f0aa7bb2">Slic3r::_BBS_3MF_Exporter::m_thumbnail_middle</a></div><div class="ttdeci">std::string m_thumbnail_middle</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5177</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00147">_3MF_COVER_FILE</a>, <a class="el" href="../../#l00038">Slic3r::PackingTemporaryData::_3mf_printer_thumbnail_middle</a>, <a class="el" href="../../#l00039">Slic3r::PackingTemporaryData::_3mf_printer_thumbnail_small</a>, <a class="el" href="../../#l00037">Slic3r::PackingTemporaryData::_3mf_thumbnail</a>, and <a class="el" href="../../#l00160">AUXILIARY_DIR</a>.</p>

</div>
</div>
<a id="ae8bfb52545805cbda11ee2564cca0b3e" name="ae8bfb52545805cbda11ee2564cca0b3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8bfb52545805cbda11ee2564cca0b3e">&#9670;&#160;</a></span>_add_bbox_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_bbox_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d2/d70/struct_slic3r_1_1_plate_b_box_data.html">PlateBBoxData</a> &amp;&#160;</td>
          <td class="paramname"><em>id_bboxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5875</span>    {</div>
<div class="line"><span class="lineno"> 5876</span>        <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5877</span>        <a class="code hl_class" href="../../d9/dcc/classnlohmann_1_1basic__json.html">nlohmann::json</a> j;</div>
<div class="line"><span class="lineno"> 5878</span>        id_bboxes.to_json(j);</div>
<div class="line"><span class="lineno"> 5879</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = j.<a class="code hl_function" href="../../d9/dcc/classnlohmann_1_1basic__json.html#a476756fb08e7f2416aad116d137977f4">dump</a>();</div>
<div class="line"><span class="lineno"> 5880</span> </div>
<div class="line"><span class="lineno"> 5881</span>        std::string json_file_name = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a6fe2bd422373beaa27f80984d2686ce2">PATTERN_CONFIG_FILE_FORMAT</a>) % (index + 1)).str();</div>
<div class="line"><span class="lineno"> 5882</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, json_file_name.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 5883</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add json file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5884</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add json file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5885</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5886</span>        }</div>
<div class="line"><span class="lineno"> 5887</span> </div>
<div class="line"><span class="lineno"> 5888</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5889</span>    }</div>
<div class="ttc" id="abbs__3mf_8hpp_html_a6fe2bd422373beaa27f80984d2686ce2"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#a6fe2bd422373beaa27f80984d2686ce2">PATTERN_CONFIG_FILE_FORMAT</a></div><div class="ttdeci">#define PATTERN_CONFIG_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:22</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___base_html_aeb183b0dd78db016982544618ad1b1eb"><div class="ttname"><a href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">Slic3r::_BBS_3MF_Base::add_error</a></div><div class="ttdeci">void add_error(const std::string &amp;error) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:561</div></div>
<div class="ttc" id="aclassnlohmann_1_1basic__json_html"><div class="ttname"><a href="../../d9/dcc/classnlohmann_1_1basic__json.html">nlohmann::basic_json</a></div><div class="ttdoc">a class to store JSON values</div><div class="ttdef"><b>Definition</b> json.hpp:177</div></div>
<div class="ttc" id="aclassnlohmann_1_1basic__json_html_a476756fb08e7f2416aad116d137977f4"><div class="ttname"><a href="../../d9/dcc/classnlohmann_1_1basic__json.html#a476756fb08e7f2416aad116d137977f4">nlohmann::basic_json::dump</a></div><div class="ttdeci">string_t dump(const int indent=-1, const char indent_char=' ', const bool ensure_ascii=false, const error_handler_t error_handler=error_handler_t::strict) const</div><div class="ttdoc">serialization</div><div class="ttdef"><b>Definition</b> json.hpp:2418</div></div>
<div class="ttc" id="aminiz_8c_html_ab5aac408b80e6f51a14434330fc76d6d"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_mem(mz_zip_archive *pZip, const char *pArchive_name, const void *pBuf, size_t buf_size, mz_uint level_and_flags)</div><div class="ttdef"><b>Definition</b> miniz.c:5904</div></div>
<div class="ttc" id="aminiz_8h_html_af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a></div><div class="ttdeci">@ MZ_DEFAULT_COMPRESSION</div><div class="ttdef"><b>Definition</b> miniz.h:238</div></div>
<div class="ttc" id="atestmini_8c_html_ad9e5eed42092079dea4d90550ff5fcf0"><div class="ttname"><a href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a></div><div class="ttdeci">static unsigned char __LZO_MMODEL out[OUT_LEN]</div><div class="ttdef"><b>Definition</b> testmini.c:58</div></div>
<div class="ttc" id="axmlrole_8c_html_a2739afc9d7ed13e98e5e0c5b2e1f0428"><div class="ttname"><a href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a></div><div class="ttdeci">static PROLOG_HANDLER error</div><div class="ttdef"><b>Definition</b> xmlrole.c:109</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l02418">nlohmann::basic_json&lt; ObjectType, ArrayType, StringType, BooleanType, NumberIntegerType, NumberUnsignedType, NumberFloatType, AllocatorType, JSONSerializer, BinaryType &gt;::dump()</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l00022">PATTERN_CONFIG_FILE_FORMAT</a>, and <a class="el" href="../../#l00084">Slic3r::PlateBBoxData::to_json()</a>.</p>
<div id="dynsection-3" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_ae8bfb52545805cbda11ee2564cca0b3e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a3cd7d8b68cd42fe1adbfd3ab08d37737" name="a3cd7d8b68cd42fe1adbfd3ab08d37737"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3cd7d8b68cd42fe1adbfd3ab08d37737">&#9670;&#160;</a></span>_add_build_to_model_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_build_to_model_stream </td>
          <td>(</td>
          <td class="paramtype">std::stringstream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a143cb428c677b32b91929df141624a97">BuildItemsList</a> &amp;&#160;</td>
          <td class="paramname"><em>build_items</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6568</span>    {</div>
<div class="line"><span class="lineno"> 6569</span>        <span class="comment">// This happens for empty projects</span></div>
<div class="line"><span class="lineno"> 6570</span>        <span class="keywordflow">if</span> (build_items.size() == 0) {</div>
<div class="line"><span class="lineno"> 6571</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6572</span>        }</div>
<div class="line"><span class="lineno"> 6573</span> </div>
<div class="line"><span class="lineno"> 6574</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a08fc5e0e12c2ee1f43dd91e83850345e">BUILD_TAG</a>;</div>
<div class="line"><span class="lineno"> 6575</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a>)</div>
<div class="line"><span class="lineno"> 6576</span>            stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ae464f9f0978df18556cc2758a041363b">PUUID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a90f2047b2e7ef9d4f7ed8d90bb789453">BUILD_UUID</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6577</span>        stream &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6578</span> </div>
<div class="line"><span class="lineno"> 6579</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> BuildItem&amp; item : build_items) {</div>
<div class="line"><span class="lineno"> 6580</span>            stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a96a5e899afc3724eb9646e676bf64f8e">ITEM_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae9f2d151f8ea651d15a989377c99cbe7">OBJECTID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; item.id;</div>
<div class="line"><span class="lineno"> 6581</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a>)</div>
<div class="line"><span class="lineno"> 6582</span>                stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ae464f9f0978df18556cc2758a041363b">PUUID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_struct" href="../../dd/d80/bbs__3mf_8cpp.html#d1/d15/structhex__wrap">hex_wrap&lt;boost::uint32_t&gt;</a>{item.id} &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a283709c6b3cb88acc29c62accfc28f0f">BUILD_UUID_SUFFIX</a>;</div>
<div class="line"><span class="lineno"> 6583</span>            <span class="keywordflow">if</span> (!item.path.empty())</div>
<div class="line"><span class="lineno"> 6584</span>                stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a9ed338a029f846d4903356daf348e95c">PPATH_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(item.path);</div>
<div class="line"><span class="lineno"> 6585</span>            stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae6c48a6d214926be17133c990969c642">TRANSFORM_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6586</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> c = 0; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt; 4; ++<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>) {</div>
<div class="line"><span class="lineno"> 6587</span>                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> r = 0; r &lt; 3; ++r) {</div>
<div class="line"><span class="lineno"> 6588</span>                    stream &lt;&lt; item.transform(r, c);</div>
<div class="line"><span class="lineno"> 6589</span>                    <span class="keywordflow">if</span> (r != 2 || c != 3)</div>
<div class="line"><span class="lineno"> 6590</span>                        stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6591</span>                }</div>
<div class="line"><span class="lineno"> 6592</span>            }</div>
<div class="line"><span class="lineno"> 6593</span>            stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae295f94376559bbe101ae2c404b47401">PRINTABLE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; item.printable &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6594</span>        }</div>
<div class="line"><span class="lineno"> 6595</span> </div>
<div class="line"><span class="lineno"> 6596</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a08fc5e0e12c2ee1f43dd91e83850345e">BUILD_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6597</span> </div>
<div class="line"><span class="lineno"> 6598</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6599</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a08fc5e0e12c2ee1f43dd91e83850345e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a08fc5e0e12c2ee1f43dd91e83850345e">BUILD_TAG</a></div><div class="ttdeci">static constexpr const char * BUILD_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:91</div></div>
<div class="ttc" id="a3mf_8cpp_html_a96a5e899afc3724eb9646e676bf64f8e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a96a5e899afc3724eb9646e676bf64f8e">ITEM_TAG</a></div><div class="ttdeci">static constexpr const char * ITEM_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:92</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae295f94376559bbe101ae2c404b47401"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae295f94376559bbe101ae2c404b47401">PRINTABLE_ATTR</a></div><div class="ttdeci">static constexpr const char * PRINTABLE_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:110</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae6c48a6d214926be17133c990969c642"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae6c48a6d214926be17133c990969c642">TRANSFORM_ATTR</a></div><div class="ttdeci">static constexpr const char * TRANSFORM_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:109</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae9f2d151f8ea651d15a989377c99cbe7"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae9f2d151f8ea651d15a989377c99cbe7">OBJECTID_ATTR</a></div><div class="ttdeci">static constexpr const char * OBJECTID_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:108</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a283709c6b3cb88acc29c62accfc28f0f"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a283709c6b3cb88acc29c62accfc28f0f">BUILD_UUID_SUFFIX</a></div><div class="ttdeci">static constexpr const char * BUILD_UUID_SUFFIX</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:234</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a90f2047b2e7ef9d4f7ed8d90bb789453"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a90f2047b2e7ef9d4f7ed8d90bb789453">BUILD_UUID</a></div><div class="ttdeci">static constexpr const char * BUILD_UUID</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:233</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a9ed338a029f846d4903356daf348e95c"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a9ed338a029f846d4903356daf348e95c">PPATH_ATTR</a></div><div class="ttdeci">static constexpr const char * PPATH_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:230</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ae464f9f0978df18556cc2758a041363b"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ae464f9f0978df18556cc2758a041363b">PUUID_ATTR</a></div><div class="ttdeci">static constexpr const char * PUUID_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:229</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_d1/d15/structhex__wrap"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#d1/d15/structhex__wrap">hex_wrap</a></div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:330</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a0b3245afa5ff887330174b30e99dd849"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">Slic3r::_BBS_3MF_Exporter::m_production_ext</a></div><div class="ttdeci">bool m_production_ext</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5168</div></div>
<div class="ttc" id="anamespace_slic3r_html_a896c49b74a260d028f471ec275601b42"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">Slic3r::xml_escape</a></div><div class="ttdeci">std::string xml_escape(std::string text, bool is_marked)</div><div class="ttdef"><b>Definition</b> utils.cpp:1170</div></div>
<div class="ttc" id="anamespacemarchsq_1_1____impl_html_a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33"><div class="ttname"><a href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">marchsq::__impl::SquareTag::c</a></div><div class="ttdeci">@ c</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00184">BUILD_TAG</a>, <a class="el" href="../../#l00233">BUILD_UUID</a>, <a class="el" href="../../#l00234">BUILD_UUID_SUFFIX</a>, <a class="el" href="../../#l00185">ITEM_TAG</a>, <a class="el" href="../../#l00249">OBJECTID_ATTR</a>, <a class="el" href="../../#l00230">PPATH_ATTR</a>, <a class="el" href="../../#l00253">PRINTABLE_ATTR</a>, <a class="el" href="../../#l00229">PUUID_ATTR</a>, <a class="el" href="../../#l00250">TRANSFORM_ATTR</a>, and <a class="el" href="../../#l01170">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-4" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a3cd7d8b68cd42fe1adbfd3ab08d37737_cgraph.svg" width="390" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1fea892ce676b2b37e4a6fa3eca76818" name="a1fea892ce676b2b37e4a6fa3eca76818"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fea892ce676b2b37e4a6fa3eca76818">&#9670;&#160;</a></span>_add_calibration_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_calibration_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> &amp;&#160;</td>
          <td class="paramname"><em>thumbnail_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5855</span>    {</div>
<div class="line"><span class="lineno"> 5856</span>        <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5857</span> </div>
<div class="line"><span class="lineno"> 5858</span>        <span class="comment">/*size_t png_size = 0;</span></div>
<div class="line"><span class="lineno"> 5859</span><span class="comment">        void* png_data = tdefl_write_image_to_png_file_in_memory_ex((const void*)thumbnail_data.pixels.data(), thumbnail_data.width, thumbnail_data.height, 4, &amp;png_size, MZ_DEFAULT_COMPRESSION, 1);</span></div>
<div class="line"><span class="lineno"> 5860</span><span class="comment">        if (png_data != nullptr) {</span></div>
<div class="line"><span class="lineno"> 5861</span><span class="comment">            std::string thumbnail_name = (boost::format(PATTERN_FILE_FORMAT) % (index + 1)).str();</span></div>
<div class="line"><span class="lineno"> 5862</span><span class="comment">            res = mz_zip_writer_add_mem(&amp;archive, thumbnail_name.c_str(), (const void*)png_data, png_size, MZ_NO_COMPRESSION);</span></div>
<div class="line"><span class="lineno"> 5863</span><span class="comment">            mz_free(png_data);</span></div>
<div class="line"><span class="lineno"> 5864</span><span class="comment">        }</span></div>
<div class="line"><span class="lineno"> 5865</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 5866</span><span class="comment">        if (!res) {</span></div>
<div class="line"><span class="lineno"> 5867</span><span class="comment">            add_error(&quot;Unable to add thumbnail file to archive&quot;);</span></div>
<div class="line"><span class="lineno"> 5868</span><span class="comment">            BOOST_LOG_TRIVIAL(error) &lt;&lt; __FUNCTION__ &lt;&lt; &quot;:&quot; &lt;&lt; __LINE__ &lt;&lt; boost::format(&quot;, Unable to add thumbnail file to archive\n&quot;);</span></div>
<div class="line"><span class="lineno"> 5869</span><span class="comment">        }*/</span></div>
<div class="line"><span class="lineno"> 5870</span> </div>
<div class="line"><span class="lineno"> 5871</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 5872</span>    }</div>
</div><!-- fragment -->
</div>
</div>
<a id="a45321e2c03a229bdd81f9e7341e3619c" name="a45321e2c03a229bdd81f9e7341e3619c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45321e2c03a229bdd81f9e7341e3619c">&#9670;&#160;</a></span>_add_content_types_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_content_types_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5813</span>    {</div>
<div class="line"><span class="lineno"> 5814</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 5815</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5816</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;Types xmlns=\&quot;http://schemas.openxmlformats.org/package/2006/content-types\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5817</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;rels\&quot; ContentType=\&quot;application/vnd.openxmlformats-package.relationships+xml\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5818</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;model\&quot; ContentType=\&quot;application/vnd.ms-package.3dmanufacturing-3dmodel+xml\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5819</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;png\&quot; ContentType=\&quot;image/png\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5820</span>        stream &lt;&lt; <span class="stringliteral">&quot; &lt;Default Extension=\&quot;gcode\&quot; ContentType=\&quot;text/x.gcode\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5821</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/Types&gt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 5822</span> </div>
<div class="line"><span class="lineno"> 5823</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = stream.str();</div>
<div class="line"><span class="lineno"> 5824</span> </div>
<div class="line"><span class="lineno"> 5825</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a1ef0e0ced0a8abe876a2f90058b82eb4">CONTENT_TYPES_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 5826</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add content types file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5827</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add content types file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5828</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5829</span>        }</div>
<div class="line"><span class="lineno"> 5830</span> </div>
<div class="line"><span class="lineno"> 5831</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5832</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a1ef0e0ced0a8abe876a2f90058b82eb4"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a1ef0e0ced0a8abe876a2f90058b82eb4">CONTENT_TYPES_FILE</a></div><div class="ttdeci">const std::string CONTENT_TYPES_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:70</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00141">CONTENT_TYPES_FILE</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, and <a class="el" href="../../#l00058">out</a>.</p>
<div id="dynsection-5" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a45321e2c03a229bdd81f9e7341e3619c_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a29fd6be9e68ca4129b832e3bdda62905" name="a29fd6be9e68ca4129b832e3bdda62905"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29fd6be9e68ca4129b832e3bdda62905">&#9670;&#160;</a></span>_add_custom_gcode_per_print_z_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_custom_gcode_per_print_z_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7366</span>{</div>
<div class="line"><span class="lineno"> 7367</span>    <span class="comment">//BBS: add plate tree related logic</span></div>
<div class="line"><span class="lineno"> 7368</span>    std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 7369</span>    <span class="keywordtype">bool</span> has_custom_gcode = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7370</span>    pt::ptree tree;</div>
<div class="line"><span class="lineno"> 7371</span>    pt::ptree&amp; main_tree = tree.add(<span class="stringliteral">&quot;custom_gcodes_per_layer&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7372</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> custom_gcodes : model.plates_custom_gcodes) {</div>
<div class="line"><span class="lineno"> 7373</span>            has_custom_gcode = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7374</span>            pt::ptree&amp; plate_tree = main_tree.add(<span class="stringliteral">&quot;plate&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7375</span>            pt::ptree&amp; plate_idx_tree = plate_tree.add(<span class="stringliteral">&quot;plate_info&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7376</span>            plate_idx_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>, custom_gcodes.first + 1);</div>
<div class="line"><span class="lineno"> 7377</span> </div>
<div class="line"><span class="lineno"> 7378</span>            <span class="comment">// store data of custom_gcode_per_print_z</span></div>
<div class="line"><span class="lineno"> 7379</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> CustomGCode::Item&amp; code : custom_gcodes.second.gcodes) {</div>
<div class="line"><span class="lineno"> 7380</span>                pt::ptree&amp; code_tree = plate_tree.add(<span class="stringliteral">&quot;layer&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7381</span>                code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.top_z&quot;</span>, code.print_z);</div>
<div class="line"><span class="lineno"> 7382</span>                code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.type&quot;</span>, <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(code.type));</div>
<div class="line"><span class="lineno"> 7383</span>                code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.extruder&quot;</span>, code.extruder);</div>
<div class="line"><span class="lineno"> 7384</span>                code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.color&quot;</span>, code.color);</div>
<div class="line"><span class="lineno"> 7385</span>                code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.extra&quot;</span>, code.extra);</div>
<div class="line"><span class="lineno"> 7386</span> </div>
<div class="line"><span class="lineno"> 7387</span>                <span class="comment">//BBS</span></div>
<div class="line"><span class="lineno"> 7388</span>                std::string <a class="code hl_enumvalue" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">gcode</a> = <span class="comment">//code.type == CustomGCode::ColorChange ? config-&gt;opt_string(&quot;color_change_gcode&quot;)    :</span></div>
<div class="line"><span class="lineno"> 7389</span>                    code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a303c456ed86c14f6702a88615b2c8e33">CustomGCode::PausePrint</a> ? config-&gt;opt_string(<span class="stringliteral">&quot;machine_pause_gcode&quot;</span>) :</div>
<div class="line"><span class="lineno"> 7390</span>                    code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a71143a7df08d4c31b003718bdc5afb49">CustomGCode::Template</a> ? config-&gt;opt_string(<span class="stringliteral">&quot;template_custom_gcode&quot;</span>) :</div>
<div class="line"><span class="lineno"> 7391</span>                    code.type == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a645aad13c69c36cc9f98f37286af0492">CustomGCode::ToolChange</a> ? <span class="stringliteral">&quot;tool_change&quot;</span> : code.extra;</div>
<div class="line"><span class="lineno"> 7392</span>                code_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.gcode&quot;</span>, gcode);</div>
<div class="line"><span class="lineno"> 7393</span>            }</div>
<div class="line"><span class="lineno"> 7394</span> </div>
<div class="line"><span class="lineno"> 7395</span>            pt::ptree&amp; mode_tree = plate_tree.add(<span class="stringliteral">&quot;mode&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7396</span>            <span class="comment">// store mode of a custom_gcode_per_print_z</span></div>
<div class="line"><span class="lineno"> 7397</span>            mode_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.value&quot;</span>, custom_gcodes.second.mode == <a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a6e6f3eaf2d7cee0409ae2bb768d1152a">CustomGCode::Mode::SingleExtruder</a> ? <a class="code hl_variable" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a0edb7b33c9fd4e4d025128e52522a555">CustomGCode::SingleExtruderMode</a> :</div>
<div class="line"><span class="lineno"> 7398</span>                custom_gcodes.second.<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a6dfcf6612e49885a4d27301f66465788">mode</a> == CustomGCode::<a class="code hl_enumeration" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5">Mode</a>::<a class="code hl_enumvalue" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a3adb0b025f485772e3aa1766dda9025c">MultiAsSingle</a> ? CustomGCode::<a class="code hl_variable" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a210ce67bbf4c98f26621af0257581cd7">MultiAsSingleMode</a> :</div>
<div class="line"><span class="lineno"> 7399</span>                CustomGCode::<a class="code hl_variable" href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab20c5bd73b6b4f6806f410c495251fa6">MultiExtruderMode</a>);</div>
<div class="line"><span class="lineno"> 7400</span> </div>
<div class="line"><span class="lineno"> 7401</span>    }</div>
<div class="line"><span class="lineno"> 7402</span>    <span class="keywordflow">if</span> (has_custom_gcode) {</div>
<div class="line"><span class="lineno"> 7403</span>        std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 7404</span>        boost::property_tree::write_xml(oss, tree);</div>
<div class="line"><span class="lineno"> 7405</span>        <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = oss.str();</div>
<div class="line"><span class="lineno"> 7406</span> </div>
<div class="line"><span class="lineno"> 7407</span>        <span class="comment">// Post processing(&quot;beautification&quot;) of the output string</span></div>
<div class="line"><span class="lineno"> 7408</span>        boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n&lt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7409</span>    }</div>
<div class="line"><span class="lineno"> 7410</span> </div>
<div class="line"><span class="lineno"> 7411</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.empty()) {</div>
<div class="line"><span class="lineno"> 7412</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa5aeeff38108444633124fa6309f1471">CUSTOM_GCODE_PER_PRINT_Z_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 7413</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add custom Gcodes per print_z file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 7414</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add custom Gcodes per print_z file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 7415</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7416</span>        }</div>
<div class="line"><span class="lineno"> 7417</span>    }</div>
<div class="line"><span class="lineno"> 7418</span> </div>
<div class="line"><span class="lineno"> 7419</span>    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7420</span>}</div>
<div class="ttc" id="a3mf_8cpp_html_aa5aeeff38108444633124fa6309f1471"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aa5aeeff38108444633124fa6309f1471">CUSTOM_GCODE_PER_PRINT_Z_FILE</a></div><div class="ttdeci">const std::string CUSTOM_GCODE_PER_PRINT_Z_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:79</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a0edb7b33c9fd4e4d025128e52522a555"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a0edb7b33c9fd4e4d025128e52522a555">Slic3r::CustomGCode::SingleExtruderMode</a></div><div class="ttdeci">static constexpr char SingleExtruderMode[]</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:59</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a210ce67bbf4c98f26621af0257581cd7"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a210ce67bbf4c98f26621af0257581cd7">Slic3r::CustomGCode::MultiAsSingleMode</a></div><div class="ttdeci">static constexpr char MultiAsSingleMode[]</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:60</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a7a01777a114992be64b2a231b1c902a5"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5">Slic3r::CustomGCode::Mode</a></div><div class="ttdeci">Mode</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:49</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a7a01777a114992be64b2a231b1c902a5a3adb0b025f485772e3aa1766dda9025c"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a3adb0b025f485772e3aa1766dda9025c">Slic3r::CustomGCode::MultiAsSingle</a></div><div class="ttdeci">@ MultiAsSingle</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:52</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_a7a01777a114992be64b2a231b1c902a5a6e6f3eaf2d7cee0409ae2bb768d1152a"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#a7a01777a114992be64b2a231b1c902a5a6e6f3eaf2d7cee0409ae2bb768d1152a">Slic3r::CustomGCode::SingleExtruder</a></div><div class="ttdeci">@ SingleExtruder</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:51</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab20c5bd73b6b4f6806f410c495251fa6"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab20c5bd73b6b4f6806f410c495251fa6">Slic3r::CustomGCode::MultiExtruderMode</a></div><div class="ttdeci">static constexpr char MultiExtruderMode[]</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:61</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270a303c456ed86c14f6702a88615b2c8e33"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a303c456ed86c14f6702a88615b2c8e33">Slic3r::CustomGCode::PausePrint</a></div><div class="ttdeci">@ PausePrint</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:16</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270a645aad13c69c36cc9f98f37286af0492"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a645aad13c69c36cc9f98f37286af0492">Slic3r::CustomGCode::ToolChange</a></div><div class="ttdeci">@ ToolChange</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:17</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_custom_g_code_html_ab2cae3f5b15ab26cd45d15c66a137270a71143a7df08d4c31b003718bdc5afb49"><div class="ttname"><a href="../../df/df4/namespace_slic3r_1_1_custom_g_code.html#ab2cae3f5b15ab26cd45d15c66a137270a71143a7df08d4c31b003718bdc5afb49">Slic3r::CustomGCode::Template</a></div><div class="ttdeci">@ Template</div><div class="ttdef"><b>Definition</b> CustomGCode.hpp:18</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a693333eb28ecfce04af58a08fbb92464a61a8f2c20d6eee4a934018f5ce46fe62">Slic3r::Utils::TimeFormat::gcode</a></div><div class="ttdeci">@ gcode</div></div>
<div class="ttc" id="anamespaceigl_html_a6dfcf6612e49885a4d27301f66465788"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a6dfcf6612e49885a4d27301f66465788">igl::mode</a></div><div class="ttdeci">IGL_INLINE void mode(const Eigen::Matrix&lt; T, Eigen::Dynamic, Eigen::Dynamic &gt; &amp;X, const int d, Eigen::Matrix&lt; T, Eigen::Dynamic, 1 &gt; &amp;M)</div><div class="ttdef"><b>Definition</b> mode.cpp:14</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00159">CUSTOM_GCODE_PER_PRINT_Z_FILE</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l02309">Slic3r::DynamicConfig::opt_string()</a>, <a class="el" href="../../#l00058">out</a>, and <a class="el" href="../../#l01511">Slic3r::Model::plates_custom_gcodes</a>.</p>
<div id="dynsection-6" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a29fd6be9e68ca4129b832e3bdda62905_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad156077c6909c1454a17775d6320fd8b" name="ad156077c6909c1454a17775d6320fd8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad156077c6909c1454a17775d6320fd8b">&#9670;&#160;</a></span>_add_cut_information_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_cut_information_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7152</span>    {</div>
<div class="line"><span class="lineno"> 7153</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 7154</span>        pt::ptree   tree;</div>
<div class="line"><span class="lineno"> 7155</span> </div>
<div class="line"><span class="lineno"> 7156</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_cnt = 0;</div>
<div class="line"><span class="lineno"> 7157</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject *<span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 7158</span>            object_cnt++;</div>
<div class="line"><span class="lineno"> 7159</span>            pt::ptree &amp;obj_tree = tree.add(<span class="stringliteral">&quot;objects.object&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7160</span> </div>
<div class="line"><span class="lineno"> 7161</span>            obj_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>, object_cnt);</div>
<div class="line"><span class="lineno"> 7162</span> </div>
<div class="line"><span class="lineno"> 7163</span>            <span class="comment">// Store info for cut_id</span></div>
<div class="line"><span class="lineno"> 7164</span>            pt::ptree &amp;cut_id_tree = obj_tree.add(<span class="stringliteral">&quot;cut_id&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7165</span> </div>
<div class="line"><span class="lineno"> 7166</span>            <span class="comment">// store cut_id atributes</span></div>
<div class="line"><span class="lineno"> 7167</span>            cut_id_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>, <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;cut_id.id().id);</div>
<div class="line"><span class="lineno"> 7168</span>            cut_id_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.check_sum&quot;</span>, <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;cut_id.check_sum());</div>
<div class="line"><span class="lineno"> 7169</span>            cut_id_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.connectors_cnt&quot;</span>, <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;cut_id.connectors_cnt());</div>
<div class="line"><span class="lineno"> 7170</span> </div>
<div class="line"><span class="lineno"> 7171</span>            <span class="keywordtype">int</span> volume_idx = -1;</div>
<div class="line"><span class="lineno"> 7172</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelVolume *volume : <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;volumes) {</div>
<div class="line"><span class="lineno"> 7173</span>                ++volume_idx;</div>
<div class="line"><span class="lineno"> 7174</span>                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;is_cut_connector()) {</div>
<div class="line"><span class="lineno"> 7175</span>                    pt::ptree &amp;connectors_tree = obj_tree.add(<span class="stringliteral">&quot;connectors.connector&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7176</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.volume_id&quot;</span>, volume_idx);</div>
<div class="line"><span class="lineno"> 7177</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.type&quot;</span>, <span class="keywordtype">int</span>(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.connector_type));</div>
<div class="line"><span class="lineno"> 7178</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.radius&quot;</span>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.radius);</div>
<div class="line"><span class="lineno"> 7179</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.height&quot;</span>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.height);</div>
<div class="line"><span class="lineno"> 7180</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.r_tolerance&quot;</span>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.radius_tolerance);</div>
<div class="line"><span class="lineno"> 7181</span>                    connectors_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.h_tolerance&quot;</span>, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;cut_info.height_tolerance);</div>
<div class="line"><span class="lineno"> 7182</span>                }</div>
<div class="line"><span class="lineno"> 7183</span>            }</div>
<div class="line"><span class="lineno"> 7184</span>        }</div>
<div class="line"><span class="lineno"> 7185</span> </div>
<div class="line"><span class="lineno"> 7186</span>        <span class="keywordflow">if</span> (!tree.empty()) {</div>
<div class="line"><span class="lineno"> 7187</span>            std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 7188</span>            pt::write_xml(oss, tree);</div>
<div class="line"><span class="lineno"> 7189</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = oss.str();</div>
<div class="line"><span class="lineno"> 7190</span> </div>
<div class="line"><span class="lineno"> 7191</span>            <span class="comment">// Post processing(&quot;beautification&quot;) of the output string for a better preview</span></div>
<div class="line"><span class="lineno"> 7192</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;object&quot;</span>, <span class="stringliteral">&quot;&gt;\n &lt;object&quot;</span>);</div>
<div class="line"><span class="lineno"> 7193</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;cut_id&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;cut_id&quot;</span>);</div>
<div class="line"><span class="lineno"> 7194</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;/cut_id&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;/cut_id&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7195</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;connectors&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;connectors&quot;</span>);</div>
<div class="line"><span class="lineno"> 7196</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;/connectors&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n  &lt;/connectors&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7197</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;connector&quot;</span>, <span class="stringliteral">&quot;&gt;\n   &lt;connector&quot;</span>);</div>
<div class="line"><span class="lineno"> 7198</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;/connector&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n   &lt;/connector&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7199</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;/object&gt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n &lt;/object&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7200</span>            <span class="comment">// OR just</span></div>
<div class="line"><span class="lineno"> 7201</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;&quot;</span>, <span class="stringliteral">&quot;&gt;\n&lt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 7202</span>        }</div>
<div class="line"><span class="lineno"> 7203</span> </div>
<div class="line"><span class="lineno"> 7204</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.empty()) {</div>
<div class="line"><span class="lineno"> 7205</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#abf91117cb43df22cee4e49fe6bf62a56">CUT_INFORMATION_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span> *) <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 7206</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add cut information file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 7207</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7208</span>            }</div>
<div class="line"><span class="lineno"> 7209</span>        }</div>
<div class="line"><span class="lineno"> 7210</span> </div>
<div class="line"><span class="lineno"> 7211</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7212</span>    }</div>
<div class="ttc" id="abbs__3mf_8cpp_html_abf91117cb43df22cee4e49fe6bf62a56"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#abf91117cb43df22cee4e49fe6bf62a56">CUT_INFORMATION_FILE</a></div><div class="ttdeci">const std::string CUT_INFORMATION_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:165</div></div>
<div class="ttc" id="anamespaceigl_html_a852e0af0a8d4c084eb71a98b2e560a97"><div class="ttname"><a href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">igl::volume</a></div><div class="ttdeci">IGL_INLINE void volume(const Eigen::MatrixBase&lt; DerivedV &gt; &amp;V, const Eigen::MatrixBase&lt; DerivedT &gt; &amp;T, Eigen::PlainObjectBase&lt; Derivedvol &gt; &amp;vol)</div><div class="ttdef"><b>Definition</b> volume.cpp:15</div></div>
<div class="ttc" id="anamespacenlohmann_1_1detail_html_a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666"><div class="ttname"><a href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">nlohmann::detail::value_t::object</a></div><div class="ttdeci">@ object</div><div class="ttdoc">object (unordered set of name/value pairs)</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00165">CUT_INFORMATION_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l01486">Slic3r::Model::objects</a>, and <a class="el" href="../../#l00058">out</a>.</p>
<div id="dynsection-7" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_ad156077c6909c1454a17775d6320fd8b_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aac323ea063fd4dbfaa9670e1b2ffa30d" name="aac323ea063fd4dbfaa9670e1b2ffa30d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac323ea063fd4dbfaa9670e1b2ffa30d">&#9670;&#160;</a></span>_add_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>path_in_zip</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>file_path</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5791</span>    {</div>
<div class="line"><span class="lineno"> 5792</span>        <span class="keyword">static</span> std::string <span class="keyword">const</span> nocomp_exts[] = {<span class="stringliteral">&quot;.png&quot;</span>, <span class="stringliteral">&quot;.jpg&quot;</span>, <span class="stringliteral">&quot;.mp4&quot;</span>, <span class="stringliteral">&quot;.jpeg&quot;</span>, <span class="stringliteral">&quot;.zip&quot;</span>, <span class="stringliteral">&quot;.3mf&quot;</span>};</div>
<div class="line"><span class="lineno"> 5793</span>        <span class="keyword">auto</span> <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a> = nocomp_exts + <span class="keyword">sizeof</span>(nocomp_exts) / <span class="keyword">sizeof</span>(nocomp_exts[0]);</div>
<div class="line"><span class="lineno"> 5794</span>        <span class="keywordtype">bool</span> nocomp = std::find_if(nocomp_exts, end, [&amp;path_in_zip](<span class="keyword">auto</span> &amp; ext) { <span class="keywordflow">return</span> boost::algorithm::ends_with(path_in_zip, ext); }) != end;</div>
<div class="line"><span class="lineno"> 5795</span><span class="preprocessor">#if WRITE_ZIP_LANGUAGE_ENCODING</span></div>
<div class="line"><span class="lineno"> 5796</span>        <span class="keywordtype">bool</span> result = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a7e65ca89365aca18317932a5a6a53ec5">mz_zip_writer_add_file</a>(&amp;archive, path_in_zip.c_str(), <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a21f22c9580247e3d688ae94c3f10fb16">encode_path</a>(src_file_path.c_str()).c_str(), <a class="code hl_define" href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, nocomp ? <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8a4f66327d56ffc5b2c79fce1daf25ded5">MZ_NO_COMPRESSION</a> : <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8ab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>);</div>
<div class="line"><span class="lineno"> 5797</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 5798</span>        std::string native_path = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a21f22c9580247e3d688ae94c3f10fb16">encode_path</a>(path_in_zip.c_str());</div>
<div class="line"><span class="lineno"> 5799</span>        std::string extra = <a class="code hl_function" href="../../da/d90/struct_zip_unicode_path_extra_field.html#a8e2ab2d527101da1ec8c7cacd60667c7">ZipUnicodePathExtraField::encode</a>(path_in_zip, native_path);</div>
<div class="line"><span class="lineno"> 5800</span>        <span class="keywordtype">bool</span> result = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab764134ead31d9a913813b451de1de64">mz_zip_writer_add_file_ex</a>(&amp;archive, native_path.c_str(), <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a21f22c9580247e3d688ae94c3f10fb16">encode_path</a>(src_file_path.c_str()).c_str(), <a class="code hl_define" href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, nocomp ? <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a39d93b5c2db828e2fd3331d1421dc6c5">MZ_ZIP_FLAG_ASCII_FILENAME</a> : <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>,</div>
<div class="line"><span class="lineno"> 5801</span>                extra.c_str(), extra.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">length</a>(), extra.c_str(), extra.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">length</a>());</div>
<div class="line"><span class="lineno"> 5802</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5803</span>        <span class="keywordflow">if</span> (!result) {</div>
<div class="line"><span class="lineno"> 5804</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add file &quot;</span> + src_file_path + <span class="stringliteral">&quot; to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5805</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add file %1% to archive %2%\n&quot;</span>) % src_file_path % path_in_zip;</div>
<div class="line"><span class="lineno"> 5806</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5807</span>            BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add file %1% to archive %2%\n&quot;</span>) % src_file_path % path_in_zip;</div>
<div class="line"><span class="lineno"> 5808</span>        }</div>
<div class="line"><span class="lineno"> 5809</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 5810</span>    }</div>
<div class="ttc" id="a_shiny_prereqs_8h_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition</b> ShinyPrereqs.h:42</div></div>
<div class="ttc" id="aminiz_8c_html_a7e65ca89365aca18317932a5a6a53ec5"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a7e65ca89365aca18317932a5a6a53ec5">mz_zip_writer_add_file</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_file(mz_zip_archive *pZip, const char *pArchive_name, const char *pSrc_filename, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags)</div><div class="ttdef"><b>Definition</b> miniz.c:6991</div></div>
<div class="ttc" id="aminiz_8c_html_ab764134ead31d9a913813b451de1de64"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#ab764134ead31d9a913813b451de1de64">mz_zip_writer_add_file_ex</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_file_ex(mz_zip_archive *pZip, const char *pArchive_name, const char *pSrc_filename, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, const char *user_extra_data, mz_uint user_extra_data_len, const char *user_extra_data_central, mz_uint user_extra_data_central_len)</div><div class="ttdef"><b>Definition</b> miniz.c:6996</div></div>
<div class="ttc" id="aminiz_8h_html_a0b7f6f797da7a3d078535ba71ca00858a39d93b5c2db828e2fd3331d1421dc6c5"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#a0b7f6f797da7a3d078535ba71ca00858a39d93b5c2db828e2fd3331d1421dc6c5">MZ_ZIP_FLAG_ASCII_FILENAME</a></div><div class="ttdeci">@ MZ_ZIP_FLAG_ASCII_FILENAME</div><div class="ttdef"><b>Definition</b> miniz.h:1005</div></div>
<div class="ttc" id="aminiz_8h_html_af31b5d8dc6e4f77353e9c96fd2b527f8a4f66327d56ffc5b2c79fce1daf25ded5"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8a4f66327d56ffc5b2c79fce1daf25ded5">MZ_NO_COMPRESSION</a></div><div class="ttdeci">@ MZ_NO_COMPRESSION</div><div class="ttdef"><b>Definition</b> miniz.h:233</div></div>
<div class="ttc" id="aminiz_8h_html_af31b5d8dc6e4f77353e9c96fd2b527f8ab5dc326a9f034dc71d6012d86dd1343f"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8ab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a></div><div class="ttdeci">@ MZ_DEFAULT_LEVEL</div><div class="ttdef"><b>Definition</b> miniz.h:237</div></div>
<div class="ttc" id="anamespace_slic3r_html_a1eea52f5cabe9f6172fcec07fb0fed76"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">Slic3r::length</a></div><div class="ttdeci">double length(const Points &amp;pts)</div><div class="ttdef"><b>Definition</b> MultiPoint.hpp:133</div></div>
<div class="ttc" id="anamespace_slic3r_html_a21f22c9580247e3d688ae94c3f10fb16"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a21f22c9580247e3d688ae94c3f10fb16">Slic3r::encode_path</a></div><div class="ttdeci">std::string encode_path(const char *src)</div><div class="ttdef"><b>Definition</b> utils.cpp:1034</div></div>
<div class="ttc" id="astruct_zip_unicode_path_extra_field_html_a8e2ab2d527101da1ec8c7cacd60667c7"><div class="ttname"><a href="../../da/d90/struct_zip_unicode_path_extra_field.html#a8e2ab2d527101da1ec8c7cacd60667c7">ZipUnicodePathExtraField::encode</a></div><div class="ttdeci">static std::string encode(std::string const &amp;u8path, std::string const &amp;path)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:59</div></div>
<div class="ttc" id="axmltok__impl_8inc_html_ade76451eec04fdb3da08ae68f8afee41"><div class="ttname"><a href="../../d2/d86/xmltok__impl_8inc.html#ade76451eec04fdb3da08ae68f8afee41">end</a></div><div class="ttdeci">static int PTRCALL PREFIX(scanPercent)(const ENCODING *enc const char const char * end</div><div class="ttdef"><b>Definition</b> xmltok_impl.inc:881</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00059">ZipUnicodePathExtraField::encode()</a>, <a class="el" href="../../#l01034">Slic3r::encode_path()</a>, <a class="el" href="../../#l00881">end</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l00237">MZ_DEFAULT_LEVEL</a>, <a class="el" href="../../#l00233">MZ_NO_COMPRESSION</a>, <a class="el" href="../../#l01005">MZ_ZIP_FLAG_ASCII_FILENAME</a>, <a class="el" href="../../#l06991">mz_zip_writer_add_file()</a>, <a class="el" href="../../#l06996">mz_zip_writer_add_file_ex()</a>, and <a class="el" href="../../#l00042">NULL</a>.</p>
<div id="dynsection-8" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_aac323ea063fd4dbfaa9670e1b2ffa30d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aad75378873dc729ccaadacc900f7ab4c" name="aad75378873dc729ccaadacc900f7ab4c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad75378873dc729ccaadacc900f7ab4c">&#9670;&#160;</a></span>_add_gcode_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_gcode_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>plate_data_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#afd5b13b75ef46c5be8480e3981d21008">Export3mfProgressFn</a>&#160;</td>
          <td class="paramname"><em>proFn</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7302</span>{</div>
<div class="line"><span class="lineno"> 7303</span>    <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7304</span>    <span class="keywordtype">bool</span> cb_cancel = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7305</span> </div>
<div class="line"><span class="lineno"> 7306</span>    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> plate_data_list2;</div>
<div class="line"><span class="lineno"> 7307</span>    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)plate_data_list.size(); ++i)</div>
<div class="line"><span class="lineno"> 7308</span>    {</div>
<div class="line"><span class="lineno"> 7309</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 7310</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aaf59ed6ff72250f4e73577aa8a7a49aa">EXPORT_STAGE_ADD_GCODE</a>, i, plate_data_list.size(), cb_cancel);</div>
<div class="line"><span class="lineno"> 7311</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 7312</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7313</span>        }</div>
<div class="line"><span class="lineno"> 7314</span> </div>
<div class="line"><span class="lineno"> 7315</span>        PlateData* plate_data = plate_data_list[i];</div>
<div class="line"><span class="lineno"> 7316</span>        <span class="keywordflow">if</span> (!plate_data-&gt;gcode_file.empty() &amp;&amp; plate_data-&gt;is_sliced_valid &amp;&amp; boost::filesystem::exists(plate_data-&gt;gcode_file)) {</div>
<div class="line"><span class="lineno"> 7317</span>            plate_data_list2.push_back(plate_data);</div>
<div class="line"><span class="lineno"> 7318</span>        }</div>
<div class="line"><span class="lineno"> 7319</span>    }</div>
<div class="line"><span class="lineno"> 7320</span> </div>
<div class="line"><span class="lineno"> 7321</span>    boost::mutex <a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">mutex</a>;</div>
<div class="line"><span class="lineno"> 7322</span>    tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, plate_data_list2.size(), 1), [<span class="keyword">this</span>, &amp;plate_data_list2, &amp;root_archive = archive, &amp;<a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">mutex</a>, &amp;result](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 7323</span>        for (int i = range.begin(); i &lt; range.end(); ++i) {</div>
<div class="line"><span class="lineno"> 7324</span>            PlateData* plate_data = plate_data_list2[i];</div>
<div class="line"><span class="lineno"> 7325</span>            auto src_gcode_file = plate_data-&gt;gcode_file;</div>
<div class="line"><span class="lineno"> 7326</span>            std::string gcode_in_3mf = (boost::format(GCODE_FILE_FORMAT) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 7327</span> </div>
<div class="line"><span class="lineno"> 7328</span>            plate_data-&gt;gcode_file = gcode_in_3mf;</div>
<div class="line"><span class="lineno"> 7329</span>            mz_zip_archive archive;</div>
<div class="line"><span class="lineno"> 7330</span>            mz_zip_writer_staged_context context;</div>
<div class="line"><span class="lineno"> 7331</span>            mz_zip_zero_struct(&amp;archive);</div>
<div class="line"><span class="lineno"> 7332</span>            mz_zip_writer_init_heap(&amp;archive, 0, 1024 * 1024);</div>
<div class="line"><span class="lineno"> 7333</span>            {</div>
<div class="line"><span class="lineno"> 7334</span>                mz_zip_writer_add_staged_open(&amp;archive, &amp;context, gcode_in_3mf.c_str(), m_zip64 ? (uint64_t(1) &lt;&lt; 30) * 16 : (uint64_t(1) &lt;&lt; 32) - 1, nullptr, nullptr, 0,</div>
<div class="line"><span class="lineno"> 7335</span>                    MZ_DEFAULT_COMPRESSION, nullptr, 0, nullptr, 0);</div>
<div class="line"><span class="lineno"> 7336</span>                boost::filesystem::path src_gcode_path(src_gcode_file);</div>
<div class="line"><span class="lineno"> 7337</span>                if (!boost::filesystem::exists(src_gcode_path)) {</div>
<div class="line"><span class="lineno"> 7338</span>                    BOOST_LOG_TRIVIAL(error) &lt;&lt; <span class="stringliteral">&quot;Gcode is missing, filename = &quot;</span> &lt;&lt; src_gcode_file;</div>
<div class="line"><span class="lineno"> 7339</span>                    result = false;</div>
<div class="line"><span class="lineno"> 7340</span>                }</div>
<div class="line"><span class="lineno"> 7341</span>                boost::filesystem::ifstream ifs(src_gcode_file, std::ios::binary);</div>
<div class="line"><span class="lineno"> 7342</span>                std::string buf(64 * 1024, 0);</div>
<div class="line"><span class="lineno"> 7343</span>                while (ifs) {</div>
<div class="line"><span class="lineno"> 7344</span>                    ifs.read(buf.data(), buf.size());</div>
<div class="line"><span class="lineno"> 7345</span>                    mz_zip_writer_add_staged_data(&amp;context, buf.data(), ifs.gcount());</div>
<div class="line"><span class="lineno"> 7346</span>                }</div>
<div class="line"><span class="lineno"> 7347</span>                mz_zip_writer_add_staged_finish(&amp;context);</div>
<div class="line"><span class="lineno"> 7348</span>            }</div>
<div class="line"><span class="lineno"> 7349</span>            void *ppBuf; size_t pSize;</div>
<div class="line"><span class="lineno"> 7350</span>            mz_zip_writer_finalize_heap_archive(&amp;archive, &amp;ppBuf, &amp;pSize);</div>
<div class="line"><span class="lineno"> 7351</span>            mz_zip_writer_end(&amp;archive);</div>
<div class="line"><span class="lineno"> 7352</span>            mz_zip_zero_struct(&amp;archive);</div>
<div class="line"><span class="lineno"> 7353</span>            mz_zip_reader_init_mem(&amp;archive, ppBuf, pSize, 0);</div>
<div class="line"><span class="lineno"> 7354</span>            {</div>
<div class="line"><span class="lineno"> 7355</span>                boost::unique_lock l(mutex);</div>
<div class="line"><span class="lineno"> 7356</span>                mz_zip_writer_add_from_zip_reader(&amp;root_archive, &amp;archive, 0);</div>
<div class="line"><span class="lineno"> 7357</span>            }</div>
<div class="line"><span class="lineno"> 7358</span>            mz_zip_reader_end(&amp;archive);</div>
<div class="line"><span class="lineno"> 7359</span>            BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, store  %1% to 3mf %2%\n&quot;</span>) % src_gcode_file % gcode_in_3mf;</div>
<div class="line"><span class="lineno"> 7360</span>        }</div>
<div class="line"><span class="lineno"> 7361</span>    });</div>
<div class="line"><span class="lineno"> 7362</span>    <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 7363</span>}</div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___base_html_a93fd2b8551ac6acd0c6e27c47b9bff14"><div class="ttname"><a href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">Slic3r::_BBS_3MF_Base::mutex</a></div><div class="ttdeci">boost::mutex mutex</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:557</div></div>
<div class="ttc" id="alzoconf_8h_html_a61569f2965b7a369eb10b6d75d410d11"><div class="ttname"><a href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a></div><div class="ttdeci">int</div><div class="ttdef"><b>Definition</b> lzoconf.h:340</div></div>
<div class="ttc" id="anamespace_slic3r_html_a08de6a2691e520bf085aea8e860663e8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">Slic3r::PlateDataPtrs</a></div><div class="ttdeci">std::vector&lt; PlateData * &gt; PlateDataPtrs</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:195</div></div>
<div class="ttc" id="anamespace_slic3r_html_a51e1ea9708d6434aae1e8394bef8acdc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">Slic3r::range</a></div><div class="ttdeci">auto range(Cont &amp;&amp;cont)</div><div class="ttdef"><b>Definition</b> libslic3r.h:374</div></div>
<div class="ttc" id="anamespace_slic3r_html_aaf59ed6ff72250f4e73577aa8a7a49aa"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aaf59ed6ff72250f4e73577aa8a7a49aa">Slic3r::EXPORT_STAGE_ADD_GCODE</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_GCODE</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:172</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00172">Slic3r::EXPORT_STAGE_ADD_GCODE</a>, <a class="el" href="../../#l00068">Slic3r::PlateData::gcode_file</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00084">Slic3r::PlateData::is_sliced_valid</a>, and <a class="el" href="../../#l00374">Slic3r::range()</a>.</p>
<div id="dynsection-9" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_aad75378873dc729ccaadacc900f7ab4c_cgraph.svg" width="344" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a44929132c23c05d2203cb4753205725d" name="a44929132c23c05d2203cb4753205725d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44929132c23c05d2203cb4753205725d">&#9670;&#160;</a></span>_add_layer_config_ranges_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_layer_config_ranges_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6637</span>    {</div>
<div class="line"><span class="lineno"> 6638</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6639</span>        pt::ptree tree;</div>
<div class="line"><span class="lineno"> 6640</span> </div>
<div class="line"><span class="lineno"> 6641</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_cnt = 0;</div>
<div class="line"><span class="lineno"> 6642</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 6643</span>            object_cnt++;</div>
<div class="line"><span class="lineno"> 6644</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#ac6d662c9b650c2689223dd86016e06d2">t_layer_config_ranges</a>&amp; ranges = <span class="keywordtype">object</span>-&gt;layer_config_ranges;</div>
<div class="line"><span class="lineno"> 6645</span>            <span class="keywordflow">if</span> (!ranges.empty())</div>
<div class="line"><span class="lineno"> 6646</span>            {</div>
<div class="line"><span class="lineno"> 6647</span>                pt::ptree&amp; obj_tree = tree.add(<span class="stringliteral">&quot;objects.object&quot;</span>,<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6648</span> </div>
<div class="line"><span class="lineno"> 6649</span>                obj_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.id&quot;</span>, object_cnt);</div>
<div class="line"><span class="lineno"> 6650</span> </div>
<div class="line"><span class="lineno"> 6651</span>                <span class="comment">// Store the layer config ranges.</span></div>
<div class="line"><span class="lineno"> 6652</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a> : ranges) {</div>
<div class="line"><span class="lineno"> 6653</span>                    pt::ptree&amp; range_tree = obj_tree.add(<span class="stringliteral">&quot;range&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6654</span> </div>
<div class="line"><span class="lineno"> 6655</span>                    <span class="comment">// store minX and maxZ</span></div>
<div class="line"><span class="lineno"> 6656</span>                    range_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.min_z&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.first.first);</div>
<div class="line"><span class="lineno"> 6657</span>                    range_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.max_z&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.first.second);</div>
<div class="line"><span class="lineno"> 6658</span> </div>
<div class="line"><span class="lineno"> 6659</span>                    <span class="comment">// store range configuration</span></div>
<div class="line"><span class="lineno"> 6660</span>                    <span class="keyword">const</span> ModelConfig&amp; config = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>.second;</div>
<div class="line"><span class="lineno"> 6661</span>                    <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; opt_key : config.keys()) {</div>
<div class="line"><span class="lineno"> 6662</span>                        pt::ptree&amp; opt_tree = range_tree.add(<span class="stringliteral">&quot;option&quot;</span>, config.opt_serialize(opt_key));</div>
<div class="line"><span class="lineno"> 6663</span>                        opt_tree.put(<span class="stringliteral">&quot;&lt;xmlattr&gt;.opt_key&quot;</span>, opt_key);</div>
<div class="line"><span class="lineno"> 6664</span>                    }</div>
<div class="line"><span class="lineno"> 6665</span>                }</div>
<div class="line"><span class="lineno"> 6666</span>            }</div>
<div class="line"><span class="lineno"> 6667</span>        }</div>
<div class="line"><span class="lineno"> 6668</span> </div>
<div class="line"><span class="lineno"> 6669</span>        <span class="keywordflow">if</span> (!tree.empty()) {</div>
<div class="line"><span class="lineno"> 6670</span>            std::ostringstream oss;</div>
<div class="line"><span class="lineno"> 6671</span>            pt::write_xml(oss, tree);</div>
<div class="line"><span class="lineno"> 6672</span>            <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = oss.str();</div>
<div class="line"><span class="lineno"> 6673</span> </div>
<div class="line"><span class="lineno"> 6674</span>            <span class="comment">// Post processing(&quot;beautification&quot;) of the output string for a better preview</span></div>
<div class="line"><span class="lineno"> 6675</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;object&quot;</span>,      <span class="stringliteral">&quot;&gt;\n &lt;object&quot;</span>);</div>
<div class="line"><span class="lineno"> 6676</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;range&quot;</span>,       <span class="stringliteral">&quot;&gt;\n  &lt;range&quot;</span>);</div>
<div class="line"><span class="lineno"> 6677</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;option&quot;</span>,      <span class="stringliteral">&quot;&gt;\n   &lt;option&quot;</span>);</div>
<div class="line"><span class="lineno"> 6678</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;/range&gt;&quot;</span>,     <span class="stringliteral">&quot;&gt;\n  &lt;/range&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6679</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;/object&gt;&quot;</span>,    <span class="stringliteral">&quot;&gt;\n &lt;/object&gt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6680</span>            <span class="comment">// OR just</span></div>
<div class="line"><span class="lineno"> 6681</span>            boost::replace_all(<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>, <span class="stringliteral">&quot;&gt;&lt;&quot;</span>,            <span class="stringliteral">&quot;&gt;\n&lt;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6682</span>        }</div>
<div class="line"><span class="lineno"> 6683</span> </div>
<div class="line"><span class="lineno"> 6684</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.empty()) {</div>
<div class="line"><span class="lineno"> 6685</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a041d9247323110c047204051c405fd0b">LAYER_CONFIG_RANGES_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 6686</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add layer heights profile file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6687</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;Unable to add layer heights profile file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6688</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6689</span>            }</div>
<div class="line"><span class="lineno"> 6690</span>        }</div>
<div class="line"><span class="lineno"> 6691</span> </div>
<div class="line"><span class="lineno"> 6692</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6693</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a041d9247323110c047204051c405fd0b"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a041d9247323110c047204051c405fd0b">LAYER_CONFIG_RANGES_FILE</a></div><div class="ttdeci">const std::string LAYER_CONFIG_RANGES_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:76</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac6d662c9b650c2689223dd86016e06d2"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac6d662c9b650c2689223dd86016e06d2">Slic3r::t_layer_config_ranges</a></div><div class="ttdeci">std::map&lt; t_layer_height_range, ModelConfig &gt; t_layer_config_ranges</div><div class="ttdef"><b>Definition</b> Slicing.hpp:134</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l01405">Slic3r::ModelConfig::keys()</a>, <a class="el" href="../../#l00156">LAYER_CONFIG_RANGES_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l01486">Slic3r::Model::objects</a>, <a class="el" href="../../#l01416">Slic3r::ModelConfig::opt_serialize()</a>, <a class="el" href="../../#l00058">out</a>, and <a class="el" href="../../#l00374">Slic3r::range()</a>.</p>
<div id="dynsection-10" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a44929132c23c05d2203cb4753205725d_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a5c5be5270eba03a8fa0620c2aef7190f" name="a5c5be5270eba03a8fa0620c2aef7190f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c5be5270eba03a8fa0620c2aef7190f">&#9670;&#160;</a></span>_add_layer_height_profile_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_layer_height_profile_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6602</span>    {</div>
<div class="line"><span class="lineno"> 6603</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 6604</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6605</span>        <span class="keywordtype">char</span> <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>[1024];</div>
<div class="line"><span class="lineno"> 6606</span> </div>
<div class="line"><span class="lineno"> 6607</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/dee/_auxiliary_data_view_model_8cpp.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> = 0;</div>
<div class="line"><span class="lineno"> 6608</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelObject* <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 6609</span>            ++<a class="code hl_variable" href="../../dd/dee/_auxiliary_data_view_model_8cpp.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a>;</div>
<div class="line"><span class="lineno"> 6610</span>            <span class="keyword">const</span> std::vector&lt;double&gt;&amp; layer_height_profile = <span class="keywordtype">object</span>-&gt;layer_height_profile.get();</div>
<div class="line"><span class="lineno"> 6611</span>            <span class="keywordflow">if</span> (layer_height_profile.size() &gt;= 4 &amp;&amp; layer_height_profile.size() % 2 == 0) {</div>
<div class="line"><span class="lineno"> 6612</span>                sprintf(<a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, <span class="stringliteral">&quot;object_id=%d|&quot;</span>, <a class="code hl_variable" href="../../dd/dee/_auxiliary_data_view_model_8cpp.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a>);</div>
<div class="line"><span class="lineno"> 6613</span>                <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> += <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>;</div>
<div class="line"><span class="lineno"> 6614</span> </div>
<div class="line"><span class="lineno"> 6615</span>                <span class="comment">// Store the layer height profile as a single semicolon separated list.</span></div>
<div class="line"><span class="lineno"> 6616</span>                <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; layer_height_profile.size(); ++i) {</div>
<div class="line"><span class="lineno"> 6617</span>                    sprintf(<a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, (i == 0) ? <span class="stringliteral">&quot;%f&quot;</span> : <span class="stringliteral">&quot;;%f&quot;</span>, layer_height_profile[i]);</div>
<div class="line"><span class="lineno"> 6618</span>                    <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> += <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>;</div>
<div class="line"><span class="lineno"> 6619</span>                }</div>
<div class="line"><span class="lineno"> 6620</span> </div>
<div class="line"><span class="lineno"> 6621</span>                <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> += <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6622</span>            }</div>
<div class="line"><span class="lineno"> 6623</span>        }</div>
<div class="line"><span class="lineno"> 6624</span> </div>
<div class="line"><span class="lineno"> 6625</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.empty()) {</div>
<div class="line"><span class="lineno"> 6626</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a2561773ca23ce3e7992e7d17a4f050cd">BBS_LAYER_HEIGHTS_PROFILE_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 6627</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add layer heights profile file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6628</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;Unable to add layer heights profile file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6629</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6630</span>            }</div>
<div class="line"><span class="lineno"> 6631</span>        }</div>
<div class="line"><span class="lineno"> 6632</span> </div>
<div class="line"><span class="lineno"> 6633</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6634</span>    }</div>
<div class="ttc" id="a_auxiliary_data_view_model_8cpp_html_a16ff2d8e15ade4948398b0aeb80124a8"><div class="ttname"><a href="../../dd/dee/_auxiliary_data_view_model_8cpp.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a></div><div class="ttdeci">static unsigned int count</div><div class="ttdef"><b>Definition</b> AuxiliaryDataViewModel.cpp:225</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a2561773ca23ce3e7992e7d17a4f050cd"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a2561773ca23ce3e7992e7d17a4f050cd">BBS_LAYER_HEIGHTS_PROFILE_FILE</a></div><div class="ttdeci">const std::string BBS_LAYER_HEIGHTS_PROFILE_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:155</div></div>
<div class="ttc" id="anamespace_slic3r_html_a7fc4c0f61833ab1abb7195cd75463e56"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">Slic3r::is_decimal_separator_point</a></div><div class="ttdeci">bool is_decimal_separator_point()</div><div class="ttdef"><b>Definition</b> LocalesUtils.cpp:46</div></div>
<div class="ttc" id="axmlparse_8c_html_aaadc06b5dac8070de2c8677210967bdb"><div class="ttname"><a href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a></div><div class="ttdeci">#define buffer</div><div class="ttdef"><b>Definition</b> xmlparse.c:618</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00155">BBS_LAYER_HEIGHTS_PROFILE_FILE</a>, <a class="el" href="../../#l00618">buffer</a>, <a class="el" href="../../#l00225">count</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00046">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l01486">Slic3r::Model::objects</a>, and <a class="el" href="../../#l00058">out</a>.</p>
<div id="dynsection-11" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a5c5be5270eba03a8fa0620c2aef7190f_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a513ded708e8008e49a6ee1853e4cd78a" name="a513ded708e8008e49a6ee1853e4cd78a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a513ded708e8008e49a6ee1853e4cd78a">&#9670;&#160;</a></span>_add_mesh_to_object_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_mesh_to_object_stream </td>
          <td>(</td>
          <td class="paramtype">std::function&lt; bool(std::string &amp;, bool)&gt; const &amp;&#160;</td>
          <td class="paramname"><em>flush</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> const &amp;&#160;</td>
          <td class="paramname"><em>object_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6346</span>    {</div>
<div class="line"><span class="lineno"> 6347</span>        std::string output_buffer;</div>
<div class="line"><span class="lineno"> 6348</span> </div>
<div class="line"><span class="lineno"> 6349</span><span class="preprocessor">#if 0</span></div>
<div class="line"><span class="lineno"> 6350</span>        <span class="keyword">auto</span> flush = [<span class="keyword">this</span>, &amp;output_buffer, &amp;context](<span class="keywordtype">bool</span> force = <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 6351</span>            <span class="keywordflow">if</span> ((force &amp;&amp; ! output_buffer.empty()) || output_buffer.size() &gt;= 65536 * 16) {</div>
<div class="line"><span class="lineno"> 6352</span>                <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, output_buffer.data(), output_buffer.size())) {</div>
<div class="line"><span class="lineno"> 6353</span>                    <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Error during writing or compression&quot;</span>);</div>
<div class="line"><span class="lineno"> 6354</span>                    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Error during writing or compression\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6355</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6356</span>                }</div>
<div class="line"><span class="lineno"> 6357</span>                output_buffer.clear();</div>
<div class="line"><span class="lineno"> 6358</span>            }</div>
<div class="line"><span class="lineno"> 6359</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6360</span>        };</div>
<div class="line"><span class="lineno"> 6361</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6362</span> </div>
<div class="line"><span class="lineno"> 6363</span>        <span class="comment">/*output_buffer += &quot;   &lt;&quot;;</span></div>
<div class="line"><span class="lineno"> 6364</span><span class="comment">        output_buffer += MESH_TAG;</span></div>
<div class="line"><span class="lineno"> 6365</span><span class="comment">        output_buffer += &quot;&gt;\n    &lt;&quot;;</span></div>
<div class="line"><span class="lineno"> 6366</span><span class="comment">        output_buffer += VERTICES_TAG;</span></div>
<div class="line"><span class="lineno"> 6367</span><span class="comment">        output_buffer += &quot;&gt;\n&quot;;*/</span></div>
<div class="line"><span class="lineno"> 6368</span> </div>
<div class="line"><span class="lineno"> 6369</span>        <span class="keyword">auto</span> format_coordinate = [](<span class="keywordtype">float</span> <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>, <span class="keywordtype">char</span> *buf) -&gt; <span class="keywordtype">char</span>* {</div>
<div class="line"><span class="lineno"> 6370</span>            assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 6371</span><span class="preprocessor">#if EXPORT_3MF_USE_SPIRIT_KARMA_FP</span></div>
<div class="line"><span class="lineno"> 6372</span>            <span class="comment">// Slightly faster than sprintf(&quot;%.9g&quot;), but there is an issue with the karma floating point formatter,</span></div>
<div class="line"><span class="lineno"> 6373</span>            <span class="comment">// https://github.com/boostorg/spirit/pull/586</span></div>
<div class="line"><span class="lineno"> 6374</span>            <span class="comment">// where the exported string is one digit shorter than it should be to guarantee lossless round trip.</span></div>
<div class="line"><span class="lineno"> 6375</span>            <span class="comment">// The code is left here for the ocasion boost guys improve.</span></div>
<div class="line"><span class="lineno"> 6376</span>            coordinate_type_fixed      <span class="keyword">const</span> coordinate_fixed      = coordinate_type_fixed();</div>
<div class="line"><span class="lineno"> 6377</span>            coordinate_type_scientific <span class="keyword">const</span> coordinate_scientific = coordinate_type_scientific();</div>
<div class="line"><span class="lineno"> 6378</span>            <span class="comment">// Format &quot;f&quot; in a fixed format.</span></div>
<div class="line"><span class="lineno"> 6379</span>            <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = buf;</div>
<div class="line"><span class="lineno"> 6380</span>            boost::spirit::karma::generate(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, coordinate_fixed, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno"> 6381</span>            <span class="comment">// Format &quot;f&quot; in a scientific format.</span></div>
<div class="line"><span class="lineno"> 6382</span>            <span class="keywordtype">char</span> *ptr2 = <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>;</div>
<div class="line"><span class="lineno"> 6383</span>            boost::spirit::karma::generate(ptr2, coordinate_scientific, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno"> 6384</span>            <span class="comment">// Return end of the shorter string.</span></div>
<div class="line"><span class="lineno"> 6385</span>            <span class="keyword">auto</span> len2 = ptr2 - <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>;</div>
<div class="line"><span class="lineno"> 6386</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> - buf &gt; len2) {</div>
<div class="line"><span class="lineno"> 6387</span>                <span class="comment">// Move the shorter scientific form to the front.</span></div>
<div class="line"><span class="lineno"> 6388</span>                <a class="code hl_define" href="../../da/d74/minilzo_8c.html#a663904b84a331ea80889b1fe760e2bf6">memcpy</a>(buf, <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, len2);</div>
<div class="line"><span class="lineno"> 6389</span>                <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = buf + len2;</div>
<div class="line"><span class="lineno"> 6390</span>            }</div>
<div class="line"><span class="lineno"> 6391</span>            <span class="comment">// Return pointer to the end.</span></div>
<div class="line"><span class="lineno"> 6392</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>;</div>
<div class="line"><span class="lineno"> 6393</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 6394</span>            <span class="comment">// Round-trippable float, shortest possible.</span></div>
<div class="line"><span class="lineno"> 6395</span>            <span class="keywordflow">return</span> buf + sprintf(buf, <span class="stringliteral">&quot;%.9g&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">f</a>);</div>
<div class="line"><span class="lineno"> 6396</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 6397</span>        };</div>
<div class="line"><span class="lineno"> 6398</span> </div>
<div class="line"><span class="lineno"> 6399</span>        <span class="keyword">auto</span> <span class="keyword">const</span> &amp; <span class="keywordtype">object</span> = *object_data.object;</div>
<div class="line"><span class="lineno"> 6400</span> </div>
<div class="line"><span class="lineno"> 6401</span>        <span class="keywordtype">char</span> buf[256];</div>
<div class="line"><span class="lineno"> 6402</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> vertices_count = 0;</div>
<div class="line"><span class="lineno"> 6403</span>        <span class="comment">//unsigned int triangles_count = 0;</span></div>
<div class="line"><span class="lineno"> 6404</span>        <span class="keywordflow">for</span> (ModelVolume* volume : <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>.volumes) {</div>
<div class="line"><span class="lineno"> 6405</span>            <span class="keywordflow">if</span> (volume == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 6406</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6407</span> </div>
<div class="line"><span class="lineno"> 6408</span>            <span class="keywordtype">int</span> volume_id = object_data.volumes_objectID.find(volume)-&gt;second;</div>
<div class="line"><span class="lineno"> 6409</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a434a249c20f16929f5e0db7b466acee0">m_share_mesh</a> &amp;&amp; volume_id == 0)</div>
<div class="line"><span class="lineno"> 6410</span>                <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6411</span> </div>
<div class="line"><span class="lineno"> 6412</span>      <span class="comment">//if (!volume-&gt;mesh().stats().repaired())</span></div>
<div class="line"><span class="lineno"> 6413</span>      <span class="comment">//  throw Slic3r::FileIOError(&quot;store_3mf() requires repair()&quot;);</span></div>
<div class="line"><span class="lineno"> 6414</span> </div>
<div class="line"><span class="lineno"> 6415</span>            <span class="keyword">const</span> <a class="code hl_struct" href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a> &amp;its = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh().its;</div>
<div class="line"><span class="lineno"> 6416</span>            <span class="keywordflow">if</span> (its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.empty()) {</div>
<div class="line"><span class="lineno"> 6417</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Found invalid mesh&quot;</span>);</div>
<div class="line"><span class="lineno"> 6418</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Found invalid mesh\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6419</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6420</span>            }</div>
<div class="line"><span class="lineno"> 6421</span> </div>
<div class="line"><span class="lineno"> 6422</span>            std::string type = (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;type() == <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a3cca6f85cc4fd0249d3b85aede67df2ea81026b86a15986d160e41a8e07a6e75d">ModelVolumeType::MODEL_PART</a>)?<span class="stringliteral">&quot;model&quot;</span>:<span class="stringliteral">&quot;other&quot;</span>;</div>
<div class="line"><span class="lineno"> 6423</span> </div>
<div class="line"><span class="lineno"> 6424</span>            output_buffer += <span class="stringliteral">&quot;  &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6425</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a>;</div>
<div class="line"><span class="lineno"> 6426</span>            output_buffer += <span class="stringliteral">&quot; id=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6427</span>            output_buffer += std::to_string(volume_id);</div>
<div class="line"><span class="lineno"> 6428</span>            <span class="comment">/*if (m_production_ext) {</span></div>
<div class="line"><span class="lineno"> 6429</span><span class="comment">                std::stringstream stream;</span></div>
<div class="line"><span class="lineno"> 6430</span><span class="comment">                reset_stream(stream);</span></div>
<div class="line"><span class="lineno"> 6431</span><span class="comment">                stream &lt;&lt; &quot;\&quot; &quot; &lt;&lt; PUUID_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; hex_wrap&lt;boost::uint32_t&gt;{(boost::uint32_t)backup_id} &lt;&lt; OBJECT_UUID_SUFFIX;</span></div>
<div class="line"><span class="lineno"> 6432</span><span class="comment">                //output_buffer += &quot;\&quot; &quot;;</span></div>
<div class="line"><span class="lineno"> 6433</span><span class="comment">                //output_buffer += PUUID_ATTR;</span></div>
<div class="line"><span class="lineno"> 6434</span><span class="comment">                //output_buffer += &quot;=\&quot;&quot;;</span></div>
<div class="line"><span class="lineno"> 6435</span><span class="comment">                //output_buffer += std::to_string(hex_wrap&lt;boost::uint32_t&gt;{(boost::uint32_t)backup_id});</span></div>
<div class="line"><span class="lineno"> 6436</span><span class="comment">                //output_buffer += OBJECT_UUID_SUFFIX;</span></div>
<div class="line"><span class="lineno"> 6437</span><span class="comment">                output_buffer += stream.str();</span></div>
<div class="line"><span class="lineno"> 6438</span><span class="comment">            }*/</span></div>
<div class="line"><span class="lineno"> 6439</span>            output_buffer += <span class="stringliteral">&quot;\&quot; type=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6440</span>            output_buffer += type;</div>
<div class="line"><span class="lineno"> 6441</span>            output_buffer += <span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6442</span>            output_buffer += <span class="stringliteral">&quot;   &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6443</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a>;</div>
<div class="line"><span class="lineno"> 6444</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n    &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6445</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae908c10d187eacecd4d88f9edb01df8a">VERTICES_TAG</a>;</div>
<div class="line"><span class="lineno"> 6446</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6447</span> </div>
<div class="line"><span class="lineno"> 6448</span>            vertices_count += (<a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size();</div>
<div class="line"><span class="lineno"> 6449</span> </div>
<div class="line"><span class="lineno"> 6450</span>            <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>.size(); ++i) {</div>
<div class="line"><span class="lineno"> 6451</span>                <span class="comment">//don&#39;t save the volume&#39;s matrix into vertex data</span></div>
<div class="line"><span class="lineno"> 6452</span>                <span class="comment">//add the shared mesh logic</span></div>
<div class="line"><span class="lineno"> 6453</span>                <span class="comment">//Vec3f v = (matrix * its.vertices[i].cast&lt;double&gt;()).cast&lt;float&gt;();</span></div>
<div class="line"><span class="lineno"> 6454</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Vec3f</a> v = its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">vertices</a>[i];</div>
<div class="line"><span class="lineno"> 6455</span>                <span class="keywordtype">char</span>* <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = buf;</div>
<div class="line"><span class="lineno"> 6456</span>                boost::spirit::karma::generate(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, boost::spirit::lit(<span class="stringliteral">&quot;     &lt;&quot;</span>) &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6c8d6f950c4e28f428d0529b1ef792cd">VERTEX_TAG</a> &lt;&lt; <span class="stringliteral">&quot; x=\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6457</span>                <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = format_coordinate(v.x(), <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>);</div>
<div class="line"><span class="lineno"> 6458</span>                boost::spirit::karma::generate(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, <span class="stringliteral">&quot;\&quot; y=\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6459</span>                <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = format_coordinate(v.y(), <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>);</div>
<div class="line"><span class="lineno"> 6460</span>                boost::spirit::karma::generate(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, <span class="stringliteral">&quot;\&quot; z=\&quot;&quot;</span>);</div>
<div class="line"><span class="lineno"> 6461</span>                <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = format_coordinate(v.z(), <a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>);</div>
<div class="line"><span class="lineno"> 6462</span>                boost::spirit::karma::generate(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6463</span>                *<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 6464</span>                output_buffer += buf;</div>
<div class="line"><span class="lineno"> 6465</span>                <span class="keywordflow">if</span> (!flush(output_buffer, <span class="keyword">false</span>))</div>
<div class="line"><span class="lineno"> 6466</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6467</span>            }</div>
<div class="line"><span class="lineno"> 6468</span>        <span class="comment">//}</span></div>
<div class="line"><span class="lineno"> 6469</span> </div>
<div class="line"><span class="lineno"> 6470</span>            output_buffer += <span class="stringliteral">&quot;    &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 6471</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae908c10d187eacecd4d88f9edb01df8a">VERTICES_TAG</a>;</div>
<div class="line"><span class="lineno"> 6472</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n    &lt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6473</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0fa137f88f8505e91d410f5a760b3811">TRIANGLES_TAG</a>;</div>
<div class="line"><span class="lineno"> 6474</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6475</span> </div>
<div class="line"><span class="lineno"> 6476</span>        <span class="comment">//for (ModelVolume* volume : object.volumes) {</span></div>
<div class="line"><span class="lineno"> 6477</span>        <span class="comment">//    if (volume == nullptr)</span></div>
<div class="line"><span class="lineno"> 6478</span>        <span class="comment">//        continue;</span></div>
<div class="line"><span class="lineno"> 6479</span> </div>
<div class="line"><span class="lineno"> 6480</span>            <span class="comment">//BBS: as we stored matrix seperately, not multiplied into vertex</span></div>
<div class="line"><span class="lineno"> 6481</span>            <span class="comment">//we don&#39;t need to consider this left hand case specially</span></div>
<div class="line"><span class="lineno"> 6482</span>            <span class="comment">//bool is_left_handed = volume-&gt;is_left_handed();</span></div>
<div class="line"><span class="lineno"> 6483</span>            <span class="keywordtype">bool</span> is_left_handed = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6484</span>            <span class="comment">//VolumeToOffsetsMap::iterator volume_it = volumes_objectID.find(volume);</span></div>
<div class="line"><span class="lineno"> 6485</span>            <span class="comment">//assert(volume_it != volumes_objectID.end());</span></div>
<div class="line"><span class="lineno"> 6486</span> </div>
<div class="line"><span class="lineno"> 6487</span>            <span class="comment">//const indexed_triangle_set &amp;its = volume-&gt;mesh().its;</span></div>
<div class="line"><span class="lineno"> 6488</span> </div>
<div class="line"><span class="lineno"> 6489</span>            <span class="comment">// updates triangle offsets</span></div>
<div class="line"><span class="lineno"> 6490</span>            <span class="comment">//unsigned int first_triangle_id = triangles_count;</span></div>
<div class="line"><span class="lineno"> 6491</span>            <span class="comment">//triangles_count += (int)its.indices.size();</span></div>
<div class="line"><span class="lineno"> 6492</span>            <span class="comment">//unsigned int last_triangle_id = triangles_count - 1;</span></div>
<div class="line"><span class="lineno"> 6493</span> </div>
<div class="line"><span class="lineno"> 6494</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>(its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>.size()); ++ i) {</div>
<div class="line"><span class="lineno"> 6495</span>                {</div>
<div class="line"><span class="lineno"> 6496</span>                    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a019877dab3809194b223fd0948608900">Vec3i</a> &amp;idx = its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indices</a>[i];</div>
<div class="line"><span class="lineno"> 6497</span>                    <span class="keywordtype">char</span> *<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = buf;</div>
<div class="line"><span class="lineno"> 6498</span>                    boost::spirit::karma::generate(<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a>, boost::spirit::lit(<span class="stringliteral">&quot;     &lt;&quot;</span>) &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae9fb123f809579228399453e77157dd3">TRIANGLE_TAG</a> &lt;&lt;</div>
<div class="line"><span class="lineno"> 6499</span>                        <span class="stringliteral">&quot; v1=\&quot;&quot;</span> &lt;&lt; boost::spirit::int_ &lt;&lt;</div>
<div class="line"><span class="lineno"> 6500</span>                        <span class="stringliteral">&quot;\&quot; v2=\&quot;&quot;</span> &lt;&lt; boost::spirit::int_ &lt;&lt;</div>
<div class="line"><span class="lineno"> 6501</span>                        <span class="stringliteral">&quot;\&quot; v3=\&quot;&quot;</span> &lt;&lt; boost::spirit::int_ &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>,</div>
<div class="line"><span class="lineno"> 6502</span>                        idx[is_left_handed ? 2 : 0],</div>
<div class="line"><span class="lineno"> 6503</span>                        idx[1],</div>
<div class="line"><span class="lineno"> 6504</span>                        idx[is_left_handed ? 0 : 2]);</div>
<div class="line"><span class="lineno"> 6505</span>                    *<a class="code hl_variable" href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a> = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><span class="lineno"> 6506</span>                    output_buffer += buf;</div>
<div class="line"><span class="lineno"> 6507</span>                }</div>
<div class="line"><span class="lineno"> 6508</span> </div>
<div class="line"><span class="lineno"> 6509</span>                std::string custom_supports_data_string = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;supported_facets.get_triangle_as_string(i);</div>
<div class="line"><span class="lineno"> 6510</span>                <span class="keywordflow">if</span> (! custom_supports_data_string.empty()) {</div>
<div class="line"><span class="lineno"> 6511</span>                    output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6512</span>                    output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a300a1e29f028c24b59a88f28d30a6c19">CUSTOM_SUPPORTS_ATTR</a>;</div>
<div class="line"><span class="lineno"> 6513</span>                    output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6514</span>                    output_buffer += custom_supports_data_string;</div>
<div class="line"><span class="lineno"> 6515</span>                    output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6516</span>                }</div>
<div class="line"><span class="lineno"> 6517</span> </div>
<div class="line"><span class="lineno"> 6518</span>                std::string custom_seam_data_string = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;seam_facets.get_triangle_as_string(i);</div>
<div class="line"><span class="lineno"> 6519</span>                <span class="keywordflow">if</span> (! custom_seam_data_string.empty()) {</div>
<div class="line"><span class="lineno"> 6520</span>                    output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6521</span>                    output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a22aa81429e34bbb0042c4fd88e65a580">CUSTOM_SEAM_ATTR</a>;</div>
<div class="line"><span class="lineno"> 6522</span>                    output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6523</span>                    output_buffer += custom_seam_data_string;</div>
<div class="line"><span class="lineno"> 6524</span>                    output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6525</span>                }</div>
<div class="line"><span class="lineno"> 6526</span> </div>
<div class="line"><span class="lineno"> 6527</span>                std::string mmu_painting_data_string = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mmu_segmentation_facets.get_triangle_as_string(i);</div>
<div class="line"><span class="lineno"> 6528</span>                <span class="keywordflow">if</span> (! mmu_painting_data_string.empty()) {</div>
<div class="line"><span class="lineno"> 6529</span>                    output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6530</span>                    output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0be0294b2edbc1d1c66b380f429d7df8">MMU_SEGMENTATION_ATTR</a>;</div>
<div class="line"><span class="lineno"> 6531</span>                    output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6532</span>                    output_buffer += mmu_painting_data_string;</div>
<div class="line"><span class="lineno"> 6533</span>                    output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6534</span>                }</div>
<div class="line"><span class="lineno"> 6535</span> </div>
<div class="line"><span class="lineno"> 6536</span>                <span class="comment">// BBS</span></div>
<div class="line"><span class="lineno"> 6537</span>                <span class="keywordflow">if</span> (i &lt; its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a7808aad75527ba0f646318872d0c339d">properties</a>.size()) {</div>
<div class="line"><span class="lineno"> 6538</span>                    std::string prop_str = its.<a class="code hl_variable" href="../../d0/df2/structindexed__triangle__set.html#a7808aad75527ba0f646318872d0c339d">properties</a>[i].to_string();</div>
<div class="line"><span class="lineno"> 6539</span>                    <span class="keywordflow">if</span> (!prop_str.empty()) {</div>
<div class="line"><span class="lineno"> 6540</span>                        output_buffer += <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6541</span>                        output_buffer += <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a6e62a062d8d8cc71b6b46fa5a07c6f41">FACE_PROPERTY_ATTR</a>;</div>
<div class="line"><span class="lineno"> 6542</span>                        output_buffer += <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6543</span>                        output_buffer += prop_str;</div>
<div class="line"><span class="lineno"> 6544</span>                        output_buffer += <span class="stringliteral">&quot;\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6545</span>                    }</div>
<div class="line"><span class="lineno"> 6546</span>                }</div>
<div class="line"><span class="lineno"> 6547</span> </div>
<div class="line"><span class="lineno"> 6548</span>                output_buffer += <span class="stringliteral">&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6549</span> </div>
<div class="line"><span class="lineno"> 6550</span>                <span class="keywordflow">if</span> (! flush(output_buffer, <span class="keyword">false</span>))</div>
<div class="line"><span class="lineno"> 6551</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6552</span>            }</div>
<div class="line"><span class="lineno"> 6553</span>            output_buffer += <span class="stringliteral">&quot;    &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 6554</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0fa137f88f8505e91d410f5a760b3811">TRIANGLES_TAG</a>;</div>
<div class="line"><span class="lineno"> 6555</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n   &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 6556</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a>;</div>
<div class="line"><span class="lineno"> 6557</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6558</span>            output_buffer +=  <span class="stringliteral">&quot;  &lt;/&quot;</span>;</div>
<div class="line"><span class="lineno"> 6559</span>            output_buffer += <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a>;</div>
<div class="line"><span class="lineno"> 6560</span>            output_buffer += <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6561</span>        }</div>
<div class="line"><span class="lineno"> 6562</span> </div>
<div class="line"><span class="lineno"> 6563</span>        <span class="comment">// Force flush.</span></div>
<div class="line"><span class="lineno"> 6564</span>        <span class="keywordflow">return</span> flush(output_buffer, <span class="keyword">true</span>);</div>
<div class="line"><span class="lineno"> 6565</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a0be0294b2edbc1d1c66b380f429d7df8"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0be0294b2edbc1d1c66b380f429d7df8">MMU_SEGMENTATION_ATTR</a></div><div class="ttdeci">static constexpr const char * MMU_SEGMENTATION_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:114</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0fa137f88f8505e91d410f5a760b3811"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0fa137f88f8505e91d410f5a760b3811">TRIANGLES_TAG</a></div><div class="ttdeci">static constexpr const char * TRIANGLES_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:87</div></div>
<div class="ttc" id="a3mf_8cpp_html_a22aa81429e34bbb0042c4fd88e65a580"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a22aa81429e34bbb0042c4fd88e65a580">CUSTOM_SEAM_ATTR</a></div><div class="ttdeci">static constexpr const char * CUSTOM_SEAM_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:113</div></div>
<div class="ttc" id="a3mf_8cpp_html_a300a1e29f028c24b59a88f28d30a6c19"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a300a1e29f028c24b59a88f28d30a6c19">CUSTOM_SUPPORTS_ATTR</a></div><div class="ttdeci">static constexpr const char * CUSTOM_SUPPORTS_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:112</div></div>
<div class="ttc" id="a3mf_8cpp_html_a6c8d6f950c4e28f428d0529b1ef792cd"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a6c8d6f950c4e28f428d0529b1ef792cd">VERTEX_TAG</a></div><div class="ttdeci">static constexpr const char * VERTEX_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:86</div></div>
<div class="ttc" id="a3mf_8cpp_html_a7df3ac9ae506a44940711c1239690c17"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a7df3ac9ae506a44940711c1239690c17">MESH_TAG</a></div><div class="ttdeci">static constexpr const char * MESH_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:84</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae908c10d187eacecd4d88f9edb01df8a"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae908c10d187eacecd4d88f9edb01df8a">VERTICES_TAG</a></div><div class="ttdeci">static constexpr const char * VERTICES_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:85</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae9fb123f809579228399453e77157dd3"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae9fb123f809579228399453e77157dd3">TRIANGLE_TAG</a></div><div class="ttdeci">static constexpr const char * TRIANGLE_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:88</div></div>
<div class="ttc" id="a3mf_8cpp_html_aefc072810a4e2eeb374dde8c1b978549"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a></div><div class="ttdeci">static constexpr const char * OBJECT_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:83</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a6e62a062d8d8cc71b6b46fa5a07c6f41"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a6e62a062d8d8cc71b6b46fa5a07c6f41">FACE_PROPERTY_ATTR</a></div><div class="ttdeci">static constexpr const char * FACE_PROPERTY_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:259</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a434a249c20f16929f5e0db7b466acee0"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a434a249c20f16929f5e0db7b466acee0">Slic3r::_BBS_3MF_Exporter::m_share_mesh</a></div><div class="ttdeci">bool m_share_mesh</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5176</div></div>
<div class="ttc" id="aminilzo_8c_html_a663904b84a331ea80889b1fe760e2bf6"><div class="ttname"><a href="../../da/d74/minilzo_8c.html#a663904b84a331ea80889b1fe760e2bf6">memcpy</a></div><div class="ttdeci">#define memcpy(a, b, c)</div><div class="ttdef"><b>Definition</b> minilzo.c:3451</div></div>
<div class="ttc" id="aminiz_8c_html_ab89d8936d177baba8f06eac7b618a6dc"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_staged_data(mz_zip_writer_staged_context *pContext, const char *pRead_buf, size_t n)</div><div class="ttdef"><b>Definition</b> miniz.c:6858</div></div>
<div class="ttc" id="anamespace_slic3r_html_a019877dab3809194b223fd0948608900"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a019877dab3809194b223fd0948608900">Slic3r::Vec3i</a></div><div class="ttdeci">Eigen::Matrix&lt; int, 3, 1, Eigen::DontAlign &gt; Vec3i</div><div class="ttdef"><b>Definition</b> Point.hpp:35</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3cca6f85cc4fd0249d3b85aede67df2ea81026b86a15986d160e41a8e07a6e75d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3cca6f85cc4fd0249d3b85aede67df2ea81026b86a15986d160e41a8e07a6e75d">Slic3r::ModelVolumeType::MODEL_PART</a></div><div class="ttdeci">@ MODEL_PART</div></div>
<div class="ttc" id="anamespace_slic3r_html_a4e0a52bc52a09b283b7b06e2f0c272cc"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a4e0a52bc52a09b283b7b06e2f0c272cc">Slic3r::Vec3f</a></div><div class="ttdeci">Eigen::Matrix&lt; float, 3, 1, Eigen::DontAlign &gt; Vec3f</div><div class="ttdef"><b>Definition</b> Point.hpp:44</div></div>
<div class="ttc" id="anamespace_slic3r_html_a92b2e5013291a55201abda7303b67baf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a92b2e5013291a55201abda7303b67baf">Slic3r::f</a></div><div class="ttdeci">static double f(double x, double z_sin, double z_cos, bool vertical, bool flip)</div><div class="ttdef"><b>Definition</b> FillGyroid.cpp:12</div></div>
<div class="ttc" id="astructindexed__triangle__set_html"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html">indexed_triangle_set</a></div><div class="ttdef"><b>Definition</b> stl.h:215</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a7808aad75527ba0f646318872d0c339d"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a7808aad75527ba0f646318872d0c339d">indexed_triangle_set::properties</a></div><div class="ttdeci">std::vector&lt; FaceProperty &gt; properties</div><div class="ttdef"><b>Definition</b> stl.h:230</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a86d0433f7db7abf0f94c7e3d1302b09c"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a86d0433f7db7abf0f94c7e3d1302b09c">indexed_triangle_set::vertices</a></div><div class="ttdeci">std::vector&lt; stl_vertex &gt; vertices</div><div class="ttdef"><b>Definition</b> stl.h:229</div></div>
<div class="ttc" id="astructindexed__triangle__set_html_a8e9771f92d4834e98a5ed13f131d71f6"><div class="ttname"><a href="../../d0/df2/structindexed__triangle__set.html#a8e9771f92d4834e98a5ed13f131d71f6">indexed_triangle_set::indices</a></div><div class="ttdeci">std::vector&lt; stl_triangle_vertex_indices &gt; indices</div><div class="ttdef"><b>Definition</b> stl.h:228</div></div>
<div class="ttc" id="axmltok__impl_8inc_html_afc4babc1fc21e262a4e0b5478fa15bd6"><div class="ttname"><a href="../../d2/d86/xmltok__impl_8inc.html#afc4babc1fc21e262a4e0b5478fa15bd6">ptr</a></div><div class="ttdeci">static int PTRCALL PREFIX(scanPercent)(const ENCODING *enc const char * ptr</div><div class="ttdef"><b>Definition</b> xmltok_impl.inc:881</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00256">CUSTOM_SEAM_ATTR</a>, <a class="el" href="../../#l00255">CUSTOM_SUPPORTS_ATTR</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00259">FACE_PROPERTY_ATTR</a>, <a class="el" href="../../#l00228">indexed_triangle_set::indices</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00046">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l03451">memcpy</a>, <a class="el" href="../../#l00176">MESH_TAG</a>, <a class="el" href="../../#l00257">MMU_SEGMENTATION_ATTR</a>, <a class="el" href="../../#l06858">mz_zip_writer_add_staged_data()</a>, <a class="el" href="../../#l05155">Slic3r::_BBS_3MF_Exporter::ObjectData::object</a>, <a class="el" href="../../#l00175">OBJECT_TAG</a>, <a class="el" href="../../#l00230">indexed_triangle_set::properties</a>, <a class="el" href="../../#l00881">ptr</a>, <a class="el" href="../../#l00181">TRIANGLE_TAG</a>, <a class="el" href="../../#l00180">TRIANGLES_TAG</a>, <a class="el" href="../../#l00179">VERTEX_TAG</a>, <a class="el" href="../../#l00229">indexed_triangle_set::vertices</a>, <a class="el" href="../../#l00178">VERTICES_TAG</a>, and <a class="el" href="../../#l05160">Slic3r::_BBS_3MF_Exporter::ObjectData::volumes_objectID</a>.</p>
<div id="dynsection-12" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a513ded708e8008e49a6ee1853e4cd78a_cgraph.svg" width="100%" height="506"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a68d95b3efe8c797d038e853eb5ee56d0" name="a68d95b3efe8c797d038e853eb5ee56d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68d95b3efe8c797d038e853eb5ee56d0">&#9670;&#160;</a></span>_add_model_config_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_model_config_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>plate_data_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> &amp;&#160;</td>
          <td class="paramname"><em>objects_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>export_plate_idx</em> = <code>-1</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>save_gcode</em> = <code>true</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>use_loaded_id</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6890</span>    {</div>
<div class="line"><span class="lineno"> 6891</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 6892</span>        <span class="comment">// Store mesh transformation in full precision, as the volumes are stored transformed and they need to be transformed back</span></div>
<div class="line"><span class="lineno"> 6893</span>        <span class="comment">// when loaded as accurately as possible.</span></div>
<div class="line"><span class="lineno"> 6894</span>    stream &lt;&lt; std::setprecision(std::numeric_limits&lt;double&gt;::max_digits10);</div>
<div class="line"><span class="lineno"> 6895</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6896</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6897</span> </div>
<div class="line"><span class="lineno"> 6898</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a>)</div>
<div class="line"><span class="lineno"> 6899</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ObjectToObjectDataMap::value_type&amp; obj_metadata : objects_data) {</div>
<div class="line"><span class="lineno"> 6900</span>            <span class="keyword">auto</span> object_data = obj_metadata.second;</div>
<div class="line"><span class="lineno"> 6901</span>            <span class="keyword">const</span> ModelObject *obj = object_data.object;</div>
<div class="line"><span class="lineno"> 6902</span>            <span class="keywordflow">if</span> (obj != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 6903</span>                <span class="comment">// Output of instances count added because of github #3435, currently not used by PrusaSlicer</span></div>
<div class="line"><span class="lineno"> 6904</span>                <span class="comment">//stream &lt;&lt; &quot;  &lt;&quot;  &lt;&lt; OBJECT_TAG &lt;&lt; &quot; &quot; &lt;&lt; ID_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; obj_metadata.first &lt;&lt; &quot;\&quot; &quot; &lt;&lt; INSTANCESCOUNT_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; obj-&gt;instances.size() &lt;&lt; &quot;\&quot;&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 6905</span>                stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ad080ba0c82088d73a1eb15db3efcaa61">ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; object_data.object_id &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6906</span> </div>
<div class="line"><span class="lineno"> 6907</span>                <span class="comment">// stores object&#39;s name</span></div>
<div class="line"><span class="lineno"> 6908</span>                <span class="keywordflow">if</span> (!obj-&gt;name.empty())</div>
<div class="line"><span class="lineno"> 6909</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;name\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(obj-&gt;name) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6910</span> </div>
<div class="line"><span class="lineno"> 6911</span>                <span class="comment">//BBS: store object&#39;s module name</span></div>
<div class="line"><span class="lineno"> 6912</span>                <span class="keywordflow">if</span> (!obj-&gt;module_name.empty())</div>
<div class="line"><span class="lineno"> 6913</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;module\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(obj-&gt;module_name) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6914</span> </div>
<div class="line"><span class="lineno"> 6915</span>                <span class="comment">// stores object&#39;s config data</span></div>
<div class="line"><span class="lineno"> 6916</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; key : obj-&gt;config.keys()) {</div>
<div class="line"><span class="lineno"> 6917</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d">key</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; obj-&gt;config.opt_serialize(key) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6918</span>                }</div>
<div class="line"><span class="lineno"> 6919</span> </div>
<div class="line"><span class="lineno"> 6920</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelVolume* volume : obj_metadata.second.<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>-&gt;volumes) {</div>
<div class="line"><span class="lineno"> 6921</span>                    <span class="keywordflow">if</span> (volume != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 6922</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37a7177b9445f5e20f346770cfb0bb29">VolumeToObjectIDMap</a>&amp; objectIDs = obj_metadata.second.volumes_objectID;</div>
<div class="line"><span class="lineno"> 6923</span>                        VolumeToObjectIDMap::const_iterator it = objectIDs.find(volume);</div>
<div class="line"><span class="lineno"> 6924</span>                        <span class="keywordflow">if</span> (it != objectIDs.end()) {</div>
<div class="line"><span class="lineno"> 6925</span>                            <span class="comment">// stores volume&#39;s offsets</span></div>
<div class="line"><span class="lineno"> 6926</span>                            stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3c266a131d4f3e121b1cef2e1f894e78">PART_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6927</span>                            <span class="comment">//stream &lt;&lt; FIRST_TRIANGLE_ID_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; it-&gt;second.first_triangle_id &lt;&lt; &quot;\&quot; &quot;;</span></div>
<div class="line"><span class="lineno"> 6928</span>                            <span class="comment">//stream &lt;&lt; LAST_TRIANGLE_ID_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; it-&gt;second.last_triangle_id &lt;&lt; &quot;\&quot; &quot;;</span></div>
<div class="line"><span class="lineno"> 6929</span>                            <span class="keywordtype">int</span> volume_id = it-&gt;second;</div>
<div class="line"><span class="lineno"> 6930</span>                            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a434a249c20f16929f5e0db7b466acee0">m_share_mesh</a> &amp;&amp; volume_id == 0)</div>
<div class="line"><span class="lineno"> 6931</span>                                volume_id = <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a702e3dbabc13a3a6531087d2f038412b">m_volume_paths</a>.find(volume)-&gt;second.second;</div>
<div class="line"><span class="lineno"> 6932</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ad080ba0c82088d73a1eb15db3efcaa61">ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; volume_id &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6933</span> </div>
<div class="line"><span class="lineno"> 6934</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a5d3a16c4446719e58e2a8477074eb490">SUBTYPE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../d0/d02/class_slic3r_1_1_model_volume.html#a431232754900ae33324150c31146361e">ModelVolume::type_to_string</a>(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;type()) &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6935</span>                            <span class="comment">//stream &lt;&lt; &quot;    &lt;&quot; &lt;&lt; PART_TAG &lt;&lt; &quot; &quot; &lt;&lt; ID_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; it-&gt;second &lt;&lt; &quot;\&quot; &quot; &lt;&lt; SUBTYPE_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; ModelVolume::type_to_string(volume-&gt;type()) &lt;&lt; &quot;\&quot;&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 6936</span> </div>
<div class="line"><span class="lineno"> 6937</span>                            <span class="comment">// stores volume&#39;s name</span></div>
<div class="line"><span class="lineno"> 6938</span>                            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;name.empty())</div>
<div class="line"><span class="lineno"> 6939</span>                                stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0d925420cd93b1f5c4ade7ad0928bbec">NAME_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;name) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6940</span>                                <span class="comment">//stream &lt;&lt; &quot;      &lt;&quot; &lt;&lt; METADATA_TAG &lt;&lt; &quot; &quot; &lt;&lt; KEY_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; NAME_KEY &lt;&lt; &quot;\&quot; &quot; &lt;&lt; VALUE_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; xml_escape(volume-&gt;name) &lt;&lt; &quot;\&quot;/&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 6941</span> </div>
<div class="line"><span class="lineno"> 6942</span>                            <span class="comment">// stores volume&#39;s modifier field (legacy, to support old slicers)</span></div>
<div class="line"><span class="lineno"> 6943</span>                            <span class="comment">/*if (volume-&gt;is_modifier())</span></div>
<div class="line"><span class="lineno"> 6944</span><span class="comment">                                stream &lt;&lt; &quot;      &lt;&quot; &lt;&lt; METADATA_TAG &lt;&lt; &quot; &quot; &lt;&lt; TYPE_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; PART_TYPE &lt;&lt; &quot;\&quot; &quot; &lt;&lt; KEY_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; MODIFIER_KEY &lt;&lt; &quot;\&quot; &quot; &lt;&lt; VALUE_ATTR &lt;&lt; &quot;=\&quot;1\&quot;/&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 6945</span><span class="comment">                            // stores volume&#39;s type (overrides the modifier field above)</span></div>
<div class="line"><span class="lineno"> 6946</span><span class="comment">                            stream &lt;&lt; &quot;      &lt;&quot; &lt;&lt; METADATA_TAG &lt;&lt; &quot; &quot; &lt;&lt; TYPE_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; PART_TYPE &lt;&lt; &quot;\&quot; &quot; &lt;&lt; KEY_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; PART_TYPE_KEY &lt;&lt; &quot;\&quot; &quot; &lt;&lt;</span></div>
<div class="line"><span class="lineno"> 6947</span><span class="comment">                                VALUE_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; ModelVolume::type_to_string(volume-&gt;type()) &lt;&lt; &quot;\&quot;/&gt;\n&quot;;*/</span></div>
<div class="line"><span class="lineno"> 6948</span> </div>
<div class="line"><span class="lineno"> 6949</span>                            <span class="comment">// stores volume&#39;s local matrix</span></div>
<div class="line"><span class="lineno"> 6950</span>                            stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ac23888c316ec3ce5cac25a89cdf714d3">MATRIX_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6951</span>                            <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> matrix = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;get_matrix() * <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.transform.get_matrix();</div>
<div class="line"><span class="lineno"> 6952</span>                            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> r = 0; r &lt; 4; ++r) {</div>
<div class="line"><span class="lineno"> 6953</span>                                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> c = 0; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt; 4; ++<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>) {</div>
<div class="line"><span class="lineno"> 6954</span>                                    stream &lt;&lt; matrix(r, c);</div>
<div class="line"><span class="lineno"> 6955</span>                                    <span class="keywordflow">if</span> (r != 3 || c != 3)</div>
<div class="line"><span class="lineno"> 6956</span>                                        stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6957</span>                                }</div>
<div class="line"><span class="lineno"> 6958</span>                            }</div>
<div class="line"><span class="lineno"> 6959</span>                            stream &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6960</span> </div>
<div class="line"><span class="lineno"> 6961</span>                            <span class="comment">// stores volume&#39;s source data</span></div>
<div class="line"><span class="lineno"> 6962</span>                            {</div>
<div class="line"><span class="lineno"> 6963</span>                                std::string input_file = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad34ccbefd8eca0765b07c77b7091deba">m_fullpath_sources</a> ? <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.input_file : <a class="code hl_namespace" href="../../d4/da9/namespaceboost.html">boost</a>::filesystem::path(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.input_file).filename().<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985ab45cffe084dd3d20d928bee85e7b0f21">string</a>());</div>
<div class="line"><span class="lineno"> 6964</span>                                <span class="comment">//std::string prefix = std::string(&quot;      &lt;&quot;) + METADATA_TAG + &quot; &quot; + KEY_ATTR + &quot;=\&quot;&quot;;</span></div>
<div class="line"><span class="lineno"> 6965</span>                                std::string <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> = std::string(<span class="stringliteral">&quot;      &lt;&quot;</span>) + <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> + <span class="stringliteral">&quot; &quot;</span> + <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> + <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6966</span>                                <span class="keywordflow">if</span> (! <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.input_file.empty()) {</div>
<div class="line"><span class="lineno"> 6967</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ac71b871f35aae97d0bed5f72a6acd39a">SOURCE_FILE_KEY</a>      &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; input_file &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6968</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a762bc29f9ee3a8bf1708b9c42d75c915">SOURCE_OBJECT_ID_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.object_idx &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6969</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a041643ab1e28df90a90e19567bcb3f14">SOURCE_VOLUME_ID_KEY</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.volume_idx &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6970</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a5768cbf99ff140b4bf6f158ab6be368f">SOURCE_OFFSET_X_KEY</a>  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.mesh_offset(0) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6971</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ab0f6f918a021aa5e73a248137b95a224">SOURCE_OFFSET_Y_KEY</a>  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.mesh_offset(1) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6972</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a517ada2546c0c81867c96a9d4eec42c1">SOURCE_OFFSET_Z_KEY</a>  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.mesh_offset(2) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6973</span>                                }</div>
<div class="line"><span class="lineno"> 6974</span>                                assert(! <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_inches || ! <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_meters);</div>
<div class="line"><span class="lineno"> 6975</span>                                <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_inches)</div>
<div class="line"><span class="lineno"> 6976</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a596b105d534bd94271f12540a13a3cec">SOURCE_IN_INCHES</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;1\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6977</span>                                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;source.is_converted_from_meters)</div>
<div class="line"><span class="lineno"> 6978</span>                                    stream &lt;&lt; <a class="code hl_struct" href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0ecbd87693666235e4edfceabe9bdf05">SOURCE_IN_METERS</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;1\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6979</span>                            }</div>
<div class="line"><span class="lineno"> 6980</span> </div>
<div class="line"><span class="lineno"> 6981</span>                            <span class="comment">// stores volume&#39;s config data</span></div>
<div class="line"><span class="lineno"> 6982</span>                            <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; key : <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;config.keys()) {</div>
<div class="line"><span class="lineno"> 6983</span>                                stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>&lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d">key</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;config.opt_serialize(key) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6984</span>                            }</div>
<div class="line"><span class="lineno"> 6985</span> </div>
<div class="line"><span class="lineno"> 6986</span>                            <span class="keyword">const</span> TextInfo &amp;text_info = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;get_text_info();</div>
<div class="line"><span class="lineno"> 6987</span>                            <span class="keywordflow">if</span> (!text_info.m_text.empty())</div>
<div class="line"><span class="lineno"> 6988</span>                                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a76226f3704a9125643d33b3b72e70290">_add_text_info_to_archive</a>(stream, text_info);</div>
<div class="line"><span class="lineno"> 6989</span> </div>
<div class="line"><span class="lineno"> 6990</span>                            <span class="comment">// stores mesh&#39;s statistics</span></div>
<div class="line"><span class="lineno"> 6991</span>                            <span class="keyword">const</span> RepairedMeshErrors&amp; stats = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh().stats().repaired_errors;</div>
<div class="line"><span class="lineno"> 6992</span>                            stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a0df4badb014f2eb7df55947ff32b3cff">MESH_STAT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6993</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a471a7df237939b038c72201cc381a32e">MESH_STAT_EDGES_FIXED</a>        &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.edges_fixed        &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6994</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#af13168c27b357c0ba020dd827bc1f71e">MESH_STAT_DEGENERATED_FACETS</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.degenerate_facets  &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6995</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9b49bf713a30a58a97532ed2ff759d2b">MESH_STAT_FACETS_REMOVED</a>     &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.facets_removed     &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6996</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8a6c599d6224aa8820bce737a0668ab4">MESH_STAT_FACETS_RESERVED</a>    &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.facets_reversed    &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6997</span>                            stream &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a0715d32dabcf3ddbae18cfd933feca91">MESH_STAT_BACKWARDS_EDGES</a>    &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; stats.backwards_edges    &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6998</span> </div>
<div class="line"><span class="lineno"> 6999</span>                            stream &lt;&lt; <span class="stringliteral">&quot;    &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3c266a131d4f3e121b1cef2e1f894e78">PART_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7000</span>                        }</div>
<div class="line"><span class="lineno"> 7001</span>                    }</div>
<div class="line"><span class="lineno"> 7002</span>                }</div>
<div class="line"><span class="lineno"> 7003</span> </div>
<div class="line"><span class="lineno"> 7004</span>                stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7005</span>            }</div>
<div class="line"><span class="lineno"> 7006</span>        }</div>
<div class="line"><span class="lineno"> 7007</span> </div>
<div class="line"><span class="lineno"> 7008</span>        <span class="comment">//BBS: store plate related logic</span></div>
<div class="line"><span class="lineno"> 7009</span>        std::vector&lt;std::string&gt; gcode_paths;</div>
<div class="line"><span class="lineno"> 7010</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)plate_data_list.size(); ++i)</div>
<div class="line"><span class="lineno"> 7011</span>        {</div>
<div class="line"><span class="lineno"> 7012</span>            PlateData* plate_data = plate_data_list[i];</div>
<div class="line"><span class="lineno"> 7013</span>            <span class="keywordtype">int</span> instance_size = plate_data-&gt;objects_and_instances.size();</div>
<div class="line"><span class="lineno"> 7014</span> </div>
<div class="line"><span class="lineno"> 7015</span>            <span class="keywordflow">if</span> (plate_data != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 7016</span>                stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a71a4e77defa7be83e6c81554f84dea17">PLATE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7017</span>                <span class="comment">//plate index</span></div>
<div class="line"><span class="lineno"> 7018</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a036f95b2dfab3829ed1406294d2d741e">PLATERID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; plate_data-&gt;plate_index + 1 &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7019</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a33b327530de5ccc9728732b2ef1873c3">PLATER_NAME_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(plate_data-&gt;plate_name) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7020</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#af9eb2958ce661e6fca3544c9ac2342fc">LOCK_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha&lt;&lt; plate_data-&gt;locked&lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7021</span>                ConfigOption* bed_type_opt = plate_data-&gt;config.option(<span class="stringliteral">&quot;curr_bed_type&quot;</span>);</div>
<div class="line"><span class="lineno"> 7022</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a5b3d6e75240949563c3ba9c76c2a47c0">t_config_enum_names</a> bed_type_names = <a class="code hl_function" href="../../d0/dd9/class_slic3r_1_1_config_option_enum.html#a07114ed264c8ec42facc44fe832851c6">ConfigOptionEnum&lt;BedType&gt;::get_enum_names</a>();</div>
<div class="line"><span class="lineno"> 7023</span>                <span class="keywordflow">if</span> (bed_type_opt != <span class="keyword">nullptr</span> &amp;&amp; bed_type_names.size() &gt; bed_type_opt-&gt;getInt())</div>
<div class="line"><span class="lineno"> 7024</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a8a62cf16183744a4e4ecbaeeaf797db3">BED_TYPE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; bed_type_names[bed_type_opt-&gt;getInt()] &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7025</span> </div>
<div class="line"><span class="lineno"> 7026</span>                ConfigOption* print_sequence_opt = plate_data-&gt;config.option(<span class="stringliteral">&quot;print_sequence&quot;</span>);</div>
<div class="line"><span class="lineno"> 7027</span>                <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a5b3d6e75240949563c3ba9c76c2a47c0">t_config_enum_names</a> print_sequence_names = <a class="code hl_function" href="../../d0/dd9/class_slic3r_1_1_config_option_enum.html#a07114ed264c8ec42facc44fe832851c6">ConfigOptionEnum&lt;PrintSequence&gt;::get_enum_names</a>();</div>
<div class="line"><span class="lineno"> 7028</span>                <span class="keywordflow">if</span> (print_sequence_opt != <span class="keyword">nullptr</span> &amp;&amp; print_sequence_names.size() &gt; print_sequence_opt-&gt;getInt())</div>
<div class="line"><span class="lineno"> 7029</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a4305f5b5541ad9c652b97a2cdd54bc56">PRINT_SEQUENCE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; print_sequence_names[print_sequence_opt-&gt;getInt()] &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7030</span> </div>
<div class="line"><span class="lineno"> 7031</span>                <span class="keywordflow">if</span> (save_gcode)</div>
<div class="line"><span class="lineno"> 7032</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a2b2a4a82bf2be4b26658f8d80e15bb33">GCODE_FILE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(plate_data-&gt;gcode_file) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7033</span>                <span class="keywordflow">if</span> (!plate_data-&gt;gcode_file.empty()) {</div>
<div class="line"><span class="lineno"> 7034</span>                    gcode_paths.push_back(plate_data-&gt;gcode_file);</div>
<div class="line"><span class="lineno"> 7035</span>                }</div>
<div class="line"><span class="lineno"> 7036</span>                <span class="keywordflow">if</span> (plate_data-&gt;plate_thumbnail.is_valid()) {</div>
<div class="line"><span class="lineno"> 7037</span>                    std::string thumbnail_file_in_3mf = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a165fb7bde340ae86c7d0ee65d1ccd6e9">THUMBNAIL_FILE_FORMAT</a>) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 7038</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a2a6f54f4af5b7c199d28aa0304d02431">THUMBNAIL_FILE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha &lt;&lt; thumbnail_file_in_3mf &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7039</span>                }</div>
<div class="line"><span class="lineno"> 7040</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!plate_data-&gt;thumbnail_file.empty() &amp;&amp; (boost::filesystem::exists(plate_data-&gt;thumbnail_file))){</div>
<div class="line"><span class="lineno"> 7041</span>                    std::string thumbnail_file_in_3mf = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a165fb7bde340ae86c7d0ee65d1ccd6e9">THUMBNAIL_FILE_FORMAT</a>) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 7042</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a2a6f54f4af5b7c199d28aa0304d02431">THUMBNAIL_FILE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha &lt;&lt; thumbnail_file_in_3mf &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7043</span>                }</div>
<div class="line"><span class="lineno"> 7044</span> </div>
<div class="line"><span class="lineno"> 7045</span>                <span class="keywordflow">if</span> (!plate_data-&gt;top_file.empty()) {</div>
<div class="line"><span class="lineno"> 7046</span>                    std::string top_file_in_3mf = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a98f893346d9fd4e6804d571be760c734">TOP_FILE_FORMAT</a>) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 7047</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a504ef2476bdc9940f664d6cd24ebd636">TOP_FILE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha &lt;&lt; top_file_in_3mf &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7048</span>                }</div>
<div class="line"><span class="lineno"> 7049</span> </div>
<div class="line"><span class="lineno"> 7050</span>                <span class="keywordflow">if</span> (!plate_data-&gt;pick_file.empty()) {</div>
<div class="line"><span class="lineno"> 7051</span>                    std::string pick_file_in_3mf = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a958fd1028ba6f5a7773760f68221b2f3">PICK_FILE_FORMAT</a>) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 7052</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a27717223d9dfe95474f743d558be9679">PICK_FILE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha &lt;&lt; pick_file_in_3mf &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7053</span>                }</div>
<div class="line"><span class="lineno"> 7054</span> </div>
<div class="line"><span class="lineno"> 7055</span>                <span class="comment">/*if (!plate_data-&gt;pattern_file.empty()) {</span></div>
<div class="line"><span class="lineno"> 7056</span><span class="comment">                    std::string pattern_file_in_3mf = (boost::format(PATTERN_FILE_FORMAT) % (plate_data-&gt;plate_index + 1)).str();</span></div>
<div class="line"><span class="lineno"> 7057</span><span class="comment">                    stream &lt;&lt; &quot;    &lt;&quot; &lt;&lt; METADATA_TAG &lt;&lt; &quot; &quot; &lt;&lt; KEY_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; PATTERN_FILE_ATTR &lt;&lt; &quot;\&quot; &quot; &lt;&lt; VALUE_ATTR &lt;&lt; &quot;=\&quot;&quot; &lt;&lt; std::boolalpha &lt;&lt; pattern_file_in_3mf &lt;&lt; &quot;\&quot;/&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 7058</span><span class="comment">                }*/</span></div>
<div class="line"><span class="lineno"> 7059</span>                <span class="keywordflow">if</span> (!plate_data-&gt;pattern_bbox_file.empty()) {</div>
<div class="line"><span class="lineno"> 7060</span>                    std::string pattern_bbox_file_in_3mf = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a6fe2bd422373beaa27f80984d2686ce2">PATTERN_CONFIG_FILE_FORMAT</a>) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 7061</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a004242fd6267f0189611eddc6fee9fc6">PATTERN_BBOX_FILE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha &lt;&lt; pattern_bbox_file_in_3mf &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7062</span>                }</div>
<div class="line"><span class="lineno"> 7063</span> </div>
<div class="line"><span class="lineno"> 7064</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a> &amp;&amp; instance_size &gt; 0)</div>
<div class="line"><span class="lineno"> 7065</span>                {</div>
<div class="line"><span class="lineno"> 7066</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> j = 0; j &lt; instance_size; ++j)</div>
<div class="line"><span class="lineno"> 7067</span>                    {</div>
<div class="line"><span class="lineno"> 7068</span>                        stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3e1e6ab208fd3e7ad4e7e0d980fe1804">INSTANCE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7069</span>                        <span class="keywordtype">int</span> obj_id = plate_data-&gt;objects_and_instances[j].first;</div>
<div class="line"><span class="lineno"> 7070</span>                        <span class="keywordtype">int</span> inst_id = plate_data-&gt;objects_and_instances[j].second;</div>
<div class="line"><span class="lineno"> 7071</span>                        <span class="keywordtype">int</span> identify_id = 0;</div>
<div class="line"><span class="lineno"> 7072</span>                        ModelObject* obj = <a class="code hl_define" href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 7073</span>                        ModelInstance* inst = <a class="code hl_define" href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 7074</span>                        <span class="keywordflow">if</span> (obj_id &gt;= model.objects.size()) {</div>
<div class="line"><span class="lineno"> 7075</span>                            BOOST_LOG_TRIVIAL(warning) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;invalid object id %1%\n&quot;</span>)%obj_id;</div>
<div class="line"><span class="lineno"> 7076</span>                        }</div>
<div class="line"><span class="lineno"> 7077</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 7078</span>                            obj =  model.objects[obj_id];</div>
<div class="line"><span class="lineno"> 7079</span> </div>
<div class="line"><span class="lineno"> 7080</span>                        <span class="keywordflow">if</span> (obj &amp;&amp; (inst_id &gt;= obj-&gt;instances.size())) {</div>
<div class="line"><span class="lineno"> 7081</span>                            BOOST_LOG_TRIVIAL(warning) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;invalid instance id %1%\n&quot;</span>)%inst_id;</div>
<div class="line"><span class="lineno"> 7082</span>                        }</div>
<div class="line"><span class="lineno"> 7083</span>                        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (obj){</div>
<div class="line"><span class="lineno"> 7084</span>                            inst =  obj-&gt;instances[inst_id];</div>
<div class="line"><span class="lineno"> 7085</span>                            <span class="keywordflow">if</span> (use_loaded_id &amp;&amp; (inst-&gt;loaded_id &gt; 0))</div>
<div class="line"><span class="lineno"> 7086</span>                                identify_id = inst-&gt;loaded_id;</div>
<div class="line"><span class="lineno"> 7087</span>                            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 7088</span>                                identify_id = inst-&gt;id().id;</div>
<div class="line"><span class="lineno"> 7089</span>                        }</div>
<div class="line"><span class="lineno"> 7090</span>                        obj_id = objects_data.find(obj)-&gt;second.object_id;</div>
<div class="line"><span class="lineno"> 7091</span> </div>
<div class="line"><span class="lineno"> 7092</span>                        stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3855e475c1ce68ba090653a2ae61072f">OBJECT_ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; obj_id &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7093</span>                        stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a7b1ac1c5029405d67e28ca045bda8e1c">INSTANCEID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; inst_id &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7094</span>                        stream &lt;&lt; <span class="stringliteral">&quot;      &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#adabfc0d888146ccafdb1f4b2bcf51d71">IDENTIFYID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; identify_id &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7095</span>                        stream &lt;&lt; <span class="stringliteral">&quot;    &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3e1e6ab208fd3e7ad4e7e0d980fe1804">INSTANCE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7096</span>                    }</div>
<div class="line"><span class="lineno"> 7097</span>                }</div>
<div class="line"><span class="lineno"> 7098</span>                stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a71a4e77defa7be83e6c81554f84dea17">PLATE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7099</span>            }</div>
<div class="line"><span class="lineno"> 7100</span>        }</div>
<div class="line"><span class="lineno"> 7101</span> </div>
<div class="line"><span class="lineno"> 7102</span>        <span class="comment">// write model rels</span></div>
<div class="line"><span class="lineno"> 7103</span>        <span class="keywordflow">if</span> (save_gcode)</div>
<div class="line"><span class="lineno"> 7104</span>            <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a4933ea38f3dae4574aba8ae00c7d09d3">_add_relationships_file_to_archive</a>(archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aeab905edc5d9f2f09fd18983610352ac">BBS_MODEL_CONFIG_RELS_FILE</a>, gcode_paths, {<span class="stringliteral">&quot;http://schemas.bambulab.com/package/2021/gcode&quot;</span>}, <a class="code hl_class" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">Slic3r::PackingTemporaryData</a>(), export_plate_idx);</div>
<div class="line"><span class="lineno"> 7105</span> </div>
<div class="line"><span class="lineno"> 7106</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a>) {</div>
<div class="line"><span class="lineno"> 7107</span>        <span class="comment">//BBS: store assemble related info</span></div>
<div class="line"><span class="lineno"> 7108</span>        stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#af9c6d25463e30bce7035727637881ad6">ASSEMBLE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7109</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> ObjectToObjectDataMap::value_type&amp; obj_metadata : objects_data) {</div>
<div class="line"><span class="lineno"> 7110</span>            <span class="keyword">auto</span> object_data = obj_metadata.second;</div>
<div class="line"><span class="lineno"> 7111</span>            <span class="keyword">const</span> ModelObject* obj = object_data.object;</div>
<div class="line"><span class="lineno"> 7112</span>            <span class="keywordflow">if</span> (obj != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 7113</span>                <span class="keywordflow">for</span> (<span class="keywordtype">int</span> instance_idx = 0; instance_idx &lt; obj-&gt;instances.size(); ++instance_idx) {</div>
<div class="line"><span class="lineno"> 7114</span>                    <span class="keywordflow">if</span> (obj-&gt;instances[instance_idx]-&gt;is_assemble_initialized()) {</div>
<div class="line"><span class="lineno"> 7115</span>                        stream &lt;&lt; <span class="stringliteral">&quot;   &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a61f5032584c07233ea0e6a956a84e260">ASSEMBLE_ITEM_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a3855e475c1ce68ba090653a2ae61072f">OBJECT_ID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; object_data.object_id &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 7116</span>                        stream &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a7b1ac1c5029405d67e28ca045bda8e1c">INSTANCEID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; instance_idx &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae6c48a6d214926be17133c990969c642">TRANSFORM_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 7117</span>                            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> c = 0; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt; 4; ++<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>) {</div>
<div class="line"><span class="lineno"> 7118</span>                                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> r = 0; r &lt; 3; ++r) {</div>
<div class="line"><span class="lineno"> 7119</span>                                    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> assemble_trans = obj-&gt;instances[instance_idx]-&gt;get_assemble_transformation().get_matrix();</div>
<div class="line"><span class="lineno"> 7120</span>                                    stream &lt;&lt; assemble_trans(r, c);</div>
<div class="line"><span class="lineno"> 7121</span>                                    <span class="keywordflow">if</span> (r != 2 || c != 3)</div>
<div class="line"><span class="lineno"> 7122</span>                                        stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 7123</span>                                }</div>
<div class="line"><span class="lineno"> 7124</span>                            }</div>
<div class="line"><span class="lineno"> 7125</span> </div>
<div class="line"><span class="lineno"> 7126</span>                        stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 7127</span> </div>
<div class="line"><span class="lineno"> 7128</span>                        stream &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ac7088ea68df07ff524bb2958ae5d7e96">OFFSET_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 7129</span>                        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Vec3d</a> ofs2ass = obj-&gt;instances[instance_idx]-&gt;get_offset_to_assembly();</div>
<div class="line"><span class="lineno"> 7130</span>                        stream &lt;&lt; ofs2ass(0) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; ofs2ass(1) &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; ofs2ass(2);</div>
<div class="line"><span class="lineno"> 7131</span>                    stream &lt;&lt; <span class="stringliteral">&quot;\&quot; /&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7132</span>                    }</div>
<div class="line"><span class="lineno"> 7133</span>                }</div>
<div class="line"><span class="lineno"> 7134</span>            }</div>
<div class="line"><span class="lineno"> 7135</span>        }</div>
<div class="line"><span class="lineno"> 7136</span>        stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#af9c6d25463e30bce7035727637881ad6">ASSEMBLE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7137</span>        }</div>
<div class="line"><span class="lineno"> 7138</span> </div>
<div class="line"><span class="lineno"> 7139</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7140</span> </div>
<div class="line"><span class="lineno"> 7141</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = stream.str();</div>
<div class="line"><span class="lineno"> 7142</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a35a01e6c3a7ee7a9c22acd05f75e31ed">BBS_MODEL_CONFIG_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 7143</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;Unable to add model config file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 7144</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add model config file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 7145</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7146</span>        }</div>
<div class="line"><span class="lineno"> 7147</span> </div>
<div class="line"><span class="lineno"> 7148</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7149</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a041643ab1e28df90a90e19567bcb3f14"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a041643ab1e28df90a90e19567bcb3f14">SOURCE_VOLUME_ID_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_VOLUME_ID_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:130</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0715d32dabcf3ddbae18cfd933feca91"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0715d32dabcf3ddbae18cfd933feca91">MESH_STAT_BACKWARDS_EDGES</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_BACKWARDS_EDGES</div><div class="ttdef"><b>Definition</b> 3mf.cpp:141</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0d925420cd93b1f5c4ade7ad0928bbec"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0d925420cd93b1f5c4ade7ad0928bbec">NAME_KEY</a></div><div class="ttdeci">static constexpr const char * NAME_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:124</div></div>
<div class="ttc" id="a3mf_8cpp_html_a0ecbd87693666235e4edfceabe9bdf05"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a0ecbd87693666235e4edfceabe9bdf05">SOURCE_IN_METERS</a></div><div class="ttdeci">static constexpr const char * SOURCE_IN_METERS</div><div class="ttdef"><b>Definition</b> 3mf.cpp:135</div></div>
<div class="ttc" id="a3mf_8cpp_html_a471a7df237939b038c72201cc381a32e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a471a7df237939b038c72201cc381a32e">MESH_STAT_EDGES_FIXED</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_EDGES_FIXED</div><div class="ttdef"><b>Definition</b> 3mf.cpp:137</div></div>
<div class="ttc" id="a3mf_8cpp_html_a517ada2546c0c81867c96a9d4eec42c1"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a517ada2546c0c81867c96a9d4eec42c1">SOURCE_OFFSET_Z_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OFFSET_Z_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:133</div></div>
<div class="ttc" id="a3mf_8cpp_html_a5768cbf99ff140b4bf6f158ab6be368f"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a5768cbf99ff140b4bf6f158ab6be368f">SOURCE_OFFSET_X_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OFFSET_X_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:131</div></div>
<div class="ttc" id="a3mf_8cpp_html_a596b105d534bd94271f12540a13a3cec"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a596b105d534bd94271f12540a13a3cec">SOURCE_IN_INCHES</a></div><div class="ttdeci">static constexpr const char * SOURCE_IN_INCHES</div><div class="ttdef"><b>Definition</b> 3mf.cpp:134</div></div>
<div class="ttc" id="a3mf_8cpp_html_a762bc29f9ee3a8bf1708b9c42d75c915"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a762bc29f9ee3a8bf1708b9c42d75c915">SOURCE_OBJECT_ID_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OBJECT_ID_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:129</div></div>
<div class="ttc" id="a3mf_8cpp_html_a8a6c599d6224aa8820bce737a0668ab4"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a8a6c599d6224aa8820bce737a0668ab4">MESH_STAT_FACETS_RESERVED</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_FACETS_RESERVED</div><div class="ttdef"><b>Definition</b> 3mf.cpp:140</div></div>
<div class="ttc" id="a3mf_8cpp_html_a8ede86d23de41af4793f4b1fd61d3fbf"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a></div><div class="ttdeci">static constexpr const char * CONFIG_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:95</div></div>
<div class="ttc" id="a3mf_8cpp_html_a9b49bf713a30a58a97532ed2ff759d2b"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a9b49bf713a30a58a97532ed2ff759d2b">MESH_STAT_FACETS_REMOVED</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_FACETS_REMOVED</div><div class="ttdef"><b>Definition</b> 3mf.cpp:139</div></div>
<div class="ttc" id="a3mf_8cpp_html_aa1f3d37416a0d1184807707c0b636c06"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a></div><div class="ttdeci">static constexpr const char * VALUE_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:117</div></div>
<div class="ttc" id="a3mf_8cpp_html_ab0f6f918a021aa5e73a248137b95a224"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ab0f6f918a021aa5e73a248137b95a224">SOURCE_OFFSET_Y_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_OFFSET_Y_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:132</div></div>
<div class="ttc" id="a3mf_8cpp_html_ac23888c316ec3ce5cac25a89cdf714d3"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ac23888c316ec3ce5cac25a89cdf714d3">MATRIX_KEY</a></div><div class="ttdeci">static constexpr const char * MATRIX_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:127</div></div>
<div class="ttc" id="a3mf_8cpp_html_ac71b871f35aae97d0bed5f72a6acd39a"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ac71b871f35aae97d0bed5f72a6acd39a">SOURCE_FILE_KEY</a></div><div class="ttdeci">static constexpr const char * SOURCE_FILE_KEY</div><div class="ttdef"><b>Definition</b> 3mf.cpp:128</div></div>
<div class="ttc" id="a3mf_8cpp_html_ad080ba0c82088d73a1eb15db3efcaa61"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ad080ba0c82088d73a1eb15db3efcaa61">ID_ATTR</a></div><div class="ttdeci">static constexpr const char * ID_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:101</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae23d3300edaed696137c8293849777bb"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a></div><div class="ttdeci">static constexpr const char * KEY_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:116</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae8ef4e75baea760fe83ddc47cf15face"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a></div><div class="ttdeci">static constexpr const char * METADATA_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:93</div></div>
<div class="ttc" id="a3mf_8cpp_html_af13168c27b357c0ba020dd827bc1f71e"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#af13168c27b357c0ba020dd827bc1f71e">MESH_STAT_DEGENERATED_FACETS</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_DEGENERATED_FACETS</div><div class="ttdef"><b>Definition</b> 3mf.cpp:138</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a004242fd6267f0189611eddc6fee9fc6"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a004242fd6267f0189611eddc6fee9fc6">PATTERN_BBOX_FILE_ATTR</a></div><div class="ttdeci">static constexpr const char * PATTERN_BBOX_FILE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:274</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a036f95b2dfab3829ed1406294d2d741e"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a036f95b2dfab3829ed1406294d2d741e">PLATERID_ATTR</a></div><div class="ttdeci">static constexpr const char * PLATERID_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:278</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a0df4badb014f2eb7df55947ff32b3cff"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a0df4badb014f2eb7df55947ff32b3cff">MESH_STAT_TAG</a></div><div class="ttdeci">static constexpr const char * MESH_STAT_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:177</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a27717223d9dfe95474f743d558be9679"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a27717223d9dfe95474f743d558be9679">PICK_FILE_ATTR</a></div><div class="ttdeci">static constexpr const char * PICK_FILE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:272</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a2a6f54f4af5b7c199d28aa0304d02431"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a2a6f54f4af5b7c199d28aa0304d02431">THUMBNAIL_FILE_ATTR</a></div><div class="ttdeci">static constexpr const char * THUMBNAIL_FILE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:270</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a2b2a4a82bf2be4b26658f8d80e15bb33"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a2b2a4a82bf2be4b26658f8d80e15bb33">GCODE_FILE_ATTR</a></div><div class="ttdeci">static constexpr const char * GCODE_FILE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:269</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a33b327530de5ccc9728732b2ef1873c3"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a33b327530de5ccc9728732b2ef1873c3">PLATER_NAME_ATTR</a></div><div class="ttdeci">static constexpr const char * PLATER_NAME_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:279</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a35a01e6c3a7ee7a9c22acd05f75e31ed"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a35a01e6c3a7ee7a9c22acd05f75e31ed">BBS_MODEL_CONFIG_FILE</a></div><div class="ttdeci">const std::string BBS_MODEL_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:152</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a3855e475c1ce68ba090653a2ae61072f"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a3855e475c1ce68ba090653a2ae61072f">OBJECT_ID_ATTR</a></div><div class="ttdeci">static constexpr const char * OBJECT_ID_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:275</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a3c266a131d4f3e121b1cef2e1f894e78"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a3c266a131d4f3e121b1cef2e1f894e78">PART_TAG</a></div><div class="ttdeci">static constexpr const char * PART_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:199</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a3e1e6ab208fd3e7ad4e7e0d980fe1804"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a3e1e6ab208fd3e7ad4e7e0d980fe1804">INSTANCE_TAG</a></div><div class="ttdeci">static constexpr const char * INSTANCE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:201</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a4305f5b5541ad9c652b97a2cdd54bc56"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a4305f5b5541ad9c652b97a2cdd54bc56">PRINT_SEQUENCE_ATTR</a></div><div class="ttdeci">static constexpr const char * PRINT_SEQUENCE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:268</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a504ef2476bdc9940f664d6cd24ebd636"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a504ef2476bdc9940f664d6cd24ebd636">TOP_FILE_ATTR</a></div><div class="ttdeci">static constexpr const char * TOP_FILE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:271</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a5d3a16c4446719e58e2a8477074eb490"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a5d3a16c4446719e58e2a8477074eb490">SUBTYPE_ATTR</a></div><div class="ttdeci">static constexpr const char * SUBTYPE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:265</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a61f5032584c07233ea0e6a956a84e260"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a61f5032584c07233ea0e6a956a84e260">ASSEMBLE_ITEM_TAG</a></div><div class="ttdeci">static constexpr const char * ASSEMBLE_ITEM_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:204</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a71a4e77defa7be83e6c81554f84dea17"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a71a4e77defa7be83e6c81554f84dea17">PLATE_TAG</a></div><div class="ttdeci">static constexpr const char * PLATE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:200</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a7b1ac1c5029405d67e28ca045bda8e1c"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a7b1ac1c5029405d67e28ca045bda8e1c">INSTANCEID_ATTR</a></div><div class="ttdeci">static constexpr const char * INSTANCEID_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:276</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a8a62cf16183744a4e4ecbaeeaf797db3"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a8a62cf16183744a4e4ecbaeeaf797db3">BED_TYPE_ATTR</a></div><div class="ttdeci">static constexpr const char * BED_TYPE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:267</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ac7088ea68df07ff524bb2958ae5d7e96"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ac7088ea68df07ff524bb2958ae5d7e96">OFFSET_ATTR</a></div><div class="ttdeci">static constexpr const char * OFFSET_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:252</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_adabfc0d888146ccafdb1f4b2bcf51d71"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#adabfc0d888146ccafdb1f4b2bcf51d71">IDENTIFYID_ATTR</a></div><div class="ttdeci">static constexpr const char * IDENTIFYID_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:277</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aeab905edc5d9f2f09fd18983610352ac"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aeab905edc5d9f2f09fd18983610352ac">BBS_MODEL_CONFIG_RELS_FILE</a></div><div class="ttdeci">const std::string BBS_MODEL_CONFIG_RELS_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:153</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_af9c6d25463e30bce7035727637881ad6"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#af9c6d25463e30bce7035727637881ad6">ASSEMBLE_TAG</a></div><div class="ttdeci">static constexpr const char * ASSEMBLE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:203</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_af9eb2958ce661e6fca3544c9ac2342fc"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#af9eb2958ce661e6fca3544c9ac2342fc">LOCK_ATTR</a></div><div class="ttdeci">static constexpr const char * LOCK_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:266</div></div>
<div class="ttc" id="abbs__3mf_8hpp_html_a165fb7bde340ae86c7d0ee65d1ccd6e9"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#a165fb7bde340ae86c7d0ee65d1ccd6e9">THUMBNAIL_FILE_FORMAT</a></div><div class="ttdeci">#define THUMBNAIL_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:18</div></div>
<div class="ttc" id="abbs__3mf_8hpp_html_a958fd1028ba6f5a7773760f68221b2f3"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#a958fd1028ba6f5a7773760f68221b2f3">PICK_FILE_FORMAT</a></div><div class="ttdeci">#define PICK_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:20</div></div>
<div class="ttc" id="abbs__3mf_8hpp_html_a98f893346d9fd4e6804d571be760c734"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#a98f893346d9fd4e6804d571be760c734">TOP_FILE_FORMAT</a></div><div class="ttdeci">#define TOP_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:19</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a37a7177b9445f5e20f346770cfb0bb29"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37a7177b9445f5e20f346770cfb0bb29">Slic3r::_BBS_3MF_Exporter::VolumeToObjectIDMap</a></div><div class="ttdeci">std::map&lt; const ModelVolume *, int &gt; VolumeToObjectIDMap</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5151</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a4933ea38f3dae4574aba8ae00c7d09d3"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a4933ea38f3dae4574aba8ae00c7d09d3">Slic3r::_BBS_3MF_Exporter::_add_relationships_file_to_archive</a></div><div class="ttdeci">bool _add_relationships_file_to_archive(mz_zip_archive &amp;archive, std::string const &amp;from={}, std::vector&lt; std::string &gt; const &amp;targets={}, std::vector&lt; std::string &gt; const &amp;types={}, PackingTemporaryData data=PackingTemporaryData(), int export_plate_idx=-1) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5891</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a702e3dbabc13a3a6531087d2f038412b"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a702e3dbabc13a3a6531087d2f038412b">Slic3r::_BBS_3MF_Exporter::m_volume_paths</a></div><div class="ttdeci">std::map&lt; ModelVolume const *, std::pair&lt; std::string, int &gt; &gt; m_volume_paths</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5180</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a8856bb149dc5ca68a79659031b0ed158"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">Slic3r::_BBS_3MF_Exporter::m_skip_model</a></div><div class="ttdeci">bool m_skip_model</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5173</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ad34ccbefd8eca0765b07c77b7091deba"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad34ccbefd8eca0765b07c77b7091deba">Slic3r::_BBS_3MF_Exporter::m_fullpath_sources</a></div><div class="ttdeci">bool m_fullpath_sources</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5166</div></div>
<div class="ttc" id="aclass_slic3r_1_1_config_option_enum_html_a07114ed264c8ec42facc44fe832851c6"><div class="ttname"><a href="../../d0/dd9/class_slic3r_1_1_config_option_enum.html#a07114ed264c8ec42facc44fe832851c6">Slic3r::ConfigOptionEnum::get_enum_names</a></div><div class="ttdeci">static const t_config_enum_names &amp; get_enum_names()</div></div>
<div class="ttc" id="aclass_slic3r_1_1_model_volume_html_a431232754900ae33324150c31146361e"><div class="ttname"><a href="../../d0/d02/class_slic3r_1_1_model_volume.html#a431232754900ae33324150c31146361e">Slic3r::ModelVolume::type_to_string</a></div><div class="ttdeci">static std::string type_to_string(const ModelVolumeType t)</div><div class="ttdef"><b>Definition</b> Model.cpp:2995</div></div>
<div class="ttc" id="aclass_slic3r_1_1_packing_temporary_data_html"><div class="ttname"><a href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">Slic3r::PackingTemporaryData</a></div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:35</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0051feabeb83fb74b6fd901fc4839e77"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Slic3r::Transform3d</a></div><div class="ttdeci">Eigen::Transform&lt; double, 3, Eigen::Affine, Eigen::DontAlign &gt; Transform3d</div><div class="ttdef"><b>Definition</b> Point.hpp:71</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5b3d6e75240949563c3ba9c76c2a47c0"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5b3d6e75240949563c3ba9c76c2a47c0">Slic3r::t_config_enum_names</a></div><div class="ttdeci">std::vector&lt; std::string &gt; t_config_enum_names</div><div class="ttdef"><b>Definition</b> Config.hpp:1515</div></div>
<div class="ttc" id="anamespace_slic3r_html_a6b8e15a6e63fb72a48bc5e49b8a6f6b1"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a6b8e15a6e63fb72a48bc5e49b8a6f6b1">Slic3r::Vec3d</a></div><div class="ttdeci">Eigen::Matrix&lt; double, 3, 1, Eigen::DontAlign &gt; Vec3d</div><div class="ttdef"><b>Definition</b> Point.hpp:46</div></div>
<div class="ttc" id="anamespace_slic3r_html_a76226f3704a9125643d33b3b72e70290"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a76226f3704a9125643d33b3b72e70290">Slic3r::_add_text_info_to_archive</a></div><div class="ttdeci">void _add_text_info_to_archive(std::stringstream &amp;stream, const TextInfo &amp;text_info)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6857</div></div>
<div class="ttc" id="anamespaceboost_html"><div class="ttname"><a href="../../d4/da9/namespaceboost.html">boost</a></div><div class="ttdef"><b>Definition</b> args.hpp:18</div></div>
<div class="ttc" id="anamespacenlohmann_1_1detail_html_a1ed8fc6239da25abcaf681d30ace4985ab45cffe084dd3d20d928bee85e7b0f21"><div class="ttname"><a href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985ab45cffe084dd3d20d928bee85e7b0f21">nlohmann::detail::value_t::string</a></div><div class="ttdeci">@ string</div><div class="ttdoc">string value</div></div>
<div class="ttc" id="anamespacenlohmann_1_1detail_html_a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d"><div class="ttname"><a href="../../dc/df0/namespacenlohmann_1_1detail.html#a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d">nlohmann::detail::parse_event_t::key</a></div><div class="ttdeci">@ key</div><div class="ttdoc">the parser read a key of a value in an object</div></div>
<div class="ttc" id="axmlparse_8c_html_db/dd2/structprefix"><div class="ttname"><a href="../../d7/d43/xmlparse_8c.html#db/dd2/structprefix">prefix</a></div><div class="ttdef"><b>Definition</b> xmlparse.c:150</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l06857">Slic3r::_add_text_info_to_archive()</a>, <a class="el" href="../../#l00204">ASSEMBLE_ITEM_TAG</a>, <a class="el" href="../../#l00203">ASSEMBLE_TAG</a>, <a class="el" href="../../#l00032">Slic3r::RepairedMeshErrors::backwards_edges</a>, <a class="el" href="../../#l00152">BBS_MODEL_CONFIG_FILE</a>, <a class="el" href="../../#l00153">BBS_MODEL_CONFIG_RELS_FILE</a>, <a class="el" href="../../#l00267">BED_TYPE_ATTR</a>, <a class="el" href="../../#l00082">Slic3r::PlateData::config</a>, <a class="el" href="../../#l00342">Slic3r::ModelObject::config</a>, <a class="el" href="../../#l00197">CONFIG_TAG</a>, <a class="el" href="../../#l00023">Slic3r::RepairedMeshErrors::degenerate_facets</a>, <a class="el" href="../../#l00021">Slic3r::RepairedMeshErrors::edges_fixed</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00025">Slic3r::RepairedMeshErrors::facets_removed</a>, <a class="el" href="../../#l00030">Slic3r::RepairedMeshErrors::facets_reversed</a>, <a class="el" href="../../#l00068">Slic3r::PlateData::gcode_file</a>, <a class="el" href="../../#l00269">GCODE_FILE_ATTR</a>, <a class="el" href="../../#l00268">Slic3r::ConfigOption::getInt()</a>, <a class="el" href="../../#l00036">Slic3r::ObjectID::id</a>, <a class="el" href="../../#l00054">Slic3r::ObjectBase::id()</a>, <a class="el" href="../../#l00242">ID_ATTR</a>, <a class="el" href="../../#l00277">IDENTIFYID_ATTR</a>, <a class="el" href="../../#l00201">INSTANCE_TAG</a>, <a class="el" href="../../#l00276">INSTANCEID_ATTR</a>, <a class="el" href="../../#l00337">Slic3r::ModelObject::instances</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00027">Slic3r::ThumbnailData::is_valid()</a>, <a class="el" href="../../#l00261">KEY_ATTR</a>, <a class="el" href="../../#l01405">Slic3r::ModelConfig::keys()</a>, <a class="el" href="../../#l01233">Slic3r::ModelInstance::loaded_id</a>, <a class="el" href="../../#l00266">LOCK_ATTR</a>, <a class="el" href="../../#l00097">Slic3r::PlateData::locked</a>, <a class="el" href="../../#l00805">Slic3r::TextInfo::m_text</a>, <a class="el" href="../../#l00295">MATRIX_KEY</a>, <a class="el" href="../../#l00311">MESH_STAT_BACKWARDS_EDGES</a>, <a class="el" href="../../#l00308">MESH_STAT_DEGENERATED_FACETS</a>, <a class="el" href="../../#l00307">MESH_STAT_EDGES_FIXED</a>, <a class="el" href="../../#l00309">MESH_STAT_FACETS_REMOVED</a>, <a class="el" href="../../#l00310">MESH_STAT_FACETS_RESERVED</a>, <a class="el" href="../../#l00177">MESH_STAT_TAG</a>, <a class="el" href="../../#l00186">METADATA_TAG</a>, <a class="el" href="../../#l00333">Slic3r::ModelObject::module_name</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00331">Slic3r::ModelObject::name</a>, <a class="el" href="../../#l00292">NAME_KEY</a>, <a class="el" href="../../#l00042">NULL</a>, <a class="el" href="../../#l00275">OBJECT_ID_ATTR</a>, <a class="el" href="../../#l00175">OBJECT_TAG</a>, <a class="el" href="../../#l01486">Slic3r::Model::objects</a>, <a class="el" href="../../#l00066">Slic3r::PlateData::objects_and_instances</a>, <a class="el" href="../../#l00252">OFFSET_ATTR</a>, <a class="el" href="../../#l01416">Slic3r::ModelConfig::opt_serialize()</a>, <a class="el" href="../../#l02060">Slic3r::ConfigBase::option()</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l00199">PART_TAG</a>, <a class="el" href="../../#l00076">Slic3r::PlateData::pattern_bbox_file</a>, <a class="el" href="../../#l00274">PATTERN_BBOX_FILE_ATTR</a>, <a class="el" href="../../#l00022">PATTERN_CONFIG_FILE_FORMAT</a>, <a class="el" href="../../#l00073">Slic3r::PlateData::pick_file</a>, <a class="el" href="../../#l00272">PICK_FILE_ATTR</a>, <a class="el" href="../../#l00020">PICK_FILE_FORMAT</a>, <a class="el" href="../../#l00065">Slic3r::PlateData::plate_index</a>, <a class="el" href="../../#l00079">Slic3r::PlateData::plate_name</a>, <a class="el" href="../../#l00200">PLATE_TAG</a>, <a class="el" href="../../#l00071">Slic3r::PlateData::plate_thumbnail</a>, <a class="el" href="../../#l00279">PLATER_NAME_ATTR</a>, <a class="el" href="../../#l00278">PLATERID_ATTR</a>, <a class="el" href="../../#l00268">PRINT_SEQUENCE_ATTR</a>, <a class="el" href="../../#l00296">SOURCE_FILE_KEY</a>, <a class="el" href="../../#l00302">SOURCE_IN_INCHES</a>, <a class="el" href="../../#l00303">SOURCE_IN_METERS</a>, <a class="el" href="../../#l00297">SOURCE_OBJECT_ID_KEY</a>, <a class="el" href="../../#l00299">SOURCE_OFFSET_X_KEY</a>, <a class="el" href="../../#l00300">SOURCE_OFFSET_Y_KEY</a>, <a class="el" href="../../#l00301">SOURCE_OFFSET_Z_KEY</a>, <a class="el" href="../../#l00298">SOURCE_VOLUME_ID_KEY</a>, <a class="el" href="../../#l00265">SUBTYPE_ATTR</a>, <a class="el" href="../../#l00070">Slic3r::PlateData::thumbnail_file</a>, <a class="el" href="../../#l00270">THUMBNAIL_FILE_ATTR</a>, <a class="el" href="../../#l00018">THUMBNAIL_FILE_FORMAT</a>, <a class="el" href="../../#l00072">Slic3r::PlateData::top_file</a>, <a class="el" href="../../#l00271">TOP_FILE_ATTR</a>, <a class="el" href="../../#l00019">TOP_FILE_FORMAT</a>, <a class="el" href="../../#l00250">TRANSFORM_ATTR</a>, <a class="el" href="../../#l00262">VALUE_ATTR</a>, and <a class="el" href="../../#l01170">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-13" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a68d95b3efe8c797d038e853eb5ee56d0_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8b9b1e54ffc278d13207b57c393f68c5" name="a8b9b1e54ffc278d13207b57c393f68c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b9b1e54ffc278d13207b57c393f68c5">&#9670;&#160;</a></span>_add_model_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_model_file_to_archive </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> &amp;&#160;</td>
          <td class="paramname"><em>objects_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#afd5b13b75ef46c5be8480e3981d21008">Export3mfProgressFn</a>&#160;</td>
          <td class="paramname"><em>proFn</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d65/class_slic3r_1_1_b_b_l_project.html">BBLProject</a> *&#160;</td>
          <td class="paramname"><em>project</em> = <code>nullptr</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5963</span>    {</div>
<div class="line"><span class="lineno"> 5964</span>        <span class="keywordtype">bool</span> sub_model = !objects_data.empty();</div>
<div class="line"><span class="lineno"> 5965</span>        <span class="keywordtype">bool</span> write_object = sub_model || !<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad695d28ee8fc512c34b09e1ff35b8dfc">m_split_model</a>;</div>
<div class="line"><span class="lineno"> 5966</span> </div>
<div class="line"><span class="lineno"> 5967</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, filename %1%, m_split_model %2%,  sub_model %3%&quot;</span>)%filename % <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad695d28ee8fc512c34b09e1ff35b8dfc">m_split_model</a> % sub_model;</div>
<div class="line"><span class="lineno"> 5968</span> </div>
<div class="line"><span class="lineno"> 5969</span><span class="preprocessor">#if WRITE_ZIP_LANGUAGE_ENCODING</span></div>
<div class="line"><span class="lineno"> 5970</span>        <span class="keyword">auto</span> &amp; zip_filename = filename;</div>
<div class="line"><span class="lineno"> 5971</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 5972</span>        std::string zip_filename = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a21f22c9580247e3d688ae94c3f10fb16">encode_path</a>(filename.c_str());</div>
<div class="line"><span class="lineno"> 5973</span>        std::string extra = sub_model ? <a class="code hl_function" href="../../da/d90/struct_zip_unicode_path_extra_field.html#a8e2ab2d527101da1ec8c7cacd60667c7">ZipUnicodePathExtraField::encode</a>(filename, zip_filename) : <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 5974</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5975</span>        <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> context;</div>
<div class="line"><span class="lineno"> 5976</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#a9a92bad43b4ceccbfc7785a1aa179984">mz_zip_writer_add_staged_open</a>(&amp;archive, &amp;context, sub_model ? zip_filename.c_str() : <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a30ad78ff668153764602f6ef0d546388">MODEL_FILE</a>.c_str(),</div>
<div class="line"><span class="lineno"> 5977</span>            <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aeb5341110ef0128ebb4a0177c445f90e">m_zip64</a> ?</div>
<div class="line"><span class="lineno"> 5978</span>                <span class="comment">// Maximum expected and allowed 3MF file size is 16GiB.</span></div>
<div class="line"><span class="lineno"> 5979</span>                <span class="comment">// This switches the ZIP file to a 64bit mode, which adds a tiny bit of overhead to file records.</span></div>
<div class="line"><span class="lineno"> 5980</span>                (<a class="code hl_typedef" href="../../db/dc9/_shiny_prereqs_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>(1) &lt;&lt; 30) * 16 :</div>
<div class="line"><span class="lineno"> 5981</span>                <span class="comment">// Maximum expected 3MF file size is 4GB-1. This is a workaround for interoperability with Windows 10 3D model fixing API, see</span></div>
<div class="line"><span class="lineno"> 5982</span>                <span class="comment">// GH issue #6193.</span></div>
<div class="line"><span class="lineno"> 5983</span>                (<a class="code hl_typedef" href="../../db/dc9/_shiny_prereqs_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a>(1) &lt;&lt; 32) - 1,</div>
<div class="line"><span class="lineno"> 5984</span>#if <a class="code hl_define" href="../../dd/d80/bbs__3mf_8cpp.html#ad868c5eed8a974c17064ebf1c29de5cb">WRITE_ZIP_LANGUAGE_ENCODING</a></div>
<div class="line"><span class="lineno"> 5985</span>            nullptr, nullptr, 0, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8ab5dc326a9f034dc71d6012d86dd1343f">MZ_DEFAULT_LEVEL</a>, nullptr, 0, nullptr, 0)) {</div>
<div class="line"><span class="lineno"> 5986</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 5987</span>            <span class="keyword">nullptr</span>, <span class="keyword">nullptr</span>, 0, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>, extra.c_str(), extra.length(), extra.c_str(), extra.length())) {</div>
<div class="line"><span class="lineno"> 5988</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 5989</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add model file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5990</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add model file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5991</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5992</span>        }</div>
<div class="line"><span class="lineno"> 5993</span> </div>
<div class="line"><span class="lineno"> 5994</span> </div>
<div class="line"><span class="lineno"> 5995</span>        {</div>
<div class="line"><span class="lineno"> 5996</span>            std::stringstream stream;</div>
<div class="line"><span class="lineno"> 5997</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">reset_stream</a>(stream);</div>
<div class="line"><span class="lineno"> 5998</span>            stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5999</span>            stream &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae686fe0779eb5cb2bd31287416295447">MODEL_TAG</a> &lt;&lt; <span class="stringliteral">&quot; unit=\&quot;millimeter\&quot; xml:lang=\&quot;en-US\&quot; xmlns=\&quot;http://schemas.microsoft.com/3dmanufacturing/core/2015/02\&quot; xmlns:slic3rpe=\&quot;http://schemas.slic3r.org/3mf/2017/06\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6000</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a>)</div>
<div class="line"><span class="lineno"> 6001</span>                stream &lt;&lt; <span class="stringliteral">&quot; xmlns:p=\&quot;http://schemas.microsoft.com/3dmanufacturing/production/2015/06\&quot; requiredextensions=\&quot;p\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6002</span>            stream &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6003</span> </div>
<div class="line"><span class="lineno"> 6004</span>            std::string origin;</div>
<div class="line"><span class="lineno"> 6005</span>            std::string name;</div>
<div class="line"><span class="lineno"> 6006</span>            std::string user_name;</div>
<div class="line"><span class="lineno"> 6007</span>            std::string user_id;</div>
<div class="line"><span class="lineno"> 6008</span>            std::string design_cover;</div>
<div class="line"><span class="lineno"> 6009</span>            std::string license;</div>
<div class="line"><span class="lineno"> 6010</span>            std::string description;</div>
<div class="line"><span class="lineno"> 6011</span>            std::string copyright;</div>
<div class="line"><span class="lineno"> 6012</span>            std::string rating;</div>
<div class="line"><span class="lineno"> 6013</span>            std::string model_id;</div>
<div class="line"><span class="lineno"> 6014</span>            std::string region_code;</div>
<div class="line"><span class="lineno"> 6015</span>            <span class="keywordflow">if</span> (model.design_info) {</div>
<div class="line"><span class="lineno"> 6016</span>                 user_name = model.design_info-&gt;Designer;</div>
<div class="line"><span class="lineno"> 6017</span>                 user_id = model.design_info-&gt;DesignerUserId;</div>
<div class="line"><span class="lineno"> 6018</span>                 BOOST_LOG_TRIVIAL(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a06b86e5331aac1c640f8f7f40d798175">trace</a>) &lt;&lt; <span class="stringliteral">&quot;design_info, save_3mf found designer = &quot;</span> &lt;&lt; user_name;</div>
<div class="line"><span class="lineno"> 6019</span>                 BOOST_LOG_TRIVIAL(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a06b86e5331aac1c640f8f7f40d798175">trace</a>) &lt;&lt; <span class="stringliteral">&quot;design_info, save_3mf found designer_user_id = &quot;</span> &lt;&lt; user_id;</div>
<div class="line"><span class="lineno"> 6020</span>            }</div>
<div class="line"><span class="lineno"> 6021</span> </div>
<div class="line"><span class="lineno"> 6022</span>            <span class="keywordflow">if</span> (project) {</div>
<div class="line"><span class="lineno"> 6023</span>                model_id    = <a class="code hl_function" href="../../d7/d3b/namespaceigl_1_1opengl2.html#a428c62cf91892e8d24a3afb94e913c26">project</a>-&gt;project_model_id;</div>
<div class="line"><span class="lineno"> 6024</span>                region_code = <a class="code hl_function" href="../../d7/d3b/namespaceigl_1_1opengl2.html#a428c62cf91892e8d24a3afb94e913c26">project</a>-&gt;project_country_code;</div>
<div class="line"><span class="lineno"> 6025</span>            }</div>
<div class="line"><span class="lineno"> 6026</span> </div>
<div class="line"><span class="lineno"> 6027</span>            <span class="keywordflow">if</span> (model.model_info) {</div>
<div class="line"><span class="lineno"> 6028</span>                design_cover = model.model_info-&gt;cover_file;</div>
<div class="line"><span class="lineno"> 6029</span>                license      = model.model_info-&gt;license;</div>
<div class="line"><span class="lineno"> 6030</span>                description  = model.model_info-&gt;description;</div>
<div class="line"><span class="lineno"> 6031</span>                copyright    = model.model_info-&gt;copyright;</div>
<div class="line"><span class="lineno"> 6032</span>                name         = model.model_info-&gt;model_name;</div>
<div class="line"><span class="lineno"> 6033</span>                origin       = model.model_info-&gt;origin;</div>
<div class="line"><span class="lineno"> 6034</span>                BOOST_LOG_TRIVIAL(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a06b86e5331aac1c640f8f7f40d798175">trace</a>) &lt;&lt; <span class="stringliteral">&quot;design_info, save_3mf found designer_cover = &quot;</span> &lt;&lt; design_cover;</div>
<div class="line"><span class="lineno"> 6035</span>            }</div>
<div class="line"><span class="lineno"> 6036</span>            <span class="comment">// remember to use metadata_item_map to store metadata info</span></div>
<div class="line"><span class="lineno"> 6037</span>            std::map&lt;std::string, std::string&gt; metadata_item_map;</div>
<div class="line"><span class="lineno"> 6038</span>            <span class="keywordflow">if</span> (!sub_model) {</div>
<div class="line"><span class="lineno"> 6039</span>                <span class="comment">// update metadat_items</span></div>
<div class="line"><span class="lineno"> 6040</span>                <span class="keywordflow">if</span> (model.model_info &amp;&amp; model.model_info.get()) {</div>
<div class="line"><span class="lineno"> 6041</span>                    metadata_item_map = model.model_info.get()-&gt;metadata_items;</div>
<div class="line"><span class="lineno"> 6042</span>                }</div>
<div class="line"><span class="lineno"> 6043</span> </div>
<div class="line"><span class="lineno"> 6044</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a113eed0fa25385e4425b60a213632fbf">BBL_MODEL_NAME_TAG</a>]           = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(name);</div>
<div class="line"><span class="lineno"> 6045</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aba407bb0d46dc8f31dd9c6aa2d84b979">BBL_ORIGIN_TAG</a>]               = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(origin);</div>
<div class="line"><span class="lineno"> 6046</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a00ff57eb7b4406fb3d0369102eff646c">BBL_DESIGNER_TAG</a>]             = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(user_name);</div>
<div class="line"><span class="lineno"> 6047</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a4926ba93d5d34c325c0f1ce1268ee64a">BBL_DESIGNER_USER_ID_TAG</a>]     = user_id;</div>
<div class="line"><span class="lineno"> 6048</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aaf69dc0ab313dc389460044555d1670a">BBL_DESIGNER_COVER_FILE_TAG</a>]  = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(design_cover);</div>
<div class="line"><span class="lineno"> 6049</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ace26292b862745cfd0c201ebf6e7fb78">BBL_DESCRIPTION_TAG</a>]          = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(description);</div>
<div class="line"><span class="lineno"> 6050</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ad075b8a4a625182a1d8830ddf76da4d1">BBL_COPYRIGHT_TAG</a>]            = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(copyright);</div>
<div class="line"><span class="lineno"> 6051</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ab929e700e68f543ed0be5a59e491c2de">BBL_LICENSE_TAG</a>]              = <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(license);</div>
<div class="line"><span class="lineno"> 6052</span> </div>
<div class="line"><span class="lineno"> 6053</span>                <span class="comment">/* save model info */</span></div>
<div class="line"><span class="lineno"> 6054</span>                <span class="keywordflow">if</span> (!model_id.empty()) {</div>
<div class="line"><span class="lineno"> 6055</span>                    metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ab43a50d6b15bce7a69d445fde9f6daf8">BBL_MODEL_ID_TAG</a>] = model_id;</div>
<div class="line"><span class="lineno"> 6056</span>                    metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a8dd39e748f46feea73c7d20ae8d9e233">BBL_REGION_TAG</a>]   = region_code;</div>
<div class="line"><span class="lineno"> 6057</span>                }</div>
<div class="line"><span class="lineno"> 6058</span> </div>
<div class="line"><span class="lineno"> 6059</span>                std::string date = <a class="code hl_function" href="../../d3/d47/namespace_slic3r_1_1_utils.html#a3be8424365a851987e3ed9403f35e344">Slic3r::Utils::utc_timestamp</a>(<a class="code hl_function" href="../../d3/d47/namespace_slic3r_1_1_utils.html#ae3730cc71d7ed9891e6f0d02ca54449c">Slic3r::Utils::get_current_time_utc</a>());</div>
<div class="line"><span class="lineno"> 6060</span>                <span class="comment">// keep only the date part of the string</span></div>
<div class="line"><span class="lineno"> 6061</span>                date = date.substr(0, 10);</div>
<div class="line"><span class="lineno"> 6062</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a4a16f4ebfdd58c1c724369febd61564f">BBL_CREATION_DATE_TAG</a>] = date;</div>
<div class="line"><span class="lineno"> 6063</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a6b793793210b9d66fb2e45626ecdc95b">BBL_MODIFICATION_TAG</a>]  = date;</div>
<div class="line"><span class="lineno"> 6064</span>                <span class="comment">//SoftFever: write BambuStudio tag to keep it compatible </span></div>
<div class="line"><span class="lineno"> 6065</span>                metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a53ab8bed6104e54975d84fbc0b44e864">BBL_APPLICATION_TAG</a>] = (boost::format(<span class="stringliteral">&quot;%1%-%2%&quot;</span>) % <span class="stringliteral">&quot;BambuStudio&quot;</span> % SLIC3R_VERSION).str();</div>
<div class="line"><span class="lineno"> 6066</span>            }</div>
<div class="line"><span class="lineno"> 6067</span>            metadata_item_map[<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a710df99fe9e021c5ba228a013cc972f9">BBS_3MF_VERSION</a>] = std::to_string(<a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a2d625f27650cdb5a8832c63f118dcb3b">VERSION_BBS_3MF</a>);</div>
<div class="line"><span class="lineno"> 6068</span> </div>
<div class="line"><span class="lineno"> 6069</span>            <span class="comment">// store metadata info</span></div>
<div class="line"><span class="lineno"> 6070</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> item : metadata_item_map) {</div>
<div class="line"><span class="lineno"> 6071</span>                BOOST_LOG_TRIVIAL(info) &lt;&lt; <span class="stringliteral">&quot;bbs_3mf: save key= &quot;</span> &lt;&lt; item.first &lt;&lt; <span class="stringliteral">&quot;, value = &quot;</span> &lt;&lt; item.second;</div>
<div class="line"><span class="lineno"> 6072</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; name=\&quot;&quot;</span> &lt;&lt; item.first &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span></div>
<div class="line"><span class="lineno"> 6073</span>                       &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(item.second) &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6074</span>            }</div>
<div class="line"><span class="lineno"> 6075</span> </div>
<div class="line"><span class="lineno"> 6076</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6c0d76a48cbb627f577ce72e2b2f8e24">RESOURCES_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6077</span>            std::string buf = stream.str();</div>
<div class="line"><span class="lineno"> 6078</span>            <span class="keywordflow">if</span> (! buf.empty() &amp;&amp; ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size())) {</div>
<div class="line"><span class="lineno"> 6079</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add model file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6080</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add model file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6081</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6082</span>            }</div>
<div class="line"><span class="lineno"> 6083</span>        }</div>
<div class="line"><span class="lineno"> 6084</span> </div>
<div class="line"><span class="lineno"> 6085</span>        <span class="comment">// Instance transformations, indexed by the 3MF object ID (which is a linear serialization of all instances of all ModelObjects).</span></div>
<div class="line"><span class="lineno"> 6086</span>        <a class="code hl_typedef" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a143cb428c677b32b91929df141624a97">BuildItemsList</a> build_items;</div>
<div class="line"><span class="lineno"> 6087</span> </div>
<div class="line"><span class="lineno"> 6088</span>        <span class="comment">// The object_id here is a one based identifier of the first instance of a ModelObject in the 3MF file, where</span></div>
<div class="line"><span class="lineno"> 6089</span>        <span class="comment">// all the object instances of all ModelObjects are stored and indexed in a 1 based linear fashion.</span></div>
<div class="line"><span class="lineno"> 6090</span>        <span class="comment">// Therefore the list of object_ids here may not be continuous.</span></div>
<div class="line"><span class="lineno"> 6091</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_id = 1;</div>
<div class="line"><span class="lineno"> 6092</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> object_index = 0;</div>
<div class="line"><span class="lineno"> 6093</span> </div>
<div class="line"><span class="lineno"> 6094</span>        <span class="keywordtype">bool</span> cb_cancel = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6095</span>        std::vector&lt;std::string&gt; object_paths;</div>
<div class="line"><span class="lineno"> 6096</span>        <span class="comment">// if (!m_skip_model) {</span></div>
<div class="line"><span class="lineno"> 6097</span>            <span class="keywordflow">for</span> (ModelObject* obj : model.objects) {</div>
<div class="line"><span class="lineno"> 6098</span>                <span class="keywordflow">if</span> (sub_model &amp;&amp; obj != objects_data.begin()-&gt;second.object) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6099</span> </div>
<div class="line"><span class="lineno"> 6100</span>                <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 6101</span>                    proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aae9d3d72384f03b1d1e33275cef544e4">EXPORT_STAGE_ADD_MODELS</a>, object_index++, model.objects.size(), cb_cancel);</div>
<div class="line"><span class="lineno"> 6102</span>                    <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 6103</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6104</span>                }</div>
<div class="line"><span class="lineno"> 6105</span> </div>
<div class="line"><span class="lineno"> 6106</span>                <span class="keywordflow">if</span> (obj == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 6107</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6108</span> </div>
<div class="line"><span class="lineno"> 6109</span>                <span class="comment">// Index of an object in the 3MF file corresponding to the 1st instance of a ModelObject.</span></div>
<div class="line"><span class="lineno"> 6110</span>                ObjectToObjectDataMap::iterator object_it = objects_data.begin();</div>
<div class="line"><span class="lineno"> 6111</span> </div>
<div class="line"><span class="lineno"> 6112</span>                <span class="keywordflow">if</span> (!sub_model) {</div>
<div class="line"><span class="lineno"> 6113</span>                    <span class="comment">// For backup, use backup id as object id</span></div>
<div class="line"><span class="lineno"> 6114</span>                    <span class="keywordtype">int</span> backup_id = <span class="keyword">const_cast&lt;</span>Model&amp;<span class="keyword">&gt;</span>(model).get_object_backup_id(*obj);</div>
<div class="line"><span class="lineno"> 6115</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a>) object_id = backup_id;</div>
<div class="line"><span class="lineno"> 6116</span>                    object_it = objects_data.insert({obj, {obj, backup_id} }).first;</div>
<div class="line"><span class="lineno"> 6117</span>                    <span class="keyword">auto</span> &amp; object_data = object_it-&gt;second;</div>
<div class="line"><span class="lineno"> 6118</span> </div>
<div class="line"><span class="lineno"> 6119</span>                    <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad695d28ee8fc512c34b09e1ff35b8dfc">m_split_model</a>) {</div>
<div class="line"><span class="lineno"> 6120</span>                        <span class="keyword">auto</span> filename = boost::format(<span class="stringliteral">&quot;3D/Objects/%s_%d.model&quot;</span>) % obj-&gt;name % backup_id;</div>
<div class="line"><span class="lineno"> 6121</span>                        object_data.sub_path = <span class="stringliteral">&quot;/&quot;</span> + filename.str();</div>
<div class="line"><span class="lineno"> 6122</span>                        object_paths.push_back(filename.str());</div>
<div class="line"><span class="lineno"> 6123</span>                    }</div>
<div class="line"><span class="lineno"> 6124</span> </div>
<div class="line"><span class="lineno"> 6125</span>                    <span class="keyword">auto</span> &amp;volumes_objectID = object_data.volumes_objectID;</div>
<div class="line"><span class="lineno"> 6126</span>                    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> volume_id = object_id, volume_count = 0;</div>
<div class="line"><span class="lineno"> 6127</span>                    <span class="keywordflow">for</span> (ModelVolume *volume : obj-&gt;volumes) {</div>
<div class="line"><span class="lineno"> 6128</span>                        <span class="keywordflow">if</span> (volume == <span class="keyword">nullptr</span>)</div>
<div class="line"><span class="lineno"> 6129</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6130</span>                        volume_count++;</div>
<div class="line"><span class="lineno"> 6131</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a434a249c20f16929f5e0db7b466acee0">m_share_mesh</a>) {</div>
<div class="line"><span class="lineno"> 6132</span>                            <span class="keyword">auto</span> iter = <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a81723a1f39a3a30fb2e256ca6dfc6635">m_shared_meshes</a>.find(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh_ptr());</div>
<div class="line"><span class="lineno"> 6133</span>                            <span class="keywordflow">if</span> (iter != <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a81723a1f39a3a30fb2e256ca6dfc6635">m_shared_meshes</a>.end())</div>
<div class="line"><span class="lineno"> 6134</span>                            {</div>
<div class="line"><span class="lineno"> 6135</span>                                <span class="keyword">const</span> ModelVolume* shared_volume = iter-&gt;second.second;</div>
<div class="line"><span class="lineno"> 6136</span>                                <span class="keywordflow">if</span> ((shared_volume-&gt;supported_facets.equals(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;supported_facets))</div>
<div class="line"><span class="lineno"> 6137</span>                                    &amp;&amp; (shared_volume-&gt;seam_facets.equals(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;seam_facets))</div>
<div class="line"><span class="lineno"> 6138</span>                                    &amp;&amp; (shared_volume-&gt;mmu_segmentation_facets.equals(<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mmu_segmentation_facets)))</div>
<div class="line"><span class="lineno"> 6139</span>                                {</div>
<div class="line"><span class="lineno"> 6140</span>                                    <span class="keyword">auto</span> data = iter-&gt;second.first;</div>
<div class="line"><span class="lineno"> 6141</span>                                    <span class="keyword">const_cast&lt;</span>_BBS_3MF_Exporter *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a702e3dbabc13a3a6531087d2f038412b">m_volume_paths</a>.insert({volume, {data-&gt;sub_path, data-&gt;volumes_objectID.find(iter-&gt;second.second)-&gt;second}});</div>
<div class="line"><span class="lineno"> 6142</span>                                    volumes_objectID.insert({<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>, 0});</div>
<div class="line"><span class="lineno"> 6143</span>                                    object_data.share_mesh = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6144</span>                                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6145</span>                                }</div>
<div class="line"><span class="lineno"> 6146</span>                            }</div>
<div class="line"><span class="lineno"> 6147</span>                            <span class="keyword">const_cast&lt;</span>_BBS_3MF_Exporter *<span class="keyword">&gt;</span>(<span class="keyword">this</span>)-&gt;<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a81723a1f39a3a30fb2e256ca6dfc6635">m_shared_meshes</a>.insert({<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;mesh_ptr(), {&amp;object_data, <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>}});</div>
<div class="line"><span class="lineno"> 6148</span>                        }</div>
<div class="line"><span class="lineno"> 6149</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a>)</div>
<div class="line"><span class="lineno"> 6150</span>                            volume_id = (volume_count &lt;&lt; 16 | backup_id);</div>
<div class="line"><span class="lineno"> 6151</span>                        volumes_objectID.insert({<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>, volume_id});</div>
<div class="line"><span class="lineno"> 6152</span>                        volume_id++;</div>
<div class="line"><span class="lineno"> 6153</span>                    }</div>
<div class="line"><span class="lineno"> 6154</span> </div>
<div class="line"><span class="lineno"> 6155</span>                    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a>) object_id = volume_id;</div>
<div class="line"><span class="lineno"> 6156</span>                    object_data.object_id = object_id;</div>
<div class="line"><span class="lineno"> 6157</span>                }</div>
<div class="line"><span class="lineno"> 6158</span> </div>
<div class="line"><span class="lineno"> 6159</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6160</span> </div>
<div class="line"><span class="lineno"> 6161</span>                <span class="keywordflow">if</span> (write_object) {</div>
<div class="line"><span class="lineno"> 6162</span>                    <span class="comment">// Store geometry of all ModelVolumes contained in a single ModelObject into a single 3MF indexed triangle set object.</span></div>
<div class="line"><span class="lineno"> 6163</span>                    <span class="comment">// object_it-&gt;second.volumes_objectID will contain the offsets of the ModelVolumes in that single indexed triangle set.</span></div>
<div class="line"><span class="lineno"> 6164</span>                    <span class="comment">// object_id will be increased to point to the 1st instance of the next ModelObject.</span></div>
<div class="line"><span class="lineno"> 6165</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1140b5f6c517ae1a3a7ccaa59f8a86a7">_add_object_to_model_stream</a>(context, object_it-&gt;second)) {</div>
<div class="line"><span class="lineno"> 6166</span>                        <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add object to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6167</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add object to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6168</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6169</span>                    }</div>
<div class="line"><span class="lineno"> 6170</span>                }</div>
<div class="line"><span class="lineno"> 6171</span> </div>
<div class="line"><span class="lineno"> 6172</span>                <span class="keywordflow">if</span> (sub_model) <span class="keywordflow">break</span>;</div>
<div class="line"><span class="lineno"> 6173</span> </div>
<div class="line"><span class="lineno"> 6174</span>                <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="../../dd/dee/_auxiliary_data_view_model_8cpp.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> = 0;</div>
<div class="line"><span class="lineno"> 6175</span>                <span class="keywordflow">for</span> (<span class="keyword">const</span> ModelInstance* instance : obj-&gt;instances) {</div>
<div class="line"><span class="lineno"> 6176</span>                    <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> t = instance-&gt;get_matrix();</div>
<div class="line"><span class="lineno"> 6177</span>                    <span class="comment">// instance_id is just a 1 indexed index in build_items.</span></div>
<div class="line"><span class="lineno"> 6178</span>                    <span class="comment">//assert(m_skip_static || curr_id == build_items.size() + 1);</span></div>
<div class="line"><span class="lineno"> 6179</span>                    build_items.emplace_back(<span class="stringliteral">&quot;&quot;</span>, object_it-&gt;second.object_id, t, instance-&gt;printable);</div>
<div class="line"><span class="lineno"> 6180</span>                    <a class="code hl_variable" href="../../dd/dee/_auxiliary_data_view_model_8cpp.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a>++;</div>
<div class="line"><span class="lineno"> 6181</span>                }</div>
<div class="line"><span class="lineno"> 6182</span> </div>
<div class="line"><span class="lineno"> 6183</span>                <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a>) object_id++;</div>
<div class="line"><span class="lineno"> 6184</span>            }</div>
<div class="line"><span class="lineno"> 6185</span>        <span class="comment">// }</span></div>
<div class="line"><span class="lineno"> 6186</span> </div>
<div class="line"><span class="lineno"> 6187</span>        {</div>
<div class="line"><span class="lineno"> 6188</span>            std::stringstream stream;</div>
<div class="line"><span class="lineno"> 6189</span>            <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">reset_stream</a>(stream);</div>
<div class="line"><span class="lineno"> 6190</span> </div>
<div class="line"><span class="lineno"> 6191</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a> &amp;&amp; !sub_model) {</div>
<div class="line"><span class="lineno"> 6192</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keywordtype">object</span> : model.objects) {</div>
<div class="line"><span class="lineno"> 6193</span>                    <span class="keyword">auto</span> &amp;data = objects_data[<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>];</div>
<div class="line"><span class="lineno"> 6194</span>                    <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a2dccf6e7ac2a1799e89bb1941306f92e">_add_object_components_to_stream</a>(stream, data);</div>
<div class="line"><span class="lineno"> 6195</span>                }</div>
<div class="line"><span class="lineno"> 6196</span>            }</div>
<div class="line"><span class="lineno"> 6197</span> </div>
<div class="line"><span class="lineno"> 6198</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a6c0d76a48cbb627f577ce72e2b2f8e24">RESOURCES_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6199</span> </div>
<div class="line"><span class="lineno"> 6200</span>            <span class="comment">// Store the transformations of all the ModelInstances of all ModelObjects, indexed in a linear fashion.</span></div>
<div class="line"><span class="lineno"> 6201</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a3cd7d8b68cd42fe1adbfd3ab08d37737">_add_build_to_model_stream</a>(stream, build_items)) {</div>
<div class="line"><span class="lineno"> 6202</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add build to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6203</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add build to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6204</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6205</span>            }</div>
<div class="line"><span class="lineno"> 6206</span> </div>
<div class="line"><span class="lineno"> 6207</span>            stream &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae686fe0779eb5cb2bd31287416295447">MODEL_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6208</span> </div>
<div class="line"><span class="lineno"> 6209</span>            std::string buf = stream.str();</div>
<div class="line"><span class="lineno"> 6210</span> </div>
<div class="line"><span class="lineno"> 6211</span>            <span class="keywordflow">if</span> ((! buf.empty() &amp;&amp; ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size())) ||</div>
<div class="line"><span class="lineno"> 6212</span>                ! <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a2c2e2d560cee969864cd1b3b0f264e75">mz_zip_writer_add_staged_finish</a>(&amp;context)) {</div>
<div class="line"><span class="lineno"> 6213</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add model file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6214</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add model file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6215</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6216</span>            }</div>
<div class="line"><span class="lineno"> 6217</span>        }</div>
<div class="line"><span class="lineno"> 6218</span> </div>
<div class="line"><span class="lineno"> 6219</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a> || write_object) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6220</span> </div>
<div class="line"><span class="lineno"> 6221</span>        <span class="comment">// write model rels</span></div>
<div class="line"><span class="lineno"> 6222</span>        <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a4933ea38f3dae4574aba8ae00c7d09d3">_add_relationships_file_to_archive</a>(archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#af8aebf988b7712440fbbf460430a3353">MODEL_RELS_FILE</a>, object_paths, {<span class="stringliteral">&quot;http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel&quot;</span>});</div>
<div class="line"><span class="lineno"> 6223</span> </div>
<div class="line"><span class="lineno"> 6224</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a>) {</div>
<div class="line"><span class="lineno"> 6225</span>            boost::mutex <a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">mutex</a>;</div>
<div class="line"><span class="lineno"> 6226</span>            tbb::parallel_for(tbb::blocked_range&lt;size_t&gt;(0, objects_data.size(), 1), [<span class="keyword">this</span>, &amp;<a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">mutex</a>, &amp;model, objects = model.objects, &amp;objects_data, &amp;object_paths, <a class="code hl_function" href="../../d4/d64/encoding-check_8cpp.html#abf9e6b7e6f15df4b525a2e7705ba3089">main</a> = &amp;archive, project](<span class="keyword">const</span> tbb::blocked_range&lt;size_t&gt;&amp; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a51e1ea9708d6434aae1e8394bef8acdc">range</a>) {</div>
<div class="line"><span class="lineno"> 6227</span>                for (size_t i = range.begin(); i &lt; range.end(); ++i) {</div>
<div class="line"><span class="lineno"> 6228</span>                    auto iter = objects_data.find(objects[i]);</div>
<div class="line"><span class="lineno"> 6229</span>                    ObjectToObjectDataMap objects_data2;</div>
<div class="line"><span class="lineno"> 6230</span>                    objects_data2.insert(*iter);</div>
<div class="line"><span class="lineno"> 6231</span>                    auto &amp; object = *iter-&gt;second.object;</div>
<div class="line"><span class="lineno"> 6232</span>                    mz_zip_archive archive;</div>
<div class="line"><span class="lineno"> 6233</span>                    mz_zip_zero_struct(&amp;archive);</div>
<div class="line"><span class="lineno"> 6234</span>                    mz_zip_writer_init_heap(&amp;archive, 0, 1024 * 1024);</div>
<div class="line"><span class="lineno"> 6235</span>                    CNumericLocalesSetter locales_setter;</div>
<div class="line"><span class="lineno"> 6236</span>                    _add_model_file_to_archive(object_paths[i], archive, model, objects_data2, nullptr, project);</div>
<div class="line"><span class="lineno"> 6237</span>                    iter-&gt;second = objects_data2.begin()-&gt;second;</div>
<div class="line"><span class="lineno"> 6238</span>                    void *ppBuf; size_t pSize;</div>
<div class="line"><span class="lineno"> 6239</span>                    mz_zip_writer_finalize_heap_archive(&amp;archive, &amp;ppBuf, &amp;pSize);</div>
<div class="line"><span class="lineno"> 6240</span>                    mz_zip_writer_end(&amp;archive);</div>
<div class="line"><span class="lineno"> 6241</span>                    mz_zip_zero_struct(&amp;archive);</div>
<div class="line"><span class="lineno"> 6242</span>                    mz_zip_reader_init_mem(&amp;archive, ppBuf, pSize, 0);</div>
<div class="line"><span class="lineno"> 6243</span>                    {</div>
<div class="line"><span class="lineno"> 6244</span>                        boost::unique_lock l(mutex);</div>
<div class="line"><span class="lineno"> 6245</span>                        mz_zip_writer_add_from_zip_reader(main, &amp;archive, 0);</div>
<div class="line"><span class="lineno"> 6246</span>                    }</div>
<div class="line"><span class="lineno"> 6247</span>                    mz_zip_reader_end(&amp;archive);</div>
<div class="line"><span class="lineno"> 6248</span>                }</div>
<div class="line"><span class="lineno"> 6249</span>            });</div>
<div class="line"><span class="lineno"> 6250</span>        }</div>
<div class="line"><span class="lineno"> 6251</span> </div>
<div class="line"><span class="lineno"> 6252</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6253</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a30ad78ff668153764602f6ef0d546388"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a30ad78ff668153764602f6ef0d546388">MODEL_FILE</a></div><div class="ttdeci">const std::string MODEL_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:69</div></div>
<div class="ttc" id="a3mf_8cpp_html_a6c0d76a48cbb627f577ce72e2b2f8e24"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a6c0d76a48cbb627f577ce72e2b2f8e24">RESOURCES_TAG</a></div><div class="ttdeci">static constexpr const char * RESOURCES_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:82</div></div>
<div class="ttc" id="a3mf_8cpp_html_ae686fe0779eb5cb2bd31287416295447"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae686fe0779eb5cb2bd31287416295447">MODEL_TAG</a></div><div class="ttdeci">static constexpr const char * MODEL_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:81</div></div>
<div class="ttc" id="a_shiny_prereqs_8h_html_aec6fcb673ff035718c238c8c9d544c47"><div class="ttname"><a href="../../db/dc9/_shiny_prereqs_8h.html#aec6fcb673ff035718c238c8c9d544c47">uint64_t</a></div><div class="ttdeci">unsigned __int64 uint64_t</div><div class="ttdef"><b>Definition</b> ShinyPrereqs.h:123</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a00ff57eb7b4406fb3d0369102eff646c"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a00ff57eb7b4406fb3d0369102eff646c">BBL_DESIGNER_TAG</a></div><div class="ttdeci">const std::string BBL_DESIGNER_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:114</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a113eed0fa25385e4425b60a213632fbf"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a113eed0fa25385e4425b60a213632fbf">BBL_MODEL_NAME_TAG</a></div><div class="ttdeci">const std::string BBL_MODEL_NAME_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:112</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a2d625f27650cdb5a8832c63f118dcb3b"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a2d625f27650cdb5a8832c63f118dcb3b">VERSION_BBS_3MF</a></div><div class="ttdeci">const unsigned int VERSION_BBS_3MF</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:97</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a4926ba93d5d34c325c0f1ce1268ee64a"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a4926ba93d5d34c325c0f1ce1268ee64a">BBL_DESIGNER_USER_ID_TAG</a></div><div class="ttdeci">const std::string BBL_DESIGNER_USER_ID_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:115</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a4a16f4ebfdd58c1c724369febd61564f"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a4a16f4ebfdd58c1c724369febd61564f">BBL_CREATION_DATE_TAG</a></div><div class="ttdeci">const std::string BBL_CREATION_DATE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:122</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a53ab8bed6104e54975d84fbc0b44e864"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a53ab8bed6104e54975d84fbc0b44e864">BBL_APPLICATION_TAG</a></div><div class="ttdeci">const std::string BBL_APPLICATION_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:123</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a6b793793210b9d66fb2e45626ecdc95b"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a6b793793210b9d66fb2e45626ecdc95b">BBL_MODIFICATION_TAG</a></div><div class="ttdeci">const std::string BBL_MODIFICATION_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:121</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a710df99fe9e021c5ba228a013cc972f9"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a710df99fe9e021c5ba228a013cc972f9">BBS_3MF_VERSION</a></div><div class="ttdeci">const char * BBS_3MF_VERSION</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:101</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a8dd39e748f46feea73c7d20ae8d9e233"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a8dd39e748f46feea73c7d20ae8d9e233">BBL_REGION_TAG</a></div><div class="ttdeci">const std::string BBL_REGION_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:120</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aaf69dc0ab313dc389460044555d1670a"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aaf69dc0ab313dc389460044555d1670a">BBL_DESIGNER_COVER_FILE_TAG</a></div><div class="ttdeci">const std::string BBL_DESIGNER_COVER_FILE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:116</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ab43a50d6b15bce7a69d445fde9f6daf8"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ab43a50d6b15bce7a69d445fde9f6daf8">BBL_MODEL_ID_TAG</a></div><div class="ttdeci">const std::string BBL_MODEL_ID_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:111</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ab929e700e68f543ed0be5a59e491c2de"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ab929e700e68f543ed0be5a59e491c2de">BBL_LICENSE_TAG</a></div><div class="ttdeci">const std::string BBL_LICENSE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:119</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aba407bb0d46dc8f31dd9c6aa2d84b979"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aba407bb0d46dc8f31dd9c6aa2d84b979">BBL_ORIGIN_TAG</a></div><div class="ttdeci">const std::string BBL_ORIGIN_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:113</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ace26292b862745cfd0c201ebf6e7fb78"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ace26292b862745cfd0c201ebf6e7fb78">BBL_DESCRIPTION_TAG</a></div><div class="ttdeci">const std::string BBL_DESCRIPTION_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:117</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ad075b8a4a625182a1d8830ddf76da4d1"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ad075b8a4a625182a1d8830ddf76da4d1">BBL_COPYRIGHT_TAG</a></div><div class="ttdeci">const std::string BBL_COPYRIGHT_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:118</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ad868c5eed8a974c17064ebf1c29de5cb"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ad868c5eed8a974c17064ebf1c29de5cb">WRITE_ZIP_LANGUAGE_ENCODING</a></div><div class="ttdeci">#define WRITE_ZIP_LANGUAGE_ENCODING</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:54</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_af8aebf988b7712440fbbf460430a3353"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#af8aebf988b7712440fbbf460430a3353">MODEL_RELS_FILE</a></div><div class="ttdeci">const std::string MODEL_RELS_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:134</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a1140b5f6c517ae1a3a7ccaa59f8a86a7"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1140b5f6c517ae1a3a7ccaa59f8a86a7">Slic3r::_BBS_3MF_Exporter::_add_object_to_model_stream</a></div><div class="ttdeci">bool _add_object_to_model_stream(mz_zip_writer_staged_context &amp;context, ObjectData const &amp;object_data) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6255</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a143cb428c677b32b91929df141624a97"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a143cb428c677b32b91929df141624a97">Slic3r::_BBS_3MF_Exporter::BuildItemsList</a></div><div class="ttdeci">std::vector&lt; BuildItem &gt; BuildItemsList</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5163</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a2dccf6e7ac2a1799e89bb1941306f92e"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a2dccf6e7ac2a1799e89bb1941306f92e">Slic3r::_BBS_3MF_Exporter::_add_object_components_to_stream</a></div><div class="ttdeci">void _add_object_components_to_stream(std::stringstream &amp;stream, ObjectData const &amp;object_data) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6281</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a3cd7d8b68cd42fe1adbfd3ab08d37737"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a3cd7d8b68cd42fe1adbfd3ab08d37737">Slic3r::_BBS_3MF_Exporter::_add_build_to_model_stream</a></div><div class="ttdeci">bool _add_build_to_model_stream(std::stringstream &amp;stream, const BuildItemsList &amp;build_items) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6567</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a541e5a5ab7699b8118a34f463d4de4d9"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">Slic3r::_BBS_3MF_Exporter::m_from_backup_save</a></div><div class="ttdeci">bool m_from_backup_save</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5170</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a81723a1f39a3a30fb2e256ca6dfc6635"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a81723a1f39a3a30fb2e256ca6dfc6635">Slic3r::_BBS_3MF_Exporter::m_shared_meshes</a></div><div class="ttdeci">std::map&lt; void const *, std::pair&lt; ObjectData *, ModelVolume const * &gt; &gt; m_shared_meshes</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5179</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ad695d28ee8fc512c34b09e1ff35b8dfc"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad695d28ee8fc512c34b09e1ff35b8dfc">Slic3r::_BBS_3MF_Exporter::m_split_model</a></div><div class="ttdeci">bool m_split_model</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5171</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_aeb5341110ef0128ebb4a0177c445f90e"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aeb5341110ef0128ebb4a0177c445f90e">Slic3r::_BBS_3MF_Exporter::m_zip64</a></div><div class="ttdeci">bool m_zip64</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5167</div></div>
<div class="ttc" id="aencoding-check_8cpp_html_abf9e6b7e6f15df4b525a2e7705ba3089"><div class="ttname"><a href="../../d4/d64/encoding-check_8cpp.html#abf9e6b7e6f15df4b525a2e7705ba3089">main</a></div><div class="ttdeci">int main(int argc, char const *argv[])</div><div class="ttdef"><b>Definition</b> encoding-check.cpp:72</div></div>
<div class="ttc" id="aminiz_8c_html_a2c2e2d560cee969864cd1b3b0f264e75"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a2c2e2d560cee969864cd1b3b0f264e75">mz_zip_writer_add_staged_finish</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_staged_finish(mz_zip_writer_staged_context *pContext)</div><div class="ttdef"><b>Definition</b> miniz.c:6888</div></div>
<div class="ttc" id="aminiz_8c_html_a9a92bad43b4ceccbfc7785a1aa179984"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a9a92bad43b4ceccbfc7785a1aa179984">mz_zip_writer_add_staged_open</a></div><div class="ttdeci">mz_bool mz_zip_writer_add_staged_open(mz_zip_archive *pZip, mz_zip_writer_staged_context *pContext, const char *pArchive_name, mz_uint64 max_size, const MZ_TIME_T *pFile_time, const void *pComment, mz_uint16 comment_size, mz_uint level_and_flags, const char *user_extra_data, mz_uint user_extra_data_len, const char *user_extra_data_central, mz_uint user_extra_data_central_len)</div><div class="ttdef"><b>Definition</b> miniz.c:6692</div></div>
<div class="ttc" id="aminiz_8h_html_d4/d5c/structmz__zip__writer__staged__context"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a></div><div class="ttdef"><b>Definition</b> miniz.h:1318</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_a3be8424365a851987e3ed9403f35e344"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#a3be8424365a851987e3ed9403f35e344">Slic3r::Utils::utc_timestamp</a></div><div class="ttdeci">std::string utc_timestamp()</div><div class="ttdef"><b>Definition</b> Time.hpp:30</div></div>
<div class="ttc" id="anamespace_slic3r_1_1_utils_html_ae3730cc71d7ed9891e6f0d02ca54449c"><div class="ttname"><a href="../../d3/d47/namespace_slic3r_1_1_utils.html#ae3730cc71d7ed9891e6f0d02ca54449c">Slic3r::Utils::get_current_time_utc</a></div><div class="ttdeci">time_t get_current_time_utc()</div><div class="ttdef"><b>Definition</b> Time.cpp:175</div></div>
<div class="ttc" id="anamespace_slic3r_html_a06b86e5331aac1c640f8f7f40d798175"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a06b86e5331aac1c640f8f7f40d798175">Slic3r::trace</a></div><div class="ttdeci">void trace(unsigned int level, const char *message)</div><div class="ttdef"><b>Definition</b> utils.cpp:172</div></div>
<div class="ttc" id="anamespace_slic3r_html_a61e85e532257a536bc04155071b847ea"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a61e85e532257a536bc04155071b847ea">Slic3r::reset_stream</a></div><div class="ttdeci">static void reset_stream(std::stringstream &amp;stream)</div><div class="ttdef"><b>Definition</b> 3mf.cpp:2503</div></div>
<div class="ttc" id="anamespace_slic3r_html_aae9d3d72384f03b1d1e33275cef544e4"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aae9d3d72384f03b1d1e33275cef544e4">Slic3r::EXPORT_STAGE_ADD_MODELS</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_MODELS</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:164</div></div>
<div class="ttc" id="anamespaceigl_1_1opengl2_html_a428c62cf91892e8d24a3afb94e913c26"><div class="ttname"><a href="../../d7/d3b/namespaceigl_1_1opengl2.html#a428c62cf91892e8d24a3afb94e913c26">igl::opengl2::project</a></div><div class="ttdeci">IGL_INLINE int project(const double objX, const double objY, const double objZ, double *winX, double *winY, double *winZ)</div><div class="ttdef"><b>Definition</b> project.cpp:14</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00123">BBL_APPLICATION_TAG</a>, <a class="el" href="../../#l00118">BBL_COPYRIGHT_TAG</a>, <a class="el" href="../../#l00122">BBL_CREATION_DATE_TAG</a>, <a class="el" href="../../#l00117">BBL_DESCRIPTION_TAG</a>, <a class="el" href="../../#l00116">BBL_DESIGNER_COVER_FILE_TAG</a>, <a class="el" href="../../#l00114">BBL_DESIGNER_TAG</a>, <a class="el" href="../../#l00115">BBL_DESIGNER_USER_ID_TAG</a>, <a class="el" href="../../#l00119">BBL_LICENSE_TAG</a>, <a class="el" href="../../#l00111">BBL_MODEL_ID_TAG</a>, <a class="el" href="../../#l00112">BBL_MODEL_NAME_TAG</a>, <a class="el" href="../../#l00121">BBL_MODIFICATION_TAG</a>, <a class="el" href="../../#l00113">BBL_ORIGIN_TAG</a>, <a class="el" href="../../#l00120">BBL_REGION_TAG</a>, <a class="el" href="../../#l00101">BBS_3MF_VERSION</a>, <a class="el" href="../../#l01494">Slic3r::Model::design_info</a>, <a class="el" href="../../#l00059">ZipUnicodePathExtraField::encode()</a>, <a class="el" href="../../#l01034">Slic3r::encode_path()</a>, <a class="el" href="../../#l03555">Slic3r::FacetsAnnotation::equals()</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00164">Slic3r::EXPORT_STAGE_ADD_MODELS</a>, <a class="el" href="../../#l00175">Slic3r::Utils::get_current_time_utc()</a>, <a class="el" href="../../#l00186">METADATA_TAG</a>, <a class="el" href="../../#l00889">Slic3r::ModelVolume::mmu_segmentation_facets</a>, <a class="el" href="../../#l00133">MODEL_FILE</a>, <a class="el" href="../../#l01495">Slic3r::Model::model_info</a>, <a class="el" href="../../#l00171">MODEL_TAG</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l00237">MZ_DEFAULT_LEVEL</a>, <a class="el" href="../../#l06858">mz_zip_writer_add_staged_data()</a>, <a class="el" href="../../#l06692">mz_zip_writer_add_staged_open()</a>, <a class="el" href="../../#l01486">Slic3r::Model::objects</a>, <a class="el" href="../../#l05946">Slic3r::reset_stream()</a>, <a class="el" href="../../#l00172">RESOURCES_TAG</a>, <a class="el" href="../../#l00886">Slic3r::ModelVolume::seam_facets</a>, <a class="el" href="../../#l00883">Slic3r::ModelVolume::supported_facets</a>, <a class="el" href="../../#l00172">Slic3r::trace()</a>, <a class="el" href="../../#l00030">Slic3r::Utils::utc_timestamp()</a>, <a class="el" href="../../#l00097">VERSION_BBS_3MF</a>, <a class="el" href="../../#l00054">WRITE_ZIP_LANGUAGE_ENCODING</a>, and <a class="el" href="../../#l01170">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-14" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a8b9b1e54ffc278d13207b57c393f68c5_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a2dccf6e7ac2a1799e89bb1941306f92e" name="a2dccf6e7ac2a1799e89bb1941306f92e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2dccf6e7ac2a1799e89bb1941306f92e">&#9670;&#160;</a></span>_add_object_components_to_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_BBS_3MF_Exporter::_add_object_components_to_stream </td>
          <td>(</td>
          <td class="paramtype">std::stringstream &amp;&#160;</td>
          <td class="paramname"><em>stream</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> const &amp;&#160;</td>
          <td class="paramname"><em>object_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6282</span>    {</div>
<div class="line"><span class="lineno"> 6283</span>        <span class="keyword">auto</span> &amp;       <span class="keywordtype">object</span> = *object_data.object;</div>
<div class="line"><span class="lineno"> 6284</span> </div>
<div class="line"><span class="lineno"> 6285</span>        stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; id=\&quot;&quot;</span> &lt;&lt; object_data.object_id;</div>
<div class="line"><span class="lineno"> 6286</span>        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a>)</div>
<div class="line"><span class="lineno"> 6287</span>            stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ae464f9f0978df18556cc2758a041363b">PUUID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_struct" href="../../dd/d80/bbs__3mf_8cpp.html#d1/d15/structhex__wrap">hex_wrap&lt;boost::uint32_t&gt;</a>{(boost::uint32_t)object_data.backup_id}</div>
<div class="line"><span class="lineno"> 6288</span>                    &lt;&lt; (object_data.share_mesh ? <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aef34a2816e2e492f7779440698100f2b">OBJECT_UUID_SUFFIX2</a> : <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a834683accde5c12470a6e1b2ab2bb83a">OBJECT_UUID_SUFFIX</a>);</div>
<div class="line"><span class="lineno"> 6289</span>        stream &lt;&lt; <span class="stringliteral">&quot;\&quot; type=\&quot;model\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6290</span> </div>
<div class="line"><span class="lineno"> 6291</span>        stream &lt;&lt; <span class="stringliteral">&quot;   &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9add37c8903ccd933e93f5de7b9b428d">COMPONENTS_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6292</span> </div>
<div class="line"><span class="lineno"> 6293</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0; index &lt; <span class="keywordtype">object</span>.volumes.size(); index ++) {</div>
<div class="line"><span class="lineno"> 6294</span>            ModelVolume *<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>    = <span class="keywordtype">object</span>.volumes[index];</div>
<div class="line"><span class="lineno"> 6295</span>            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> volume_id = object_data.volumes_objectID.find(volume)-&gt;second;</div>
<div class="line"><span class="lineno"> 6296</span>            <span class="keyword">auto</span> * ppath = &amp;object_data.sub_path;</div>
<div class="line"><span class="lineno"> 6297</span>            <span class="keyword">auto</span> iter = <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a702e3dbabc13a3a6531087d2f038412b">m_volume_paths</a>.find(volume);</div>
<div class="line"><span class="lineno"> 6298</span>            <span class="keywordflow">if</span> (iter != <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a702e3dbabc13a3a6531087d2f038412b">m_volume_paths</a>.end()) {</div>
<div class="line"><span class="lineno"> 6299</span>                ppath = &amp;iter-&gt;second.first;</div>
<div class="line"><span class="lineno"> 6300</span>                volume_id = iter-&gt;second.second;</div>
<div class="line"><span class="lineno"> 6301</span>            }</div>
<div class="line"><span class="lineno"> 6302</span>            <span class="comment">//add the transform of the volume</span></div>
<div class="line"><span class="lineno"> 6303</span>            <span class="keywordflow">if</span> (ppath-&gt;empty())</div>
<div class="line"><span class="lineno"> 6304</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9d76306c6c1f97015c9bce06364577c1">COMPONENT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; objectid=\&quot;&quot;</span> &lt;&lt; volume_id; <span class="comment">// &lt;&lt; &quot;\&quot;/&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 6305</span>            <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6306</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9d76306c6c1f97015c9bce06364577c1">COMPONENT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; p:path=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(*ppath) &lt;&lt; <span class="stringliteral">&quot;\&quot; objectid=\&quot;&quot;</span> &lt;&lt; volume_id; <span class="comment">// &lt;&lt; &quot;\&quot;/&gt;\n&quot;;</span></div>
<div class="line"><span class="lineno"> 6307</span>            <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/db8/namespace_slic3r.html#a0051feabeb83fb74b6fd901fc4839e77">Transform3d</a> &amp;transf = <a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>-&gt;get_matrix();</div>
<div class="line"><span class="lineno"> 6308</span>            stream &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae6c48a6d214926be17133c990969c642">TRANSFORM_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span>;</div>
<div class="line"><span class="lineno"> 6309</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> c = 0; <a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a> &lt; 4; ++<a class="code hl_enumvalue" href="../../d9/d6c/namespacemarchsq_1_1____impl.html#a5c3960032271d7907677d3507c909780a4a8a08f09d37b73795649038408b5f33">c</a>) {</div>
<div class="line"><span class="lineno"> 6310</span>                <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> r = 0; r &lt; 3; ++r) {</div>
<div class="line"><span class="lineno"> 6311</span>                    stream &lt;&lt; transf(r, c);</div>
<div class="line"><span class="lineno"> 6312</span>                    <span class="keywordflow">if</span> (r != 2 || c != 3)</div>
<div class="line"><span class="lineno"> 6313</span>                        stream &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><span class="lineno"> 6314</span>                }</div>
<div class="line"><span class="lineno"> 6315</span>            }</div>
<div class="line"><span class="lineno"> 6316</span>            stream &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6317</span>        }</div>
<div class="line"><span class="lineno"> 6318</span> </div>
<div class="line"><span class="lineno"> 6319</span>        stream &lt;&lt; <span class="stringliteral">&quot;   &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a9add37c8903ccd933e93f5de7b9b428d">COMPONENTS_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6320</span> </div>
<div class="line"><span class="lineno"> 6321</span>        stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6322</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a9add37c8903ccd933e93f5de7b9b428d"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a9add37c8903ccd933e93f5de7b9b428d">COMPONENTS_TAG</a></div><div class="ttdeci">static constexpr const char * COMPONENTS_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:89</div></div>
<div class="ttc" id="a3mf_8cpp_html_a9d76306c6c1f97015c9bce06364577c1"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a9d76306c6c1f97015c9bce06364577c1">COMPONENT_TAG</a></div><div class="ttdeci">static constexpr const char * COMPONENT_TAG</div><div class="ttdef"><b>Definition</b> 3mf.cpp:90</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a834683accde5c12470a6e1b2ab2bb83a"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a834683accde5c12470a6e1b2ab2bb83a">OBJECT_UUID_SUFFIX</a></div><div class="ttdeci">static constexpr const char * OBJECT_UUID_SUFFIX</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:231</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aef34a2816e2e492f7779440698100f2b"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aef34a2816e2e492f7779440698100f2b">OBJECT_UUID_SUFFIX2</a></div><div class="ttdeci">static constexpr const char * OBJECT_UUID_SUFFIX2</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:232</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l05156">Slic3r::_BBS_3MF_Exporter::ObjectData::backup_id</a>, <a class="el" href="../../#l00183">COMPONENT_TAG</a>, <a class="el" href="../../#l00182">COMPONENTS_TAG</a>, <a class="el" href="../../#l05155">Slic3r::_BBS_3MF_Exporter::ObjectData::object</a>, <a class="el" href="../../#l05157">Slic3r::_BBS_3MF_Exporter::ObjectData::object_id</a>, <a class="el" href="../../#l00175">OBJECT_TAG</a>, <a class="el" href="../../#l00231">OBJECT_UUID_SUFFIX</a>, <a class="el" href="../../#l00232">OBJECT_UUID_SUFFIX2</a>, <a class="el" href="../../#l00229">PUUID_ATTR</a>, <a class="el" href="../../#l05159">Slic3r::_BBS_3MF_Exporter::ObjectData::share_mesh</a>, <a class="el" href="../../#l05158">Slic3r::_BBS_3MF_Exporter::ObjectData::sub_path</a>, <a class="el" href="../../#l00250">TRANSFORM_ATTR</a>, <a class="el" href="../../#l05160">Slic3r::_BBS_3MF_Exporter::ObjectData::volumes_objectID</a>, and <a class="el" href="../../#l01170">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-15" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a2dccf6e7ac2a1799e89bb1941306f92e_cgraph.svg" width="376" height="67"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<a id="a1140b5f6c517ae1a3a7ccaa59f8a86a7" name="a1140b5f6c517ae1a3a7ccaa59f8a86a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1140b5f6c517ae1a3a7ccaa59f8a86a7">&#9670;&#160;</a></span>_add_object_to_model_stream()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_object_to_model_stream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#d4/d5c/structmz__zip__writer__staged__context">mz_zip_writer_staged_context</a> &amp;&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a> const &amp;&#160;</td>
          <td class="paramname"><em>object_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6256</span>    {</div>
<div class="line"><span class="lineno"> 6257</span>        <span class="comment">// backup: make _add_mesh_to_object_stream() reusable</span></div>
<div class="line"><span class="lineno"> 6258</span>        <span class="keyword">auto</span> flush = [<span class="keyword">this</span>, &amp;context](std::string &amp; buf, <span class="keywordtype">bool</span> force = <span class="keyword">false</span>) {</div>
<div class="line"><span class="lineno"> 6259</span>            <span class="keywordflow">if</span> ((force &amp;&amp; !buf.empty()) || buf.size() &gt;= 65536 * 16) {</div>
<div class="line"><span class="lineno"> 6260</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab89d8936d177baba8f06eac7b618a6dc">mz_zip_writer_add_staged_data</a>(&amp;context, buf.data(), buf.size())) {</div>
<div class="line"><span class="lineno"> 6261</span>                    <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Error during writing or compression&quot;</span>);</div>
<div class="line"><span class="lineno"> 6262</span>                    BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Error during writing or compression\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6263</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6264</span>                }</div>
<div class="line"><span class="lineno"> 6265</span>                buf.clear();</div>
<div class="line"><span class="lineno"> 6266</span>            }</div>
<div class="line"><span class="lineno"> 6267</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6268</span>        };</div>
<div class="line"><span class="lineno"> 6269</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a513ded708e8008e49a6ee1853e4cd78a">_add_mesh_to_object_stream</a>(flush, object_data)) {</div>
<div class="line"><span class="lineno"> 6270</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add mesh to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6271</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add mesh to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6272</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6273</span>        }</div>
<div class="line"><span class="lineno"> 6274</span> </div>
<div class="line"><span class="lineno"> 6275</span>        <span class="comment">// Move all components to main model</span></div>
<div class="line"><span class="lineno"> 6276</span>        <span class="comment">//_add_object_components_to_stream(stream, object_data);</span></div>
<div class="line"><span class="lineno"> 6277</span> </div>
<div class="line"><span class="lineno"> 6278</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6279</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a513ded708e8008e49a6ee1853e4cd78a"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a513ded708e8008e49a6ee1853e4cd78a">Slic3r::_BBS_3MF_Exporter::_add_mesh_to_object_stream</a></div><div class="ttdeci">bool _add_mesh_to_object_stream(std::function&lt; bool(std::string &amp;, bool)&gt; const &amp;flush, ObjectData const &amp;object_data) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6345</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00109">error</a>, and <a class="el" href="../../#l06858">mz_zip_writer_add_staged_data()</a>.</p>
<div id="dynsection-16" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a1140b5f6c517ae1a3a7ccaa59f8a86a7_cgraph.svg" width="100%" height="506"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a1e315fe74341077954a59875e8544557" name="a1e315fe74341077954a59875e8544557"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e315fe74341077954a59875e8544557">&#9670;&#160;</a></span>_add_print_config_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_print_config_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6785</span>    {</div>
<div class="line"><span class="lineno"> 6786</span>        assert(<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a7fc4c0f61833ab1abb7195cd75463e56">is_decimal_separator_point</a>());</div>
<div class="line"><span class="lineno"> 6787</span>        <span class="keywordtype">char</span> <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>[1024];</div>
<div class="line"><span class="lineno"> 6788</span>        sprintf(<a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, <span class="stringliteral">&quot;; %s\n\n&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a720e9962a59275ec8a54eda3c7bf7173">header_slic3r_generated</a>().c_str());</div>
<div class="line"><span class="lineno"> 6789</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>;</div>
<div class="line"><span class="lineno"> 6790</span> </div>
<div class="line"><span class="lineno"> 6791</span>        <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string &amp;key : config.keys())</div>
<div class="line"><span class="lineno"> 6792</span>            if (<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d">key</a> != <span class="stringliteral">&quot;compatible_printers&quot;</span>)</div>
<div class="line"><span class="lineno"> 6793</span>                <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> += <span class="stringliteral">&quot;; &quot;</span> + <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d">key</a> + <span class="stringliteral">&quot; = &quot;</span> + config.opt_serialize(<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a59e696b1dad6d0d99c172ac4518c2042a3c6e0b8a9c15224a8228b9a98ca1531d">key</a>) + <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 6794</span> </div>
<div class="line"><span class="lineno"> 6795</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.empty()) {</div>
<div class="line"><span class="lineno"> 6796</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a6a680bf5a08cda0f152443e6df7be0a3">BBS_PRINT_CONFIG_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 6797</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add print config file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 6798</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;Unable to add print config file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 6799</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 6800</span>            }</div>
<div class="line"><span class="lineno"> 6801</span>        }</div>
<div class="line"><span class="lineno"> 6802</span> </div>
<div class="line"><span class="lineno"> 6803</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6804</span>    }</div>
<div class="ttc" id="abbs__3mf_8cpp_html_a6a680bf5a08cda0f152443e6df7be0a3"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a6a680bf5a08cda0f152443e6df7be0a3">BBS_PRINT_CONFIG_FILE</a></div><div class="ttdeci">const std::string BBS_PRINT_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:150</div></div>
<div class="ttc" id="anamespace_slic3r_html_a720e9962a59275ec8a54eda3c7bf7173"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a720e9962a59275ec8a54eda3c7bf7173">Slic3r::header_slic3r_generated</a></div><div class="ttdeci">std::string header_slic3r_generated()</div><div class="ttdef"><b>Definition</b> utils.cpp:1110</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00150">BBS_PRINT_CONFIG_FILE</a>, <a class="el" href="../../#l00618">buffer</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l01110">Slic3r::header_slic3r_generated()</a>, <a class="el" href="../../#l00046">Slic3r::is_decimal_separator_point()</a>, <a class="el" href="../../#l01578">Slic3r::DynamicConfig::keys()</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00505">Slic3r::ConfigBase::opt_serialize()</a>, and <a class="el" href="../../#l00058">out</a>.</p>
<div id="dynsection-17" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-17-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-17-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-17-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a1e315fe74341077954a59875e8544557_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a39b6634ca7c5bb1c010ef81aaffd30d6" name="a39b6634ca7c5bb1c010ef81aaffd30d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a39b6634ca7c5bb1c010ef81aaffd30d6">&#9670;&#160;</a></span>_add_project_config_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_project_config_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> &amp;&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6808</span>    {</div>
<div class="line"><span class="lineno"> 6809</span>        <span class="keyword">const</span> std::string&amp; temp_path = model.get_backup_path();</div>
<div class="line"><span class="lineno"> 6810</span>        std::string temp_file = temp_path + std::string(<span class="stringliteral">&quot;/&quot;</span>) + <span class="stringliteral">&quot;_temp_1.config&quot;</span>;</div>
<div class="line"><span class="lineno"> 6811</span>        config.save_to_json(temp_file, std::string(<span class="stringliteral">&quot;project_settings&quot;</span>), std::string(<span class="stringliteral">&quot;project&quot;</span>), std::string(SLIC3R_VERSION));</div>
<div class="line"><span class="lineno"> 6812</span>        <span class="keywordflow">return</span> <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a>(archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aae9d4a88e69aac1e90f1a1e8f440b9bf">BBS_PROJECT_CONFIG_FILE</a>, temp_file);</div>
<div class="line"><span class="lineno"> 6813</span>    }</div>
<div class="ttc" id="abbs__3mf_8cpp_html_aae9d4a88e69aac1e90f1a1e8f440b9bf"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aae9d4a88e69aac1e90f1a1e8f440b9bf">BBS_PROJECT_CONFIG_FILE</a></div><div class="ttdeci">const std::string BBS_PROJECT_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:151</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00151">BBS_PROJECT_CONFIG_FILE</a>, <a class="el" href="../../#l00808">Slic3r::Model::get_backup_path()</a>, and <a class="el" href="../../#l01325">Slic3r::ConfigBase::save_to_json()</a>.</p>
<div id="dynsection-18" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-18-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-18-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-18-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a39b6634ca7c5bb1c010ef81aaffd30d6_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a3109dd91e88010df1ac59a4abd07fcda" name="a3109dd91e88010df1ac59a4abd07fcda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3109dd91e88010df1ac59a4abd07fcda">&#9670;&#160;</a></span>_add_project_embedded_presets_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_project_embedded_presets_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d9/db2/class_slic3r_1_1_preset.html">Preset</a> * &gt;&#160;</td>
          <td class="paramname"><em>project_presets</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 6817</span>    {</div>
<div class="line"><span class="lineno"> 6818</span>        <span class="keywordtype">char</span> <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>[1024];</div>
<div class="line"><span class="lineno"> 6819</span>        sprintf(<a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>, <span class="stringliteral">&quot;; %s\n\n&quot;</span>, <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a720e9962a59275ec8a54eda3c7bf7173">header_slic3r_generated</a>().c_str());</div>
<div class="line"><span class="lineno"> 6820</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = <a class="code hl_define" href="../../d7/d43/xmlparse_8c.html#aaadc06b5dac8070de2c8677210967bdb">buffer</a>;</div>
<div class="line"><span class="lineno"> 6821</span>        <span class="keywordtype">int</span> print_count = 0, filament_count = 0, printer_count = 0;</div>
<div class="line"><span class="lineno"> 6822</span>        <span class="keyword">const</span> std::string&amp; temp_path = model.get_backup_path();</div>
<div class="line"><span class="lineno"> 6823</span> </div>
<div class="line"><span class="lineno"> 6824</span>        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; project_presets.size(); i++)</div>
<div class="line"><span class="lineno"> 6825</span>        {</div>
<div class="line"><span class="lineno"> 6826</span>            Preset* preset = project_presets[i];</div>
<div class="line"><span class="lineno"> 6827</span> </div>
<div class="line"><span class="lineno"> 6828</span>            <span class="keywordflow">if</span> (preset) {</div>
<div class="line"><span class="lineno"> 6829</span>                preset-&gt;file = temp_path + std::string(<span class="stringliteral">&quot;/&quot;</span>) + <span class="stringliteral">&quot;_temp_1.config&quot;</span>;</div>
<div class="line"><span class="lineno"> 6830</span>                DynamicPrintConfig&amp; config = preset-&gt;config;</div>
<div class="line"><span class="lineno"> 6831</span>                <span class="comment">//config.save(preset-&gt;file);</span></div>
<div class="line"><span class="lineno"> 6832</span>                config.save_to_json(preset-&gt;file, preset-&gt;name, std::string(<span class="stringliteral">&quot;project&quot;</span>), preset-&gt;version.to_string());</div>
<div class="line"><span class="lineno"> 6833</span> </div>
<div class="line"><span class="lineno"> 6834</span>                std::string dest_file;</div>
<div class="line"><span class="lineno"> 6835</span>                <span class="keywordflow">if</span> (preset-&gt;type == <a class="code hl_enumvalue" href="../../d9/db2/class_slic3r_1_1_preset.html#af7bb608ce5172f2af2531072ed6a09d8aa582698bad74280274d1d05a917a3511">Preset::TYPE_PRINT</a>) {</div>
<div class="line"><span class="lineno"> 6836</span>                    dest_file = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#a70bdd7e42d2d823b96fc38fcaad3b01f">EMBEDDED_PRINT_FILE_FORMAT</a>) % (print_count + 1)).str();</div>
<div class="line"><span class="lineno"> 6837</span>                    print_count++;</div>
<div class="line"><span class="lineno"> 6838</span>                }</div>
<div class="line"><span class="lineno"> 6839</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (preset-&gt;type == <a class="code hl_enumvalue" href="../../d9/db2/class_slic3r_1_1_preset.html#af7bb608ce5172f2af2531072ed6a09d8af7b67c8546d761f0c92081acd1d91e84">Preset::TYPE_FILAMENT</a>) {</div>
<div class="line"><span class="lineno"> 6840</span>                    dest_file = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#acd2521f12189f9c0920d5a5d07bba5c1">EMBEDDED_FILAMENT_FILE_FORMAT</a>) % (filament_count + 1)).str();</div>
<div class="line"><span class="lineno"> 6841</span>                    filament_count++;</div>
<div class="line"><span class="lineno"> 6842</span>                }</div>
<div class="line"><span class="lineno"> 6843</span>                <span class="keywordflow">else</span> <span class="keywordflow">if</span> (preset-&gt;type == <a class="code hl_enumvalue" href="../../d9/db2/class_slic3r_1_1_preset.html#af7bb608ce5172f2af2531072ed6a09d8a3465ff212b603e7ec9603afef9d6e5d9">Preset::TYPE_PRINTER</a>) {</div>
<div class="line"><span class="lineno"> 6844</span>                    dest_file = (boost::format(<a class="code hl_define" href="../../d6/d6a/bbs__3mf_8hpp.html#ab6241e87fa68ae9746a3acfd88488a90">EMBEDDED_PRINTER_FILE_FORMAT</a>) % (printer_count + 1)).str();</div>
<div class="line"><span class="lineno"> 6845</span>                    printer_count++;</div>
<div class="line"><span class="lineno"> 6846</span>                }</div>
<div class="line"><span class="lineno"> 6847</span>                <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 6848</span>                    <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 6849</span> </div>
<div class="line"><span class="lineno"> 6850</span>                <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a>(archive, dest_file, preset-&gt;file);</div>
<div class="line"><span class="lineno"> 6851</span>            }</div>
<div class="line"><span class="lineno"> 6852</span>        }</div>
<div class="line"><span class="lineno"> 6853</span> </div>
<div class="line"><span class="lineno"> 6854</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 6855</span>    }</div>
<div class="ttc" id="abbs__3mf_8hpp_html_a70bdd7e42d2d823b96fc38fcaad3b01f"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#a70bdd7e42d2d823b96fc38fcaad3b01f">EMBEDDED_PRINT_FILE_FORMAT</a></div><div class="ttdeci">#define EMBEDDED_PRINT_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:23</div></div>
<div class="ttc" id="abbs__3mf_8hpp_html_ab6241e87fa68ae9746a3acfd88488a90"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#ab6241e87fa68ae9746a3acfd88488a90">EMBEDDED_PRINTER_FILE_FORMAT</a></div><div class="ttdeci">#define EMBEDDED_PRINTER_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:25</div></div>
<div class="ttc" id="abbs__3mf_8hpp_html_acd2521f12189f9c0920d5a5d07bba5c1"><div class="ttname"><a href="../../d6/d6a/bbs__3mf_8hpp.html#acd2521f12189f9c0920d5a5d07bba5c1">EMBEDDED_FILAMENT_FILE_FORMAT</a></div><div class="ttdeci">#define EMBEDDED_FILAMENT_FILE_FORMAT</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:24</div></div>
<div class="ttc" id="aclass_slic3r_1_1_preset_html_af7bb608ce5172f2af2531072ed6a09d8a3465ff212b603e7ec9603afef9d6e5d9"><div class="ttname"><a href="../../d9/db2/class_slic3r_1_1_preset.html#af7bb608ce5172f2af2531072ed6a09d8a3465ff212b603e7ec9603afef9d6e5d9">Slic3r::Preset::TYPE_PRINTER</a></div><div class="ttdeci">@ TYPE_PRINTER</div><div class="ttdef"><b>Definition</b> Preset.hpp:169</div></div>
<div class="ttc" id="aclass_slic3r_1_1_preset_html_af7bb608ce5172f2af2531072ed6a09d8aa582698bad74280274d1d05a917a3511"><div class="ttname"><a href="../../d9/db2/class_slic3r_1_1_preset.html#af7bb608ce5172f2af2531072ed6a09d8aa582698bad74280274d1d05a917a3511">Slic3r::Preset::TYPE_PRINT</a></div><div class="ttdeci">@ TYPE_PRINT</div><div class="ttdef"><b>Definition</b> Preset.hpp:165</div></div>
<div class="ttc" id="aclass_slic3r_1_1_preset_html_af7bb608ce5172f2af2531072ed6a09d8af7b67c8546d761f0c92081acd1d91e84"><div class="ttname"><a href="../../d9/db2/class_slic3r_1_1_preset.html#af7bb608ce5172f2af2531072ed6a09d8af7b67c8546d761f0c92081acd1d91e84">Slic3r::Preset::TYPE_FILAMENT</a></div><div class="ttdeci">@ TYPE_FILAMENT</div><div class="ttdef"><b>Definition</b> Preset.hpp:167</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00618">buffer</a>, <a class="el" href="../../#l00216">Slic3r::Preset::config</a>, <a class="el" href="../../#l00024">EMBEDDED_FILAMENT_FILE_FORMAT</a>, <a class="el" href="../../#l00023">EMBEDDED_PRINT_FILE_FORMAT</a>, <a class="el" href="../../#l00025">EMBEDDED_PRINTER_FILE_FORMAT</a>, <a class="el" href="../../#l00208">Slic3r::Preset::file</a>, <a class="el" href="../../#l00808">Slic3r::Model::get_backup_path()</a>, <a class="el" href="../../#l01110">Slic3r::header_slic3r_generated()</a>, <a class="el" href="../../#l00204">Slic3r::Preset::name</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l01325">Slic3r::ConfigBase::save_to_json()</a>, <a class="el" href="../../#l00133">Slic3r::Semver::to_string()</a>, <a class="el" href="../../#l00178">Slic3r::Preset::type</a>, and <a class="el" href="../../#l00226">Slic3r::Preset::version</a>.</p>
<div id="dynsection-19" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-19-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-19-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-19-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a3109dd91e88010df1ac59a4abd07fcda_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a4933ea38f3dae4574aba8ae00c7d09d3" name="a4933ea38f3dae4574aba8ae00c7d09d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4933ea38f3dae4574aba8ae00c7d09d3">&#9670;&#160;</a></span>_add_relationships_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_relationships_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>from</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; const &amp;&#160;</td>
          <td class="paramname"><em>targets</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; std::string &gt; const &amp;&#160;</td>
          <td class="paramname"><em>types</em> = <code>{}</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">PackingTemporaryData</a>&#160;</td>
          <td class="paramname"><em>data</em> = <code><a class="el" href="../../dc/d7b/class_slic3r_1_1_packing_temporary_data.html">PackingTemporaryData</a>()</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>export_plate_idx</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5893</span>    {</div>
<div class="line"><span class="lineno"> 5894</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 5895</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5896</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;Relationships xmlns=\&quot;http://schemas.openxmlformats.org/package/2006/relationships\&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5897</span>        <span class="keywordflow">if</span> (from.empty()) {</div>
<div class="line"><span class="lineno"> 5898</span>            stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a30ad78ff668153764602f6ef0d546388">MODEL_FILE</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-1\&quot; Type=\&quot;http://schemas.microsoft.com/3dmanufacturing/2013/01/3dmodel\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5899</span> </div>
<div class="line"><span class="lineno"> 5900</span>            <span class="keywordflow">if</span> (data._3mf_thumbnail.empty()) {</div>
<div class="line"><span class="lineno"> 5901</span>                <span class="keywordflow">if</span> (export_plate_idx &lt; 0) {</div>
<div class="line"><span class="lineno"> 5902</span>                    stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a7f2d2456687f37e1519a316f6a20479c">THUMBNAIL_FILE</a></div>
<div class="line"><span class="lineno"> 5903</span>                           &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-2\&quot; Type=\&quot;http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5904</span>                } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5905</span>                    std::string thumbnail_file_str = (boost::format(<span class="stringliteral">&quot;Metadata/plate_%1%.png&quot;</span>) % (export_plate_idx + 1)).str();</div>
<div class="line"><span class="lineno"> 5906</span>                    stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(thumbnail_file_str)</div>
<div class="line"><span class="lineno"> 5907</span>                        &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-2\&quot; Type=\&quot;http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5908</span>                }</div>
<div class="line"><span class="lineno"> 5909</span>            } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5910</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(data._3mf_thumbnail)</div>
<div class="line"><span class="lineno"> 5911</span>                       &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-2\&quot; Type=\&quot;http://schemas.openxmlformats.org/package/2006/relationships/metadata/thumbnail\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5912</span>            }</div>
<div class="line"><span class="lineno"> 5913</span> </div>
<div class="line"><span class="lineno"> 5914</span>            <span class="keywordflow">if</span> (!data._3mf_printer_thumbnail_middle.empty()) {</div>
<div class="line"><span class="lineno"> 5915</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(data._3mf_printer_thumbnail_middle)</div>
<div class="line"><span class="lineno"> 5916</span>                       &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-4\&quot; Type=\&quot;http://schemas.bambulab.com/package/2021/cover-thumbnail-middle\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5917</span>            }</div>
<div class="line"><span class="lineno"> 5918</span>            <span class="keywordflow">if</span> (!data._3mf_printer_thumbnail_small.empty())</div>
<div class="line"><span class="lineno"> 5919</span>                stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(data._3mf_printer_thumbnail_small)</div>
<div class="line"><span class="lineno"> 5920</span>                       &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-5\&quot; Type=\&quot;http://schemas.bambulab.com/package/2021/cover-thumbnail-small\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5921</span>        }</div>
<div class="line"><span class="lineno"> 5922</span>        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (targets.empty()) {</div>
<div class="line"><span class="lineno"> 5923</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5924</span>        }</div>
<div class="line"><span class="lineno"> 5925</span>        <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 5926</span>            <span class="keywordtype">int</span> i = 0;</div>
<div class="line"><span class="lineno"> 5927</span>            <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; path : targets) {</div>
<div class="line"><span class="lineno"> 5928</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; type : types)</div>
<div class="line"><span class="lineno"> 5929</span>                    stream &lt;&lt; <span class="stringliteral">&quot; &lt;Relationship Target=\&quot;/&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(path) &lt;&lt; <span class="stringliteral">&quot;\&quot; Id=\&quot;rel-&quot;</span> &lt;&lt; <a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>::<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#aeb3fca8348ccc662e2259780bf8bd621">to_string</a>(++i) &lt;&lt; <span class="stringliteral">&quot;\&quot; Type=\&quot;&quot;</span> &lt;&lt; type &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 5930</span>            }</div>
<div class="line"><span class="lineno"> 5931</span>        }</div>
<div class="line"><span class="lineno"> 5932</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/Relationships&gt;&quot;</span>;</div>
<div class="line"><span class="lineno"> 5933</span> </div>
<div class="line"><span class="lineno"> 5934</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = stream.str();</div>
<div class="line"><span class="lineno"> 5935</span> </div>
<div class="line"><span class="lineno"> 5936</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, from.empty() ? <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ab4af43dcdfbfd5b2a628fc6aa6fce66d">RELATIONSHIPS_FILE</a>.c_str() : from.c_str(), (const <a class="code hl_function" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a1eea52f5cabe9f6172fcec07fb0fed76">length</a>(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 5937</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add relationships file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5938</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add relationships file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5939</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5940</span>        }</div>
<div class="line"><span class="lineno"> 5941</span> </div>
<div class="line"><span class="lineno"> 5942</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5943</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_a7f2d2456687f37e1519a316f6a20479c"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#a7f2d2456687f37e1519a316f6a20479c">THUMBNAIL_FILE</a></div><div class="ttdeci">const std::string THUMBNAIL_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:72</div></div>
<div class="ttc" id="a3mf_8cpp_html_ab4af43dcdfbfd5b2a628fc6aa6fce66d"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ab4af43dcdfbfd5b2a628fc6aa6fce66d">RELATIONSHIPS_FILE</a></div><div class="ttdeci">const std::string RELATIONSHIPS_FILE</div><div class="ttdef"><b>Definition</b> 3mf.cpp:71</div></div>
<div class="ttc" id="aglu-libtess_8h_html_a4292190e3f1f6b373a760c7d9316ad3c"><div class="ttname"><a href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a></div><div class="ttdeci">typedef void(GLAPIENTRYP _GLUfuncptr)(void)</div></div>
<div class="ttc" id="anamespace_slic3r_html_aeb3fca8348ccc662e2259780bf8bd621"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aeb3fca8348ccc662e2259780bf8bd621">Slic3r::to_string</a></div><div class="ttdeci">std::string to_string(const Vec2crd &amp;pt)</div><div class="ttdef"><b>Definition</b> Point.hpp:124</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00038">Slic3r::PackingTemporaryData::_3mf_printer_thumbnail_middle</a>, <a class="el" href="../../#l00039">Slic3r::PackingTemporaryData::_3mf_printer_thumbnail_small</a>, <a class="el" href="../../#l00037">Slic3r::PackingTemporaryData::_3mf_thumbnail</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00133">MODEL_FILE</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l00142">RELATIONSHIPS_FILE</a>, <a class="el" href="../../#l00143">THUMBNAIL_FILE</a>, and <a class="el" href="../../#l01170">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-20" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-20-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-20-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-20-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a4933ea38f3dae4574aba8ae00c7d09d3_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a955eaf9c798d1961c127d47169fbff7a" name="a955eaf9c798d1961c127d47169fbff7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a955eaf9c798d1961c127d47169fbff7a">&#9670;&#160;</a></span>_add_sla_drain_holes_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_sla_drain_holes_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b3de1c94e8943ee9e7de8a5561681ad" name="a0b3de1c94e8943ee9e7de8a5561681ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3de1c94e8943ee9e7de8a5561681ad">&#9670;&#160;</a></span>_add_sla_support_points_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_sla_support_points_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a82b8d8a0a786da63860be8e975c5cbea" name="a82b8d8a0a786da63860be8e975c5cbea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82b8d8a0a786da63860be8e975c5cbea">&#9670;&#160;</a></span>_add_slice_info_config_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_slice_info_config_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>plate_data_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> &amp;&#160;</td>
          <td class="paramname"><em>objects_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 7215</span>    {</div>
<div class="line"><span class="lineno"> 7216</span>        std::stringstream stream;</div>
<div class="line"><span class="lineno"> 7217</span>        <span class="comment">// Store mesh transformation in full precision, as the volumes are stored transformed and they need to be transformed back</span></div>
<div class="line"><span class="lineno"> 7218</span>        <span class="comment">// when loaded as accurately as possible.</span></div>
<div class="line"><span class="lineno"> 7219</span>    stream &lt;&lt; std::setprecision(std::numeric_limits&lt;double&gt;::max_digits10);</div>
<div class="line"><span class="lineno"> 7220</span>        stream &lt;&lt; std::setiosflags(std::ios::fixed) &lt;&lt; std::setprecision(2);</div>
<div class="line"><span class="lineno"> 7221</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7222</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7223</span> </div>
<div class="line"><span class="lineno"> 7224</span>        <span class="comment">// save slice header for debug</span></div>
<div class="line"><span class="lineno"> 7225</span>        stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a875660e1cbce01fd4b5fdcf982932ae0">SLICE_HEADER_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7226</span>        stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aba15cd09db07de1b1f81189f547dc0ab">SLICE_HEADER_ITEM_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;X-BBL-Client-Type&quot;</span>    &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;slicer&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7227</span>        stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aba15cd09db07de1b1f81189f547dc0ab">SLICE_HEADER_ITEM_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <span class="stringliteral">&quot;X-BBL-Client-Version&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#ac2b4f1f858ee27397f5396d403d01547">convert_to_full_version</a>(SLIC3R_VERSION) &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7228</span>        stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a875660e1cbce01fd4b5fdcf982932ae0">SLICE_HEADER_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7229</span> </div>
<div class="line"><span class="lineno"> 7230</span>        <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; (<span class="keywordtype">unsigned</span> <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>)plate_data_list.size(); ++i)</div>
<div class="line"><span class="lineno"> 7231</span>        {</div>
<div class="line"><span class="lineno"> 7232</span>            PlateData* plate_data = plate_data_list[i];</div>
<div class="line"><span class="lineno"> 7233</span>            <span class="comment">//int instance_size = plate_data-&gt;objects_and_instances.size();</span></div>
<div class="line"><span class="lineno"> 7234</span> </div>
<div class="line"><span class="lineno"> 7235</span>            <span class="keywordflow">if</span> (plate_data != <span class="keyword">nullptr</span> &amp;&amp; plate_data-&gt;is_sliced_valid) {</div>
<div class="line"><span class="lineno"> 7236</span>                stream &lt;&lt; <span class="stringliteral">&quot;  &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a71a4e77defa7be83e6c81554f84dea17">PLATE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7237</span>                <span class="comment">//plate index</span></div>
<div class="line"><span class="lineno"> 7238</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a60b93d483d2ea5990f18f7bfcbdc4331">PLATE_IDX_ATTR</a>        &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; plate_data-&gt;plate_index + 1 &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7239</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a993d340c9a5723762c55dd78aae6d738">SLICE_PREDICTION_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; plate_data-&gt;get_gcode_prediction_str() &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7240</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aacb67d35befbcf3cd22b1291318d2a78">SLICE_WEIGHT_ATTR</a>      &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt;  plate_data-&gt;get_gcode_weight_str() &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7241</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#ad27df8cd578ea3441d087d6f3fba8f42">OUTSIDE_ATTR</a>      &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha&lt;&lt; plate_data-&gt;toolpath_outside &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7242</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a1e32a9b06a80e9178bf0c7c2fbfe5175">SUPPORT_USED_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha&lt;&lt; plate_data-&gt;is_support_used &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7243</span>                stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae8ef4e75baea760fe83ddc47cf15face">METADATA_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae23d3300edaed696137c8293849777bb">KEY_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a08dacba0a3184ad81d056e52775d3218">LABEL_OBJECT_ENABLED_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aa1f3d37416a0d1184807707c0b636c06">VALUE_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::boolalpha&lt;&lt; plate_data-&gt;is_label_object_enabled &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7244</span> </div>
<div class="line"><span class="lineno"> 7245</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = plate_data-&gt;objects_and_instances.begin(); it != plate_data-&gt;objects_and_instances.end(); it++)</div>
<div class="line"><span class="lineno"> 7246</span>                {</div>
<div class="line"><span class="lineno"> 7247</span>                        <span class="keywordtype">int</span> obj_id = it-&gt;first;</div>
<div class="line"><span class="lineno"> 7248</span>                        <span class="keywordtype">int</span> inst_id = it-&gt;second;</div>
<div class="line"><span class="lineno"> 7249</span>                        <span class="keywordtype">int</span> identify_id = 0;</div>
<div class="line"><span class="lineno"> 7250</span>                        ModelObject* obj = <a class="code hl_define" href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 7251</span>                        ModelInstance* inst = <a class="code hl_define" href="../../db/dc9/_shiny_prereqs_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"><span class="lineno"> 7252</span>                        <span class="keywordflow">if</span> (obj_id &gt;= model.objects.size()) {</div>
<div class="line"><span class="lineno"> 7253</span>                            BOOST_LOG_TRIVIAL(warning) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;invalid object id %1%\n&quot;</span>)%obj_id;</div>
<div class="line"><span class="lineno"> 7254</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 7255</span>                        }</div>
<div class="line"><span class="lineno"> 7256</span>                        obj =  model.objects[obj_id];</div>
<div class="line"><span class="lineno"> 7257</span> </div>
<div class="line"><span class="lineno"> 7258</span>                        <span class="keywordflow">if</span> (obj &amp;&amp; (inst_id &gt;= obj-&gt;instances.size())) {</div>
<div class="line"><span class="lineno"> 7259</span>                            BOOST_LOG_TRIVIAL(warning) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;invalid instance id %1%\n&quot;</span>)%inst_id;</div>
<div class="line"><span class="lineno"> 7260</span>                            <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 7261</span>                        }</div>
<div class="line"><span class="lineno"> 7262</span>                        inst =  obj-&gt;instances[inst_id];</div>
<div class="line"><span class="lineno"> 7263</span>                        <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a65e62a707f6d881b3aa2cea516c0cebe">m_use_loaded_id</a> &amp;&amp; (inst-&gt;loaded_id &gt; 0))</div>
<div class="line"><span class="lineno"> 7264</span>                            identify_id = inst-&gt;loaded_id;</div>
<div class="line"><span class="lineno"> 7265</span>                        <span class="keywordflow">else</span></div>
<div class="line"><span class="lineno"> 7266</span>                            identify_id = inst-&gt;id().id;</div>
<div class="line"><span class="lineno"> 7267</span>                        <span class="keywordtype">bool</span> skipped = std::find(plate_data-&gt;skipped_objects.begin(), plate_data-&gt;skipped_objects.end(), identify_id) !=</div>
<div class="line"><span class="lineno"> 7268</span>                                       plate_data-&gt;skipped_objects.end();</div>
<div class="line"><span class="lineno"> 7269</span>                        stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#aefc072810a4e2eeb374dde8c1b978549">OBJECT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#adabfc0d888146ccafdb1f4b2bcf51d71">IDENTIFYID_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::to_string(identify_id) &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#ae9f54b391991f290ae0e91d9564c5842">NAME_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a896c49b74a260d028f471ec275601b42">xml_escape</a>(obj-&gt;name)</div>
<div class="line"><span class="lineno"> 7270</span>                               &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a0391447409b329bd51b169b630784615">SKIPPED_ATTR</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; (skipped ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>)</div>
<div class="line"><span class="lineno"> 7271</span>                               &lt;&lt; <span class="stringliteral">&quot;\&quot; /&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7272</span>                }</div>
<div class="line"><span class="lineno"> 7273</span> </div>
<div class="line"><span class="lineno"> 7274</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = plate_data-&gt;slice_filaments_info.begin(); it != plate_data-&gt;slice_filaments_info.end(); it++)</div>
<div class="line"><span class="lineno"> 7275</span>                {</div>
<div class="line"><span class="lineno"> 7276</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#acdbb662215c734af3eb984b6d8a3e202">FILAMENT_TAG</a> &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a26cac8013a972e61ff07a19933cc2348">FILAMENT_ID_TAG</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; std::to_string(it-&gt;id + 1) &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span></div>
<div class="line"><span class="lineno"> 7277</span>                           &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a6c87ca3a91d7ff7f70b5ab00a666e4d3">FILAMENT_TYPE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; it-&gt;type &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span></div>
<div class="line"><span class="lineno"> 7278</span>                           &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#aa1f55b89270f67d12bc7253bd3a5633d">FILAMENT_COLOR_TAG</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; it-&gt;color &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span></div>
<div class="line"><span class="lineno"> 7279</span>                           &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#acbcc22b78ee2a9abf6d0f24537b9688f">FILAMENT_USED_M_TAG</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; it-&gt;used_m &lt;&lt; <span class="stringliteral">&quot;\&quot; &quot;</span></div>
<div class="line"><span class="lineno"> 7280</span>                           &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a6c609e14eb03a9d0d0bbd9a3bc0ceb61">FILAMENT_USED_G_TAG</a> &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; it-&gt;used_g &lt;&lt; <span class="stringliteral">&quot;\&quot; /&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7281</span>                }</div>
<div class="line"><span class="lineno"> 7282</span> </div>
<div class="line"><span class="lineno"> 7283</span>                <span class="keywordflow">for</span> (<span class="keyword">auto</span> it = plate_data-&gt;warnings.begin(); it != plate_data-&gt;warnings.end(); it++) {</div>
<div class="line"><span class="lineno"> 7284</span>                    stream &lt;&lt; <span class="stringliteral">&quot;    &lt;&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a98e32be0fc511fe17cb00c47b9252d55">SLICE_WARNING_TAG</a> &lt;&lt; <span class="stringliteral">&quot; msg=\&quot;&quot;</span> &lt;&lt; it-&gt;msg &lt;&lt; <span class="stringliteral">&quot;\&quot; level=\&quot;&quot;</span> &lt;&lt; std::to_string(it-&gt;level) &lt;&lt; <span class="stringliteral">&quot;\&quot; error_code =\&quot;&quot;</span> &lt;&lt; it-&gt;error_code &lt;&lt; <span class="stringliteral">&quot;\&quot;  /&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7285</span>                }</div>
<div class="line"><span class="lineno"> 7286</span>                stream &lt;&lt; <span class="stringliteral">&quot;  &lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a71a4e77defa7be83e6c81554f84dea17">PLATE_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7287</span>            }</div>
<div class="line"><span class="lineno"> 7288</span>        }</div>
<div class="line"><span class="lineno"> 7289</span>        stream &lt;&lt; <span class="stringliteral">&quot;&lt;/&quot;</span> &lt;&lt; <a class="code hl_variable" href="../../db/d59/3mf_8cpp.html#a8ede86d23de41af4793f4b1fd61d3fbf">CONFIG_TAG</a> &lt;&lt; <span class="stringliteral">&quot;&gt;\n&quot;</span>;</div>
<div class="line"><span class="lineno"> 7290</span> </div>
<div class="line"><span class="lineno"> 7291</span>        std::string <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a> = stream.str();</div>
<div class="line"><span class="lineno"> 7292</span> </div>
<div class="line"><span class="lineno"> 7293</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, <a class="code hl_variable" href="../../dd/d80/bbs__3mf_8cpp.html#a8751cbb925c93016fc3e41de4996a18f">SLICE_INFO_CONFIG_FILE</a>.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)<a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.data(), <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length(), <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 7294</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add model config file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 7295</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, store  slice-info to 3mf,  length %1%, failed\n&quot;</span>) % <a class="code hl_variable" href="../../d7/da4/testmini_8c.html#ad9e5eed42092079dea4d90550ff5fcf0">out</a>.length();</div>
<div class="line"><span class="lineno"> 7296</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 7297</span>        }</div>
<div class="line"><span class="lineno"> 7298</span> </div>
<div class="line"><span class="lineno"> 7299</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 7300</span>    }</div>
<div class="ttc" id="a3mf_8cpp_html_ae9f54b391991f290ae0e91d9564c5842"><div class="ttname"><a href="../../db/d59/3mf_8cpp.html#ae9f54b391991f290ae0e91d9564c5842">NAME_ATTR</a></div><div class="ttdeci">static constexpr const char * NAME_ATTR</div><div class="ttdef"><b>Definition</b> 3mf.cpp:99</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a0391447409b329bd51b169b630784615"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a0391447409b329bd51b169b630784615">SKIPPED_ATTR</a></div><div class="ttdeci">static constexpr const char * SKIPPED_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:286</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a08dacba0a3184ad81d056e52775d3218"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a08dacba0a3184ad81d056e52775d3218">LABEL_OBJECT_ENABLED_ATTR</a></div><div class="ttdeci">static constexpr const char * LABEL_OBJECT_ENABLED_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:285</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a1e32a9b06a80e9178bf0c7c2fbfe5175"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a1e32a9b06a80e9178bf0c7c2fbfe5175">SUPPORT_USED_ATTR</a></div><div class="ttdeci">static constexpr const char * SUPPORT_USED_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:284</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a26cac8013a972e61ff07a19933cc2348"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a26cac8013a972e61ff07a19933cc2348">FILAMENT_ID_TAG</a></div><div class="ttdeci">static constexpr const char * FILAMENT_ID_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:190</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a60b93d483d2ea5990f18f7bfcbdc4331"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a60b93d483d2ea5990f18f7bfcbdc4331">PLATE_IDX_ATTR</a></div><div class="ttdeci">static constexpr const char * PLATE_IDX_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:280</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a6c609e14eb03a9d0d0bbd9a3bc0ceb61"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a6c609e14eb03a9d0d0bbd9a3bc0ceb61">FILAMENT_USED_G_TAG</a></div><div class="ttdeci">static constexpr const char * FILAMENT_USED_G_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:194</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a6c87ca3a91d7ff7f70b5ab00a666e4d3"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a6c87ca3a91d7ff7f70b5ab00a666e4d3">FILAMENT_TYPE_TAG</a></div><div class="ttdeci">static constexpr const char * FILAMENT_TYPE_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:191</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a8751cbb925c93016fc3e41de4996a18f"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a8751cbb925c93016fc3e41de4996a18f">SLICE_INFO_CONFIG_FILE</a></div><div class="ttdeci">const std::string SLICE_INFO_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:154</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a875660e1cbce01fd4b5fdcf982932ae0"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a875660e1cbce01fd4b5fdcf982932ae0">SLICE_HEADER_TAG</a></div><div class="ttdeci">static constexpr const char * SLICE_HEADER_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:205</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a98e32be0fc511fe17cb00c47b9252d55"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a98e32be0fc511fe17cb00c47b9252d55">SLICE_WARNING_TAG</a></div><div class="ttdeci">static constexpr const char * SLICE_WARNING_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:188</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_a993d340c9a5723762c55dd78aae6d738"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#a993d340c9a5723762c55dd78aae6d738">SLICE_PREDICTION_ATTR</a></div><div class="ttdeci">static constexpr const char * SLICE_PREDICTION_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:281</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aa1f55b89270f67d12bc7253bd3a5633d"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aa1f55b89270f67d12bc7253bd3a5633d">FILAMENT_COLOR_TAG</a></div><div class="ttdeci">static constexpr const char * FILAMENT_COLOR_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:192</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aacb67d35befbcf3cd22b1291318d2a78"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aacb67d35befbcf3cd22b1291318d2a78">SLICE_WEIGHT_ATTR</a></div><div class="ttdeci">static constexpr const char * SLICE_WEIGHT_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:282</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_aba15cd09db07de1b1f81189f547dc0ab"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#aba15cd09db07de1b1f81189f547dc0ab">SLICE_HEADER_ITEM_TAG</a></div><div class="ttdeci">static constexpr const char * SLICE_HEADER_ITEM_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:206</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_acbcc22b78ee2a9abf6d0f24537b9688f"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#acbcc22b78ee2a9abf6d0f24537b9688f">FILAMENT_USED_M_TAG</a></div><div class="ttdeci">static constexpr const char * FILAMENT_USED_M_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:193</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_acdbb662215c734af3eb984b6d8a3e202"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#acdbb662215c734af3eb984b6d8a3e202">FILAMENT_TAG</a></div><div class="ttdeci">static constexpr const char * FILAMENT_TAG</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:187</div></div>
<div class="ttc" id="abbs__3mf_8cpp_html_ad27df8cd578ea3441d087d6f3fba8f42"><div class="ttname"><a href="../../dd/d80/bbs__3mf_8cpp.html#ad27df8cd578ea3441d087d6f3fba8f42">OUTSIDE_ATTR</a></div><div class="ttdeci">static constexpr const char * OUTSIDE_ATTR</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:283</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a65e62a707f6d881b3aa2cea516c0cebe"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a65e62a707f6d881b3aa2cea516c0cebe">Slic3r::_BBS_3MF_Exporter::m_use_loaded_id</a></div><div class="ttdeci">bool m_use_loaded_id</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5175</div></div>
<div class="ttc" id="anamespace_slic3r_html_ac2b4f1f858ee27397f5396d403d01547"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ac2b4f1f858ee27397f5396d403d01547">Slic3r::convert_to_full_version</a></div><div class="ttdeci">std::string convert_to_full_version(std::string short_version)</div><div class="ttdef"><b>Definition</b> Utils.hpp:104</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00197">CONFIG_TAG</a>, <a class="el" href="../../#l00104">Slic3r::convert_to_full_version()</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00192">FILAMENT_COLOR_TAG</a>, <a class="el" href="../../#l00190">FILAMENT_ID_TAG</a>, <a class="el" href="../../#l00187">FILAMENT_TAG</a>, <a class="el" href="../../#l00191">FILAMENT_TYPE_TAG</a>, <a class="el" href="../../#l00194">FILAMENT_USED_G_TAG</a>, <a class="el" href="../../#l00193">FILAMENT_USED_M_TAG</a>, <a class="el" href="../../#l00090">Slic3r::PlateData::get_gcode_prediction_str()</a>, <a class="el" href="../../#l00094">Slic3r::PlateData::get_gcode_weight_str()</a>, <a class="el" href="../../#l00036">Slic3r::ObjectID::id</a>, <a class="el" href="../../#l00054">Slic3r::ObjectBase::id()</a>, <a class="el" href="../../#l00277">IDENTIFYID_ATTR</a>, <a class="el" href="../../#l00337">Slic3r::ModelObject::instances</a>, <a class="el" href="../../#l00340">int</a>, <a class="el" href="../../#l00086">Slic3r::PlateData::is_label_object_enabled</a>, <a class="el" href="../../#l00084">Slic3r::PlateData::is_sliced_valid</a>, <a class="el" href="../../#l00083">Slic3r::PlateData::is_support_used</a>, <a class="el" href="../../#l00261">KEY_ATTR</a>, <a class="el" href="../../#l00285">LABEL_OBJECT_ENABLED_ATTR</a>, <a class="el" href="../../#l01233">Slic3r::ModelInstance::loaded_id</a>, <a class="el" href="../../#l00186">METADATA_TAG</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00331">Slic3r::ModelObject::name</a>, <a class="el" href="../../#l00239">NAME_ATTR</a>, <a class="el" href="../../#l00042">NULL</a>, <a class="el" href="../../#l00175">OBJECT_TAG</a>, <a class="el" href="../../#l01486">Slic3r::Model::objects</a>, <a class="el" href="../../#l00066">Slic3r::PlateData::objects_and_instances</a>, <a class="el" href="../../#l00058">out</a>, <a class="el" href="../../#l00283">OUTSIDE_ATTR</a>, <a class="el" href="../../#l00280">PLATE_IDX_ATTR</a>, <a class="el" href="../../#l00065">Slic3r::PlateData::plate_index</a>, <a class="el" href="../../#l00200">PLATE_TAG</a>, <a class="el" href="../../#l00286">SKIPPED_ATTR</a>, <a class="el" href="../../#l00081">Slic3r::PlateData::skipped_objects</a>, <a class="el" href="../../#l00080">Slic3r::PlateData::slice_filaments_info</a>, <a class="el" href="../../#l00206">SLICE_HEADER_ITEM_TAG</a>, <a class="el" href="../../#l00205">SLICE_HEADER_TAG</a>, <a class="el" href="../../#l00154">SLICE_INFO_CONFIG_FILE</a>, <a class="el" href="../../#l00281">SLICE_PREDICTION_ATTR</a>, <a class="el" href="../../#l00188">SLICE_WARNING_TAG</a>, <a class="el" href="../../#l00282">SLICE_WEIGHT_ATTR</a>, <a class="el" href="../../#l00284">SUPPORT_USED_ATTR</a>, <a class="el" href="../../#l00085">Slic3r::PlateData::toolpath_outside</a>, <a class="el" href="../../#l00262">VALUE_ATTR</a>, <a class="el" href="../../#l00088">Slic3r::PlateData::warnings</a>, and <a class="el" href="../../#l01170">Slic3r::xml_escape()</a>.</p>
<div id="dynsection-21" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-21-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-21-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-21-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a82b8d8a0a786da63860be8e975c5cbea_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ab9d32b5a85133cbe6bd44b7399714f83" name="ab9d32b5a85133cbe6bd44b7399714f83"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9d32b5a85133cbe6bd44b7399714f83">&#9670;&#160;</a></span>_add_thumbnail_file_to_archive()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_add_thumbnail_file_to_archive </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp;&#160;</td>
          <td class="paramname"><em>archive</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> &amp;&#160;</td>
          <td class="paramname"><em>thumbnail_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>local_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5835</span>    {</div>
<div class="line"><span class="lineno"> 5836</span>        <span class="keywordtype">bool</span> res = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5837</span> </div>
<div class="line"><span class="lineno"> 5838</span>        <span class="keywordtype">size_t</span> png_size = 0;</div>
<div class="line"><span class="lineno"> 5839</span>        <span class="keywordtype">void</span>* png_data = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a1ed893f615dda47d07210d50b825578f">tdefl_write_image_to_png_file_in_memory_ex</a>((<span class="keyword">const</span> <span class="keywordtype">void</span>*)thumbnail_data.pixels.data(), thumbnail_data.width, thumbnail_data.height, 4, &amp;png_size, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>, 1);</div>
<div class="line"><span class="lineno"> 5840</span>        <span class="keywordflow">if</span> (png_data != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 5841</span>            std::string thumbnail_name = (boost::format(<span class="stringliteral">&quot;%1%_%2%.png&quot;</span>)%local_path % (index + 1)).str();</div>
<div class="line"><span class="lineno"> 5842</span>            res = <a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, thumbnail_name.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span>*)png_data, png_size, <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8a4f66327d56ffc5b2c79fce1daf25ded5">MZ_NO_COMPRESSION</a>);</div>
<div class="line"><span class="lineno"> 5843</span>            <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">mz_free</a>(png_data);</div>
<div class="line"><span class="lineno"> 5844</span>        }</div>
<div class="line"><span class="lineno"> 5845</span> </div>
<div class="line"><span class="lineno"> 5846</span>        <span class="keywordflow">if</span> (!res) {</div>
<div class="line"><span class="lineno"> 5847</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to add thumbnail file to archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5848</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to add thumbnail file to archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5849</span>        }</div>
<div class="line"><span class="lineno"> 5850</span> </div>
<div class="line"><span class="lineno"> 5851</span>        <span class="keywordflow">return</span> res;</div>
<div class="line"><span class="lineno"> 5852</span>    }</div>
<div class="ttc" id="aminiz_8c_html_a1ed893f615dda47d07210d50b825578f"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a1ed893f615dda47d07210d50b825578f">tdefl_write_image_to_png_file_in_memory_ex</a></div><div class="ttdeci">void * tdefl_write_image_to_png_file_in_memory_ex(const void *pImage, int w, int h, int num_chans, size_t *pLen_out, mz_uint level, mz_bool flip)</div><div class="ttdef"><b>Definition</b> miniz.c:2102</div></div>
<div class="ttc" id="aminiz_8c_html_a7bdc0af59e4ca6d7bd8b7d5d005ff55e"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a7bdc0af59e4ca6d7bd8b7d5d005ff55e">mz_free</a></div><div class="ttdeci">void mz_free(void *p)</div><div class="ttdef"><b>Definition</b> miniz.c:155</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00016">Slic3r::ThumbnailData::height</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l00155">mz_free()</a>, <a class="el" href="../../#l00233">MZ_NO_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l00017">Slic3r::ThumbnailData::pixels</a>, <a class="el" href="../../#l02102">tdefl_write_image_to_png_file_in_memory_ex()</a>, and <a class="el" href="../../#l00015">Slic3r::ThumbnailData::width</a>.</p>
<div id="dynsection-22" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-22-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-22-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-22-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_ab9d32b5a85133cbe6bd44b7399714f83_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a8a9233123f226629c50c25de6b5b925e" name="a8a9233123f226629c50c25de6b5b925e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a9233123f226629c50c25de6b5b925e">&#9670;&#160;</a></span>_save_model_to_file()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::_save_model_to_file </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#a08de6a2691e520bf085aea8e860663e8">PlateDataPtrs</a> &amp;&#160;</td>
          <td class="paramname"><em>plate_data_list</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::vector&lt; <a class="el" href="../../d9/db2/class_slic3r_1_1_preset.html">Preset</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>project_presets</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/dea/class_slic3r_1_1_dynamic_print_config.html">DynamicPrintConfig</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>thumbnail_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>top_thumbnail_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>pick_thumbnail_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/db8/namespace_slic3r.html#afd5b13b75ef46c5be8480e3981d21008">Export3mfProgressFn</a>&#160;</td>
          <td class="paramname"><em>proFn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../db/dc6/struct_slic3r_1_1_thumbnail_data.html">ThumbnailData</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>calibration_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const std::vector&lt; <a class="el" href="../../d2/d70/struct_slic3r_1_1_plate_b_box_data.html">PlateBBoxData</a> * &gt; &amp;&#160;</td>
          <td class="paramname"><em>id_bboxes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/d65/class_slic3r_1_1_b_b_l_project.html">BBLProject</a> *&#160;</td>
          <td class="paramname"><em>project</em> = <code>nullptr</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>export_plate_idx</em> = <code>-1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5366</span>    {</div>
<div class="line"><span class="lineno"> 5367</span>        PackingTemporaryData temp_data;</div>
<div class="line"><span class="lineno"> 5368</span> </div>
<div class="line"><span class="lineno"> 5369</span>        <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> archive;</div>
<div class="line"><span class="lineno"> 5370</span>        <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5371</span> </div>
<div class="line"><span class="lineno"> 5372</span>        <span class="keywordtype">bool</span> cb_cancel = <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5373</span> </div>
<div class="line"><span class="lineno"> 5374</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5375</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt;</div>
<div class="line"><span class="lineno"> 5376</span>                boost::format(<span class="stringliteral">&quot;,before open zip writer, m_skip_static %1%, m_save_gcode %2%, m_use_loaded_id %3%&quot;</span>)%<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> %<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">m_save_gcode</a> %<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a65e62a707f6d881b3aa2cea516c0cebe">m_use_loaded_id</a>;</div>
<div class="line"><span class="lineno"> 5377</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5378</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a25b79952de66b88e6a76dd0b0cb33caf">EXPORT_STAGE_OPEN_3MF</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5379</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5380</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5381</span>        }</div>
<div class="line"><span class="lineno"> 5382</span> </div>
<div class="line"><span class="lineno"> 5383</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a70bb7debedfe9d66753ad2a14e610324">open_zip_writer</a>(&amp;archive, filename)) {</div>
<div class="line"><span class="lineno"> 5384</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to open the file&quot;</span>+filename);</div>
<div class="line"><span class="lineno"> 5385</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to open the file\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5386</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5387</span>        }</div>
<div class="line"><span class="lineno"> 5388</span> </div>
<div class="line"><span class="lineno"> 5389</span>        <span class="keyword">struct </span>close_lock</div>
<div class="line"><span class="lineno"> 5390</span>        {</div>
<div class="line"><span class="lineno"> 5391</span>            <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp; archive;</div>
<div class="line"><span class="lineno"> 5392</span>            std::string <span class="keyword">const</span> * filename;</div>
<div class="line"><span class="lineno"> 5393</span>            ~close_lock() {</div>
<div class="line"><span class="lineno"> 5394</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5395</span>                <span class="keywordflow">if</span> (filename)</div>
<div class="line"><span class="lineno"> 5396</span>                boost::filesystem::remove(*filename);</div>
<div class="line"><span class="lineno"> 5397</span>            }</div>
<div class="line"><span class="lineno"> 5398</span>        } lock{ archive, &amp;filename};</div>
<div class="line"><span class="lineno"> 5399</span> </div>
<div class="line"><span class="lineno"> 5400</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5401</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add _add_content_types_file_to_archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5402</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5403</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aa4d38e6e93f978eca18d39655ca47d86">EXPORT_STAGE_CONTENT_TYPES</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5404</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5405</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5406</span>        }</div>
<div class="line"><span class="lineno"> 5407</span> </div>
<div class="line"><span class="lineno"> 5408</span>        <span class="comment">// Adds content types file (&quot;[Content_Types].xml&quot;;).</span></div>
<div class="line"><span class="lineno"> 5409</span>        <span class="comment">// The content of this file is the same for each OrcaSlicer 3mf.</span></div>
<div class="line"><span class="lineno"> 5410</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a45321e2c03a229bdd81f9e7341e3619c">_add_content_types_file_to_archive</a>(archive)) {</div>
<div class="line"><span class="lineno"> 5411</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5412</span>        }</div>
<div class="line"><span class="lineno"> 5413</span> </div>
<div class="line"><span class="lineno"> 5414</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5415</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,before add thumbnails, count %1%&quot;</span>) % thumbnail_data.size();</div>
<div class="line"><span class="lineno"> 5416</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,top&amp;&amp;pick thumbnails, count %1%&quot;</span>)%top_thumbnail_data.size();</div>
<div class="line"><span class="lineno"> 5417</span> </div>
<div class="line"><span class="lineno"> 5418</span>        <span class="comment">//BBS: add thumbnail for each plate</span></div>
<div class="line"><span class="lineno"> 5419</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a>) {</div>
<div class="line"><span class="lineno"> 5420</span>            std::vector&lt;bool&gt; thumbnail_status(plate_data_list.size(), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 5421</span>            std::vector&lt;bool&gt; top_thumbnail_status(plate_data_list.size(), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 5422</span>            std::vector&lt;bool&gt; pick_thumbnail_status(plate_data_list.size(), <span class="keyword">false</span>);</div>
<div class="line"><span class="lineno"> 5423</span> </div>
<div class="line"><span class="lineno"> 5424</span>            <span class="keywordflow">if</span> ((thumbnail_data.size() &gt; 0)&amp;&amp;(thumbnail_data.size() &gt; plate_data_list.size())) {</div>
<div class="line"><span class="lineno"> 5425</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, thumbnail_data size %1% &gt; plate count %2%&quot;</span>)</div>
<div class="line"><span class="lineno"> 5426</span>                    % thumbnail_data.size() %plate_data_list.size();</div>
<div class="line"><span class="lineno"> 5427</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5428</span>            }</div>
<div class="line"><span class="lineno"> 5429</span>            <span class="keywordflow">if</span> ((top_thumbnail_data.size() &gt; 0)&amp;&amp;(top_thumbnail_data.size() &gt; plate_data_list.size())) {</div>
<div class="line"><span class="lineno"> 5430</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, top_thumbnail_data size %1% &gt; plate count %2%&quot;</span>)</div>
<div class="line"><span class="lineno"> 5431</span>                    % top_thumbnail_data.size() %plate_data_list.size();</div>
<div class="line"><span class="lineno"> 5432</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5433</span>            }</div>
<div class="line"><span class="lineno"> 5434</span>            <span class="keywordflow">if</span> ((pick_thumbnail_data.size() &gt; 0)&amp;&amp;(pick_thumbnail_data.size() &gt; plate_data_list.size())) {</div>
<div class="line"><span class="lineno"> 5435</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, pick_thumbnail_data size %1% &gt; plate count %2%&quot;</span>)</div>
<div class="line"><span class="lineno"> 5436</span>                    % pick_thumbnail_data.size() %plate_data_list.size();</div>
<div class="line"><span class="lineno"> 5437</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5438</span>            }</div>
<div class="line"><span class="lineno"> 5439</span>            <span class="keywordflow">if</span> (top_thumbnail_data.size() != pick_thumbnail_data.size()) {</div>
<div class="line"><span class="lineno"> 5440</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, top_thumbnail_data size %1% != pick_thumbnail_data size %2%&quot;</span>)</div>
<div class="line"><span class="lineno"> 5441</span>                    % top_thumbnail_data.size() %pick_thumbnail_data.size();</div>
<div class="line"><span class="lineno"> 5442</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5443</span>            }</div>
<div class="line"><span class="lineno"> 5444</span> </div>
<div class="line"><span class="lineno"> 5445</span>            <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5446</span>                proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a036daf2de7e4763ce9e163ef16b71797">EXPORT_STAGE_ADD_THUMBNAILS</a>, 0, plate_data_list.size(), cb_cancel);</div>
<div class="line"><span class="lineno"> 5447</span>                <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5448</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5449</span>            }</div>
<div class="line"><span class="lineno"> 5450</span> </div>
<div class="line"><span class="lineno"> 5451</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0; index &lt; thumbnail_data.size(); index++)</div>
<div class="line"><span class="lineno"> 5452</span>            {</div>
<div class="line"><span class="lineno"> 5453</span>                <span class="keywordflow">if</span> (thumbnail_data[index]-&gt;is_valid())</div>
<div class="line"><span class="lineno"> 5454</span>                {</div>
<div class="line"><span class="lineno"> 5455</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab9d32b5a85133cbe6bd44b7399714f83">_add_thumbnail_file_to_archive</a>(archive, *thumbnail_data[index], <span class="stringliteral">&quot;Metadata/plate&quot;</span>, index)) {</div>
<div class="line"><span class="lineno"> 5456</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5457</span>                    }</div>
<div class="line"><span class="lineno"> 5458</span>                    BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,add thumbnail %1%&#39;s data into 3mf&quot;</span>)%(index+1);</div>
<div class="line"><span class="lineno"> 5459</span>                    thumbnail_status[index] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5460</span>                }</div>
<div class="line"><span class="lineno"> 5461</span>            }</div>
<div class="line"><span class="lineno"> 5462</span> </div>
<div class="line"><span class="lineno"> 5463</span>            <span class="comment">// Adds the file Metadata/top_i.png and Metadata/pick_i.png</span></div>
<div class="line"><span class="lineno"> 5464</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0; index &lt; top_thumbnail_data.size(); index++)</div>
<div class="line"><span class="lineno"> 5465</span>            {</div>
<div class="line"><span class="lineno"> 5466</span>                <span class="keywordflow">if</span> (top_thumbnail_data[index]-&gt;is_valid())</div>
<div class="line"><span class="lineno"> 5467</span>                {</div>
<div class="line"><span class="lineno"> 5468</span>                    BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,add top thumbnail %1%&#39;s data into 3mf&quot;</span>)%(index+1);</div>
<div class="line"><span class="lineno"> 5469</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab9d32b5a85133cbe6bd44b7399714f83">_add_thumbnail_file_to_archive</a>(archive, *top_thumbnail_data[index], <span class="stringliteral">&quot;Metadata/top&quot;</span>, index)) {</div>
<div class="line"><span class="lineno"> 5470</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5471</span>                    }</div>
<div class="line"><span class="lineno"> 5472</span>                    top_thumbnail_status[index] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5473</span>                }</div>
<div class="line"><span class="lineno"> 5474</span> </div>
<div class="line"><span class="lineno"> 5475</span>                <span class="keywordflow">if</span> (pick_thumbnail_data[index]-&gt;is_valid())</div>
<div class="line"><span class="lineno"> 5476</span>                {</div>
<div class="line"><span class="lineno"> 5477</span>                    BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,add pick thumbnail %1%&#39;s data into 3mf&quot;</span>)%(index+1);</div>
<div class="line"><span class="lineno"> 5478</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab9d32b5a85133cbe6bd44b7399714f83">_add_thumbnail_file_to_archive</a>(archive, *pick_thumbnail_data[index], <span class="stringliteral">&quot;Metadata/pick&quot;</span>, index)) {</div>
<div class="line"><span class="lineno"> 5479</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5480</span>                    }</div>
<div class="line"><span class="lineno"> 5481</span>                    pick_thumbnail_status[index] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5482</span>                }</div>
<div class="line"><span class="lineno"> 5483</span>            }</div>
<div class="line"><span class="lineno"> 5484</span> </div>
<div class="line"><span class="lineno"> 5485</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; plate_data_list.size(); i++) {</div>
<div class="line"><span class="lineno"> 5486</span>                PlateData *plate_data = plate_data_list[i];</div>
<div class="line"><span class="lineno"> 5487</span> </div>
<div class="line"><span class="lineno"> 5488</span>                <span class="keywordflow">if</span> (!thumbnail_status[i] &amp;&amp; !plate_data-&gt;thumbnail_file.empty() &amp;&amp; (boost::filesystem::exists(plate_data-&gt;thumbnail_file))){</div>
<div class="line"><span class="lineno"> 5489</span>                    std::string dst_in_3mf = (boost::format(<span class="stringliteral">&quot;Metadata/plate_%1%.png&quot;</span>) % (i + 1)).str();</div>
<div class="line"><span class="lineno"> 5490</span>                    BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add thumbnail %1% from file %2%&quot;</span>) % (i+1) %plate_data-&gt;thumbnail_file;</div>
<div class="line"><span class="lineno"> 5491</span> </div>
<div class="line"><span class="lineno"> 5492</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a>(archive, dst_in_3mf, plate_data-&gt;thumbnail_file)) {</div>
<div class="line"><span class="lineno"> 5493</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add thumbnail %1% from file %2% failed\n&quot;</span>) % (i+1) %plate_data-&gt;thumbnail_file;</div>
<div class="line"><span class="lineno"> 5494</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5495</span>                    }</div>
<div class="line"><span class="lineno"> 5496</span>                }</div>
<div class="line"><span class="lineno"> 5497</span> </div>
<div class="line"><span class="lineno"> 5498</span>                <span class="keywordflow">if</span> (!top_thumbnail_status[i] &amp;&amp; !plate_data-&gt;top_file.empty() &amp;&amp; (boost::filesystem::exists(plate_data-&gt;top_file))){</div>
<div class="line"><span class="lineno"> 5499</span>                    std::string dst_in_3mf = (boost::format(<span class="stringliteral">&quot;Metadata/top_%1%.png&quot;</span>) % (i + 1)).str();</div>
<div class="line"><span class="lineno"> 5500</span> </div>
<div class="line"><span class="lineno"> 5501</span>                    BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add top thumbnail %1% from file %2%&quot;</span>) % (i+1) %plate_data-&gt;top_file;</div>
<div class="line"><span class="lineno"> 5502</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a>(archive, dst_in_3mf, plate_data-&gt;top_file)) {</div>
<div class="line"><span class="lineno"> 5503</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add top thumbnail %1% failed&quot;</span>) % (i+1);</div>
<div class="line"><span class="lineno"> 5504</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5505</span>                    }</div>
<div class="line"><span class="lineno"> 5506</span>                    top_thumbnail_status[i] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5507</span>                }</div>
<div class="line"><span class="lineno"> 5508</span> </div>
<div class="line"><span class="lineno"> 5509</span>                <span class="keywordflow">if</span> (!pick_thumbnail_status[i] &amp;&amp; !plate_data-&gt;pick_file.empty() &amp;&amp; (boost::filesystem::exists(plate_data-&gt;pick_file))){</div>
<div class="line"><span class="lineno"> 5510</span>                    std::string dst_in_3mf = (boost::format(<span class="stringliteral">&quot;Metadata/pick_%1%.png&quot;</span>) % (i + 1)).str();</div>
<div class="line"><span class="lineno"> 5511</span> </div>
<div class="line"><span class="lineno"> 5512</span>                    BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add pick thumbnail %1% from file %2%&quot;</span>) % (i+1) %plate_data-&gt;pick_file;</div>
<div class="line"><span class="lineno"> 5513</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aac323ea063fd4dbfaa9670e1b2ffa30d">_add_file_to_archive</a>(archive, dst_in_3mf, plate_data-&gt;pick_file)) {</div>
<div class="line"><span class="lineno"> 5514</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, add pick thumbnail %1% failed&quot;</span>) % (i+1);</div>
<div class="line"><span class="lineno"> 5515</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5516</span>                    }</div>
<div class="line"><span class="lineno"> 5517</span>                    pick_thumbnail_status[i] = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5518</span>                }</div>
<div class="line"><span class="lineno"> 5519</span>            }</div>
<div class="line"><span class="lineno"> 5520</span>            <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5521</span>                proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a036daf2de7e4763ce9e163ef16b71797">EXPORT_STAGE_ADD_THUMBNAILS</a>, plate_data_list.size(), plate_data_list.size(), cb_cancel);</div>
<div class="line"><span class="lineno"> 5522</span>                <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5523</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5524</span>            }</div>
<div class="line"><span class="lineno"> 5525</span>        }</div>
<div class="line"><span class="lineno"> 5526</span> </div>
<div class="line"><span class="lineno"> 5527</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,before add calibration thumbnails, count %1%\n&quot;</span>)%calibration_data.size();</div>
<div class="line"><span class="lineno"> 5528</span>        <span class="comment">//BBS add calibration thumbnail for each plate</span></div>
<div class="line"><span class="lineno"> 5529</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> &amp;&amp; calibration_data.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 5530</span>            <span class="comment">// Adds the file Metadata/calibration_p[X].png.</span></div>
<div class="line"><span class="lineno"> 5531</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0; index &lt; calibration_data.size(); index++)</div>
<div class="line"><span class="lineno"> 5532</span>            {</div>
<div class="line"><span class="lineno"> 5533</span>                <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5534</span>                    proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a036daf2de7e4763ce9e163ef16b71797">EXPORT_STAGE_ADD_THUMBNAILS</a>, index, calibration_data.size(), cb_cancel);</div>
<div class="line"><span class="lineno"> 5535</span>                    <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5536</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5537</span>                }</div>
<div class="line"><span class="lineno"> 5538</span> </div>
<div class="line"><span class="lineno"> 5539</span>                <span class="keywordflow">if</span> (calibration_data[index]-&gt;is_valid())</div>
<div class="line"><span class="lineno"> 5540</span>                {</div>
<div class="line"><span class="lineno"> 5541</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1fea892ce676b2b37e4a6fa3eca76818">_add_calibration_file_to_archive</a>(archive, *calibration_data[index], index)) {</div>
<div class="line"><span class="lineno"> 5542</span>                        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5543</span>                        boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 5544</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5545</span>                    }</div>
<div class="line"><span class="lineno"> 5546</span>                }</div>
<div class="line"><span class="lineno"> 5547</span>            }</div>
<div class="line"><span class="lineno"> 5548</span>        }</div>
<div class="line"><span class="lineno"> 5549</span> </div>
<div class="line"><span class="lineno"> 5550</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;,before add calibration boundingbox, count %1%\n&quot;</span>)%id_bboxes.size();</div>
<div class="line"><span class="lineno"> 5551</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> &amp;&amp; id_bboxes.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 5552</span>            <span class="comment">// Adds the file Metadata/calibration_p[X].png.</span></div>
<div class="line"><span class="lineno"> 5553</span>            <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index = 0; index &lt; id_bboxes.size(); index++)</div>
<div class="line"><span class="lineno"> 5554</span>            {</div>
<div class="line"><span class="lineno"> 5555</span>                <span class="comment">// BBS: save bounding box to json</span></div>
<div class="line"><span class="lineno"> 5556</span>                <span class="keywordflow">if</span> (id_bboxes[index]-&gt;is_valid()) {</div>
<div class="line"><span class="lineno"> 5557</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae8bfb52545805cbda11ee2564cca0b3e">_add_bbox_file_to_archive</a>(archive, *id_bboxes[index], index)) {</div>
<div class="line"><span class="lineno"> 5558</span>                        <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5559</span>                        boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 5560</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5561</span>                    }</div>
<div class="line"><span class="lineno"> 5562</span>                }</div>
<div class="line"><span class="lineno"> 5563</span>            }</div>
<div class="line"><span class="lineno"> 5564</span>        }</div>
<div class="line"><span class="lineno"> 5565</span> </div>
<div class="line"><span class="lineno"> 5566</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5567</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add models\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5568</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5569</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aae9d3d72384f03b1d1e33275cef544e4">EXPORT_STAGE_ADD_MODELS</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5570</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5571</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5572</span>        }</div>
<div class="line"><span class="lineno"> 5573</span> </div>
<div class="line"><span class="lineno"> 5574</span>        <span class="comment">// Adds model file (&quot;3D/3dmodel.model&quot;).</span></div>
<div class="line"><span class="lineno"> 5575</span>        <span class="comment">// This is the one and only file that contains all the geometry (vertices and triangles) of all ModelVolumes.</span></div>
<div class="line"><span class="lineno"> 5576</span>        <a class="code hl_typedef" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> objects_data;</div>
<div class="line"><span class="lineno"> 5577</span>        <span class="comment">//if (!m_skip_model)</span></div>
<div class="line"><span class="lineno"> 5578</span>        {</div>
<div class="line"><span class="lineno"> 5579</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8b9b1e54ffc278d13207b57c393f68c5">_add_model_file_to_archive</a>(filename, archive, model, objects_data, proFn, project)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><span class="lineno"> 5580</span> </div>
<div class="line"><span class="lineno"> 5581</span>            <span class="comment">// Adds layer height profile file (&quot;Metadata/Slic3r_PE_layer_heights_profile.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 5582</span>            <span class="comment">// All layer height profiles of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 5583</span>            <span class="comment">// The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 5584</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a5c5be5270eba03a8fa0620c2aef7190f">_add_layer_height_profile_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 5585</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5586</span>                boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 5587</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5588</span>            }</div>
<div class="line"><span class="lineno"> 5589</span> </div>
<div class="line"><span class="lineno"> 5590</span>            <span class="comment">// BBS progress point</span></div>
<div class="line"><span class="lineno"> 5591</span>            <span class="comment">/*BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; &quot;:&quot; &lt;&lt;__LINE__ &lt;&lt; boost::format(&quot;export 3mf EXPORT_STAGE_ADD_LAYER_RANGE\n&quot;);</span></div>
<div class="line"><span class="lineno"> 5592</span><span class="comment">            if (proFn) {</span></div>
<div class="line"><span class="lineno"> 5593</span><span class="comment">                proFn(EXPORT_STAGE_ADD_LAYER_RANGE, 0, 1, cb_cancel);</span></div>
<div class="line"><span class="lineno"> 5594</span><span class="comment">                if (cb_cancel)</span></div>
<div class="line"><span class="lineno"> 5595</span><span class="comment">                    return false;</span></div>
<div class="line"><span class="lineno"> 5596</span><span class="comment">            }*/</span></div>
<div class="line"><span class="lineno"> 5597</span> </div>
<div class="line"><span class="lineno"> 5598</span>            <span class="comment">// Adds layer config ranges file (&quot;Metadata/Slic3r_PE_layer_config_ranges.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 5599</span>            <span class="comment">// All layer height profiles of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 5600</span>            <span class="comment">// The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 5601</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a44929132c23c05d2203cb4753205725d">_add_layer_config_ranges_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 5602</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5603</span>                boost::filesystem::remove(filename);</div>
<div class="line"><span class="lineno"> 5604</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5605</span>            }</div>
<div class="line"><span class="lineno"> 5606</span> </div>
<div class="line"><span class="lineno"> 5607</span>            <span class="comment">// BBS progress point</span></div>
<div class="line"><span class="lineno"> 5608</span>            <span class="comment">/*BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; &quot;:&quot; &lt;&lt;__LINE__ &lt;&lt; boost::format(&quot;export 3mf EXPORT_STAGE_ADD_SUPPORT\n&quot;);</span></div>
<div class="line"><span class="lineno"> 5609</span><span class="comment">            if (proFn) {</span></div>
<div class="line"><span class="lineno"> 5610</span><span class="comment">                proFn(EXPORT_STAGE_ADD_SUPPORT, 0, 1, cb_cancel);</span></div>
<div class="line"><span class="lineno"> 5611</span><span class="comment">                if (cb_cancel)</span></div>
<div class="line"><span class="lineno"> 5612</span><span class="comment">                    return false;</span></div>
<div class="line"><span class="lineno"> 5613</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno"> 5614</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 5615</span><span class="comment">            // Adds sla support points file (&quot;Metadata/Slic3r_PE_sla_support_points.txt&quot;).</span></div>
<div class="line"><span class="lineno"> 5616</span><span class="comment">            // All  sla support points of all ModelObjects are stored here, indexed by 1 based index of the ModelObject in Model.</span></div>
<div class="line"><span class="lineno"> 5617</span><span class="comment">            // The index differes from the index of an object ID of an object instance of a 3MF file!</span></div>
<div class="line"><span class="lineno"> 5618</span><span class="comment">            if (!_add_sla_support_points_file_to_archive(archive, model)) {</span></div>
<div class="line"><span class="lineno"> 5619</span><span class="comment">                return false;</span></div>
<div class="line"><span class="lineno"> 5620</span><span class="comment">            }</span></div>
<div class="line"><span class="lineno"> 5621</span><span class="comment"></span> </div>
<div class="line"><span class="lineno"> 5622</span><span class="comment">            if (!_add_sla_drain_holes_file_to_archive(archive, model)) {</span></div>
<div class="line"><span class="lineno"> 5623</span><span class="comment">                return false;</span></div>
<div class="line"><span class="lineno"> 5624</span><span class="comment">            }*/</span></div>
<div class="line"><span class="lineno"> 5625</span> </div>
<div class="line"><span class="lineno"> 5626</span>            <span class="comment">// BBS progress point</span></div>
<div class="line"><span class="lineno"> 5627</span>            BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add custom gcodes\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5628</span>            <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5629</span>                proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a14536a29c59631ebd1ac1df6ee13fd19">EXPORT_STAGE_ADD_CUSTOM_GCODE</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5630</span>                <span class="keywordflow">if</span> (cb_cancel) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5631</span>            }</div>
<div class="line"><span class="lineno"> 5632</span> </div>
<div class="line"><span class="lineno"> 5633</span>            <span class="comment">// Adds custom gcode per height file (&quot;Metadata/Prusa_Slicer_custom_gcode_per_print_z.xml&quot;).</span></div>
<div class="line"><span class="lineno"> 5634</span>            <span class="comment">// All custom gcode per height of whole Model are stored here</span></div>
<div class="line"><span class="lineno"> 5635</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a29fd6be9e68ca4129b832e3bdda62905">_add_custom_gcode_per_print_z_file_to_archive</a>(archive, model, config)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><span class="lineno"> 5636</span> </div>
<div class="line"><span class="lineno"> 5637</span>            <span class="comment">// BBS progress point</span></div>
<div class="line"><span class="lineno"> 5638</span>            BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add project_settings\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5639</span>            <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5640</span>                proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a3dede35009ad25c2025706e08ca37528">EXPORT_STAGE_ADD_PRINT_CONFIG</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5641</span>                <span class="keywordflow">if</span> (cb_cancel) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5642</span>            }</div>
<div class="line"><span class="lineno"> 5643</span> </div>
<div class="line"><span class="lineno"> 5644</span>            <span class="comment">// Adds slic3r print config file (&quot;Metadata/Slic3r_PE.config&quot;).</span></div>
<div class="line"><span class="lineno"> 5645</span>            <span class="comment">// This file contains the content of FullPrintConfing / SLAFullPrintConfig.</span></div>
<div class="line"><span class="lineno"> 5646</span>            <span class="keywordflow">if</span> (config != <span class="keyword">nullptr</span>) {</div>
<div class="line"><span class="lineno"> 5647</span>                <span class="comment">// BBS: change to json format</span></div>
<div class="line"><span class="lineno"> 5648</span>                <span class="comment">// if (!_add_print_config_file_to_archive(archive, *config)) {</span></div>
<div class="line"><span class="lineno"> 5649</span>                <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a39b6634ca7c5bb1c010ef81aaffd30d6">_add_project_config_file_to_archive</a>(archive, *config, model)) { <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><span class="lineno"> 5650</span>            }</div>
<div class="line"><span class="lineno"> 5651</span> </div>
<div class="line"><span class="lineno"> 5652</span>            <span class="comment">// BBS progress point</span></div>
<div class="line"><span class="lineno"> 5653</span>            BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add project embedded settings\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5654</span>            <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5655</span>                proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#afd8f4158f7b96f264bf7104cb9c24805">EXPORT_STAGE_ADD_CONFIG_FILE</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5656</span>                <span class="keywordflow">if</span> (cb_cancel) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5657</span>            }</div>
<div class="line"><span class="lineno"> 5658</span> </div>
<div class="line"><span class="lineno"> 5659</span>            <span class="comment">// BBS: add project config</span></div>
<div class="line"><span class="lineno"> 5660</span>            <span class="keywordflow">if</span> (project_presets.size() &gt; 0) {</div>
<div class="line"><span class="lineno"> 5661</span>                <span class="comment">// BBS: add project embedded preset files</span></div>
<div class="line"><span class="lineno"> 5662</span>                <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a3109dd91e88010df1ac59a4abd07fcda">_add_project_embedded_presets_to_archive</a>(archive, model, project_presets);</div>
<div class="line"><span class="lineno"> 5663</span> </div>
<div class="line"><span class="lineno"> 5664</span>                BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, finished add project embedded settings, size %1%\n&quot;</span>)%project_presets.size();</div>
<div class="line"><span class="lineno"> 5665</span>                <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5666</span>                    proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#ad5b85cdd96563006fc4fa46053ec53b5">EXPORT_STAGE_ADD_PROJECT_CONFIG</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5667</span>                    <span class="keywordflow">if</span> (cb_cancel) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5668</span>                }</div>
<div class="line"><span class="lineno"> 5669</span>            }</div>
<div class="line"><span class="lineno"> 5670</span>        }</div>
<div class="line"><span class="lineno"> 5671</span> </div>
<div class="line"><span class="lineno"> 5672</span>        <span class="comment">// add plate_N.gcode.md5 to file</span></div>
<div class="line"><span class="lineno"> 5673</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> &amp;&amp; <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">m_save_gcode</a>) {</div>
<div class="line"><span class="lineno"> 5674</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; plate_data_list.size(); i++) {</div>
<div class="line"><span class="lineno"> 5675</span>                PlateData *plate_data = plate_data_list[i];</div>
<div class="line"><span class="lineno"> 5676</span>                <span class="keywordflow">if</span> (!plate_data-&gt;gcode_file.empty() &amp;&amp; plate_data-&gt;is_sliced_valid &amp;&amp; boost::filesystem::exists(plate_data-&gt;gcode_file)) {</div>
<div class="line"><span class="lineno"> 5677</span>                    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> digest[16];</div>
<div class="line"><span class="lineno"> 5678</span>                    MD5_CTX       ctx;</div>
<div class="line"><span class="lineno"> 5679</span>                    MD5_Init(&amp;ctx);</div>
<div class="line"><span class="lineno"> 5680</span>                    <span class="keyword">auto</span>                        src_gcode_file = plate_data-&gt;gcode_file;</div>
<div class="line"><span class="lineno"> 5681</span>                    boost::filesystem::ifstream ifs(src_gcode_file, std::ios::binary);</div>
<div class="line"><span class="lineno"> 5682</span>                    std::string                 buf(64 * 1024, 0);</div>
<div class="line"><span class="lineno"> 5683</span>                    <span class="keyword">const</span> std::size_t &amp;         <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>      = boost::filesystem::file_size(src_gcode_file);</div>
<div class="line"><span class="lineno"> 5684</span>                    std::size_t                 left_size = <a class="code hl_variable" href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a>;</div>
<div class="line"><span class="lineno"> 5685</span>                    <span class="keywordflow">while</span> (ifs) {</div>
<div class="line"><span class="lineno"> 5686</span>                        ifs.read(buf.data(), buf.size());</div>
<div class="line"><span class="lineno"> 5687</span>                        <span class="keywordtype">int</span> read_bytes = ifs.gcount();</div>
<div class="line"><span class="lineno"> 5688</span>                        MD5_Update(&amp;ctx, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) buf.data(), read_bytes);</div>
<div class="line"><span class="lineno"> 5689</span>                    }</div>
<div class="line"><span class="lineno"> 5690</span>                    MD5_Final(digest, &amp;ctx);</div>
<div class="line"><span class="lineno"> 5691</span>                    <span class="keywordtype">char</span> md5_str[33];</div>
<div class="line"><span class="lineno"> 5692</span>                    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j = 0; j &lt; 16; j++) { sprintf(&amp;md5_str[j * 2], <span class="stringliteral">&quot;%02X&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) digest[j]); }</div>
<div class="line"><span class="lineno"> 5693</span>                    plate_data-&gt;gcode_file_md5 = std::string(md5_str);</div>
<div class="line"><span class="lineno"> 5694</span>                    std::string target_file    = (boost::format(<span class="stringliteral">&quot;Metadata/plate_%1%.gcode.md5&quot;</span>) % (plate_data-&gt;plate_index + 1)).str();</div>
<div class="line"><span class="lineno"> 5695</span>                    <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#ab5aac408b80e6f51a14434330fc76d6d">mz_zip_writer_add_mem</a>(&amp;archive, target_file.c_str(), (<span class="keyword">const</span> <span class="keywordtype">void</span> *) plate_data-&gt;gcode_file_md5.c_str(), plate_data-&gt;gcode_file_md5.length(),</div>
<div class="line"><span class="lineno"> 5696</span>                                               <a class="code hl_enumvalue" href="../../d0/d1b/miniz_8h.html#af31b5d8dc6e4f77353e9c96fd2b527f8aceaa50dfb8809ffd1631b0fe01344279">MZ_DEFAULT_COMPRESSION</a>)) {</div>
<div class="line"><span class="lineno"> 5697</span>                        BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__</div>
<div class="line"><span class="lineno"> 5698</span>                                                 &lt;&lt; boost::format(<span class="stringliteral">&quot;, store  gcode md5 to 3mf&#39;s %1%,  length %2%, failed\n&quot;</span>) %target_file %plate_data-&gt;gcode_file_md5.length();</div>
<div class="line"><span class="lineno"> 5699</span>                        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5700</span>                    }</div>
<div class="line"><span class="lineno"> 5701</span>                }</div>
<div class="line"><span class="lineno"> 5702</span>            }</div>
<div class="line"><span class="lineno"> 5703</span>        }</div>
<div class="line"><span class="lineno"> 5704</span> </div>
<div class="line"><span class="lineno"> 5705</span>        <span class="comment">// Adds gcode files (&quot;Metadata/plate_1.gcode, plate_2.gcode, ...)</span></div>
<div class="line"><span class="lineno"> 5706</span>        <span class="comment">// Before _add_model_config_file_to_archive, because we modify plate_data</span></div>
<div class="line"><span class="lineno"> 5707</span>        <span class="comment">//if (!m_skip_static &amp;&amp; !_add_gcode_file_to_archive(archive, model, plate_data_list, proFn)) {</span></div>
<div class="line"><span class="lineno"> 5708</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> &amp;&amp; <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">m_save_gcode</a> &amp;&amp; !<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aad75378873dc729ccaadacc900f7ab4c">_add_gcode_file_to_archive</a>(archive, model, plate_data_list, proFn)) {</div>
<div class="line"><span class="lineno"> 5709</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, _add_gcode_file_to_archive failed\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5710</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5711</span>        }</div>
<div class="line"><span class="lineno"> 5712</span> </div>
<div class="line"><span class="lineno"> 5713</span>        <span class="comment">// Adds slic3r model config file (&quot;Metadata/Slic3r_PE_model.config&quot;).</span></div>
<div class="line"><span class="lineno"> 5714</span>        <span class="comment">// This file contains all the attributes of all ModelObjects and their ModelVolumes (names, parameter overrides).</span></div>
<div class="line"><span class="lineno"> 5715</span>        <span class="comment">// As there is just a single Indexed Triangle Set data stored per ModelObject, offsets of volumes into their respective Indexed Triangle Set data</span></div>
<div class="line"><span class="lineno"> 5716</span>        <span class="comment">// is stored here as well.</span></div>
<div class="line"><span class="lineno"> 5717</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a68d95b3efe8c797d038e853eb5ee56d0">_add_model_config_file_to_archive</a>(archive, model, plate_data_list, objects_data, export_plate_idx, <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">m_save_gcode</a>, <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a65e62a707f6d881b3aa2cea516c0cebe">m_use_loaded_id</a>)) {</div>
<div class="line"><span class="lineno"> 5718</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, _add_model_config_file_to_archive failed\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5719</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5720</span>        }</div>
<div class="line"><span class="lineno"> 5721</span> </div>
<div class="line"><span class="lineno"> 5722</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad156077c6909c1454a17775d6320fd8b">_add_cut_information_file_to_archive</a>(archive, model)) {</div>
<div class="line"><span class="lineno"> 5723</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, _add_cut_information_file_to_archive failed\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5724</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5725</span>        }</div>
<div class="line"><span class="lineno"> 5726</span> </div>
<div class="line"><span class="lineno"> 5727</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5728</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add sliced info to 3mf\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5729</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5730</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#aacb88dbee6187ab5f61311bba643c71d">EXPORT_STAGE_ADD_SLICE_INFO</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5731</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5732</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5733</span>        }</div>
<div class="line"><span class="lineno"> 5734</span> </div>
<div class="line"><span class="lineno"> 5735</span>        <span class="comment">// Adds sliced info of plate file (&quot;Metadata/slice_info.config&quot;)</span></div>
<div class="line"><span class="lineno"> 5736</span>        <span class="comment">// This file contains all sliced info of all plates</span></div>
<div class="line"><span class="lineno"> 5737</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a82b8d8a0a786da63860be8e975c5cbea">_add_slice_info_config_file_to_archive</a>(archive, model, plate_data_list, objects_data)) {</div>
<div class="line"><span class="lineno"> 5738</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, _add_slice_info_config_file_to_archive failed\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5739</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5740</span>        }</div>
<div class="line"><span class="lineno"> 5741</span> </div>
<div class="line"><span class="lineno"> 5742</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5743</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add auxiliary dir to 3mf\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5744</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5745</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#a2f4f3d904d0c71590a53c89bec9c92ab">EXPORT_STAGE_ADD_AUXILIARIES</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5746</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5747</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5748</span>        }</div>
<div class="line"><span class="lineno"> 5749</span> </div>
<div class="line"><span class="lineno"> 5750</span>        <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> &amp;&amp; !<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae15c2e44ecbb30004fc956e88106c8b7">_add_auxiliary_dir_to_archive</a>(archive, model.get_auxiliary_file_temp_path(), temp_data)) {</div>
<div class="line"><span class="lineno"> 5751</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, _add_auxiliary_dir_to_archive failed\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5752</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5753</span>        }</div>
<div class="line"><span class="lineno"> 5754</span> </div>
<div class="line"><span class="lineno"> 5755</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5756</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, before add relation file to 3mf\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5757</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5758</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#ade3cb91e3e29d82c306c3fdd1633fcd6">EXPORT_STAGE_ADD_RELATIONS</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5759</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5760</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5761</span>        }</div>
<div class="line"><span class="lineno"> 5762</span> </div>
<div class="line"><span class="lineno"> 5763</span>        <span class="comment">// Adds relationships file (&quot;_rels/.rels&quot;).</span></div>
<div class="line"><span class="lineno"> 5764</span>        <span class="comment">// The content of this file is the same for each OrcaSlicer 3mf.</span></div>
<div class="line"><span class="lineno"> 5765</span>        <span class="comment">// The relationshis file contains a reference to the geometry file &quot;3D/3dmodel.model&quot;, the name was chosen to be compatible with CURA.</span></div>
<div class="line"><span class="lineno"> 5766</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a4933ea38f3dae4574aba8ae00c7d09d3">_add_relationships_file_to_archive</a>(archive, {}, {}, {}, temp_data, export_plate_idx)) {</div>
<div class="line"><span class="lineno"> 5767</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, _add_relationships_file_to_archive failed\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5768</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5769</span>        }</div>
<div class="line"><span class="lineno"> 5770</span> </div>
<div class="line"><span class="lineno"> 5771</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../d6/df6/miniz_8c.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a>(&amp;archive)) {</div>
<div class="line"><span class="lineno"> 5772</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to finalize the archive&quot;</span>);</div>
<div class="line"><span class="lineno"> 5773</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to finalize the archive\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5774</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5775</span>        }</div>
<div class="line"><span class="lineno"> 5776</span> </div>
<div class="line"><span class="lineno"> 5777</span>        <span class="comment">//BBS progress point</span></div>
<div class="line"><span class="lineno"> 5778</span>        BOOST_LOG_TRIVIAL(info) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt;__LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, finished exporting 3mf\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5779</span>        <span class="keywordflow">if</span> (proFn) {</div>
<div class="line"><span class="lineno"> 5780</span>            proFn(<a class="code hl_variable" href="../../de/db8/namespace_slic3r.html#abea7da1b229a5a80b5331d3acf9e8cde">EXPORT_STAGE_FINISH</a>, 0, 1, cb_cancel);</div>
<div class="line"><span class="lineno"> 5781</span>            <span class="keywordflow">if</span> (cb_cancel)</div>
<div class="line"><span class="lineno"> 5782</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5783</span>        }</div>
<div class="line"><span class="lineno"> 5784</span> </div>
<div class="line"><span class="lineno"> 5785</span>        lock.filename = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 5786</span> </div>
<div class="line"><span class="lineno"> 5787</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5788</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a1fea892ce676b2b37e4a6fa3eca76818"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a1fea892ce676b2b37e4a6fa3eca76818">Slic3r::_BBS_3MF_Exporter::_add_calibration_file_to_archive</a></div><div class="ttdeci">bool _add_calibration_file_to_archive(mz_zip_archive &amp;archive, const ThumbnailData &amp;thumbnail_data, int index)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5854</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a29fd6be9e68ca4129b832e3bdda62905"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a29fd6be9e68ca4129b832e3bdda62905">Slic3r::_BBS_3MF_Exporter::_add_custom_gcode_per_print_z_file_to_archive</a></div><div class="ttdeci">bool _add_custom_gcode_per_print_z_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model, const DynamicPrintConfig *config)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:7365</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a3109dd91e88010df1ac59a4abd07fcda"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a3109dd91e88010df1ac59a4abd07fcda">Slic3r::_BBS_3MF_Exporter::_add_project_embedded_presets_to_archive</a></div><div class="ttdeci">bool _add_project_embedded_presets_to_archive(mz_zip_archive &amp;archive, Model &amp;model, std::vector&lt; Preset * &gt; project_presets)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6816</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a37c43634cb1b86fd2b775610276d5aef"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">Slic3r::_BBS_3MF_Exporter::m_skip_static</a></div><div class="ttdeci">bool m_skip_static</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5169</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a39b6634ca7c5bb1c010ef81aaffd30d6"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a39b6634ca7c5bb1c010ef81aaffd30d6">Slic3r::_BBS_3MF_Exporter::_add_project_config_file_to_archive</a></div><div class="ttdeci">bool _add_project_config_file_to_archive(mz_zip_archive &amp;archive, const DynamicPrintConfig &amp;config, Model &amp;model)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6807</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a44929132c23c05d2203cb4753205725d"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a44929132c23c05d2203cb4753205725d">Slic3r::_BBS_3MF_Exporter::_add_layer_config_ranges_file_to_archive</a></div><div class="ttdeci">bool _add_layer_config_ranges_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6636</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a45321e2c03a229bdd81f9e7341e3619c"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a45321e2c03a229bdd81f9e7341e3619c">Slic3r::_BBS_3MF_Exporter::_add_content_types_file_to_archive</a></div><div class="ttdeci">bool _add_content_types_file_to_archive(mz_zip_archive &amp;archive)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5812</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a5c5be5270eba03a8fa0620c2aef7190f"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a5c5be5270eba03a8fa0620c2aef7190f">Slic3r::_BBS_3MF_Exporter::_add_layer_height_profile_file_to_archive</a></div><div class="ttdeci">bool _add_layer_height_profile_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6601</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a68d95b3efe8c797d038e853eb5ee56d0"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a68d95b3efe8c797d038e853eb5ee56d0">Slic3r::_BBS_3MF_Exporter::_add_model_config_file_to_archive</a></div><div class="ttdeci">bool _add_model_config_file_to_archive(mz_zip_archive &amp;archive, const Model &amp;model, PlateDataPtrs &amp;plate_data_list, const ObjectToObjectDataMap &amp;objects_data, int export_plate_idx=-1, bool save_gcode=true, bool use_loaded_id=false)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:6889</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a82b8d8a0a786da63860be8e975c5cbea"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a82b8d8a0a786da63860be8e975c5cbea">Slic3r::_BBS_3MF_Exporter::_add_slice_info_config_file_to_archive</a></div><div class="ttdeci">bool _add_slice_info_config_file_to_archive(mz_zip_archive &amp;archive, const Model &amp;model, PlateDataPtrs &amp;plate_data_list, const ObjectToObjectDataMap &amp;objects_data)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:7214</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a8b9b1e54ffc278d13207b57c393f68c5"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8b9b1e54ffc278d13207b57c393f68c5">Slic3r::_BBS_3MF_Exporter::_add_model_file_to_archive</a></div><div class="ttdeci">bool _add_model_file_to_archive(const std::string &amp;filename, mz_zip_archive &amp;archive, const Model &amp;model, ObjectToObjectDataMap &amp;objects_data, Export3mfProgressFn proFn=nullptr, BBLProject *project=nullptr) const</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5962</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a9ae29c114509a8a577b59347476adabd"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">Slic3r::_BBS_3MF_Exporter::ObjectToObjectDataMap</a></div><div class="ttdeci">std::map&lt; ModelObject const *, ObjectData &gt; ObjectToObjectDataMap</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5164</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_aad75378873dc729ccaadacc900f7ab4c"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aad75378873dc729ccaadacc900f7ab4c">Slic3r::_BBS_3MF_Exporter::_add_gcode_file_to_archive</a></div><div class="ttdeci">bool _add_gcode_file_to_archive(mz_zip_archive &amp;archive, const Model &amp;model, PlateDataPtrs &amp;plate_data_list, Export3mfProgressFn proFn=nullptr)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:7301</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ab21f3eabb9b22ff3812f57bfb3ad167a"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">Slic3r::_BBS_3MF_Exporter::m_save_gcode</a></div><div class="ttdeci">bool m_save_gcode</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5172</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ab9d32b5a85133cbe6bd44b7399714f83"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab9d32b5a85133cbe6bd44b7399714f83">Slic3r::_BBS_3MF_Exporter::_add_thumbnail_file_to_archive</a></div><div class="ttdeci">bool _add_thumbnail_file_to_archive(mz_zip_archive &amp;archive, const ThumbnailData &amp;thumbnail_data, const char *local_path, int index)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5834</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ad156077c6909c1454a17775d6320fd8b"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad156077c6909c1454a17775d6320fd8b">Slic3r::_BBS_3MF_Exporter::_add_cut_information_file_to_archive</a></div><div class="ttdeci">bool _add_cut_information_file_to_archive(mz_zip_archive &amp;archive, Model &amp;model)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:7151</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ae15c2e44ecbb30004fc956e88106c8b7"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae15c2e44ecbb30004fc956e88106c8b7">Slic3r::_BBS_3MF_Exporter::_add_auxiliary_dir_to_archive</a></div><div class="ttdeci">bool _add_auxiliary_dir_to_archive(mz_zip_archive &amp;archive, const std::string &amp;aux_dir, PackingTemporaryData &amp;data)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:7422</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_ae8bfb52545805cbda11ee2564cca0b3e"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae8bfb52545805cbda11ee2564cca0b3e">Slic3r::_BBS_3MF_Exporter::_add_bbox_file_to_archive</a></div><div class="ttdeci">bool _add_bbox_file_to_archive(mz_zip_archive &amp;archive, const PlateBBoxData &amp;id_bboxes, int index)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5874</div></div>
<div class="ttc" id="alzoconf_8h_html_a809275ccd755fb7b88661d952134b14d"><div class="ttname"><a href="../../de/d38/lzoconf_8h.html#a809275ccd755fb7b88661d952134b14d">size</a></div><div class="ttdeci">lzo_uint size</div><div class="ttdef"><b>Definition</b> lzoconf.h:378</div></div>
<div class="ttc" id="aminiz_8c_html_a0f7c5b26c1200daacd0eefa8744d9d1a"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a></div><div class="ttdeci">mz_bool mz_zip_writer_finalize_archive(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition</b> miniz.c:7472</div></div>
<div class="ttc" id="aminiz_8c_html_a8c64687454aca17948eb58730dc6f41b"><div class="ttname"><a href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a></div><div class="ttdeci">void mz_zip_zero_struct(mz_zip_archive *pZip)</div><div class="ttdef"><b>Definition</b> miniz.c:3792</div></div>
<div class="ttc" id="aminiz_8h_html_da/df0/structmz__zip__archive"><div class="ttname"><a href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a></div><div class="ttdef"><b>Definition</b> miniz.h:1056</div></div>
<div class="ttc" id="anamespace_slic3r_html_a036daf2de7e4763ce9e163ef16b71797"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a036daf2de7e4763ce9e163ef16b71797">Slic3r::EXPORT_STAGE_ADD_THUMBNAILS</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_THUMBNAILS</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:162</div></div>
<div class="ttc" id="anamespace_slic3r_html_a0491714a3ef5a2b30bc98b9568ecde30"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">Slic3r::close_zip_writer</a></div><div class="ttdeci">bool close_zip_writer(mz_zip_archive *zip)</div><div class="ttdef"><b>Definition</b> miniz_extension.cpp:77</div></div>
<div class="ttc" id="anamespace_slic3r_html_a14536a29c59631ebd1ac1df6ee13fd19"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a14536a29c59631ebd1ac1df6ee13fd19">Slic3r::EXPORT_STAGE_ADD_CUSTOM_GCODE</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_CUSTOM_GCODE</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:167</div></div>
<div class="ttc" id="anamespace_slic3r_html_a25b79952de66b88e6a76dd0b0cb33caf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a25b79952de66b88e6a76dd0b0cb33caf">Slic3r::EXPORT_STAGE_OPEN_3MF</a></div><div class="ttdeci">const int EXPORT_STAGE_OPEN_3MF</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:160</div></div>
<div class="ttc" id="anamespace_slic3r_html_a2f4f3d904d0c71590a53c89bec9c92ab"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a2f4f3d904d0c71590a53c89bec9c92ab">Slic3r::EXPORT_STAGE_ADD_AUXILIARIES</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_AUXILIARIES</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:173</div></div>
<div class="ttc" id="anamespace_slic3r_html_a3dede35009ad25c2025706e08ca37528"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a3dede35009ad25c2025706e08ca37528">Slic3r::EXPORT_STAGE_ADD_PRINT_CONFIG</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_PRINT_CONFIG</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:168</div></div>
<div class="ttc" id="anamespace_slic3r_html_a70bb7debedfe9d66753ad2a14e610324"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a70bb7debedfe9d66753ad2a14e610324">Slic3r::open_zip_writer</a></div><div class="ttdeci">bool open_zip_writer(mz_zip_archive *zip, const std::string &amp;fname)</div><div class="ttdef"><b>Definition</b> miniz_extension.cpp:71</div></div>
<div class="ttc" id="anamespace_slic3r_html_aa4d38e6e93f978eca18d39655ca47d86"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aa4d38e6e93f978eca18d39655ca47d86">Slic3r::EXPORT_STAGE_CONTENT_TYPES</a></div><div class="ttdeci">const int EXPORT_STAGE_CONTENT_TYPES</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:161</div></div>
<div class="ttc" id="anamespace_slic3r_html_aacb88dbee6187ab5f61311bba643c71d"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#aacb88dbee6187ab5f61311bba643c71d">Slic3r::EXPORT_STAGE_ADD_SLICE_INFO</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_SLICE_INFO</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:171</div></div>
<div class="ttc" id="anamespace_slic3r_html_abea7da1b229a5a80b5331d3acf9e8cde"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#abea7da1b229a5a80b5331d3acf9e8cde">Slic3r::EXPORT_STAGE_FINISH</a></div><div class="ttdeci">const int EXPORT_STAGE_FINISH</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:174</div></div>
<div class="ttc" id="anamespace_slic3r_html_ad5b85cdd96563006fc4fa46053ec53b5"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ad5b85cdd96563006fc4fa46053ec53b5">Slic3r::EXPORT_STAGE_ADD_PROJECT_CONFIG</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_PROJECT_CONFIG</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:169</div></div>
<div class="ttc" id="anamespace_slic3r_html_ade3cb91e3e29d82c306c3fdd1633fcd6"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#ade3cb91e3e29d82c306c3fdd1633fcd6">Slic3r::EXPORT_STAGE_ADD_RELATIONS</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_RELATIONS</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:163</div></div>
<div class="ttc" id="anamespace_slic3r_html_afd8f4158f7b96f264bf7104cb9c24805"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#afd8f4158f7b96f264bf7104cb9c24805">Slic3r::EXPORT_STAGE_ADD_CONFIG_FILE</a></div><div class="ttdeci">const int EXPORT_STAGE_ADD_CONFIG_FILE</div><div class="ttdef"><b>Definition</b> bbs_3mf.hpp:170</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00077">Slic3r::close_zip_writer()</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00173">Slic3r::EXPORT_STAGE_ADD_AUXILIARIES</a>, <a class="el" href="../../#l00170">Slic3r::EXPORT_STAGE_ADD_CONFIG_FILE</a>, <a class="el" href="../../#l00167">Slic3r::EXPORT_STAGE_ADD_CUSTOM_GCODE</a>, <a class="el" href="../../#l00164">Slic3r::EXPORT_STAGE_ADD_MODELS</a>, <a class="el" href="../../#l00168">Slic3r::EXPORT_STAGE_ADD_PRINT_CONFIG</a>, <a class="el" href="../../#l00169">Slic3r::EXPORT_STAGE_ADD_PROJECT_CONFIG</a>, <a class="el" href="../../#l00163">Slic3r::EXPORT_STAGE_ADD_RELATIONS</a>, <a class="el" href="../../#l00171">Slic3r::EXPORT_STAGE_ADD_SLICE_INFO</a>, <a class="el" href="../../#l00162">Slic3r::EXPORT_STAGE_ADD_THUMBNAILS</a>, <a class="el" href="../../#l00161">Slic3r::EXPORT_STAGE_CONTENT_TYPES</a>, <a class="el" href="../../#l00174">Slic3r::EXPORT_STAGE_FINISH</a>, <a class="el" href="../../#l00160">Slic3r::EXPORT_STAGE_OPEN_3MF</a>, <a class="el" href="../../#l00068">Slic3r::PlateData::gcode_file</a>, <a class="el" href="../../#l00069">Slic3r::PlateData::gcode_file_md5</a>, <a class="el" href="../../#l00802">Slic3r::Model::get_auxiliary_file_temp_path()</a>, <a class="el" href="../../#l00084">Slic3r::PlateData::is_sliced_valid</a>, <a class="el" href="../../#l00238">MZ_DEFAULT_COMPRESSION</a>, <a class="el" href="../../#l05904">mz_zip_writer_add_mem()</a>, <a class="el" href="../../#l07472">mz_zip_writer_finalize_archive()</a>, <a class="el" href="../../#l03792">mz_zip_zero_struct()</a>, <a class="el" href="../../#l00071">Slic3r::open_zip_writer()</a>, <a class="el" href="../../#l00073">Slic3r::PlateData::pick_file</a>, <a class="el" href="../../#l00065">Slic3r::PlateData::plate_index</a>, <a class="el" href="../../#l00378">size</a>, <a class="el" href="../../#l00070">Slic3r::PlateData::thumbnail_file</a>, and <a class="el" href="../../#l00072">Slic3r::PlateData::top_file</a>.</p>
<div id="dynsection-23" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-23-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-23-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-23-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a8a9233123f226629c50c25de6b5b925e_cgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aeb183b0dd78db016982544618ad1b1eb" name="aeb183b0dd78db016982544618ad1b1eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb183b0dd78db016982544618ad1b1eb">&#9670;&#160;</a></span>add_error()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_BBS_3MF_Base::add_error </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>error</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  561</span>{ boost::unique_lock l(<a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a93fd2b8551ac6acd0c6e27c47b9bff14">mutex</a>); <a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a4e830efe3a74f6d6ffbc7bef55900c27">m_errors</a>.push_back(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>); }</div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___base_html_a4e830efe3a74f6d6ffbc7bef55900c27"><div class="ttname"><a href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a4e830efe3a74f6d6ffbc7bef55900c27">Slic3r::_BBS_3MF_Base::m_errors</a></div><div class="ttdeci">std::vector&lt; std::string &gt; m_errors</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:558</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l00558">Slic3r::_BBS_3MF_Base::m_errors</a>, and <a class="el" href="../../#l00557">Slic3r::_BBS_3MF_Base::mutex</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01470">Slic3r::_BBS_3MF_Importer::_load_model_from_file()</a>, <a class="el" href="../../#l00821">Slic3r::_BBS_3MF_Importer::ObjectImporter::extract_object_model()</a>, <a class="el" href="../../#l01249">Slic3r::_BBS_3MF_Importer::get_thumbnail()</a>, and <a class="el" href="../../#l01298">Slic3r::_BBS_3MF_Importer::load_gcode_3mf_from_stream()</a>.</p>
<div id="dynsection-24" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-24-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-24-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-24-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base_aeb183b0dd78db016982544618ad1b1eb_icgraph.svg" width="100%" height="583"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="ad12ad7f0f5f4407e61b1762ee28695ad" name="ad12ad7f0f5f4407e61b1762ee28695ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad12ad7f0f5f4407e61b1762ee28695ad">&#9670;&#160;</a></span>clear_errors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_BBS_3MF_Base::clear_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">protected</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  562</span>{ <a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a4e830efe3a74f6d6ffbc7bef55900c27">m_errors</a>.clear(); }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00558">Slic3r::_BBS_3MF_Base::m_errors</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l01156">Slic3r::_BBS_3MF_Importer::~_BBS_3MF_Importer()</a>, and <a class="el" href="../../#l01184">Slic3r::_BBS_3MF_Importer::load_model_from_file()</a>.</p>
<div id="dynsection-25" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-25-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-25-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-25-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base_ad12ad7f0f5f4407e61b1762ee28695ad_icgraph.svg" width="100%" height="583"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aec61a6b8b9408b3f4abfbe9e4b779f04" name="aec61a6b8b9408b3f4abfbe9e4b779f04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec61a6b8b9408b3f4abfbe9e4b779f04">&#9670;&#160;</a></span>convert_instance_id_to_resource_id()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a> Slic3r::_BBS_3MF_Exporter::convert_instance_id_to_resource_id </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../dd/d8d/class_slic3r_1_1_model.html">Model</a> &amp;&#160;</td>
          <td class="paramname"><em>model</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>obj_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>instance_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5242</span>        {</div>
<div class="line"><span class="lineno"> 5243</span>            <span class="keywordtype">int</span> resource_id = 1;</div>
<div class="line"><span class="lineno"> 5244</span> </div>
<div class="line"><span class="lineno"> 5245</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; obj_id; ++i)</div>
<div class="line"><span class="lineno"> 5246</span>            {</div>
<div class="line"><span class="lineno"> 5247</span>                resource_id += model.objects[i]-&gt;volumes.size() + 1;</div>
<div class="line"><span class="lineno"> 5248</span>            }</div>
<div class="line"><span class="lineno"> 5249</span> </div>
<div class="line"><span class="lineno"> 5250</span>            resource_id += model.objects[obj_id]-&gt;volumes.size();</div>
<div class="line"><span class="lineno"> 5251</span> </div>
<div class="line"><span class="lineno"> 5252</span>            <span class="keywordflow">return</span> resource_id;</div>
<div class="line"><span class="lineno"> 5253</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l01486">Slic3r::Model::objects</a>.</p>

</div>
</div>
<a id="a024876787a227255ac56f4783999a6cd" name="a024876787a227255ac56f4783999a6cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a024876787a227255ac56f4783999a6cd">&#9670;&#160;</a></span>log_errors()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> Slic3r::_BBS_3MF_Base::log_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno">  566</span>        {</div>
<div class="line"><span class="lineno">  567</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> std::string&amp; <a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a> : <a class="code hl_variable" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#a4e830efe3a74f6d6ffbc7bef55900c27">m_errors</a>)</div>
<div class="line"><span class="lineno">  568</span>                BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; <a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>;</div>
<div class="line"><span class="lineno">  569</span>        }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00109">error</a>, and <a class="el" href="../../#l00558">Slic3r::_BBS_3MF_Base::m_errors</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07862">Slic3r::bbs_3mf_get_thumbnail()</a>, <a class="el" href="../../#l07846">Slic3r::load_bbs_3mf()</a>, <a class="el" href="../../#l07871">Slic3r::load_gcode_3mf_from_stream()</a>, and <a class="el" href="../../#l07880">Slic3r::store_bbs_3mf()</a>.</p>
<div id="dynsection-26" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-26-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-26-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-26-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base_a024876787a227255ac56f4783999a6cd_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="aceb467c22a717b4c4b92c997f017e937" name="aceb467c22a717b4c4b92c997f017e937"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aceb467c22a717b4c4b92c997f017e937">&#9670;&#160;</a></span>save_model_to_file()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::save_model_to_file </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d65/struct_slic3r_1_1_store_params.html">StoreParams</a> &amp;&#160;</td>
          <td class="paramname"><em>store_params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5257</span>    {</div>
<div class="line"><span class="lineno"> 5258</span>        <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#ad12ad7f0f5f4407e61b1762ee28695ad">clear_errors</a>();</div>
<div class="line"><span class="lineno"> 5259</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad34ccbefd8eca0765b07c77b7091deba">m_fullpath_sources</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdab1df95c5486b908316a057088b9cdc59">SaveStrategy::FullPathSources</a>;</div>
<div class="line"><span class="lineno"> 5260</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aeb5341110ef0128ebb4a0177c445f90e">m_zip64</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdaefc76e3a4a297898807a185b0d04620c">SaveStrategy::Zip64</a>;</div>
<div class="line"><span class="lineno"> 5261</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdad7f3e807ae2f8803eb025a847b60bcd9">SaveStrategy::ProductionExt</a>;</div>
<div class="line"><span class="lineno"> 5262</span> </div>
<div class="line"><span class="lineno"> 5263</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a37c43634cb1b86fd2b775610276d5aef">m_skip_static</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda3db9a2328c454e61f197fb9baa4ac72b">SaveStrategy::SkipStatic</a>;</div>
<div class="line"><span class="lineno"> 5264</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ad695d28ee8fc512c34b09e1ff35b8dfc">m_split_model</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdafea0c656002eb6248720f467ba4078f8">SaveStrategy::SplitModel</a>;</div>
<div class="line"><span class="lineno"> 5265</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ab21f3eabb9b22ff3812f57bfb3ad167a">m_save_gcode</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda123e5ce62dc536a389706b8a976fdb9e">SaveStrategy::WithGcode</a>;</div>
<div class="line"><span class="lineno"> 5266</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8856bb149dc5ca68a79659031b0ed158">m_skip_model</a>  = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda8d522c8b3f56186e27e3431bb156b29e">SaveStrategy::SkipModel</a>;</div>
<div class="line"><span class="lineno"> 5267</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#aa60db1b06a1b01b42a73903ea77ef58a">m_skip_auxiliary</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda519a8c5c78354c4a56cfbb82f4e4ce69">SaveStrategy::SkipAuxiliary</a>;</div>
<div class="line"><span class="lineno"> 5268</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a434a249c20f16929f5e0db7b466acee0">m_share_mesh</a>       = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda80dd62a48f2fbb27b4d61d444ba1c9a2">SaveStrategy::ShareMesh</a>;</div>
<div class="line"><span class="lineno"> 5269</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda3500ba09d0538297440ca620c9dd46bf">SaveStrategy::Backup</a>;</div>
<div class="line"><span class="lineno"> 5270</span> </div>
<div class="line"><span class="lineno"> 5271</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a65e62a707f6d881b3aa2cea516c0cebe">m_use_loaded_id</a> = store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdac62272e6150b5b5419acf0cbcfeee31e">SaveStrategy::UseLoadedId</a>;</div>
<div class="line"><span class="lineno"> 5272</span> </div>
<div class="line"><span class="lineno"> 5273</span>        <span class="keywordflow">if</span> (<span class="keyword">auto</span> info = store_params.model-&gt;model_info) {</div>
<div class="line"><span class="lineno"> 5274</span>            <span class="keywordflow">if</span> (<span class="keyword">auto</span> iter = info-&gt;metadata_items.find(<span class="stringliteral">&quot;Thumbnail_Small&quot;</span>); iter != info-&gt;metadata_items.end())</div>
<div class="line"><span class="lineno"> 5275</span>                <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a469435942cd59432a1e6a7a8fa26bbf7">m_thumbnail_small</a> = iter-&gt;second;</div>
<div class="line"><span class="lineno"> 5276</span>            <span class="keywordflow">if</span> (<span class="keyword">auto</span> iter = info-&gt;metadata_items.find(<span class="stringliteral">&quot;Thumbnail_Middle&quot;</span>); iter != info-&gt;metadata_items.end())</div>
<div class="line"><span class="lineno"> 5277</span>                <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#ae9c8d078a717d20ab0a5d997f0aa7bb2">m_thumbnail_middle</a> = iter-&gt;second;</div>
<div class="line"><span class="lineno"> 5278</span>        }</div>
<div class="line"><span class="lineno"> 5279</span>        boost::system::error_code ec;</div>
<div class="line"><span class="lineno"> 5280</span>        std::string filename = std::string(store_params.path);</div>
<div class="line"><span class="lineno"> 5281</span>        boost::filesystem::remove(filename + <span class="stringliteral">&quot;.tmp&quot;</span>, ec);</div>
<div class="line"><span class="lineno"> 5282</span> </div>
<div class="line"><span class="lineno"> 5283</span>        <span class="keywordtype">bool</span> result = <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8a9233123f226629c50c25de6b5b925e">_save_model_to_file</a>(filename + <span class="stringliteral">&quot;.tmp&quot;</span>, *store_params.model, store_params.plate_data_list, store_params.project_presets, store_params.config,</div>
<div class="line"><span class="lineno"> 5284</span>            store_params.thumbnail_data, store_params.top_thumbnail_data, store_params.pick_thumbnail_data, store_params.proFn,</div>
<div class="line"><span class="lineno"> 5285</span>            store_params.calibration_thumbnail_data, store_params.id_bboxes, store_params.project, store_params.export_plate_idx);</div>
<div class="line"><span class="lineno"> 5286</span>        <span class="keywordflow">if</span> (result) {</div>
<div class="line"><span class="lineno"> 5287</span>            boost::filesystem::rename(filename + <span class="stringliteral">&quot;.tmp&quot;</span>, filename, ec);</div>
<div class="line"><span class="lineno"> 5288</span>            <span class="keywordflow">if</span> (ec) {</div>
<div class="line"><span class="lineno"> 5289</span>                <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Failed to rename file: &quot;</span> + ec.message());</div>
<div class="line"><span class="lineno"> 5290</span>                boost::filesystem::remove(filename + <span class="stringliteral">&quot;.tmp&quot;</span>, ec);</div>
<div class="line"><span class="lineno"> 5291</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5292</span>            }</div>
<div class="line"><span class="lineno"> 5293</span>            <span class="keywordflow">if</span> (!(store_params.strategy &amp; <a class="code hl_enumvalue" href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda880a7ef20988e107cb918e73bd969bd1">SaveStrategy::Silence</a>))</div>
<div class="line"><span class="lineno"> 5294</span>                boost::filesystem::save_string_file(store_params.model-&gt;get_backup_path() + <span class="stringliteral">&quot;/origin.txt&quot;</span>, filename);</div>
<div class="line"><span class="lineno"> 5295</span>        }</div>
<div class="line"><span class="lineno"> 5296</span>        <span class="keywordflow">return</span> result;</div>
<div class="line"><span class="lineno"> 5297</span>    }</div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___base_html_ad12ad7f0f5f4407e61b1762ee28695ad"><div class="ttname"><a href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#ad12ad7f0f5f4407e61b1762ee28695ad">Slic3r::_BBS_3MF_Base::clear_errors</a></div><div class="ttdeci">void clear_errors()</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:562</div></div>
<div class="ttc" id="aclass_slic3r_1_1___b_b_s__3_m_f___exporter_html_a8a9233123f226629c50c25de6b5b925e"><div class="ttname"><a href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8a9233123f226629c50c25de6b5b925e">Slic3r::_BBS_3MF_Exporter::_save_model_to_file</a></div><div class="ttdeci">bool _save_model_to_file(const std::string &amp;filename, Model &amp;model, PlateDataPtrs &amp;plate_data_list, std::vector&lt; Preset * &gt; &amp;project_presets, const DynamicPrintConfig *config, const std::vector&lt; ThumbnailData * &gt; &amp;thumbnail_data, const std::vector&lt; ThumbnailData * &gt; &amp;top_thumbnail_data, const std::vector&lt; ThumbnailData * &gt; &amp;pick_thumbnail_data, Export3mfProgressFn proFn, const std::vector&lt; ThumbnailData * &gt; &amp;calibration_data, const std::vector&lt; PlateBBoxData * &gt; &amp;id_bboxes, BBLProject *project=nullptr, int export_plate_idx=-1)</div><div class="ttdef"><b>Definition</b> bbs_3mf.cpp:5353</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda123e5ce62dc536a389706b8a976fdb9e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda123e5ce62dc536a389706b8a976fdb9e">Slic3r::SaveStrategy::WithGcode</a></div><div class="ttdeci">@ WithGcode</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda3500ba09d0538297440ca620c9dd46bf"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda3500ba09d0538297440ca620c9dd46bf">Slic3r::SaveStrategy::Backup</a></div><div class="ttdeci">@ Backup</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda3db9a2328c454e61f197fb9baa4ac72b"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda3db9a2328c454e61f197fb9baa4ac72b">Slic3r::SaveStrategy::SkipStatic</a></div><div class="ttdeci">@ SkipStatic</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda519a8c5c78354c4a56cfbb82f4e4ce69"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda519a8c5c78354c4a56cfbb82f4e4ce69">Slic3r::SaveStrategy::SkipAuxiliary</a></div><div class="ttdeci">@ SkipAuxiliary</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda80dd62a48f2fbb27b4d61d444ba1c9a2"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda80dd62a48f2fbb27b4d61d444ba1c9a2">Slic3r::SaveStrategy::ShareMesh</a></div><div class="ttdeci">@ ShareMesh</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda880a7ef20988e107cb918e73bd969bd1"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda880a7ef20988e107cb918e73bd969bd1">Slic3r::SaveStrategy::Silence</a></div><div class="ttdeci">@ Silence</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cda8d522c8b3f56186e27e3431bb156b29e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cda8d522c8b3f56186e27e3431bb156b29e">Slic3r::SaveStrategy::SkipModel</a></div><div class="ttdeci">@ SkipModel</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cdab1df95c5486b908316a057088b9cdc59"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdab1df95c5486b908316a057088b9cdc59">Slic3r::SaveStrategy::FullPathSources</a></div><div class="ttdeci">@ FullPathSources</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cdac62272e6150b5b5419acf0cbcfeee31e"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdac62272e6150b5b5419acf0cbcfeee31e">Slic3r::SaveStrategy::UseLoadedId</a></div><div class="ttdeci">@ UseLoadedId</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cdad7f3e807ae2f8803eb025a847b60bcd9"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdad7f3e807ae2f8803eb025a847b60bcd9">Slic3r::SaveStrategy::ProductionExt</a></div><div class="ttdeci">@ ProductionExt</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cdaefc76e3a4a297898807a185b0d04620c"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdaefc76e3a4a297898807a185b0d04620c">Slic3r::SaveStrategy::Zip64</a></div><div class="ttdeci">@ Zip64</div></div>
<div class="ttc" id="anamespace_slic3r_html_a5789aab2ebfdf8323857ca92dfb4c6cdafea0c656002eb6248720f467ba4078f8"><div class="ttname"><a href="../../de/db8/namespace_slic3r.html#a5789aab2ebfdf8323857ca92dfb4c6cdafea0c656002eb6248720f467ba4078f8">Slic3r::SaveStrategy::SplitModel</a></div><div class="ttdeci">@ SplitModel</div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00210">Slic3r::StoreParams::calibration_thumbnail_data</a>, <a class="el" href="../../#l00206">Slic3r::StoreParams::config</a>, <a class="el" href="../../#l00204">Slic3r::StoreParams::export_plate_idx</a>, <a class="el" href="../../#l00808">Slic3r::Model::get_backup_path()</a>, <a class="el" href="../../#l00213">Slic3r::StoreParams::id_bboxes</a>, <a class="el" href="../../#l00202">Slic3r::StoreParams::model</a>, <a class="el" href="../../#l01495">Slic3r::Model::model_info</a>, <a class="el" href="../../#l00201">Slic3r::StoreParams::path</a>, <a class="el" href="../../#l00209">Slic3r::StoreParams::pick_thumbnail_data</a>, <a class="el" href="../../#l00203">Slic3r::StoreParams::plate_data_list</a>, <a class="el" href="../../#l00212">Slic3r::StoreParams::proFn</a>, <a class="el" href="../../#l00214">Slic3r::StoreParams::project</a>, <a class="el" href="../../#l00205">Slic3r::StoreParams::project_presets</a>, <a class="el" href="../../#l00211">Slic3r::StoreParams::strategy</a>, <a class="el" href="../../#l00207">Slic3r::StoreParams::thumbnail_data</a>, and <a class="el" href="../../#l00208">Slic3r::StoreParams::top_thumbnail_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07880">Slic3r::store_bbs_3mf()</a>.</p>
<div id="dynsection-27" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-27-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-27-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-27-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_aceb467c22a717b4c4b92c997f017e937_cgraph.svg" width="567" height="135"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-28" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-28-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-28-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-28-content" class="dyncontent" style="display:none;">
<div class="center"><div class="zoom"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_aceb467c22a717b4c4b92c997f017e937_icgraph.svg" width="100%" height="600"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div></div>
</div>

</div>
</div>
<a id="a30761659b70cd1335cec40305b97938f" name="a30761659b70cd1335cec40305b97938f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30761659b70cd1335cec40305b97938f">&#9670;&#160;</a></span>save_object_mesh()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::save_object_mesh </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>temp_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d0/d23/class_slic3r_1_1_model_object.html">ModelObject</a> const &amp;&#160;</td>
          <td class="paramname"><em>object</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&#160;</td>
          <td class="paramname"><em>obj_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<div class="fragment"><div class="line"><span class="lineno"> 5301</span>    {</div>
<div class="line"><span class="lineno"> 5302</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a0b3245afa5ff887330174b30e99dd849">m_production_ext</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5303</span>        <a class="code hl_variable" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a541e5a5ab7699b8118a34f463d4de4d9">m_from_backup_save</a> = <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5304</span>        Model <span class="keyword">const</span> &amp; model = *<span class="keywordtype">object</span>.get_model();</div>
<div class="line"><span class="lineno"> 5305</span> </div>
<div class="line"><span class="lineno"> 5306</span>        <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> archive;</div>
<div class="line"><span class="lineno"> 5307</span>        <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a8c64687454aca17948eb58730dc6f41b">mz_zip_zero_struct</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5308</span> </div>
<div class="line"><span class="lineno"> 5309</span>        <span class="keyword">auto</span> filename = boost::format(<span class="stringliteral">&quot;3D/Objects/%s_%d.model&quot;</span>) % <span class="keywordtype">object</span>.name % obj_id;</div>
<div class="line"><span class="lineno"> 5310</span>        std::string filepath = temp_path + <span class="stringliteral">&quot;/&quot;</span> + filename.str();</div>
<div class="line"><span class="lineno"> 5311</span>        std::string filepath_tmp = filepath + <span class="stringliteral">&quot;.tmp&quot;</span>;</div>
<div class="line"><span class="lineno"> 5312</span>        boost::system::error_code ec;</div>
<div class="line"><span class="lineno"> 5313</span>        boost::filesystem::remove(filepath_tmp, ec);</div>
<div class="line"><span class="lineno"> 5314</span>        <span class="keywordflow">if</span> (!<a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a70bb7debedfe9d66753ad2a14e610324">open_zip_writer</a>(&amp;archive, filepath_tmp)) {</div>
<div class="line"><span class="lineno"> 5315</span>            <a class="code hl_function" href="../../d0/daa/class_slic3r_1_1___b_b_s__3_m_f___base.html#aeb183b0dd78db016982544618ad1b1eb">add_error</a>(<span class="stringliteral">&quot;Unable to open the file&quot;</span>+filepath_tmp);</div>
<div class="line"><span class="lineno"> 5316</span>            BOOST_LOG_TRIVIAL(<a class="code hl_variable" href="../../d5/d8c/xmlrole_8c.html#a2739afc9d7ed13e98e5e0c5b2e1f0428">error</a>) &lt;&lt; __FUNCTION__ &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; __LINE__ &lt;&lt; boost::format(<span class="stringliteral">&quot;, Unable to open the file\n&quot;</span>);</div>
<div class="line"><span class="lineno"> 5317</span>            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><span class="lineno"> 5318</span>        }</div>
<div class="line"><span class="lineno"> 5319</span> </div>
<div class="line"><span class="lineno"> 5320</span>        <span class="keyword">struct </span>close_lock</div>
<div class="line"><span class="lineno"> 5321</span>        {</div>
<div class="line"><span class="lineno"> 5322</span>            <a class="code hl_struct" href="../../d0/d1b/miniz_8h.html#da/df0/structmz__zip__archive">mz_zip_archive</a> &amp; archive;</div>
<div class="line"><span class="lineno"> 5323</span>            std::string <span class="keyword">const</span> * filename;</div>
<div class="line"><span class="lineno"> 5324</span>            <span class="keywordtype">void</span> close() {</div>
<div class="line"><span class="lineno"> 5325</span>                <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5326</span>                filename = <span class="keyword">nullptr</span>;</div>
<div class="line"><span class="lineno"> 5327</span>            }</div>
<div class="line"><span class="lineno"> 5328</span>            ~close_lock() {</div>
<div class="line"><span class="lineno"> 5329</span>                <span class="keywordflow">if</span> (filename) {</div>
<div class="line"><span class="lineno"> 5330</span>                    <a class="code hl_function" href="../../de/db8/namespace_slic3r.html#a0491714a3ef5a2b30bc98b9568ecde30">close_zip_writer</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5331</span>                    boost::filesystem::remove(*filename);</div>
<div class="line"><span class="lineno"> 5332</span>                }</div>
<div class="line"><span class="lineno"> 5333</span>            }</div>
<div class="line"><span class="lineno"> 5334</span>        } lock{archive, &amp;filepath_tmp};</div>
<div class="line"><span class="lineno"> 5335</span> </div>
<div class="line"><span class="lineno"> 5336</span>        <a class="code hl_typedef" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a9ae29c114509a8a577b59347476adabd">ObjectToObjectDataMap</a> objects_data;</div>
<div class="line"><span class="lineno"> 5337</span>        <span class="keyword">auto</span> &amp; volumes_objectID = objects_data.insert({&amp;<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>, {&amp;<a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>, obj_id}}).first-&gt;second.volumes_objectID;</div>
<div class="line"><span class="lineno"> 5338</span>        <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> volume_count = 0;</div>
<div class="line"><span class="lineno"> 5339</span>        <span class="keywordflow">for</span> (ModelVolume *volume : <a class="code hl_enumvalue" href="../../dc/df0/namespacenlohmann_1_1detail.html#a1ed8fc6239da25abcaf681d30ace4985aa8cfde6331bd59eb2ac96f8911c4b666">object</a>.volumes) {</div>
<div class="line"><span class="lineno"> 5340</span>            <span class="keywordflow">if</span> (volume == <span class="keyword">nullptr</span>) <span class="keywordflow">continue</span>;</div>
<div class="line"><span class="lineno"> 5341</span>            volumes_objectID.insert({<a class="code hl_function" href="../../dc/d25/namespaceigl.html#a852e0af0a8d4c084eb71a98b2e560a97">volume</a>, (++volume_count &lt;&lt; 16 | obj_id)});</div>
<div class="line"><span class="lineno"> 5342</span>        }</div>
<div class="line"><span class="lineno"> 5343</span> </div>
<div class="line"><span class="lineno"> 5344</span>        <a class="code hl_function" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#a8b9b1e54ffc278d13207b57c393f68c5">_add_model_file_to_archive</a>(filename.str(), archive, model, objects_data);</div>
<div class="line"><span class="lineno"> 5345</span> </div>
<div class="line"><span class="lineno"> 5346</span>        <a class="code hl_function" href="../../d6/df6/miniz_8c.html#a0f7c5b26c1200daacd0eefa8744d9d1a">mz_zip_writer_finalize_archive</a>(&amp;archive);</div>
<div class="line"><span class="lineno"> 5347</span>        lock.close();</div>
<div class="line"><span class="lineno"> 5348</span>        boost::filesystem::rename(filepath_tmp, filepath, ec);</div>
<div class="line"><span class="lineno"> 5349</span>        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><span class="lineno"> 5350</span>    }</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../#l00077">Slic3r::close_zip_writer()</a>, <a class="el" href="../../#l00109">error</a>, <a class="el" href="../../#l07472">mz_zip_writer_finalize_archive()</a>, <a class="el" href="../../#l03792">mz_zip_zero_struct()</a>, and <a class="el" href="../../#l00071">Slic3r::open_zip_writer()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../#l07732">Slic3r::_BBS_Backup_Manager::process_task()</a>.</p>
<div id="dynsection-29" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-29-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-29-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-29-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a30761659b70cd1335cec40305b97938f_cgraph.svg" width="570" height="200"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>
<div id="dynsection-30" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-30-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-30-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-30-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter_a30761659b70cd1335cec40305b97938f_icgraph.svg" width="408" height="52"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe></div>
</div>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="a4e830efe3a74f6d6ffbc7bef55900c27" name="a4e830efe3a74f6d6ffbc7bef55900c27"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e830efe3a74f6d6ffbc7bef55900c27">&#9670;&#160;</a></span>m_errors</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::vector&lt;std::string&gt; Slic3r::_BBS_3MF_Base::m_errors</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l00561">Slic3r::_BBS_3MF_Base::add_error()</a>, <a class="el" href="../../#l00562">Slic3r::_BBS_3MF_Base::clear_errors()</a>, and <a class="el" href="../../#l00565">Slic3r::_BBS_3MF_Base::log_errors()</a>.</p>

</div>
</div>
<a id="a541e5a5ab7699b8118a34f463d4de4d9" name="a541e5a5ab7699b8118a34f463d4de4d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541e5a5ab7699b8118a34f463d4de4d9">&#9670;&#160;</a></span>m_from_backup_save</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_from_backup_save { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad34ccbefd8eca0765b07c77b7091deba" name="ad34ccbefd8eca0765b07c77b7091deba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad34ccbefd8eca0765b07c77b7091deba">&#9670;&#160;</a></span>m_fullpath_sources</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_fullpath_sources { true }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0b3245afa5ff887330174b30e99dd849" name="a0b3245afa5ff887330174b30e99dd849"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b3245afa5ff887330174b30e99dd849">&#9670;&#160;</a></span>m_production_ext</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_production_ext { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ab21f3eabb9b22ff3812f57bfb3ad167a" name="ab21f3eabb9b22ff3812f57bfb3ad167a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab21f3eabb9b22ff3812f57bfb3ad167a">&#9670;&#160;</a></span>m_save_gcode</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_save_gcode { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a434a249c20f16929f5e0db7b466acee0" name="a434a249c20f16929f5e0db7b466acee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a434a249c20f16929f5e0db7b466acee0">&#9670;&#160;</a></span>m_share_mesh</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_share_mesh { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a81723a1f39a3a30fb2e256ca6dfc6635" name="a81723a1f39a3a30fb2e256ca6dfc6635"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81723a1f39a3a30fb2e256ca6dfc6635">&#9670;&#160;</a></span>m_shared_meshes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="../../d6/d95/glu-libtess_8h.html#a4292190e3f1f6b373a760c7d9316ad3c">void</a> const *, std::pair&lt;<a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html#d8/d53/struct_slic3r_1_1___b_b_s__3_m_f___exporter_1_1_object_data">ObjectData</a>*, <a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a> const *&gt; &gt; Slic3r::_BBS_3MF_Exporter::m_shared_meshes</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aa60db1b06a1b01b42a73903ea77ef58a" name="aa60db1b06a1b01b42a73903ea77ef58a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa60db1b06a1b01b42a73903ea77ef58a">&#9670;&#160;</a></span>m_skip_auxiliary</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_skip_auxiliary { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a8856bb149dc5ca68a79659031b0ed158" name="a8856bb149dc5ca68a79659031b0ed158"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8856bb149dc5ca68a79659031b0ed158">&#9670;&#160;</a></span>m_skip_model</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_skip_model { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a37c43634cb1b86fd2b775610276d5aef" name="a37c43634cb1b86fd2b775610276d5aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37c43634cb1b86fd2b775610276d5aef">&#9670;&#160;</a></span>m_skip_static</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_skip_static { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ad695d28ee8fc512c34b09e1ff35b8dfc" name="ad695d28ee8fc512c34b09e1ff35b8dfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad695d28ee8fc512c34b09e1ff35b8dfc">&#9670;&#160;</a></span>m_split_model</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_split_model { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="ae9c8d078a717d20ab0a5d997f0aa7bb2" name="ae9c8d078a717d20ab0a5d997f0aa7bb2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae9c8d078a717d20ab0a5d997f0aa7bb2">&#9670;&#160;</a></span>m_thumbnail_middle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::_BBS_3MF_Exporter::m_thumbnail_middle = <a class="el" href="../../dd/d80/bbs__3mf_8cpp.html#a7e1910247df78b3f23ffa66afe254c92">PRINTER_THUMBNAIL_MIDDLE_FILE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a469435942cd59432a1e6a7a8fa26bbf7" name="a469435942cd59432a1e6a7a8fa26bbf7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a469435942cd59432a1e6a7a8fa26bbf7">&#9670;&#160;</a></span>m_thumbnail_small</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::string Slic3r::_BBS_3MF_Exporter::m_thumbnail_small = <a class="el" href="../../dd/d80/bbs__3mf_8cpp.html#ab5f1c75c6c32c5c6f6c775493ce18d53">PRINTER_THUMBNAIL_SMALL_FILE</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a65e62a707f6d881b3aa2cea516c0cebe" name="a65e62a707f6d881b3aa2cea516c0cebe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65e62a707f6d881b3aa2cea516c0cebe">&#9670;&#160;</a></span>m_use_loaded_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_use_loaded_id { false }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a702e3dbabc13a3a6531087d2f038412b" name="a702e3dbabc13a3a6531087d2f038412b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a702e3dbabc13a3a6531087d2f038412b">&#9670;&#160;</a></span>m_volume_paths</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;<a class="el" href="../../d0/d02/class_slic3r_1_1_model_volume.html">ModelVolume</a> const *, std::pair&lt;std::string, <a class="el" href="../../de/d38/lzoconf_8h.html#a61569f2965b7a369eb10b6d75d410d11">int</a>&gt; &gt; Slic3r::_BBS_3MF_Exporter::m_volume_paths</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="aeb5341110ef0128ebb4a0177c445f90e" name="aeb5341110ef0128ebb4a0177c445f90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb5341110ef0128ebb4a0177c445f90e">&#9670;&#160;</a></span>m_zip64</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool Slic3r::_BBS_3MF_Exporter::m_zip64 { true }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a93fd2b8551ac6acd0c6e27c47b9bff14" name="a93fd2b8551ac6acd0c6e27c47b9bff14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93fd2b8551ac6acd0c6e27c47b9bff14">&#9670;&#160;</a></span>mutex</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">boost::mutex Slic3r::_BBS_3MF_Base::mutex</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">mutable</span><span class="mlabel">private</span><span class="mlabel">inherited</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../#l01470">Slic3r::_BBS_3MF_Importer::_load_model_from_file()</a>, and <a class="el" href="../../#l00561">Slic3r::_BBS_3MF_Base::add_error()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/libslic3r/Format/<a class="el" href="../../">bbs_3mf.cpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../de/db8/namespace_slic3r.html">Slic3r</a></li><li class="navelem"><a class="el" href="../../db/dbf/class_slic3r_1_1___b_b_s__3_m_f___exporter.html">_BBS_3MF_Exporter</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.7 </li>
  </ul>
</div>
</body>
</html>
